<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <p><a href="http://tuplejump.github.io/calliope/snackfs.html" target="_blank">SnackFS @ Calliope</a></p> 
  <h1><a id="user-content-snackfs" class="anchor" href="https://github.com/tuplejump/snackfs#snackfs" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>SnackFS</h1> 
  <p>SnackFS is our bite-sized, lightweight HDFS compatible FileSystem built over Cassandra. With it's unique fat driver design it requires no additional SysOps or setup on the Cassanndra Cluster. All you have to do is point to your Cassandra cluster and you are ready to go.</p> 
  <p>As SnackFS was written as a dropin replacement for HDFS, your existing HDFS backed applications not only run as-is on SnackFS, but they also run faster! SnackFS cluster is also more resilient than a HDFS cluster as there is no SPOF like the NameNode.</p> 
  <h2><a id="user-content-prerequisites" class="anchor" href="https://github.com/tuplejump/snackfs#prerequisites" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Prerequisites</h2> 
  <ol> 
   <li><p>SBT : It can be set up from the instructions <a href="http://www.scala-sbt.org/release/docs/Getting-Started/Setup.html#installing-sbt" target="_blank">here</a>.</p></li> 
   <li><p>Cassandra(v1.2.12) : Instructions can be found <a href="http://wiki.apache.org/cassandra/GettingStarted" target="_blank">here</a>. An easier alternative would be using <a href="https://github.com/pcmanus/ccm" target="_blank">CCM</a></p></li> 
  </ol> 
  <h2><a id="user-content-using-snackfs" class="anchor" href="https://github.com/tuplejump/snackfs#using-snackfs" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Using SnackFS</h2> 
  <h3><a id="user-content-use-the-binary" class="anchor" href="https://github.com/tuplejump/snackfs#use-the-binary" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Use the binary</h3> 
  <ul> 
   <li><p>You can download the SnackFS distribution built with <a href="http://bit.ly/1eKV1ae" target="_blank">Scala 2.9.x here</a> and <a href="http://bit.ly/1jI7vVw" target="_blank">Scala 2.10.x here</a></p></li> 
   <li><p>To add SnackFS to your SBT project use,</p></li> 
  </ul> 
  <p>For SBT</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-s"><span class="pl-pds">"</span>com.tuplejump<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>snackfs<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.6.1-EA<span class="pl-pds">"</span></span></pre>
  </div> 
  <ul> 
   <li>To add SnackFS to your Maven project use, with Scala 2.9.3 use,</li> 
  </ul> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">dependency</span>&gt;
  &lt;<span class="pl-ent">groupId</span>&gt;com.tuplejump&lt;/<span class="pl-ent">groupId</span>&gt;
  &lt;<span class="pl-ent">artifactId</span>&gt;snackfs_2.9.3&lt;/<span class="pl-ent">artifactId</span>&gt;
  &lt;<span class="pl-ent">version</span>&gt;0.6.1-EA&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre>
  </div> 
  <p>And with Scala 2.10.3,</p> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">dependency</span>&gt;
  &lt;<span class="pl-ent">groupId</span>&gt;com.tuplejump&lt;/<span class="pl-ent">groupId</span>&gt;
  &lt;<span class="pl-ent">artifactId</span>&gt;snackfs_2.10&lt;/<span class="pl-ent">artifactId</span>&gt;
  &lt;<span class="pl-ent">version</span>&gt;0.6.1-EA&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre>
  </div> 
  <h3><a id="user-content-build-from-source" class="anchor" href="https://github.com/tuplejump/snackfs#build-from-source" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Build from Source</h3> 
  <ol> 
   <li><p>Checkout the source from <a href="http://github.com/tuplejump/snackfs" target="_blank">http://github.com/tuplejump/snackfs</a></p></li> 
   <li><p>To build SnackFS distribution run sbt's dist command in the project directory</p></li> 
  </ol> 
  <pre><code>[snackfs]$ sbt dist
</code></pre> 
  <p>This will result in a "snackfs-{version}.tgz" file in the "target" directory of "snackfs". Extract "snackfs-{version}.tgz" to the desired location.</p> 
  <ol> 
   <li><p>Start Cassandra (default setup for snackfs assumes its a cluster with 3 nodes)</p></li> 
   <li><p>It is possible to configure the file system by updating core-site.xml. The following properties can be added.</p> 
    <ul> 
     <li>snackfs.cassandra.host (default 127.0.0.1)</li> 
     <li>snackfs.cassandra.port (default 9160)</li> 
     <li>snackfs.consistencyLevel.write (default QUORUM)</li> 
     <li>snackfs.consistencyLevel.read (default QUORUM)</li> 
     <li>snackfs.keyspace (default snackfs)</li> 
     <li>snackfs.subblock.size (default 8 MB (8 * 1024 * 1024))</li> 
     <li>snackfs.block.size (default 128 MB (128 * 1024 * 1024))</li> 
     <li>snackfs.replicationFactor (default 3)</li> 
     <li>snackfs.replicationStrategy (default org.apache.cassandra.locator.SimpleStrategy)</li> 
    </ul></li> 
   <li><p>SnackFS Shell provides the fs commands similar to Hadoop Shell. For example to create a directory,</p></li> 
  </ol> 
  <pre><code>[Snackfs(extracted)]$bin/snackfs -mkdir snackfs:///random
</code></pre> 
  <h3><a id="user-content-to-build-and-use-with-hadoop" class="anchor" href="https://github.com/tuplejump/snackfs#to-build-and-use-with-hadoop" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>To build and use with Hadoop</h3> 
  <ol> 
   <li><p>Setup Apache Hadoop v1.0.4.(<a href="http://hadoop.apache.org/#Getting+Started" target="_blank">http://hadoop.apache.org/#Getting+Started</a>). The base directory will be referred as 'hadoop-1.0.4' in the following steps.</p></li> 
   <li><p>Execute the following commands in the snackfs project directory.</p></li> 
  </ol> 
  <pre lang="2."><code>[snackfs]$ sbt package
</code></pre> 
  <p>This will result in a "snackfs_&lt;scala_version&gt;-&lt;version&gt;.jar" file in the "target/scala-&lt;scala_version&gt;" directory of "snackfs". Copy the jar to 'hadoop-1.0.4/lib'.</p> 
  <ol> 
   <li><p>Copy all the jars in snackfs/lib_managed and scala-library-&lt;scala_version&gt;.jar (located at '~/.ivy2/cache/org.scala-lang/scala-library/jars') to 'hadoop-1.0.4/lib'.</p></li> 
   <li><p>Copy snackfs/src/main/resources/core-site.xml to 'hadoop-1.0.4/conf'</p></li> 
   <li><p>Start Cassandra (default setup for snackfs assumes its a cluster with 3 nodes)</p></li> 
   <li><p>Hadoop fs commands can now be run using snackfs. For example,</p></li> 
  </ol> 
  <pre><code>[hadoop-1.0.4]$ bin/hadoop fs -mkdir snackfs:///random
</code></pre> 
  <h3><a id="user-content-to-configure-logging" class="anchor" href="https://github.com/tuplejump/snackfs#to-configure-logging" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>To configure logging,</h3> 
  <h4><a id="user-content-in-system-environment" class="anchor" href="https://github.com/tuplejump/snackfs#in-system-environment" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>In System Environment</h4> 
  <p>Set SNACKFS_LOG_LEVEL in the Shell to one of the following Values</p> 
  <ul> 
   <li>DEBUG</li> 
   <li>INFO</li> 
   <li>ERROR</li> 
   <li>ALL</li> 
   <li>OFF</li> 
  </ul> 
  <p>Default value if not set if ERROR</p> 
  <h4><a id="user-content-in-code-for-further-controltuning" class="anchor" href="https://github.com/tuplejump/snackfs#in-code-for-further-controltuning" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>In code (for further control/tuning)</h4> 
  <p>If you want your logs in a File, update LogConfiguration.scala like below</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">config</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">LoggerFactory</span>(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, <span class="pl-en">Option</span>(<span class="pl-en">Level</span>.<span class="pl-en">ALL</span>), <span class="pl-en">List</span>(<span class="pl-en">FileHandler</span>(<span class="pl-s"><span class="pl-pds">"</span>logs<span class="pl-pds">"</span></span>)), <span class="pl-c1">true</span>)</pre>
  </div> 
  <p>The arguments for LoggerFactory are</p> 
  <ol> 
   <li>node - Name of the logging node. ("") is the top-level logger.</li> 
   <li>level - Log level for this node. Leaving it None implies the parent logger's level.</li> 
   <li>handlers - Where to send log messages.</li> 
   <li>useParents - indicates if log messages are passed up to parent nodes.To stop at this node level, set it to false</li> 
  </ol> 
  <p>Additional logging configuration details can be found <a href="https://github.com/twitter/util/tree/master/util-logging#configuring" target="_blank">here</a></p> 
 </article>
</div>