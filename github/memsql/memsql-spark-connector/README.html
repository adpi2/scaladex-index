<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-memsql-spark-library" class="anchor" href="https://github.com/memsql/memsql-spark-connector#memsql-spark-library" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>MemSQL Spark Library</h1> 
  <p>This git repository contains a number of Scala projects that provide interoperation between <a href="http://www.memsql.com" target="_blank">MemSQL</a> and a Spark cluster.</p> 
  <table>
   <thead> 
    <tr> 
     <th>Name</th> 
     <th>Description</th> 
    </tr> 
   </thead>
   <tbody> 
    <tr> 
     <td><a href="https://github.com/memsql/memsql-spark-connector#memsql-spark-interface" target="_blank">MemSQL Spark Interface</a></td> 
     <td>A Spark app providing an API to run MemSQL Streamliner Pipelines on Spark</td> 
    </tr> 
    <tr> 
     <td><a href="https://github.com/memsql/memsql-spark-connector#memsql-etllib" target="_blank">MemSQL etlLib</a></td> 
     <td>A library of interfaces for building custom MemSQL Streamliner Pipelines</td> 
    </tr> 
    <tr> 
     <td><a href="https://github.com/memsql/memsql-spark-connector#memsql-spark-connector" target="_blank">MemSQL Spark Connector</a></td> 
     <td>Scala tools for connecting to MemSQL from Spark</td> 
    </tr> 
   </tbody>
  </table> 
  <h2><a id="user-content-supported-spark-version" class="anchor" href="https://github.com/memsql/memsql-spark-connector#supported-spark-version" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Supported Spark version</h2> 
  <p>Right now this project is only supported for Spark version 1.5.2. It has been primarily tested against the MemSQL Spark Distribution which you can download here: <a href="http://versions.memsql.com/memsql-spark/latest" target="_blank">http://versions.memsql.com/memsql-spark/latest</a></p> 
  <h2><a id="user-content-documentation" class="anchor" href="https://github.com/memsql/memsql-spark-connector#documentation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Documentation</h2> 
  <p>You can find Scala documentation for everything exposed in this repo here: <a href="http://memsql.github.io/memsql-spark-connector" target="_blank">memsql.github.io/memsql-spark-connector</a></p> 
  <p>You can find MemSQL documentation on our Spark ecosystem here: <a href="http://docs.memsql.com/latest/spark/" target="_blank">docs.memsql.com/latest/spark/</a></p> 
  <h2><a id="user-content-memsql-spark-interface" class="anchor" href="https://github.com/memsql/memsql-spark-connector#memsql-spark-interface" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>MemSQL Spark Interface</h2> 
  <p>The MemSQL Spark Interface is a Spark application that runs in a Spark cluster. The Interface provides an HTTP API to run real-time pipelines on Spark. It is also required to interface <a href="http://docs.memsql.com/latest/ops/" target="_blank">MemSQL Ops</a> with a Spark cluster.</p> 
  <h2><a id="user-content-memsql-etllib" class="anchor" href="https://github.com/memsql/memsql-spark-connector#memsql-etllib" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>MemSQL etlLib</h2> 
  <p>The MemSQL ETL library provides interfaces and utilities required when writing custom pipeline JARs. You can learn more about doing this <a href="http://docs_staging.memsql.com/latest/spark/memsql-spark-interface/" target="_blank">on our docs</a>.</p> 
  <h2><a id="user-content-memsql-spark-connector" class="anchor" href="https://github.com/memsql/memsql-spark-connector#memsql-spark-connector" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>MemSQL Spark Connector</h2> 
  <p>The MemSQL Spark connector provides tools for reading from and writing to MemSQL databases in Spark.</p> 
  <p>The connector provides a number of integrations with Apache Spark including a custom RDD type, DataFrame helpers and a MemSQL Context.</p> 
  <h3><a id="user-content-memsqlcontext" class="anchor" href="https://github.com/memsql/memsql-spark-connector#memsqlcontext" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>MemSQLContext</h3> 
  <p>The MemSQL Context maintains metadata about a MemSQL cluster and extends the Spark SQLContext.</p> 
  <pre><code>import com.memsql.spark.connector.MemSQLContext

// NOTE: The connection details for your MemSQL Master Aggregator must be in
// the Spark configuration. See http://memsql.github.io/memsql-spark-connector/latest/api/#com.memsql.spark.connector.MemSQLConf
// for details.
val memsqlContext = new MemSQLContext(sparkContext)

val myTableDF = memsqlContext.table("my_table")
// myTableDF now is a Spark DataFrame which represents the specified MemSQL table
// and can be queried using Spark DataFrame query functions
</code></pre> 
  <p>You can also use <code>memsqlContext.sql</code> to pull arbitrary tables and expressions into a <code>DataFrame</code></p> 
  <pre><code>val df = memsqlContext.sql("SELECT * FROM test_table")

val result = df.select(df("test_column")).where(df("other_column") === 1).limit(1)
// Result now contains the first row where other_column == 1
</code></pre> 
  <p>Additionally you can use the <code>DataFrameReader</code> API</p> 
  <pre><code>val df = memsqlContext.read.format("com.memsql.spark.connector").load("db.table")
</code></pre> 
  <h3><a id="user-content-savetomemsql" class="anchor" href="https://github.com/memsql/memsql-spark-connector#savetomemsql" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>saveToMemsql</h3> 
  <p>The saveToMemsql function writes a <code>DataFrame</code> to a MemSQL table.</p> 
  <pre><code>import org.apache.spark.sql._
import org.apache.spark.sql.types._
import org.apache.spark.sql.memsql.SparkImplicits._

...

val rdd = sc.parallelize(Array(Row("foo", "bar"), Row("baz", "qux")))
val schema = StructType(Seq(StructField("col1", StringType, false),
                            StructField("col2", StrindType, false)))
val df = sqlContext.createDataFrame(rdd, schema)
df.saveToMemSQL("db", "table")
</code></pre> 
  <p>You can also use the <code>DataFrameWriter</code> API</p> 
  <pre><code>df.write.format("com.memsql.spark.connector").save("db.table")
</code></pre> 
  <h2><a id="user-content-using" class="anchor" href="https://github.com/memsql/memsql-spark-connector#using" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Using</h2> 
  <p>In order to compile this library you must have the <a href="http://www.scala-sbt.org/" target="_blank">Simple Build Tool (aka sbt)</a> installed.</p> 
  <p>Artifacts are published to Maven Central [<a href="http://repo1.maven.org/maven2/com/memsql/" target="_blank">http://repo1.maven.org/maven2/com/memsql/</a>].</p> 
  <p>Inside a project definition you can depend on our MemSQL Connector like so:</p> 
  <pre><code>libraryDependencies  += "com.memsql" %% "memsql-connector" % "VERSION"
</code></pre> 
  <p>And our ETL interface for <a href="http://memsql.github.io/spark-streamliner" target="_blank">MemSQL Streamliner</a>:</p> 
  <pre><code>libraryDependencies  += "com.memsql" %% "memsql-etl" % "VERSION"
</code></pre> 
  <h2><a id="user-content-building" class="anchor" href="https://github.com/memsql/memsql-spark-connector#building" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Building</h2> 
  <p>You can use SBT to compile all of the projects in this repo. To build all of the projects you can use:</p> 
  <pre><code>sbt "project etlLib" build \
    "project connectorLib" build \
    "project interface" build
</code></pre> 
  <h2><a id="user-content-testing" class="anchor" href="https://github.com/memsql/memsql-spark-connector#testing" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Testing</h2> 
  <p>All unit tests can be run via sbt. They will also run at build time automatically.</p> 
  <pre><code>sbt 'project etlLib' test
sbt 'project connectorLib' test
sbt 'project interface' test
</code></pre> 
 </article>
</div>