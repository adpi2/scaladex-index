<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-scalajs-facades-for-mithriljs" class="anchor" href="https://github.com/technius/scalajs-mithril#scalajs-facades-for-mithriljs" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scala.js facades for Mithril.js</h1> 
  <p>This is an experimental library that provides facades for <a href="https://lhorie.github.io/mithril/index.html" target="_blank">Mithril</a>.</p> 
  <h2><a id="user-content-setup" class="anchor" href="https://github.com/technius/scalajs-mithril#setup" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Setup</h2> 
  <p>Add the following lines to <code>build.sbt</code>:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>co.technius<span class="pl-pds">"</span></span> <span class="pl-k">%%%</span> <span class="pl-s"><span class="pl-pds">"</span>scalajs-mithril<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.1.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>To use a snapshot version:</p> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-en">Resolver</span>.sonatypeRepo(<span class="pl-s"><span class="pl-pds">"</span>snapshots<span class="pl-pds">"</span></span>)
libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>co.technius<span class="pl-pds">"</span></span> <span class="pl-k">%%%</span> <span class="pl-s"><span class="pl-pds">"</span>scalajs-mithril<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.2.0-SNAPSHOT<span class="pl-pds">"</span></span></pre>
  </div> 
  <h2><a id="user-content-example" class="anchor" href="https://github.com/technius/scalajs-mithril#example" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Example</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">co.technius.scalajs.mithril.</span><span class="pl-v">_</span>

<span class="pl-k">import</span> <span class="pl-v">org.scalajs.</span><span class="pl-v">dom</span>
<span class="pl-k">import</span> <span class="pl-v">scala.scalajs.</span><span class="pl-v">js</span>

<span class="pl-k">object</span> <span class="pl-en">MyComponent</span> <span class="pl-k">extends</span> <span class="pl-e">Component</span> {

  <span class="pl-k">override</span> <span class="pl-k">val</span> <span class="pl-en">controller</span><span class="pl-k">:</span> js.<span class="pl-en">Function</span> <span class="pl-k">=</span> () <span class="pl-k">=&gt;</span> <span class="pl-k">new</span> <span class="pl-en">Controller</span>

  <span class="pl-k">val</span> <span class="pl-en">view</span><span class="pl-k">:</span> js.<span class="pl-en">Function</span> <span class="pl-k">=</span> (<span class="pl-v">ctrl</span>: <span class="pl-en">Controller</span>) <span class="pl-k">=&gt;</span> js.<span class="pl-en">Array</span>(
    m(<span class="pl-s"><span class="pl-pds">"</span>span<span class="pl-pds">"</span></span>, s<span class="pl-s"><span class="pl-pds">"</span>Hi, ${ctrl.name()}!<span class="pl-pds">"</span></span>),
    m(<span class="pl-s"><span class="pl-pds">"</span>input[type=text]<span class="pl-pds">"</span></span>, js.<span class="pl-en">Dynamic</span>.literal(
      oninput <span class="pl-k">=</span> m.withAttr(<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>, ctrl.name),
      value <span class="pl-k">=</span> ctrl.name()
    ))
  )

  <span class="pl-k">class</span> <span class="pl-en">Controller</span> {
    <span class="pl-k">val</span> <span class="pl-en">name</span> <span class="pl-k">=</span> m.prop(<span class="pl-s"><span class="pl-pds">"</span>Name<span class="pl-pds">"</span></span>)
  }
}

<span class="pl-k">object</span> <span class="pl-en">MyApp</span> <span class="pl-k">extends</span> <span class="pl-e">js.JSApp</span> {
  <span class="pl-k">def</span> <span class="pl-en">main</span>()<span class="pl-k">:</span> <span class="pl-k">Unit</span> <span class="pl-k">=</span> {
    m.mount(dom.document.getElementById(<span class="pl-s"><span class="pl-pds">"</span>app<span class="pl-pds">"</span></span>), <span class="pl-en">MyComponent</span>)
  }
}</pre>
  </div> 
  <div class="highlight highlight-text-html-basic">
   <pre>&lt;!DOCTYPE HTML&gt;
&lt;<span class="pl-ent">html</span>&gt;
  &lt;<span class="pl-ent">head</span>&gt;
    &lt;<span class="pl-ent">title</span>&gt;scalajs-mithril Example&lt;/<span class="pl-ent">title</span>&gt;
  &lt;/<span class="pl-ent">head</span>&gt;
  &lt;<span class="pl-ent">body</span>&gt;
    &lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>app<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">div</span>&gt;
<span class="pl-s1">    &lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>https://cdnjs.cloudflare.com/ajax/libs/mithril/0.2.0/mithril.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</span>
<span class="pl-s1">    &lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>scalajs-mithril-fastopt.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</span>
<span class="pl-s1">    &lt;<span class="pl-ent">script</span>&gt;<span class="pl-en">MyApp</span>().<span class="pl-en">main</span>();&lt;/<span class="pl-ent">script</span>&gt;</span>
  &lt;/<span class="pl-ent">body</span>&gt;
&lt;/<span class="pl-ent">html</span>&gt;</pre>
  </div> 
  <p>See the <a href="https://github.com/Technius/scalajs-mithril/tree/master/examples/src/main/scala" target="_blank">examples folder</a> for more examples.</p> 
  <h2><a id="user-content-the-basics" class="anchor" href="https://github.com/technius/scalajs-mithril#the-basics" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>The Basics</h2> 
  <p>First, you'll need to define your component. To do this, create an object, subclass <code>Component</code> and implement the view function.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">object</span> <span class="pl-en">MyComponent</span> <span class="pl-k">extends</span> <span class="pl-e">Component</span> {
  <span class="pl-k">val</span> <span class="pl-en">view</span><span class="pl-k">:</span> js.<span class="pl-en">Function</span> <span class="pl-k">=</span> () <span class="pl-k">=&gt;</span> js.<span class="pl-en">Array</span>(
    m(<span class="pl-s"><span class="pl-pds">"</span>p<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Hello world!<span class="pl-pds">"</span></span>)
    m(<span class="pl-s"><span class="pl-pds">"</span>p<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>How fantastic!<span class="pl-pds">"</span></span>)
  )
}</pre>
  </div> 
  <p>In Mithril, a controller is optional. If you want to use a controller, create a class for your controller, override the <code>controller</code> function, and add the controller as an argument to your view function.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">class</span> <span class="pl-en">MyComponent</span> <span class="pl-k">extends</span> <span class="pl-e">Component</span> {
  <span class="pl-k">override</span> <span class="pl-k">val</span> <span class="pl-en">controller</span><span class="pl-k">:</span> js.<span class="pl-en">Function</span> <span class="pl-k">=</span> () <span class="pl-k">=&gt;</span> <span class="pl-k">new</span> <span class="pl-en">MyController</span>
  <span class="pl-k">val</span> <span class="pl-en">view</span><span class="pl-k">:</span> js.<span class="pl-en">Function</span> <span class="pl-k">=</span> (<span class="pl-v">ctrl</span>: <span class="pl-en">Controller</span>) <span class="pl-k">=&gt;</span> js.<span class="pl-en">Array</span>(
    m(<span class="pl-s"><span class="pl-pds">"</span>span<span class="pl-pds">"</span></span>, s<span class="pl-s"><span class="pl-pds">"</span>Hey there, ${ctrl.name()}!<span class="pl-pds">"</span></span>),
    m(<span class="pl-s"><span class="pl-pds">"</span>input[type=text]<span class="pl-pds">"</span></span>, js.<span class="pl-en">Dynamic</span>.literal(
      oninput <span class="pl-k">=</span> m.withAttr(<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>, ctrl.name),
      value <span class="pl-k">=</span> ctrl.name()
    ))
  )

  <span class="pl-k">class</span> <span class="pl-en">MyController</span> {
    <span class="pl-k">val</span> <span class="pl-en">name</span> <span class="pl-k">=</span> m.prop(<span class="pl-s"><span class="pl-pds">"</span>Name<span class="pl-pds">"</span></span>)
  }
}</pre>
  </div> 
  <p>Lastly, call <code>m.mount</code> with your controller:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">co.technius.scalajs.mithril.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">org.scalajs.</span><span class="pl-v">dom</span>
<span class="pl-k">import</span> <span class="pl-v">scala.scalajs.</span><span class="pl-v">js</span>

<span class="pl-k">object</span> <span class="pl-en">MyApp</span> <span class="pl-k">extends</span> <span class="pl-e">js.JSApp</span> {
  <span class="pl-k">def</span> <span class="pl-en">main</span>()<span class="pl-k">:</span> <span class="pl-k">Unit</span> <span class="pl-k">=</span> {
    m.mount(dom.document.getElementById(<span class="pl-s"><span class="pl-pds">"</span>app<span class="pl-pds">"</span></span>), <span class="pl-en">MyComponent</span>)
  }
}</pre>
  </div> 
  <h2><a id="user-content-making-web-requests" class="anchor" href="https://github.com/technius/scalajs-mithril#making-web-requests" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Making Web Requests</h2> 
  <p>First, create an <code>XHROptions[T]</code>, where <code>T</code> is the data to be returned:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">opts</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">XHROptions</span>[js.<span class="pl-en">Object</span>](method <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>GET<span class="pl-pds">"</span></span>, url <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>/path/to/request<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>It's possible to use most of the optional arguments:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">opts</span> <span class="pl-k">=</span>
  <span class="pl-k">new</span> <span class="pl-en">XHROptions</span>[js.<span class="pl-en">Object</span>](
    method <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>POST<span class="pl-pds">"</span></span>,
    url <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>/path/to/request<span class="pl-pds">"</span></span>,
    data <span class="pl-k">=</span> js.<span class="pl-en">Dynamic</span>.literal(<span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">2</span>),
    background <span class="pl-k">=</span> <span class="pl-c1">true</span>)</pre>
  </div> 
  <p>Then, pass the options to <code>m.request</code>, which will return a <code>Promise[T]</code>:</p> 
  <div class="highlight highlight-source-scala">
   <pre>m.request(opts).foreach { data <span class="pl-k">=&gt;</span>
  println(data)
}</pre>
  </div> 
  <p><code>T</code> is restricted to subtypes of <code>js.Any</code>, so Scala types can't be readily used with <code>m.request</code>. Of course, then response type could be parsed manually, but it may be more convenient to define a facade to hold the response data:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c">// Based on examples/src/main/resources/sample-data.json</span>
<span class="pl-k">@</span>js.native
<span class="pl-k">trait</span> <span class="pl-en">MyData</span> <span class="pl-k">extends</span> <span class="pl-e">js.Object</span> {
  <span class="pl-k">val</span> <span class="pl-en">key</span><span class="pl-k">:</span> <span class="pl-k">String</span>
  <span class="pl-k">val</span> <span class="pl-en">some_number</span><span class="pl-k">:</span> <span class="pl-k">Int</span>
}

<span class="pl-k">val</span> <span class="pl-en">opts</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">XHROptions</span>[<span class="pl-en">MyData</span>](method <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>GET<span class="pl-pds">"</span></span>, url <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>/path/to/request<span class="pl-pds">"</span></span>)

m.request(opts).foreach { data <span class="pl-k">=&gt;</span>
  println(data.key)
  println(data.some_number)
}</pre>
  </div> 
  <h2><a id="user-content-known-issueslimitations" class="anchor" href="https://github.com/technius/scalajs-mithril#known-issueslimitations" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Known Issues/Limitations</h2> 
  <ul> 
   <li>Type safety isn't that good for components right now.</li> 
   <li>Using <code>Seq</code> for the <code>children</code> argument in <code>m(selector, children)</code> functions doesn't work. Instead, use <code>js.Array</code>.</li> 
   <li><code>m(selector, children)</code> functions don't accept varargs yet. Instead, use <code>js.Array</code>.</li> 
  </ul> 
  <h2><a id="user-content-todo" class="anchor" href="https://github.com/technius/scalajs-mithril#todo" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>TODO</h2> 
  <ul> 
   <li>Update to the experimental 1.0 version of mithril.js</li> 
   <li>Fix issues/limitations (see relevant section above)</li> 
   <li>ScalaDoc</li> 
   <li>(In the far future) ScalaTags support</li> 
  </ul> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/technius/scalajs-mithril#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p>This library is licensed under the MIT License. See LICENSE for more details.</p> 
 </article>
</div>