<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a href="https://github.com/aishfenton/argus#argus-船大工" aria-hidden="true" class="anchor" id="user-content-argus-船大工" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Argus (船大工)</h1> 
  <p><a href="https://travis-ci.org/aishfenton/Argus" target="_blank"><img src="https://camo.githubusercontent.com/ecffeb6f0aa1fe1c17c7e65ba3a2c4c647be6a3b/68747470733a2f2f7472617669732d63692e6f72672f6169736866656e746f6e2f41726775732e7376673f6272616e63683d6d6173746572" alt="TravisCI" data-canonical-src="https://travis-ci.org/aishfenton/Argus.svg?branch=master" style="max-width:100%;"></a></p> 
  <p><a href="https://camo.githubusercontent.com/448b93ef4049e1475ace687a12b31aa5b332c5fb/68747470733a2f2f7777772e76656761732d76697a2e6f72672f696d616765732f61726775732d6c6f676f2e706e67" target="_blank"><img src="https://camo.githubusercontent.com/448b93ef4049e1475ace687a12b31aa5b332c5fb/68747470733a2f2f7777772e76656761732d76697a2e6f72672f696d616765732f61726775732d6c6f676f2e706e67" width="170" data-canonical-src="https://www.vegas-viz.org/images/argus-logo.png" style="max-width:100%;"></a></p> 
  <p>Scala macros for generating code from <a href="http://json-schema.org" target="_blank">Json Schemas</a>. Any structures defined within the schema (such as properties, enums, etc) are used to generate scala code at compile time. Json encoder/decoders are also generated for the <a href="https://github.com/travisbrown/circe" target="_blank">Circe</a> Json library.</p> 
  <p><strong>NB:</strong> Why Argus? In keeping with the theme of Argonaut and Circe, Argus (son of Arestor) was the builder of the ship "Argo", on which the Argonauts sailed.</p> 
  <h2><a href="https://github.com/aishfenton/argus#quick-example" aria-hidden="true" class="anchor" id="user-content-quick-example" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Quick Example</h2> 
  <p>Starting with this Json schema.</p> 
  <div class="highlight highlight-source-json">
   <pre>{
  <span class="pl-s"><span class="pl-pds">"</span>title<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Example Schema<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>object<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>definitions<span class="pl-pds">"</span></span> : {
    <span class="pl-s"><span class="pl-pds">"</span>Address<span class="pl-pds">"</span></span>: {
      <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>object<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>properties<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>number<span class="pl-pds">"</span></span> : { <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>integer<span class="pl-pds">"</span></span> },
        <span class="pl-s"><span class="pl-pds">"</span>street<span class="pl-pds">"</span></span> : { <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>string<span class="pl-pds">"</span></span> }
      }
    },
    <span class="pl-s"><span class="pl-pds">"</span>ErdosNumber<span class="pl-pds">"</span></span>: {
      <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>integer<span class="pl-pds">"</span></span>
    }
  },
  <span class="pl-s"><span class="pl-pds">"</span>properties<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: {
      <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>array<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>items<span class="pl-pds">"</span></span>: { <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>string<span class="pl-pds">"</span></span> }
    },
    <span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>: {
      <span class="pl-s"><span class="pl-pds">"</span>description<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Age in years<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>integer<span class="pl-pds">"</span></span>
    },
    <span class="pl-s"><span class="pl-pds">"</span>address<span class="pl-pds">"</span></span> : { <span class="pl-s"><span class="pl-pds">"</span>$ref<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>#/definitions/Address<span class="pl-pds">"</span></span> },
    <span class="pl-s"><span class="pl-pds">"</span>erdosNumber<span class="pl-pds">"</span></span> : { <span class="pl-s"><span class="pl-pds">"</span>$ref<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>#/definitions/ErdosNumber<span class="pl-pds">"</span></span> }
  }
}</pre>
  </div> 
  <p>We can use the @fromSchemaResource macro to generate case classes for (Root, Address)</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">argus.macros.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">io.circe.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">io.circe.syntax.</span><span class="pl-v">_</span>

<span class="pl-k">@</span>fromSchemaResource(<span class="pl-s"><span class="pl-pds">"</span>/simple.json<span class="pl-pds">"</span></span>, name<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>Person<span class="pl-pds">"</span></span>)
<span class="pl-k">object</span> <span class="pl-en">Schema</span>
<span class="pl-k">import</span> <span class="pl-v">Schema.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">Schema.Implicits.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">json</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">   |{</span>
<span class="pl-s">   |  "name" : ["Bob", "Smith"],</span>
<span class="pl-s">   |  "age" : 26,</span>
<span class="pl-s">   |  "address" : {</span>
<span class="pl-s">   |    "number" : 31,</span>
<span class="pl-s">   |    "street" : "Main St"</span>
<span class="pl-s">   |  },</span>
<span class="pl-s">   |  "erdosNumber": 123</span>
<span class="pl-s">   |}</span>
<span class="pl-s">  <span class="pl-pds">"""</span></span>.stripMargin

<span class="pl-c"><span class="pl-c">//</span> Decode into generated case class</span>
<span class="pl-k">val</span> <span class="pl-en">person</span> <span class="pl-k">=</span> parser.decode[<span class="pl-en">Person</span>](json).toOption.get

<span class="pl-c"><span class="pl-c">//</span> Update address </span>
<span class="pl-k">val</span> <span class="pl-en">address</span> <span class="pl-k">=</span> <span class="pl-en">Address</span>(number<span class="pl-k">=</span><span class="pl-en">Some</span>(<span class="pl-c1">42</span>), street<span class="pl-k">=</span><span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>Alt St<span class="pl-pds">"</span></span>))
<span class="pl-k">val</span> <span class="pl-en">newPerson</span> <span class="pl-k">=</span> person.copy(address<span class="pl-k">=</span><span class="pl-en">Some</span>(address))

<span class="pl-c"><span class="pl-c">//</span> Encode base to json</span>
newPerson.asJson </pre>
  </div> 
  <p><strong>Many more examples <a href="https://github.com/aishfenton/argus/blob/master/argus/src/test/scala/argus/macros/FromSchemaSpec.scala" target="_blank">here</a></strong></p> 
  <h1><a href="https://github.com/aishfenton/argus#rules" aria-hidden="true" class="anchor" id="user-content-rules" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Rules</h1> 
  <h2><a href="https://github.com/aishfenton/argus#supported-constructs" aria-hidden="true" class="anchor" id="user-content-supported-constructs" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Supported constructs</h2> 
  <h3><a href="https://github.com/aishfenton/argus#object-templates-ie-classes" aria-hidden="true" class="anchor" id="user-content-object-templates-ie-classes" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Object templates (i.e. classes)</h3> 
  <table> 
   <tbody>
    <tr>
     <td>Json</td>
     <td>Generated Scala</td> 
    </tr>
    <tr> 
     <td><pre>{
  "properties" : { 
    "name" : { "type" : "string" },
    "age"  : { "type" : "integer" }
  },
  "required" : ["name"]
}
</pre></td> 
     <td><pre>case class Root(name: String, age: Option[Int] = None)
</pre></td> 
    </tr> 
   </tbody>
  </table> 
  <h3><a href="https://github.com/aishfenton/argus#definitions-ie-common-class-definitions" aria-hidden="true" class="anchor" id="user-content-definitions-ie-common-class-definitions" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Definitions (i.e. common class definitions)</h3> 
  <table> 
   <tbody>
    <tr>
     <td>Json</td>
     <td>Generated Scala</td> 
    </tr>
    <tr> 
     <td><pre>{
  "definitions" : { 
    "Person" : { ... },
    ...
  }
  "properties" : { 
    "person" : { "$ref" : "#/definitions/Person" }
  }
}
</pre></td> 
     <td><pre>case class Person(...)
case class Root(person: Option[Person] = None)
</pre></td> 
    </tr> 
   </tbody>
  </table> 
  <h3><a href="https://github.com/aishfenton/argus#oneof-ie-type-a-or-b" aria-hidden="true" class="anchor" id="user-content-oneof-ie-type-a-or-b" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>OneOf (i.e. type A or B)</h3> 
  <table> 
   <tbody>
    <tr>
     <td>Json</td>
     <td>Generated Scala</td> 
    </tr>
    <tr> 
     <td><pre>{
  "oneOf": [
    { "$ref" : "#/definitions/Address" },
    { "type" : "number" }
  ]
}
</pre></td> 
     <td><pre>@union sealed trait RootUnion
case class RootAddress(...) extends RootUnion
case class RootDouble(...) extends RootUnion
</pre></td> 
    </tr> 
   </tbody>
  </table> 
  <h3><a href="https://github.com/aishfenton/argus#enums" aria-hidden="true" class="anchor" id="user-content-enums" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Enums</h3> 
  <table> 
   <tbody>
    <tr>
     <td>Json</td>
     <td>Generated Scala</td> 
    </tr>
    <tr> 
     <td><pre>{
  "properties": { 
    "countries" : { "enum" : ["NZ", "US", "UK"] }
  }
}
</pre></td> 
     <td><pre>@enum sealed trait Countries
object CountriesEnum {
  case object NZ(...) extends Countries
  case object US(...) extends Countries
  ...
}
case class Root(countries: Option[Countries] = None)
</pre></td> 
    </tr> 
   </tbody>
  </table> 
  <h3><a href="https://github.com/aishfenton/argus#arrays" aria-hidden="true" class="anchor" id="user-content-arrays" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Arrays</h3> 
  <table> 
   <tbody>
    <tr>
     <td>Json</td>
     <td>Generated Scala</td> 
    </tr>
    <tr> 
     <td><pre>{
  "properties": { 
    "places" : { "items" : { "type": "string" } }
  }
}
</pre></td> 
     <td><pre>case class Root(places: Option[List[String]] = None)
</pre></td> 
    </tr> 
   </tbody>
  </table> 
  <h3><a href="https://github.com/aishfenton/argus#any-types-ie-when-a-field-can-take-arbitrary-values" aria-hidden="true" class="anchor" id="user-content-any-types-ie-when-a-field-can-take-arbitrary-values" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Any Types (i.e. when a field can take arbitrary values)</h3> 
  <table> 
   <tbody>
    <tr>
     <td>Json</td>
     <td>Generated Scala</td> 
    </tr>
    <tr> 
     <td><pre>{
  "properties": { 
    "values" : { }
  }
}
</pre></td> 
     <td><pre>case class Values(x: Any)
case class Root(values: Option[Values] = None)
</pre></td> 
    </tr> 
   </tbody>
  </table> 
  <h2><a href="https://github.com/aishfenton/argus#unsupported" aria-hidden="true" class="anchor" id="user-content-unsupported" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Unsupported</h2> 
  <ul> 
   <li>Only Circe encoders/decoders are supported, although the skeleton is laid out for adding support for other Json libraries.</li> 
   <li><em>anyOf</em> / <em>allOf</em>. Should be simple to add, just haven't done it yet.</li> 
   <li><em>default</em>. Schemas can specify the default value to use for a field. Currently we just ignore these.</li> 
   <li><em>not</em>. Not sure how you could specify this in a type language. Needs more thoughts</li> 
   <li><em>additionalProperties</em>, and <em>additionalItems</em>. Json schema lets you specify free-form properties too. These are unsupported for now (although I think this should be easy now there's supprot for Any types)</li> 
   <li><em>patternProperties</em>. What should be the objects fields in this case? Maybe we just make it a Map?</li> 
   <li><em>dependencies</em>. Dependencies can also extend the schema... sigh.</li> 
   <li>Any of the validation-only info, such as maxItems, since it doesn't contribute to the structure.</li> 
  </ul> 
  <p>And lastly: We only generate code from json schemas, but we can't generate json-schema from code. This is fully possible, but requires work ;)</p> 
  <p>There's still a lot to do! Looking for contributors to address any of above.</p> 
  <h1><a href="https://github.com/aishfenton/argus#usage-tips" aria-hidden="true" class="anchor" id="user-content-usage-tips" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage Tips</h1> 
  <ol> 
   <li> <p>All macros support arguments <code>debug=true</code> and <code>outPath="..."</code>. <code>debug</code> causes the generated code to be dumped to stdout, and <code>outPath</code> causes the generated code to be written to a file. The optional argument <code>outPathPackage</code> allows to specify a package name for the output file.</p> 
    <div class="highlight highlight-source-scala">
     <pre><span class="pl-k">@</span>fromSchemaResource(<span class="pl-s"><span class="pl-pds">"</span>/simple.json<span class="pl-pds">"</span></span>, debug<span class="pl-k">=</span><span class="pl-c1">true</span>, outPath<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>/tmp/Simple.Scala<span class="pl-pds">"</span></span>, outPathPackage<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>argus.simple<span class="pl-pds">"</span></span>)
<span class="pl-k">object</span> <span class="pl-en">Test</span></pre>
    </div> </li> 
   <li> <p>You can generate code from inline json schemas. Also supported are <code>fromSchemaInputStream</code> and <code>fromSchemaURL</code> too.</p> 
    <div class="highlight highlight-source-scala">
     <pre><span class="pl-k">@</span>fromSchemaJson(<span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">{</span>
<span class="pl-s">  "properties" : { </span>
<span class="pl-s">    "name" : { "type" : "string" },</span>
<span class="pl-s">    "age"  : { "type" : "integer" }</span>
<span class="pl-s">  },</span>
<span class="pl-s">  "required" : ["name"]</span>
<span class="pl-s">}</span>
<span class="pl-s"><span class="pl-pds">"""</span></span>)
<span class="pl-k">object</span> <span class="pl-en">Schema</span></pre>
    </div> </li> 
   <li> <p>You can name the root class that is generated via the <code>name="..."</code> argument.</p> 
    <div class="highlight highlight-source-scala">
     <pre><span class="pl-k">@</span>fromSchemaResource(<span class="pl-s"><span class="pl-pds">"</span>/simple.json<span class="pl-pds">"</span></span>, name<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>Person<span class="pl-pds">"</span></span>)
<span class="pl-k">object</span> <span class="pl-en">Schema</span>
<span class="pl-k">import</span> <span class="pl-v">Schema.</span><span class="pl-v">Person</span></pre>
    </div> </li> 
   <li> <p>Within the object we also generate json encoder/decoder implicit variables, but you need to import them into scope.</p> 
    <div class="highlight highlight-source-scala">
     <pre><span class="pl-k">@</span>fromSchemaResource(<span class="pl-s"><span class="pl-pds">"</span>/simple.json<span class="pl-pds">"</span></span>, name<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>Person<span class="pl-pds">"</span></span>)
<span class="pl-k">object</span> <span class="pl-en">Schema</span>
<span class="pl-k">import</span> <span class="pl-v">Schema.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">Schema.Implicits.</span><span class="pl-v">_</span>

<span class="pl-en">Person</span>(...).asJson</pre>
    </div> </li> 
   <li> <p>You can override specific Encoders/Decoders. All implicits are baked into a trait called LowPriorityImplicits. Rather than importing Foo.Implicits you can make your own implicits object that extends this and provides overrides. For example:</p> 
    <div class="highlight highlight-source-scala">
     <pre><span class="pl-k">@</span>fromSchemaResource(<span class="pl-s"><span class="pl-pds">"</span>/simple.json<span class="pl-pds">"</span></span>)
<span class="pl-k">object</span> <span class="pl-en">Foo</span>
<span class="pl-k">import</span> <span class="pl-v">Foo.</span><span class="pl-v">_</span>

<span class="pl-k">object</span> <span class="pl-en">BetterImplicits</span> <span class="pl-k">extends</span> <span class="pl-e">Foo.LowPriorityImplicits</span> {
  <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">myEncoder</span><span class="pl-k">:</span> <span class="pl-en">Encoder</span>[<span class="pl-en">Foo</span>.<span class="pl-en">Root</span>] <span class="pl-k">=</span>   ... 
  <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">betterDecoder</span><span class="pl-k">:</span> <span class="pl-en">Decoder</span>[<span class="pl-en">Foo</span>.<span class="pl-en">Root</span>] <span class="pl-k">=</span> ...
}
<span class="pl-k">import</span> <span class="pl-v">BetterImplicits.</span><span class="pl-v">_</span></pre>
    </div> </li> 
   <li> <p>Free form Json (we call them Any types above) are quite common within Json schemas. These are fields that are left open to take any kind of Json chunk (maybe for additional properties, or data, etc). Unfortunately they presents a challenge in a strongly typed language, such as Scala, where we always need some kind of type.</p> <p>The approach we've taken is to wrap these chunks in their own case class which has a single field of type <code>Any</code>. This also allows you to override the encode/decoders for that type (<code>Root.Data</code> in this example) with something more custom if required.</p> 
    <div class="highlight highlight-source-scala">
     <pre><span class="pl-k">@</span>fromSchemaJson(<span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">{</span>
<span class="pl-s">  "type": "object",</span>
<span class="pl-s">  "properties" : { </span>
<span class="pl-s">    "data" : { "type": "array", "items": { } }</span>
<span class="pl-s">  }</span>
<span class="pl-s">}</span>
<span class="pl-s"><span class="pl-pds">"""</span></span>)
<span class="pl-k">object</span> <span class="pl-en">Schema</span>
<span class="pl-k">import</span> <span class="pl-v">Schema.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">Schema.Implicits.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">values</span> <span class="pl-k">=</span> <span class="pl-en">List</span>( <span class="pl-en">Root</span>.<span class="pl-en">Data</span>(<span class="pl-en">Map</span>(<span class="pl-s"><span class="pl-pds">"</span>size<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">350</span>, <span class="pl-s"><span class="pl-pds">"</span>country<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>US<span class="pl-pds">"</span></span>)), <span class="pl-en">Root</span>.<span class="pl-en">Data</span>(<span class="pl-en">Map</span>(<span class="pl-s"><span class="pl-pds">"</span>size<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">350</span>, <span class="pl-s"><span class="pl-pds">"</span>country<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>US<span class="pl-pds">"</span></span>)) )
<span class="pl-en">Root</span>(data<span class="pl-k">=</span><span class="pl-en">Some</span>(values))</pre>
    </div> <p>The default encoder/decoder (as shown in the code example above) works if your types are:</p> 
    <ul> 
     <li>Primitive types: Boolean, Byte, Short, Int, Long, Float, Double</li> 
     <li>Primate arrays (Array[Byte], Array[Int], etc)</li> 
     <li>Seq[Any] (and subclasses) where Any needs to be one of the types in this list</li> 
     <li>Maps[String, Any], where Any needs to be one of the types in this list.</li> 
    </ul> <p>Or, in other words, you can't stick arbitrary objects in the Any wrapper and expect their encoders/decoders to get picked up. If you need that then you'll have to override the default encoder/decoder for this type.</p> </li> 
  </ol> 
 </article>
</div>