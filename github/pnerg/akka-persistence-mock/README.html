<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <p><a href="https://travis-ci.org/pnerg/akka-persistence-mock" target="_blank"><img src="https://camo.githubusercontent.com/f3f9ab8de9644bb2b09af07fc4a362286178e0fc/68747470733a2f2f7472617669732d63692e6f72672f706e6572672f616b6b612d70657273697374656e63652d6d6f636b2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/pnerg/akka-persistence-mock.svg?branch=master" style="max-width:100%;"></a> <a href="http://codecov.io/github/pnerg/akka-persistence-mock?branch=master" target="_blank"><img src="https://camo.githubusercontent.com/33311ff924171051513bb4e865065891b34744e7/687474703a2f2f636f6465636f762e696f2f6769746875622f706e6572672f616b6b612d70657273697374656e63652d6d6f636b2f636f7665726167652e7376673f6272616e63683d6d6173746572" alt="codecov.io" data-canonical-src="http://codecov.io/github/pnerg/akka-persistence-mock/coverage.svg?branch=master" style="max-width:100%;"></a> <a href="https://maven-badges.herokuapp.com/maven-central/org.dmonix.akka/akka-persistence-mock_2.11" target="_blank"><img src="https://camo.githubusercontent.com/12b64292b890f198fe732dc2d4d231a859ddce17/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f6f72672e646d6f6e69782e616b6b612f616b6b612d70657273697374656e63652d6d6f636b5f322e31312f62616467652e7376673f7374796c653d706c6173746963" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/org.dmonix.akka/akka-persistence-mock_2.11/badge.svg?style=plastic" style="max-width:100%;"></a> <a href="http://javadoc-badge.appspot.com/org.dmonix.akka/akka-persistence-mock_2.11" target="_blank"><img src="https://camo.githubusercontent.com/731d05aa4c46d69ff013f5d542077194948cc3dd/687474703a2f2f6a617661646f632d62616467652e61707073706f742e636f6d2f6f72672e646d6f6e69782e616b6b612f616b6b612d70657273697374656e63652d6d6f636b5f322e31312e7376673f6c6162656c3d7363616c61646f63" alt="Scaladoc" data-canonical-src="http://javadoc-badge.appspot.com/org.dmonix.akka/akka-persistence-mock_2.11.svg?label=scaladoc" style="max-width:100%;"></a> </p> 
  <h1><a id="user-content-akka-persistence-mock" class="anchor" href="https://github.com/pnerg/akka-persistence-mock#akka-persistence-mock" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Akka Persistence Mock</h1> 
  <p>Mock/in-memory implementation of Akka persistence suitable for testing your persistent Actors.<br> This plugin implements both the Journal as well as the SnapshotStore.</p> 
  <h2><a id="user-content-whats-this" class="anchor" href="https://github.com/pnerg/akka-persistence-mock#whats-this" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>What's this</h2> 
  <p>"<em>Akka persistence enables stateful actors to persist their internal state so that it can be recovered when an actor is started, restarted after a JVM crash or by a supervisor, or migrated in a cluster</em>" /<a href="http://doc.akka.io/docs/akka/2.4.0/scala/persistence.html" target="_blank">akka persistence (Typesafe)</a><br> Whilst the actual persistence mechanism of the Akka platform is generic it allows you to define which storage plugin to use, i.e. where to store the snapshot and journal/transaction data. </p> 
  <p>This project implements both the <em>Journal</em> and <em>SnapshotStore</em> plugins as in-memory structures. I.e. no data is written/persisted anywhere. This of course means that this implementation is not suitable for production but excellent for testing. There's no dependencies to anything like disc space or external databases meaning that the plugin requires no configuration to be used. It makes it extremely efficient to instantiate and use in testing adding virtually zero overhead.</p> 
  <h3><a id="user-content-guaranteed-compliance" class="anchor" href="https://github.com/pnerg/akka-persistence-mock#guaranteed-compliance" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Guaranteed compliance</h3> 
  <p>This plugin is tested against <a href="http://doc.akka.io/docs/akka/2.4.0/scala/persistence.html#Plugin_TCK" target="_blank">Typesafes compatibility tests</a> to guarantee its behavior is completely according to specifications.</p> 
  <h2><a id="user-content-when-to-use" class="anchor" href="https://github.com/pnerg/akka-persistence-mock#when-to-use" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>When to use</h2> 
  <p>When you have persistent actors you need to test for proper behavior.<br> To properly test your actors you need a storage plugin for the Akka persistence framework to work properly.<br> It's now you probably want a lightweight in-memory implementation of the persistence plugin.</p> 
  <h2><a id="user-content-how-to-use" class="anchor" href="https://github.com/pnerg/akka-persistence-mock#how-to-use" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>How to use</h2> 
  <p>Since testing is the primary use case there's a few ways to configure the plugin.<br> Basically what you need is to add the plugin configuration to the actor system.</p> 
  <pre><code>akka.persistence.journal.plugin = "dummy-journal"
akka.persistence.snapshot-store.plugin = "dummy-snapshot-store"

dummy-journal {
  class = "org.dmonix.akka.persistence.JournalPlugin"
  plugin-dispatcher = "akka.actor.default-dispatcher"
}

dummy-snapshot-store {
  class = "org.dmonix.akka.persistence.SnapshotStorePlugin"
  plugin-dispatcher = "akka.persistence.dispatchers.default-plugin-dispatcher"
}
</code></pre> 
  <p>One can either add the above configuration to the <em>resources.conf</em> file.<br> Place the file in <em>src/main/resources</em> or <em>src/test/resources</em> depending on which scope you need. </p> 
  <p>But if it's for pure test cases Id' suggest to configure the actor system for the testkit.<br> E.g. </p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">object</span> <span class="pl-en">PersistenceSuite</span> {

  <span class="pl-k">def</span> <span class="pl-en">journalId</span>() <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>dummy-journal<span class="pl-pds">"</span></span>
  <span class="pl-k">def</span> <span class="pl-en">snapStoreId</span>() <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>dummy-snapshot-store<span class="pl-pds">"</span></span>

  <span class="pl-k">def</span> <span class="pl-en">config</span>() <span class="pl-k">=</span> <span class="pl-en">ConfigFactory</span>.parseString(
    <span class="pl-s"><span class="pl-pds">"""</span>akka.loggers = [akka.testkit.TestEventListener] # makes both log-snooping and logging work</span>
<span class="pl-s">         akka.loglevel = "DEBUG"</span>
<span class="pl-s">         akka.persistence.journal.plugin = "dummy-journal"</span>
<span class="pl-s">         akka.persistence.snapshot-store.plugin = "dummy-snapshot-store"</span>
<span class="pl-s">         dummy-journal {</span>
<span class="pl-s">           class = "org.dmonix.akka.persistence.JournalPlugin"</span>
<span class="pl-s">           plugin-dispatcher = "akka.actor.default-dispatcher"</span>
<span class="pl-s">         }</span>
<span class="pl-s">        dummy-snapshot-store {</span>
<span class="pl-s">          class = "org.dmonix.akka.persistence.SnapshotStorePlugin"</span>
<span class="pl-s">          plugin-dispatcher = "akka.persistence.dispatchers.default-plugin-dispatcher"</span>
<span class="pl-s">         }          </span>
<span class="pl-s">         akka.actor.debug.receive = on<span class="pl-pds">"""</span></span>)
}</pre>
  </div> 
  <p>Then use the config for all your test cases.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">class</span> <span class="pl-en">ExampleSuite</span> <span class="pl-k">extends</span> <span class="pl-e">TestKit</span>(<span class="pl-en">ActorSystem</span>(<span class="pl-s"><span class="pl-pds">"</span>ExampleSuite<span class="pl-pds">"</span></span>, <span class="pl-en">PersistenceSuite</span>.config))</pre>
  </div> 
  <p>Check out the <a href="https://github.com/pnerg/akka-persistence-mock/blob/master/src/test/scala/org/dmonix/akka/persistence/ExampleSuite.scala" target="_blank">Example suite class</a></p> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/pnerg/akka-persistence-mock#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>LICENSE</h2> 
  <p>Copyright 2015 Peter Nerg.</p> 
  <p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p> 
  <p><a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">http://www.apache.org/licenses/LICENSE-2.0</a></p> 
  <p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p> 
  <h2><a id="user-content-download" class="anchor" href="https://github.com/pnerg/akka-persistence-mock#download" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Download</h2> 
  <p>The binary can be downloaded from <a href="http://search.maven.org/#artifactdetails%7Corg.dmonix.akka%7Cakka-persistence-mock_2.11%7C1.1.1%7C" target="_blank">Maven Central</a>.</p> 
  <p>sbt</p> 
  <pre><code>libraryDependencies += "org.dmonix.akka" % "akka-persistence-mock_2.11" % "1.1.1"
</code></pre> 
  <pre><code>libraryDependencies += "org.dmonix.akka" %% "akka-persistence-mock" % "1.1.1"
</code></pre> 
  <p>Maven</p> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">dependency</span>&gt;
    &lt;<span class="pl-ent">groupId</span>&gt;org.dmonix.akka&lt;/<span class="pl-ent">groupId</span>&gt;
    &lt;<span class="pl-ent">artifactId</span>&gt;akka-persistence-mock_2.11&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;1.1.1&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre>
  </div> 
 </article>
</div>