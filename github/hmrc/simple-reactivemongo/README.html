<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a href="https://github.com/hmrc/simple-reactivemongo#simple-reactivemongo" aria-hidden="true" class="anchor" id="user-content-simple-reactivemongo" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>simple-reactivemongo</h1> 
  <p><a href="https://gitter.im/hmrc/simple-reactivemongo?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Join the chat at https://gitter.im/hmrc/simple-reactivemongo" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg" style="max-width:100%;"></a> <a href="http://www.apache.org/licenses/LICENSE-2.0.html" target="_blank"><img src="https://camo.githubusercontent.com/d00d3a7dec5b7f60761b739a5e3b3447eaac743e/687474703a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4170616368652d627269676874677265656e2e737667" alt="Apache-2.0 license" data-canonical-src="http://img.shields.io/badge/license-Apache-brightgreen.svg" style="max-width:100%;"></a> <a href="https://travis-ci.org/hmrc/simple-reactivemongo" target="_blank"><img src="https://camo.githubusercontent.com/ecff0733e1c79d2feac63c0f059885326f579acf/68747470733a2f2f7472617669732d63692e6f72672f686d72632f73696d706c652d72656163746976656d6f6e676f2e737667" alt="Build Status" data-canonical-src="https://travis-ci.org/hmrc/simple-reactivemongo.svg" style="max-width:100%;"></a> <a href="https://bintray.com/hmrc/releases/simple-reactivemongo/_latestVersion" target="_blank"> <img src="https://camo.githubusercontent.com/4f36b3edf3c240b9b0634f93cf431b757a13d49d/68747470733a2f2f6170692e62696e747261792e636f6d2f7061636b616765732f686d72632f72656c65617365732f73696d706c652d72656163746976656d6f6e676f2f696d616765732f646f776e6c6f61642e737667" alt="Download" data-canonical-src="https://api.bintray.com/packages/hmrc/releases/simple-reactivemongo/images/download.svg" style="max-width:100%;"> </a> <a href="https://waffle.io/hmrc/simple-reactivemongo" target="_blank"><img src="https://camo.githubusercontent.com/f4e5d093d46c0fec4518840d771fc2dcb4a888dc/68747470733a2f2f62616467652e776166666c652e696f2f686d72632f73696d706c652d72656163746976656d6f6e676f2e706e673f6c6162656c3d7265616479267469746c653d5265616479" alt="Stories in Ready" data-canonical-src="https://badge.waffle.io/hmrc/simple-reactivemongo.png?label=ready&amp;title=Ready" style="max-width:100%;"></a></p> 
  <p>Provides simple serialization for <a href="http://reactivemongo.org" target="_blank">ReactiveMongo</a> - reactive, asynchronous and non-blocking Scala driver for MongoDB.</p> 
  <p>This started as a fork of <a href="https://github.com/ReactiveMongo/Play-ReactiveMongo" target="_blank">Play-ReactiveMongo</a> as it seemed like a good idea to refactor out the coupling to a Play application.</p> 
  <p>With some minimal effort, as the ReactiveMongo people had already done the majority of the work, we felt that adding a base repository class creates a library without some of the issues the other simpler libraries have.</p> 
  <h2><a href="https://github.com/hmrc/simple-reactivemongo#main-features" aria-hidden="true" class="anchor" id="user-content-main-features" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Main features</h2> 
  <h4><a href="https://github.com/hmrc/simple-reactivemongo#case-class---json---bson-conversion" aria-hidden="true" class="anchor" id="user-content-case-class---json---bson-conversion" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>CASE CLASS &lt;-&gt; JSON &lt;-&gt; BSON conversion</h4> 
  <p>Simple-reactivemongo uses <a href="http://www.playframework.com/documentation/2.3.x/ScalaJson" target="_blank">Play Json</a> to serialise/deserialise JSON to/from case classes and there is a specialized collection called <code>JSONCollection</code> that deals naturally with <code>JSValue</code> and <code>JSObject</code> instead of ReactiveMongo's <code>BSONDocument</code>.</p> 
  <h4><a href="https://github.com/hmrc/simple-reactivemongo#add-simple-reactivemongo" aria-hidden="true" class="anchor" id="user-content-add-simple-reactivemongo" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Add simple-reactivemongo</h4> 
  <p>In your project/build.sbt:</p> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-en">Resolver</span>.bintrayRepo(<span class="pl-s"><span class="pl-pds">"</span>hmrc<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>releases<span class="pl-pds">"</span></span>)

libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>uk.gov.hmrc<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>simple-reactivemongo<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>[INSERT_VERSION]<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>com.typesafe.play<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>play-json<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>2.x.x<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <p><em>For Java 7 and Play 2.3.x use versions &lt;=4.1.0</em></p> 
  <h4><a href="https://github.com/hmrc/simple-reactivemongo#create-a-repository-class" aria-hidden="true" class="anchor" id="user-content-create-a-repository-class" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Create a Repository class</h4> 
  <p>Create a <code>case class</code> that represents to serialise to mongo.</p> 
  <p>Create <a href="http://www.playframework.com/documentation/2.2.x/ScalaJsonCombinators" target="_blank">JSON Read/Write</a> converters. Or if you are doing nothing special create a companion object for the case class with an implicit member set by play.api.libs.json.Json.format[A]</p> 
  <p>Extend <a href="https://github.com/hmrc/simple-reactivemongo/blob/master/src/main/scala/uk/gov/hmrc/mongo/ReactiveRepository.scala" target="_blank">ReactiveRepository</a> which will provide you with some commonly used functionality.</p> 
  <p>If the repository requires any indexes override <code>indexes: Seq[Index]</code> to provide a sequence of indexes that will be applied. Any errors will be logged should they fail.</p> 
  <p>If you prefer to drop the underscore for the 'id' field in the domain case class then wrap the domain formats in <code>ReactiveMongoFormats.mongoEntity</code></p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">TestObject</span>(<span class="pl-v">aField</span>: <span class="pl-k">String</span>,
                      <span class="pl-v">anotherField</span>: <span class="pl-en">Option</span>[<span class="pl-k">String</span>] <span class="pl-k">=</span> <span class="pl-c1">None</span>,
                      <span class="pl-v">optionalCollection</span>: <span class="pl-en">Option</span>[<span class="pl-en">List</span>[<span class="pl-en">NestedModel</span>]] <span class="pl-k">=</span> <span class="pl-c1">None</span>,
                      <span class="pl-v">nestedMapOfCollections</span>: <span class="pl-en">Map</span>[<span class="pl-k">String</span>, <span class="pl-en">List</span>[<span class="pl-en">Map</span>[<span class="pl-k">String</span>, <span class="pl-en">Seq</span>[<span class="pl-en">NestedModel</span>]]]] <span class="pl-k">=</span> <span class="pl-en">Map</span>.empty,
                      <span class="pl-v">modifiedDetails</span>: <span class="pl-en">CreationAndLastModifiedDetail</span> <span class="pl-k">=</span> <span class="pl-en">CreationAndLastModifiedDetail</span>(),
                      <span class="pl-v">jsValue</span>: <span class="pl-en">Option</span>[<span class="pl-en">JsValue</span>] <span class="pl-k">=</span> <span class="pl-c1">None</span>,
                      <span class="pl-v">location</span> : <span class="pl-en">Tuple2</span>[<span class="pl-k">Double</span>, <span class="pl-k">Double</span>] <span class="pl-k">=</span> (<span class="pl-c1">0.0</span>, <span class="pl-c1">0.0</span>),
                      <span class="pl-v">id</span>: <span class="pl-en">BSONObjectID</span> <span class="pl-k">=</span> <span class="pl-en">BSONObjectID</span>.generate) {

  <span class="pl-k">def</span> <span class="pl-en">markUpdated</span>(<span class="pl-k">implicit</span> <span class="pl-v">updatedTime</span>: <span class="pl-en">DateTime</span>) <span class="pl-k">=</span> copy(
    modifiedDetails <span class="pl-k">=</span> modifiedDetails.updated(updatedTime)
  )

}

<span class="pl-k">object</span> <span class="pl-en">TestObject</span> {

  <span class="pl-k">import</span> <span class="pl-v">ReactiveMongoFormats.</span>{<span class="pl-v">objectIdFormats</span>, <span class="pl-v">mongoEntity</span>}

  <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">formats</span> <span class="pl-k">=</span> mongoEntity {

    <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">locationFormat</span> <span class="pl-k">=</span> <span class="pl-en">TupleFormats</span>.tuple2Format[<span class="pl-k">Double</span>, <span class="pl-k">Double</span>]

    <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">nestedModelformats</span> <span class="pl-k">=</span> <span class="pl-en">Json</span>.format[<span class="pl-en">NestedModel</span>]

    <span class="pl-en">Json</span>.format[<span class="pl-en">TestObject</span>]
  }
}

<span class="pl-k">class</span> <span class="pl-en">SimpleTestRepository</span>(<span class="pl-k">implicit</span> <span class="pl-v">mc</span>: <span class="pl-en">MongoConnector</span>)
  <span class="pl-k">extends</span> <span class="pl-e">ReactiveRepository</span>[<span class="pl-en">TestObject</span>, <span class="pl-en">BSONObjectID</span>](<span class="pl-s"><span class="pl-pds">"</span>simpleTestRepository<span class="pl-pds">"</span></span>, mc.db, <span class="pl-en">TestObject</span>.formats, <span class="pl-en">ReactiveMongoFormats</span>.objectIdFormats) {

  <span class="pl-k">import</span> <span class="pl-v">reactivemongo.api.indexes.</span><span class="pl-v">IndexType</span>
  <span class="pl-k">import</span> <span class="pl-v">reactivemongo.api.indexes.</span><span class="pl-v">Index</span>

  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">indexes</span><span class="pl-k">:</span> <span class="pl-en">Seq</span>[<span class="pl-en">Index</span>] <span class="pl-k">=</span> <span class="pl-en">Seq</span>(
    <span class="pl-en">Index</span>(<span class="pl-en">Seq</span>(<span class="pl-s"><span class="pl-pds">"</span>aField<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">IndexType</span>.<span class="pl-en">Ascending</span>), name <span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>aFieldUniqueIdx<span class="pl-pds">"</span></span>), unique <span class="pl-k">=</span> <span class="pl-c1">true</span>, sparse <span class="pl-k">=</span> <span class="pl-c1">true</span>)
  )
}
</pre>
  </div> 
  <p>(See <a href="https://github.com/hmrc/simple-reactivemongo/blob/master/src/test/scala/uk/gov/hmrc/mongo/ReactiveRepositorySpec.scala" target="_blank">ReactiveRepositorySpec</a> for example usage)</p> 
  <h4><a href="https://github.com/hmrc/simple-reactivemongo#built-in-json-converters-formats-for-often-used-types" aria-hidden="true" class="anchor" id="user-content-built-in-json-converters-formats-for-often-used-types" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Built-in JSON converters (<a href="http://www.playframework.com/documentation/2.2.x/ScalaJsonCombinators" target="_blank">Formats</a>) for often used types</h4> 
  <p>Formats for BSONObjectId and Joda time classes are implemented (see <a href="https://github.com/hmrc/simple-reactivemongo/blob/master/src/main/scala/uk/gov/hmrc/mongo/ReactiveMongoFormats.scala" target="_blank">ReactiveMongoFormats</a>)</p> 
  <h4><a href="https://github.com/hmrc/simple-reactivemongo#configure-underlying-akka-system" aria-hidden="true" class="anchor" id="user-content-configure-underlying-akka-system" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Configure underlying Akka system</h4> 
  <p>ReactiveMongo loads it's configuration from the key <code>mongo-async-driver</code></p> 
  <p>To change the log level (prevent dead-letter logging for example)</p> 
  <pre><code>mongo-async-driver {
  akka {
    loglevel = WARNING
  }
}
</code></pre> 
  <h4><a href="https://github.com/hmrc/simple-reactivemongo#create-a-repository-class-using-atomicsupdate" aria-hidden="true" class="anchor" id="user-content-create-a-repository-class-using-atomicsupdate" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Create a repository class using AtomicsUpdate</h4> 
  <p>The AtomicUpdate trait is a wrapper around the findAndModify command which modifies and returns a single document, using atomic operations. By default, the returned mongo document will include the modifications made on the update. Please refer to the mongo documentation concerning the commands which can be supplied to the update operations.</p> 
  <p>To include the trait AtomicsUpdate to your existing repository, follow the steps below.</p> 
  <ol> 
   <li>Update your repository to use the AtomicUpdate trait, passing the type of the object being read/written.</li> 
  </ol> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">class</span> <span class="pl-en">SimpleTestRepository</span>(<span class="pl-k">implicit</span> <span class="pl-v">mc</span>: <span class="pl-en">MongoConnector</span>)
  <span class="pl-k">extends</span> <span class="pl-e">ReactiveRepository</span>[<span class="pl-en">TestObject</span>, <span class="pl-en">BSONObjectID</span>](<span class="pl-s"><span class="pl-pds">"</span>simpleTestRepository<span class="pl-pds">"</span></span>, mc.db, <span class="pl-en">TestObject</span>.formats, <span class="pl-en">ReactiveMongoFormats</span>.objectIdFormats)
  <span class="pl-k">with</span> <span class="pl-e">AtomicUpdate</span>[<span class="pl-en">TestObject</span>]
  {</pre>
  </div> 
  <ol start="2"> 
   <li>Include the below override in your class which is extending AtomicUpdate. This function is invoked by AtomicUpdate to decide if the update is either an upsert or an update.</li> 
  </ol> 
  <div class="highlight highlight-source-scala">
   <pre>    <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">isInsertion</span>(<span class="pl-v">suppliedId</span>: <span class="pl-en">BSONObjectID</span>, <span class="pl-v">returned</span>: <span class="pl-en">AtomicTestObject</span>)<span class="pl-k">:</span> <span class="pl-k">Boolean</span> <span class="pl-k">=</span>
      suppliedId.equals(returned.id)</pre>
  </div> 
  <p>The two functions exposed from the AtomicUpdate trait are detailed below which both return the type Future[Option[DatabaseUpdate[T]]], where DatabaseUpdate encapsulates the update type which can be either Saved (new insert) or Updated (updated record). Please note the document with the modifications applied on the update command to mongo will be returned.</p> 
  <ol> 
   <li> <p>def atomicUpsert(finder: BSONDocument, modifierBson: BSONDocument) This function will invoke atomicSaveOrUpdate passing the 'upsert' flag as true. Function used to insert a new record.</p> </li> 
   <li> <p> def atomicSaveOrUpdate(finder: BSONDocument, modifierBson: BSONDocument, upsert: Boolean)  This function is used to override the upsert parameter.</p> </li> 
  </ol> 
  <p>The parameters for the functions above are defined below:-</p> 
  <ul> 
   <li>finder - A BSON finder used to find an existing record.</li> 
   <li>modifierBson - The BSON modifier to be applied.</li> 
   <li>upsert - If the value is true, a BSONDocument will be added to the modifierBson parameter to generate the Id field on the collection using BSONObjectID.generate. If the value is false, no additional BSONDocument will be applied to modifierBson. If the 'finder' returns no document, then None will be returned. If unsure if the record already exists, then set the 'upsert' value to true.</li> 
  </ul> Please refer to the unit test AtomicUpdateSpec for simple examples concerning using the trait AtomicUpdate. 
  <p>For documentation, please refer to <a href="http://docs.mongodb.org/manual/reference/command/findAndModify" target="_blank">http://docs.mongodb.org/manual/reference/command/findAndModify</a>.</p> 
 </article>
</div>