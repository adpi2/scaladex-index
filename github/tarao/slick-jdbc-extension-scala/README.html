<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-slick-jdbc-extension----" class="anchor" href="https://github.com/tarao/slick-jdbc-extension-scala#slick-jdbc-extension----" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>slick-jdbc-extension <a href="https://travis-ci.org/tarao/slick-jdbc-extension-scala" target="_blank"><img src="https://camo.githubusercontent.com/37be4381f1fe9bb3ec133a53aad74b78849fff7a/68747470733a2f2f696d672e736869656c64732e696f2f7472617669732f746172616f2f736c69636b2d6a6462632d657874656e73696f6e2d7363616c612e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://img.shields.io/travis/tarao/slick-jdbc-extension-scala.svg?branch=master" style="max-width:100%;"></a> <a href="https://coveralls.io/github/tarao/slick-jdbc-extension-scala?branch=master" target="_blank"><img src="https://camo.githubusercontent.com/edc581f927259433494e4ae9a06d1fdf1ff8469d/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f746172616f2f736c69636b2d6a6462632d657874656e73696f6e2d7363616c612f62616467652e7376673f6272616e63683d6d617374657226736572766963653d676974687562" alt="Coverage status" data-canonical-src="https://coveralls.io/repos/tarao/slick-jdbc-extension-scala/badge.svg?branch=master&amp;service=github" style="max-width:100%;"></a> <a href="https://maven-badges.herokuapp.com/maven-central/com.github.tarao/slick-jdbc-extension_2.11" target="_blank"><img src="https://camo.githubusercontent.com/d3118a716421373ee2f8e6cb8b24362bb7770219/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f636f6d2e6769746875622e746172616f2f736c69636b2d6a6462632d657874656e73696f6e5f322e31312f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/com.github.tarao/slick-jdbc-extension_2.11/badge.svg" style="max-width:100%;"></a> <a href="http://javadoc-badge.appspot.com/com.github.tarao/slick-jdbc-extension_2.11" target="_blank"><img src="https://camo.githubusercontent.com/54cb6bb4c40a0c2e77b9dc67c906cbc367ef1a6f/687474703a2f2f6a617661646f632d62616467652e61707073706f742e636f6d2f636f6d2e6769746875622e746172616f2f736c69636b2d6a6462632d657874656e73696f6e5f322e31312e7376673f6c6162656c3d7363616c61646f63" alt="Scaladoc" data-canonical-src="http://javadoc-badge.appspot.com/com.github.tarao/slick-jdbc-extension_2.11.svg?label=scaladoc" style="max-width:100%;"></a></h1> 
  <p>An extension to <code>slick.jdbc</code>, <a href="http://slick.typesafe.com/" target="_blank">Slick</a>'s plain SQL queries, including the following features.</p> 
  <ul> 
   <li><a href="https://github.com/tarao/slick-jdbc-extension-scala#setparameter" target="_blank">More types in SQL interpolation</a> 
    <ul> 
     <li>Literal parameters</li> 
     <li>Non-empty lists</li> 
     <li>Case classes (products)</li> 
    </ul> </li> 
   <li><a href="https://github.com/tarao/slick-jdbc-extension-scala#translator" target="_blank">Extensible raw query translator</a> 
    <ul> 
     <li>Embedding caller information as a comment</li> 
     <li>Stripping margin</li> 
    </ul> </li> 
   <li><a href="https://github.com/tarao/slick-jdbc-extension-scala#getresult" target="_blank">Result mapper by column name</a></li> 
  </ul> 
  <p>These features can be selectively enabled.</p> 
  <h2><a id="user-content--getting-started" class="anchor" href="https://github.com/tarao/slick-jdbc-extension-scala#-getting-started" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><a name="user-content-install" target="_blank" href=""></a> Getting started</h2> 
  <p>Add dependency in your <code>build.sbt</code> as the following.</p> 
  <div class="highlight highlight-source-scala">
   <pre>    libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
      ...
      <span class="pl-s"><span class="pl-pds">"</span>com.github.tarao<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>slick-jdbc-extension<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.0.7<span class="pl-pds">"</span></span>
    )</pre>
  </div> 
  <p>The library is available on <a href="https://maven-badges.herokuapp.com/maven-central/com.github.tarao/slick-jdbc-extension_2.11" target="_blank">Maven Central</a>. Currently, supported Scala version is 2.11.</p> 
  <h2><a id="user-content--overview" class="anchor" href="https://github.com/tarao/slick-jdbc-extension-scala#-overview" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><a name="user-content-overview" target="_blank" href=""></a> Overview</h2> 
  <p><a href="http://slick.typesafe.com/" target="_blank">Slick</a> supports plain SQL queries but it lacks some essential features. For example, there is no way to bind a list parameter to a prepared statement.</p> 
  <p>This extension provides additional features to Slick-style plain SQL queries. The extension consists of a family of traits and each of them can be enabled selectively. The easiest way to use the extension is to define a class with the traits.</p> 
  <p>Let's see an example of the usage of the extension. To start with, we assume to have an abstract class to run a DB query something like this.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">abstract</span> <span class="pl-k">class</span> <span class="pl-en">DBHandler</span> {
  <span class="pl-k">import</span> <span class="pl-v">scala.concurrent.</span>{<span class="pl-v">Future</span>, <span class="pl-v">Await</span>}
  <span class="pl-k">import</span> <span class="pl-v">scala.concurrent.duration.</span><span class="pl-v">Duration</span>
  <span class="pl-k">import</span> <span class="pl-v">slick.dbio.</span>{<span class="pl-v">DBIOAction</span>, <span class="pl-v">NoStream</span>, <span class="pl-v">Effect</span>}
  <span class="pl-k">import</span> <span class="pl-v">slick.backend.</span><span class="pl-v">DatabaseComponent</span>

  <span class="pl-k">type</span> <span class="pl-en">Database</span> <span class="pl-k">=</span> <span class="pl-en">DatabaseComponent</span>#<span class="pl-en">DatabaseDef</span>

  <span class="pl-k">def</span> <span class="pl-en">run</span>[<span class="pl-en">R</span>](<span class="pl-v">a</span>: <span class="pl-en">DBIOAction</span>[<span class="pl-en">R</span>, <span class="pl-en">NoStream</span>, <span class="pl-en">Nothing</span>])(<span class="pl-k">implicit</span> <span class="pl-v">db</span>: <span class="pl-en">Database</span>)<span class="pl-k">:</span> <span class="pl-en">R</span> <span class="pl-k">=</span>
    <span class="pl-en">Await</span>.result(db.run(a), <span class="pl-en">Duration</span>.<span class="pl-en">Inf</span>)
}</pre>
  </div> 
  <p>Then a repository class to use plain SQL queries with the extension will look like this. (We are not interested in how the concrete DB object is supplied.)</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.github.tarao.slickjdbc.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">interpolation.</span>{<span class="pl-v">SQLInterpolation</span>, <span class="pl-v">CompoundParameter</span>, <span class="pl-v">TableName</span>}
<span class="pl-k">import</span> <span class="pl-v">getresult.</span>{<span class="pl-v">GetResult</span>, <span class="pl-v">AutoUnwrapOption</span>}

<span class="pl-k">class</span> <span class="pl-en">SampleRepository</span> <span class="pl-k">extends</span> <span class="pl-e">DBHandler</span>
    <span class="pl-k">with</span> <span class="pl-e">SQLInterpolation</span> <span class="pl-k">with</span> <span class="pl-e">CompoundParameter</span>
    <span class="pl-k">with</span> <span class="pl-e">GetResult</span> <span class="pl-k">with</span> <span class="pl-e">AutoUnwrapOption</span> {
  <span class="pl-k">implicit</span> <span class="pl-k">def</span> <span class="pl-en">db</span><span class="pl-k">:</span> <span class="pl-en">Database</span> <span class="pl-k">=</span> <span class="pl-k">???</span>

  ...
}</pre>
  </div> 
  <p><code>SQLInterpolation</code>, <code>CompoundParameter</code>, <code>GetResult</code> and <code>AutoUnwrapOption</code> are feature selectors of the extension.</p> 
  <p>For the rest of the example, we use <code>Entry</code> model class defined as the following.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Entry</span>(<span class="pl-v">id</span>: <span class="pl-k">Long</span>, <span class="pl-v">url</span>: <span class="pl-k">String</span>)</pre>
  </div> 
  <p>To define a mapping from a column name to a field of the model in the repository class, use <code>getResult</code> method defined in <code>GetResult</code> trait.</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">getEntryResult</span> <span class="pl-k">=</span> getResult { <span class="pl-en">Entry</span>(
    column(<span class="pl-s"><span class="pl-pds">"</span>entry_id<span class="pl-pds">"</span></span>),
    column(<span class="pl-s"><span class="pl-pds">"</span>url<span class="pl-pds">"</span></span>)
  ) }</pre>
  </div> 
  <p>This will map <code>entry_id</code> column of a query result to the first field of <code>Entry</code> and <code>url</code> column to the second. This is very similar to Slick's <code>GetResult.apply</code>. The type of the column is inferred by the field type of <code>Entry.id</code> (it is <code>Long</code> in this case). Note that this example also uses <code>AutoUnwrapOption</code> to convert from <code>Option[Long]</code> to <code>Long</code>. The default column type is <code>Option[]</code>ed since the resulting column value may be <code>NULL</code>.</p> 
  <p>Let's see an example of SQL interpolation. In addition to Slick's SQL interpolation, we can specify a structured value directly as a parameter.</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-k">val</span> <span class="pl-en">table</span> <span class="pl-k">=</span> <span class="pl-en">TableName</span>(<span class="pl-s"><span class="pl-pds">"</span>entry<span class="pl-pds">"</span></span>)

  <span class="pl-k">def</span> <span class="pl-en">add</span>(<span class="pl-v">entry</span>: <span class="pl-en">Entry</span>) <span class="pl-k">=</span>
    run { sqlu<span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">    | INSERT INTO ${table} (entry_id, url)</span>
<span class="pl-s">    | VALUES ${entry}</span>
<span class="pl-s">    <span class="pl-pds">"""</span></span>
  }</pre>
  </div> 
  <p>This actually illustrates three things.</p> 
  <ul> 
   <li>You can specify a table name by a value of <code>TableName</code>. This value will be embedded literally in the raw query.</li> 
   <li>A value of case class (<code>entry</code> in this case) is expanded to placeholders like <code>(?, ?)</code> and the fields of the value are bound to them.</li> 
   <li>Characters before <code>|</code> is stripped in the raw query.</li> 
  </ul> 
  <p>You can also specify a list as a parameter. But in this case, you must say that it is not empty.</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-k">import</span> <span class="pl-v">util.</span><span class="pl-v">NonEmpty</span>

  <span class="pl-k">def</span> <span class="pl-en">findAll</span>(<span class="pl-v">entryIds</span>: <span class="pl-en">Option</span>[<span class="pl-en">NonEmpty</span>[<span class="pl-k">Long</span>]])<span class="pl-k">:</span> <span class="pl-en">Seq</span>[<span class="pl-en">Entry</span>] <span class="pl-k">=</span> entryIds <span class="pl-k">match</span> {
    <span class="pl-k">case</span> <span class="pl-en">Some</span>(ids) <span class="pl-k">=&gt;</span> run { sql<span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">    | SELECT * FROM ${table}</span>
<span class="pl-s">    | WHERE entry_id IN $ids</span>
<span class="pl-s">    <span class="pl-pds">"""</span></span>.as[<span class="pl-en">Entry</span>] }
    <span class="pl-k">case</span> <span class="pl-c1">None</span> <span class="pl-k">=&gt;</span> <span class="pl-en">Seq</span>.empty
  }</pre>
  </div> 
  <p><code>$ids</code> must be a <code>NonEmpty[]</code> and expands to <code>(?, ?, ..., ?)</code>. A value of <code>NonEmpty[]</code> can be generated by <code>NonEmpty.apply</code> or by passing an <code>Iterable[]</code>, in which case the resulting value is <code>Option[Nonempty[]]</code>. For example, you can call <code>findAll</code> method in two ways:</p> 
  <div class="highlight highlight-source-scala">
   <pre>repository.findAll(<span class="pl-en">Some</span>(<span class="pl-en">NonEmpty</span>(<span class="pl-c1">101L</span>, <span class="pl-c1">102L</span>, <span class="pl-c1">103L</span>)))</pre>
  </div> 
  <div class="highlight highlight-source-scala">
   <pre>repository.findAll(<span class="pl-en">Seq</span>(<span class="pl-c1">101L</span>, <span class="pl-c1">102L</span>, <span class="pl-c1">103L</span>))</pre>
  </div> 
  <p>See <a href="https://github.com/tarao/nonempty-scala" target="_blank">the documentation of <code>NonEmpty[]</code></a> for the detail.</p> 
  <h2><a id="user-content--additional-types-in-sql-interpolation" class="anchor" href="https://github.com/tarao/slick-jdbc-extension-scala#-additional-types-in-sql-interpolation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><a name="user-content-setparameter" target="_blank" href=""></a> Additional types in SQL interpolation</h2> 
  <p>To use the extended SQL interpolation, you have to first enable it. To enable the interpolation inside a particular trait or class, add <code>SQLInterpolation</code> trait to the trait or class.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.github.tarao.slickjdbc.</span><span class="pl-v">_</span>
<span class="pl-k">class</span> <span class="pl-en">YourRepositoryClass</span> <span class="pl-k">extends</span> <span class="pl-e">interpolation.SQLInterpolation</span></pre>
  </div> 
  <p>If you want to explicitly <code>import</code> the feature, then <code>import</code> methods in <code>SQLInterpolation</code> object.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.github.tarao.slickjdbc.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">interpolation.SQLInterpolation.</span><span class="pl-v">_</span></pre>
  </div> 
  <p>If you are <code>import</code>ing a Slick driver API, doing that by <code>import slick.driver.SomeDriver.api._</code> causes a conflict with the extended SQL interpolation since the API also defines a SQL interpolation of Slick. In this case, <code>import</code> only desired features to avoid the conflict. For example, if you are using <code>Database</code> from the API, import it as <code>import slick.driver.SomeDriver.api.Database</code>.</p> 
  <h3><a id="user-content-literal-parameters" class="anchor" href="https://github.com/tarao/slick-jdbc-extension-scala#literal-parameters" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Literal parameters</h3> 
  <p>When a value with <code>Literal</code> is passed as a parameter of the interpolation, a string returned by <code>toString</code> on the value is embedded literally in the raw query as if it was embedded by <code>#${}</code>. There are two predefined <code>Literal</code>s.</p> 
  <ul> 
   <li><code>SimpleString</code> 
    <ul> 
     <li>takes a string as a parameter of the constructor and embed that string.</li> 
    </ul> </li> 
   <li><code>TableName</code> 
    <ul> 
     <li>takes a name as a parameter of the constructor and embed that name.</li> 
    </ul> </li> 
  </ul> 
  <p>Note that a <code>Literal</code> value is <strong>not</strong> expanded to a placeholder <code>?</code>. If the value needs to be escaped as a part of a SQL string, then you should do it by yourself.</p> 
  <h3><a id="user-content-non-empty-lists" class="anchor" href="https://github.com/tarao/slick-jdbc-extension-scala#non-empty-lists" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Non-empty lists</h3> 
  <p>This feature requires <code>interpolation.ComboundParameter</code> trait or <code>import interpolation.ComboundParameter._</code>.</p> 
  <p>When a <a href="https://github.com/tarao/nonempty-scala" target="_blank"><code>NonEmpty[]</code></a> is passed as a parameter of the interpolation, the value expands to <code>?</code>s in the prepared statement, and items in the value are to bound the statement.</p> 
  <p>For example, if you have <code>val ne = NonEmpty(1, 2, 3)</code> and embed it as <code>sql"... ($ne) ..."</code>, the raw query will be <code>... (?, ?, ?) ...</code> and <code>1</code>, <code>2</code>, <code>3</code> are bound to the placeholders. The resulting raw query will be the same if you omit parentheses like <code>sql"... $ne ..."</code>.</p> 
  <p>If you pass a non-empty list of tuples, for example pairs, it expands to <code>(?, ?), (?, ?), ..., (?, ?)</code>. This is useful to <code>INSERT</code> multiple values by <code>INSERT INTO table (col1, col2) VALUES $aListOfPairs</code>.</p> 
  <h3><a id="user-content-case-classes-products" class="anchor" href="https://github.com/tarao/slick-jdbc-extension-scala#case-classes-products" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Case classes (products)</h3> 
  <p>This feature requires <code>interpolation.ComboundParameter</code> trait or <code>import interpolation.ComboundParameter._</code>.</p> 
  <p>When a product especially an instance of a case class is passed as a parameter of the interpolation, the value expands to <code>?</code>s in the prepared statement, and fields in the value are bound to the statement.</p> 
  <p>For example, if you have <code>val p = SomeCaseClass(1, "foo")</code> and embed it as <code>sql"... ($p) ..."</code>, the raw query will be <code>... (?, ?) ...</code> and <code>1</code>, <code>"foo"</code> are bound to the placeholders. The resulting raw query will be the same if you omit parentheses like <code>sql"... $p ..."</code>.</p> 
  <p>If you have another product value in a field of the passed value, it also be expanded and the placeholders are flattened.</p> 
  <p>You can also put a product value in a <code>NonEmpty[]</code> and it has the same effect as putting tuples <strong>except when the arity of the product is 1</strong>. When the product arity is exactly 1, the value is treated as if it is a primitive value. In other words, a value of <code>NonEmpty[Single]</code> (where <code>Single</code> is a <code>Product</code> of arity 1) expands to <code>(?, ?, ..., ?)</code> not to <code>(?), (?), ..., (?)</code>. In contrast, a value of <code>NonEmpty[Tuple1[]]</code> expands to <code>(?), (?), ..., (?)</code> not to <code>(?, ?, ..., ?)</code>.</p> 
  <p>Note that passing <code>Option[]</code> as an interpolation parameter is statically rejected and passing a product of arity zero (this can be made by for example <code>case class Empty()</code>) causes <code>java.sql.SQLException</code> at runtime.</p> 
  <h2><a id="user-content--raw-query-translator" class="anchor" href="https://github.com/tarao/slick-jdbc-extension-scala#-raw-query-translator" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><a name="user-content-translator" target="_blank" href=""></a> Raw query translator</h2> 
  <p>To use this feature, you have to enable the extended SQL interpolation. Follow the instruction <a href="https://github.com/tarao/slick-jdbc-extension-scala#setparameter" target="_blank">above</a> to enable it.</p> 
  <p>The query translator translates a raw query generated by the interpolation. A translation is simply from string to string and you can stack multiple translators.</p> 
  <h3><a id="user-content-the-default-translators" class="anchor" href="https://github.com/tarao/slick-jdbc-extension-scala#the-default-translators" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>The default translators</h3> 
  <ul> 
   <li><code>MarginStripper</code> 
    <ul> 
     <li>Strip characters before <code>|</code> from each line of a query string. This makes a query log a bit more readable.</li> 
    </ul> </li> 
   <li><code>CallerCommenter</code> 
    <ul> 
     <li>Record the code position that the interpolation is invoked as a comment of SQL query. You can trace a line number, a file name and a method name in a class from an ordinary query log on the DB server.</li> 
    </ul> </li> 
  </ul> 
  <h3><a id="user-content-custom-translators" class="anchor" href="https://github.com/tarao/slick-jdbc-extension-scala#custom-translators" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Custom translators</h3> 
  <p>You can use a custom translator stack by defining an implicit value of <code>Traversable[query.Translator]</code>. For example, if you want to add a translator after the default translators, define an implicit value in a static scope where you invoke the SQL interpolation.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.github.tarao.slickjdbc.</span><span class="pl-v">_</span>

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">translators</span><span class="pl-k">:</span> <span class="pl-en">Traversable</span>[query.<span class="pl-en">Translator</span>] <span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  query.<span class="pl-en">MarginStripper</span>,
  query.<span class="pl-en">CallerCommenter</span>,
  <span class="pl-k">new</span> <span class="pl-en">query.Translator</span> {
    <span class="pl-k">def</span> <span class="pl-en">apply</span>(<span class="pl-v">query</span>: <span class="pl-k">String</span>, <span class="pl-v">context</span>: query.<span class="pl-en">Context</span>) <span class="pl-k">=</span>
      <span class="pl-k">???</span> <span class="pl-c"><span class="pl-c">/*</span> return a translated string <span class="pl-c">*/</span></span>
  }
)</pre>
  </div> 
  <h2><a id="user-content--result-mapper-by-column-name" class="anchor" href="https://github.com/tarao/slick-jdbc-extension-scala#-result-mapper-by-column-name" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><a name="user-content-getresult" target="_blank" href=""></a> Result mapper by column name</h2> 
  <p>This feature requires <code>getresult.GetResult</code> trait or object.</p> 
  <p>With the trait, you can use <code>getResult</code> method and can use <code>column</code> method in the block of <code>getResult</code> without a receiver like in the example in <a href="https://github.com/tarao/slick-jdbc-extension-scala#overview" target="_blank">Overview</a> section.</p> 
  <p>If you prefer the object, you just need to <code>import</code> it.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.github.tarao.slickjdbc.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">getresult.</span><span class="pl-v">GetResult</span></pre>
  </div> 
  <p>The usage of <code>GetResult</code> is quite similar to that of Slick's <code>GetResult</code>. You will receive an object to extract a result value in a block passed to <code>GetResult.apply</code>.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">getEntryResult</span> <span class="pl-k">=</span> <span class="pl-en">GetResult</span> { r <span class="pl-k">=&gt;</span> <span class="pl-en">Entry</span>(
  r.column(<span class="pl-s"><span class="pl-pds">"</span>entry_id<span class="pl-pds">"</span></span>),
  r.column(<span class="pl-s"><span class="pl-pds">"</span>url<span class="pl-pds">"</span></span>)
) }</pre>
  </div> 
  <p>It also requires <code>getresult.AutoUnwrapOption</code> to extract a column value of non-<code>Option[]</code> type. This also available both as a trait and an object.</p> 
  <p>You can use this feature without the extended SQL interpolation.</p> 
  <h3><a id="user-content-mapping-columns-by-name" class="anchor" href="https://github.com/tarao/slick-jdbc-extension-scala#mapping-columns-by-name" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Mapping columns by name</h3> 
  <p>As you have already seen, a column value can be extracted by <code>column</code> method. If you want to explicitly specify a return type or the return type somehow cannot be inferred, you can pass a type parameter to <code>column</code> to specify a return type.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">getEntryResult</span> <span class="pl-k">=</span> getResult { <span class="pl-en">Entry</span>(
  column[<span class="pl-k">Long</span>](<span class="pl-s"><span class="pl-pds">"</span>entry_id<span class="pl-pds">"</span></span>),
  column[<span class="pl-k">String</span>](<span class="pl-s"><span class="pl-pds">"</span>url<span class="pl-pds">"</span></span>)
) }</pre>
  </div> 
  <h3><a id="user-content-mapping-columns-by-position" class="anchor" href="https://github.com/tarao/slick-jdbc-extension-scala#mapping-columns-by-position" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Mapping columns by position</h3> 
  <p>You can also extract the result by the index of a column.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">getEntryResult</span> <span class="pl-k">=</span> getResult { <span class="pl-en">Entry</span>(
  column(<span class="pl-c1">1</span>),
  column(<span class="pl-c1">2</span>)
) }</pre>
  </div> 
  <p>If you prefer the way of <code>&lt;&lt;</code> method in Slick's <code>GetResult</code>, it is also available in our <code>GetResult</code>.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">getEntryResult</span> <span class="pl-k">=</span> getResult { <span class="pl-en">Entry</span>(<span class="pl-k">&lt;&lt;</span>, <span class="pl-k">&lt;&lt;</span>) }</pre>
  </div> 
  <p><code>&lt;&lt;?</code> and <code>skip</code> are also available.</p> 
  <h3><a id="user-content-option-values" class="anchor" href="https://github.com/tarao/slick-jdbc-extension-scala#option-values" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><code>Option[]</code> values</h3> 
  <p><code>getresult.AutoUnwrapOption</code> makes it possible to get non-<code>Option[]</code> value directly. Note that this may cause <code>NoSuchElementException</code> thrown if the value in the DB record is <code>NULL</code>.</p> 
  <p>If you want to specify a default value instead of throwing an exception, then retrieve the result as an <code>Option[]</code> and give a default value.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">getEntryResult</span> <span class="pl-k">=</span> getResult { <span class="pl-en">Entry</span>(
  column[<span class="pl-en">Option</span>[<span class="pl-k">Long</span>]](<span class="pl-s"><span class="pl-pds">"</span>entry_id<span class="pl-pds">"</span></span>).getOrElse(<span class="pl-c1">0</span>),
  column[<span class="pl-en">Option</span>[<span class="pl-k">String</span>]](<span class="pl-s"><span class="pl-pds">"</span>url<span class="pl-pds">"</span></span>).getOrElse(<span class="pl-s"><span class="pl-pds">"</span>http://example.com/default/page<span class="pl-pds">"</span></span>)
) }</pre>
  </div> 
  <h3><a id="user-content-user-defined-type-binders" class="anchor" href="https://github.com/tarao/slick-jdbc-extension-scala#user-defined-type-binders" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>User-defined type binders</h3> 
  <p>The way of extracting a typed value from a raw query result is different from that of Slick's <code>GetResult</code>. We provide a <code>TypeBinder[]</code> which is similar to <code>TypeBinder[]</code> in <a href="http://scalikejdbc.org/" target="_blank">ScalikeJDBC</a> to specify extractor methods for both indexed and named results.</p> 
  <p>Let's take <code>url</code> field of <code>Entry</code> as an example. Assume that you want to use your custom case class <code>URL</code> as a <code>url</code> field instead of <code>String</code>.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">URL</span>(<span class="pl-v">url</span>: <span class="pl-k">String</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Entry</span>(<span class="pl-v">id</span>: <span class="pl-k">Long</span>, <span class="pl-v">url</span>: <span class="pl-en">URL</span>)</pre>
  </div> 
  <p>Then you need to define a custom <code>TypeBinder[]</code> for <code>URL</code>. A good way to define a custom type binder for a user-defined type is to extend a type binder for a primitive type.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">def</span> <span class="pl-en">urlBinder</span>(<span class="pl-k">implicit</span>
  <span class="pl-v">binder</span>: <span class="pl-en">TypeBinder</span>[<span class="pl-en">Option</span>[<span class="pl-k">String</span>]]
)<span class="pl-k">:</span> <span class="pl-en">TypeBinder</span>[<span class="pl-en">Option</span>[<span class="pl-en">URL</span>]] <span class="pl-k">=</span> binder.map(_.map(<span class="pl-en">URL</span>(_)))</pre>
  </div> 
  <p>This binder uses a <code>TypeBinder[Option[String]]</code> as a parent binder, which is defined by default, and convert the string retrieved by the parent to a <code>URL</code>. (The first <code>map</code> is to convert retrieved value, and the second one is to take care of the <code>Option[]</code> type.)</p> 
  <p>Note that you should define a <code>TypeBinder[]</code> for <code>Option[URL]</code> not for <code>URL</code> since unwrapping <code>Option[]</code> will be done by general unwrapping conversion by <code>AutoUnwrapOption</code>.</p> 
  <p>With this binder, you can define a result mapper for <code>Entry</code>.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">getEntryResult</span> <span class="pl-k">=</span> getResult { <span class="pl-en">Entry</span>(
  column(<span class="pl-s"><span class="pl-pds">"</span>entry_id<span class="pl-pds">"</span></span>),
  column(<span class="pl-s"><span class="pl-pds">"</span>url<span class="pl-pds">"</span></span>)
) }</pre>
  </div> 
  <p>Notice that there is no difference in the code compared to the one defined before for <code>case class Entry(id: Long, url: String)</code> but the (inferred) return type of <code>column("url")</code> is now <code>URL</code>.</p> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/tarao/slick-jdbc-extension-scala#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <ul> 
   <li>Copyright (C) INA Lintaro</li> 
   <li>MIT License</li> 
  </ul> 
 </article>
</div>