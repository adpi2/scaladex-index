<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-evrythng-scala-sdk" class="anchor" href="https://github.com/jeanadrien/evrythng-scala-sdk#evrythng-scala-sdk" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Evrythng Scala SDK</h1> 
  <p>This is <em>Evrythng Scala SDK</em> An unofficial Scala library for the <a href="http://evrythng.com" target="_blank">EVRYTHNG</a> API. Features include</p> 
  <ul> 
   <li>Case Classes for the EVRYTHNG model, built with <a href="https://github.com/spray/spray-json" target="_blank">spray-json</a>.</li> 
   <li>Low level asynchronous REST http wrapper.</li> 
   <li>Higher level API browsing dsl.</li> 
   <li>Abstraction on http client, and ready-to-use adapters for <a href="https://hc.apache.org/httpcomponents-client-ga/" target="_blank">Apache HttpComponents</a> and Play Framework <a href="https://www.playframework.com/documentation/2.5.x/ScalaWS" target="_blank">WS Api</a></li> 
  </ul> 
  <h1><a id="user-content-documentation" class="anchor" href="https://github.com/jeanadrien/evrythng-scala-sdk#documentation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Documentation</h1> 
  <p>Evrythng Scala SDK gives and structures access to the different resources provided by the EVRYTHNG IoT Platform. It allows a type safe interaction with the EVRYTHNG model, and an easy integration within any Scala projects.</p> 
  <p>For a complete documentation about the EVRYTHNG Api, its <em>Resources</em> and corresponding endpoints, please refer to the official <a href="https://developers.evrythng.com/" target="_blank">EVRYTHNG Developer Hub</a>.</p> 
  <h2><a id="user-content-library-dependency" class="anchor" href="https://github.com/jeanadrien/evrythng-scala-sdk#library-dependency" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Library dependency</h2> 
  <p>TODO</p> 
  <h2><a id="user-content-examples" class="anchor" href="https://github.com/jeanadrien/evrythng-scala-sdk#examples" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Examples</h2> 
  <p>The entry point of the sdk is the <code>Environment</code> object. It provides the basic REST request methods. All model classes are available in <code>com.github.jeanadrien.evrythng.scala.json</code> package.</p> 
  <h3><a id="user-content-make-an-http-rest-request" class="anchor" href="https://github.com/jeanadrien/evrythng-scala-sdk#make-an-http-rest-request" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Make an http REST request</h3> 
  <p>The simplest way to use the sdk is to use the REST method directly on your <em>Authenticated</em> environment object.</p> 
  <p>The coresponding <code>get</code> <code>put</code> <code>post</code> and <code>delete</code> methods takes the expected json type as a <em>type parameter</em> and the target <em>endpoint</em> and if applicable <em>input</em> as method parameter. They return a <code>EvtRequest</code> which can then be executed using <code>exec</code> method to get a <code>Future</code>.</p> 
  <p>Note that you can use the model provided in the <code>json</code> pacakge, as well as the spray <code>JsValue</code> class.</p> 
  <p>Here is an example using an <em>Operator API key</em>. You can create your own account and get your <em>Operation API key</em> via the <a href="https://dashboard.evrythng.com" target="_blank">EVRYTHNG Dashboard</a></p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.github.jeanadrien.evrythng.scala.rest.</span><span class="pl-v">Environment</span>
<span class="pl-k">import</span> <span class="pl-v">com.github.jeanadrien.evrythng.scala.json.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">EvtJsonProtocol.</span><span class="pl-v">_</span>

<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">ExecutionContext.Implicits.</span><span class="pl-v">global</span>
<span class="pl-k">import</span> <span class="pl-v">scala.util.</span>{<span class="pl-v">Success</span>, <span class="pl-v">Failure</span>}

<span class="pl-k">val</span> <span class="pl-en">env</span> <span class="pl-k">=</span> <span class="pl-en">Environment</span>.operatorApi(<span class="pl-s"><span class="pl-pds">"</span>MY-OPERATOR-API-KEY<span class="pl-pds">"</span></span>)

<span class="pl-c"><span class="pl-c">//</span> Create an read a thng</span>
(<span class="pl-k">for</span> {
    create <span class="pl-k">&lt;</span><span class="pl-k">-</span> env.post[<span class="pl-en">Thng</span>, <span class="pl-en">Thng</span>](<span class="pl-s"><span class="pl-pds">"</span>/thngs<span class="pl-pds">"</span></span>, <span class="pl-en">Thng</span>(
                  name <span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>This is a test<span class="pl-pds">"</span></span>)
              )).exec 
    read <span class="pl-k">&lt;</span><span class="pl-k">-</span> env.get[<span class="pl-en">Thng</span>](s<span class="pl-s"><span class="pl-pds">"</span>/thngs/${create.id.get.id}<span class="pl-pds">"</span></span>).exec
} <span class="pl-k">yield</span> read) onComplete {
    <span class="pl-k">case</span> <span class="pl-en">Success</span>(t) <span class="pl-k">=&gt;</span>
        println(s<span class="pl-s"><span class="pl-pds">"</span>Loaded Thng '${t}'<span class="pl-pds">"</span></span>)
    <span class="pl-k">case</span> <span class="pl-en">Failure</span>(error) <span class="pl-k">=&gt;</span>
        println(s<span class="pl-s"><span class="pl-pds">"</span>Got error: ${error}<span class="pl-pds">"</span></span>)    
}
</pre>
  </div> 
  <h3><a id="user-content-structured-api" class="anchor" href="https://github.com/jeanadrien/evrythng-scala-sdk#structured-api" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Structured API</h3> 
  <p>Instead of building the <em>endpoint</em> urls and give the possibily wrong json Type, you can use the structured API which build the <code>EvtRequest</code> with the correct url and type parameters. Each endpoints can be constructed by a natural method chaining, following the API endpoint structure.</p> 
  <ul> 
   <li>E.g. to access <code>/thngs/&lt;id&gt;/properties</code></li> 
  </ul> 
  <pre><code>env.thng(Ref("Uk7h9Qb2BgPw9pwRwgcAhqDq")).properties.list.exec onComplete {
    case Success(t) =&gt;
        println(s"Loaded ${t.items}")
    case Failure(error) =&gt;
        println(s"Cannot load thng properties: ${error}")    
}
</code></pre> 
  <ul> 
   <li>Create a product <em>scan</em> action <code>/products/&lt;id&gt;/actions/scans</code></li> 
  </ul> 
  <pre><code>env.product(Ref("Uk7FRRBwBgsaQpRaRYHQ2Akn")).actions("scans").create(Action()).exec onComplete {
    case Success(a) =&gt;
        println(s"Created ${a}")
    case Failure(error) =&gt;
        println(s"Cannot create action: ${error}")    
}
</code></pre> 
  <p>The <em>Structured API</em> logic is:</p> 
  <ul> 
   <li>The resource API is accessible using the same methods than the <em>path elements</em> of the resource</li> 
   <li>The resource API provides the http methods <em>CRUD</em> operations <code>create</code>, <code>read</code>, <code>update</code> and <code>delete</code>.</li> 
   <li>Additionally to support the pagination a <code>list</code> operation returns a <code>EvtRequest</code> to iterate through pages (see example here below)</li> 
  </ul> 
  <h3><a id="user-content-pagination" class="anchor" href="https://github.com/jeanadrien/evrythng-scala-sdk#pagination" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Pagination</h3> 
  <p>When a <em>GET</em> requests on an endpoint returns a Json array. The EVRYTHNG Api limits the number of result and provides the next page link into the <em>Link</em> http header.</p> 
  <p>The <code>list</code> method of the Structured API provides a <code>Page</code> objects which encapsulate both the results and the possible next page <em>link</em>. Simply pass the page to the <code>nextPage</code> method on your <em>Environment</em> to get the next results:</p> 
  <pre><code>
(for {
  page1 &lt;- env.thngs.list.perPage(2).exec
  page2 &lt;- env.nextPage(page1).get.exec
} yield (page1, page2)) onComplete { case Success((page1, page2)) =&gt;
        println(s"Page one contains ${page1.items}. Page two contains ${page2.items}")
    case Failure(error) =&gt;
        println(s"Cannot list thngs: ${error}") 
}

</code></pre> 
  <h3><a id="user-content-using-another-http-client" class="anchor" href="https://github.com/jeanadrien/evrythng-scala-sdk#using-another-http-client" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Using another http client</h3> 
  <p>By default the Evrythng Scala sdk uses the Play WS API as an http clients. It expects the corresponding jar to be available at runtime.</p> 
  <p>If you want to use another implementation, inject the implementation class name in the property <code>sdk.httpClient</code>. You can use any other http client as long as it implements <code>com.github.jeanadrien.evrythng.scala.rest.HttpRestClient</code></p> 
  <p>E.g. if you want to use the packaged <em>Apache Http Components</em> adapter:</p> 
  <pre><code>$ sbt -Dsdk.httpClient="com.github.jeanadrien.evrythng.scala.httpclient.ApacheHttpClient"
</code></pre> 
  <h3><a id="user-content-more-examples" class="anchor" href="https://github.com/jeanadrien/evrythng-scala-sdk#more-examples" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>More examples</h3> 
  <p>More examples can be found in the test code.</p> 
  <p>Also the <em>Scala REPL</em> tool and its completion feature are useful to interact with the Evryhtng API using the sdk:</p> 
  <div class="highlight highlight-text-shell-session">
   <pre>$ <span class="pl-s1">sbt console</span>
</pre>
  </div> 
  <h2><a id="user-content-contributing" class="anchor" href="https://github.com/jeanadrien/evrythng-scala-sdk#contributing" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Contributing</h2> 
  <p>All suggestions and questions welcome via any channel, including Gitter. Feature requests to support particular use cases are welcome.</p> 
  <p>Please use this <a href="https://github.com/jeanadrien/evrythng-scala-sdk/blob/master/evrythng-scala-sdk.xml" target="_blank">code style</a> file for IntelliJ</p> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/jeanadrien/evrythng-scala-sdk#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p><a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License, Version 2.0</a></p> 
  <p>See LICENSE-2.0.txt.</p> 
 </article>
</div>