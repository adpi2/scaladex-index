<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a href="https://github.com/pyppe/play-simple-auth#play-simple-auth" aria-hidden="true" class="anchor" id="user-content-play-simple-auth" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>play-simple-auth</h1> 
  <p>Provides <strong>simple</strong> authentication via OAuth. Supported providers: <em>Facebook</em>, <em>Google</em>, <em>Github</em>, <em>Linkedin</em> and <em>Twitter</em>.</p> 
  <p>See demo application running in <a href="http://play-simple-auth.pyppe.fi" target="_blank">http://play-simple-auth.pyppe.fi</a> (source code in <a href="https://github.com/Pyppe/play-simple-auth-example" target="_blank">Pyppe/play-simple-auth-example.git</a>)</p> 
  <h2><a href="https://github.com/pyppe/play-simple-auth#usage" aria-hidden="true" class="anchor" id="user-content-usage" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <h4><a href="https://github.com/pyppe/play-simple-auth#1-add-dependency-in-buildsbt" aria-hidden="true" class="anchor" id="user-content-1-add-dependency-in-buildsbt" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>1. Add dependency in <code>build.sbt</code></h4> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  ws, <span class="pl-c"><span class="pl-c">//</span> play-simple-auth uses play-ws as a provided dependency</span>
  <span class="pl-s"><span class="pl-pds">"</span>fi.pyppe<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>play-simple-auth<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.0<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <h4><a href="https://github.com/pyppe/play-simple-auth#2-create-two-actions-in-a-controller" aria-hidden="true" class="anchor" id="user-content-2-create-two-actions-in-a-controller" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>2. Create two actions in a <code>Controller</code></h4> 
  <p>For example:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">fi.pyppe.simpleauth.</span>{<span class="pl-v">Auth</span>, <span class="pl-v">UserResponse</span>}
<span class="pl-c"><span class="pl-c">//</span> Implicits we need:</span>
<span class="pl-k">import</span> <span class="pl-v">play.api.Play.</span><span class="pl-v">current</span>
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.ExecutionContext.Implicits.</span><span class="pl-v">global</span>

<span class="pl-k">object</span> <span class="pl-en">Application</span> <span class="pl-k">extends</span> <span class="pl-e">Controller</span> {

  <span class="pl-k">def</span> <span class="pl-en">authenticate</span>(<span class="pl-v">provider</span>: <span class="pl-k">String</span>) <span class="pl-k">=</span> <span class="pl-en">Action</span>.async { <span class="pl-k">implicit</span> req <span class="pl-k">=&gt;</span>
    <span class="pl-en">Auth</span>.initialize(provider) <span class="pl-c"><span class="pl-c">//</span> returns Future[Result]; concretely a redirect to given provider</span>
  }

  <span class="pl-k">def</span> <span class="pl-en">authenticateCallback</span>(<span class="pl-v">provider</span>: <span class="pl-k">String</span>) <span class="pl-k">=</span> <span class="pl-en">Action</span>.async { <span class="pl-k">implicit</span> req <span class="pl-k">=&gt;</span>
    <span class="pl-en">Auth</span>.callback(provider) { <span class="pl-k">case</span> <span class="pl-en">UserResponse</span>(user, userJson) <span class="pl-k">=&gt;</span>
      <span class="pl-c"><span class="pl-c">//</span> Do anything you want with the user. Typically save/update to DB, and set a session.</span>
      <span class="pl-c"><span class="pl-c">//</span> We will also provider the userJson JsValue for any specific needs.</span>
      <span class="pl-k">val</span> <span class="pl-en">internalUserId</span> <span class="pl-k">=</span> <span class="pl-en">DB</span>.insertOrUpdate(user) <span class="pl-c"><span class="pl-c">//</span> imaginary save</span>
      <span class="pl-en">Redirect</span>(<span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span>).withSession(<span class="pl-s"><span class="pl-pds">"</span>user.id<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> internalUserId, <span class="pl-s"><span class="pl-pds">"</span>user.name<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> user.name)
    }
  }
}</pre>
  </div> 
  <p>FYI: The signatures for the above-mentioned functions, and the UserResponse model, are as follows:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">def</span> <span class="pl-en">initialize</span>(<span class="pl-v">provider</span>: <span class="pl-k">String</span>)
              (<span class="pl-k">implicit</span> <span class="pl-v">app</span>: <span class="pl-en">Application</span>, <span class="pl-v">ec</span>: <span class="pl-en">ExecutionContext</span>, <span class="pl-v">req</span>: <span class="pl-en">Request</span>[_])<span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">Result</span>]

<span class="pl-k">def</span> <span class="pl-en">callback</span>(<span class="pl-v">provider</span>: <span class="pl-k">String</span>)(<span class="pl-v">handle</span>: <span class="pl-en">UserResponse</span> <span class="pl-k">=&gt;</span> <span class="pl-en">Result</span>)
            (<span class="pl-k">implicit</span> <span class="pl-v">app</span>: <span class="pl-en">Application</span>, <span class="pl-v">ec</span>: <span class="pl-en">ExecutionContext</span>, <span class="pl-v">req</span>: <span class="pl-en">Request</span>[_])<span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">Result</span>]

<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Identity</span>(<span class="pl-v">userId</span>: <span class="pl-k">String</span>, <span class="pl-v">provider</span>: <span class="pl-k">String</span>) <span class="pl-c"><span class="pl-c">//</span> provider, such as "facebook", or "twitter"</span>
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">User</span>(<span class="pl-v">identity</span>: <span class="pl-en">Identity</span>, <span class="pl-v">name</span>: <span class="pl-k">String</span>, <span class="pl-v">email</span>: <span class="pl-en">Option</span>[<span class="pl-k">String</span>], <span class="pl-v">image</span>: <span class="pl-en">Option</span>[<span class="pl-k">String</span>])
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">UserResponse</span>(<span class="pl-v">user</span>: <span class="pl-en">User</span>, <span class="pl-v">json</span>: <span class="pl-en">JsValue</span>)</pre>
  </div> 
  <h4><a href="https://github.com/pyppe/play-simple-auth#3-define-the-above-mentioned-actions-in-the-routes-file" aria-hidden="true" class="anchor" id="user-content-3-define-the-above-mentioned-actions-in-the-routes-file" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>3. Define the above-mentioned actions in the <code>routes</code> file</h4> 
  <p>For example:</p> 
  <pre><code>GET     /authenticate/:provider            controllers.Application.authenticate(provider: String)
GET     /authenticate/:provider/callback   controllers.Application.authenticateCallback(provider: String)
</code></pre> 
  <h4><a href="https://github.com/pyppe/play-simple-auth#4-define-your-provider-settings-in-applicationconf" aria-hidden="true" class="anchor" id="user-content-4-define-your-provider-settings-in-applicationconf" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>4. Define your provider settings in <code>application.conf</code></h4> 
  <pre><code>simple-auth {
  # Relative or absolute callback uri (same as you have defined in routes file)
  redirectUri = "/authenticate/:provider/callback"
  facebook {
    clientId = "${FB_CLIENT_ID}"
    clientSecret = "${FB_SECRET}"
    scope = "email"
  }
  github {
    clientId = "${GITHUB_CLIENT_ID}"
    clientSecret = "${GITHUB_SECRET}"
    scope = "user:email"
  }
  google {
    clientId = "${GOOGLE_CLIENT_ID}"
    clientSecret = "${GOOGLE_SECRET}"
    scope = "openid profile email"
  }
  linkedin {
    clientId = "${LINKEDIN_CLIENT_ID}"
    clientSecret = "${LINKEDIN_SECRET}"
    scope = "r_basicprofile r_emailaddress"
  }
  twitter {
    consumerKey = "${TWITTER_CONSUMER_KEY}"
    consumerSecret = "${TWITTER_CONSUMER_SECRET}"
  }
}
</code></pre> 
 </article>
</div>