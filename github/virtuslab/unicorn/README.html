<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-scala-slick-type-safe-ids" class="anchor" href="https://github.com/virtuslab/unicorn#scala-slick-type-safe-ids" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scala Slick type-safe ids</h1> 
  <p><a href="https://gitter.im/VirtusLab/unicorn?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Join the chat at https://gitter.im/VirtusLab/unicorn" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg" style="max-width:100%;"></a> <a href="https://travis-ci.org/VirtusLab/unicorn" target="_blank"><img src="https://camo.githubusercontent.com/2cf5c9624738b05b18dea6a341169731241b8c35/68747470733a2f2f7472617669732d63692e6f72672f5669727475734c61622f756e69636f726e2e7376673f6272616e63683d76302e362e782d736c69636b2d322e312e78" alt="Build Status" data-canonical-src="https://travis-ci.org/VirtusLab/unicorn.svg?branch=v0.6.x-slick-2.1.x" style="max-width:100%;"></a> <a href="https://coveralls.io/r/VirtusLab/unicorn?branch=v0.6.x-slick-2.1.x" target="_blank"><img src="https://camo.githubusercontent.com/ae628d8b69ac9e4798437b1e9c0e4722b460e346/68747470733a2f2f696d672e736869656c64732e696f2f636f766572616c6c732f5669727475734c61622f756e69636f726e2e737667" alt="Coverage Status" data-canonical-src="https://img.shields.io/coveralls/VirtusLab/unicorn.svg" style="max-width:100%;"></a></p> 
  <p>Slick (the Scala Language-Integrated Connection Kit) is a framework for type-safe, composable data access in Scala. This library adds tools to use type-safe IDs for your classes so you can no longer join on bad id field or mess up order of fields in mappings. It also provides a way to create data access layer with methods (like querying all, querying by id, saving or deleting) for all classes with such IDs in just 4 lines of code.</p> 
  <p>Idea for type-safe ids was derived from Slick creator's <a href="http://www.parleys.com/play/51c2e20de4b0d38b54f46243/chapter63/about" target="_blank">presentation on ScalaDays 2013</a>.</p> 
  <p>This library is used in <a href="https://github.com/VirtusLab/activator-play-advanced-slick" target="_blank">Advanced play-slick Typesafe Activator template</a>.</p> 
  <p>ScalaDoc API:</p> 
  <ul> 
   <li><a href="http://virtuslab.github.io/unicorn/unicorn-v1.1.0/unicorn-core-api/" target="_blank">unicorn-core 1.1.0</a></li> 
   <li><a href="http://virtuslab.github.io/unicorn/unicorn-v1.1.0/unicorn-play-api/" target="_blank">unicorn-play 1.1.0</a></li> 
  </ul> 
  <p>Unicorn is Open Source under <a href="https://github.com/virtuslab/unicorn/blob/master/LICENSE" target="_blank">Apache 2.0 license</a>.</p> 
  <h2><a id="user-content-contributors" class="anchor" href="https://github.com/virtuslab/unicorn#contributors" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Contributors</h2> 
  <ul> 
   <li><a href="https://github.com/Kwestor" target="_blank">Jerzy Müller</a></li> 
   <li><a href="https://github.com/romanowski" target="_blank">Krzysztof Romanowski</a></li> 
   <li><a href="https://github.com/bambuchaAdm" target="_blank">Łukasz Dubiel</a></li> 
   <li><a href="https://github.com/mgilbertnz" target="_blank">Matt Gilbert</a></li> 
   <li><a href="https://github.com/pbatko" target="_blank">Paweł Batko</a></li> 
   <li><a href="https://github.com/liosedhel" target="_blank">Krzysztof Borowski</a></li> 
   <li><a href="https://github.com/pdolega" target="_blank">Paweł Dolega</a></li> 
  </ul> 
  <p>Feel free to use it, test it and to contribute! For some helpful tips'n'tricks, see <a href="https://github.com/virtuslab/unicorn/blob/master/CONTRIBUTING.md" target="_blank">contribution guide</a>.</p> 
  <h2><a id="user-content-getting-unicorn" class="anchor" href="https://github.com/virtuslab/unicorn#getting-unicorn" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Getting unicorn</h2> 
  <p>For core latest version (Scala 2.11.x and Slick 3.1.x) use:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>org.virtuslab<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>unicorn-core<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.1.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>For play version (Scala 2.11.x, Slick 3.1.x, Play 2.5.x):</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>org.virtuslab<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>unicorn-play<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.1.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>Or see <a href="http://maven-repository.com/artifact/org.virtuslab/" target="_blank">our Maven repository</a>.</p> 
  <p>For Slick 3.1.x and play 2.5 see version <a href="https://github.com/VirtusLab/unicorn/tree/v1.1.x-slick-3.1.x" target="_blank"><code>1.1.x</code></a></p> 
  <p>For Slick 3.1.x and play 2.4 see version <a href="https://github.com/VirtusLab/unicorn/tree/v1.0.x-slick-3.1.x" target="_blank"><code>1.0.x</code></a></p> 
  <p>For Slick 3.0.x see version <a href="https://github.com/VirtusLab/unicorn/tree/v0.7.x-slick-3.0.x" target="_blank"><code>0.7.x</code></a></p> 
  <p>For Slick 2.1.x see version <a href="https://github.com/VirtusLab/unicorn/tree/v0.6.x-slick-2.1.x" target="_blank"><code>0.6.x</code></a></p> 
  <p>For Slick 2.0.x see version <a href="https://github.com/VirtusLab/unicorn/tree/v0.5.x-slick-2.0.x" target="_blank"><code>0.5.x</code></a>.</p> 
  <p>For Slick 1.x see version <a href="https://github.com/VirtusLab/unicorn/tree/v0.4.x-slick-1.0.x" target="_blank"><code>0.4.x</code></a>.</p> 
  <h1><a id="user-content-migration-from-older-versions" class="anchor" href="https://github.com/virtuslab/unicorn#migration-from-older-versions" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Migration from older versions</h1> 
  <p>See our <a href="https://github.com/virtuslab/unicorn/blob/master/MIGRATION.md" target="_blank">migration guide</a>.</p> 
  <h1><a id="user-content-play-examples" class="anchor" href="https://github.com/virtuslab/unicorn#play-examples" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Play Examples</h1> 
  <p>From version 0.5.0 forward dependency on Play! framework and <code>play-slick</code> library is no longer necessary.</p> 
  <p>If you are using Play! anyway, examples below show how to make use of <code>unicorn</code> then.</p> 
  <h2><a id="user-content-defining-entities" class="anchor" href="https://github.com/virtuslab/unicorn#defining-entities" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Defining entities</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">package</span> <span class="pl-en">model</span>

<span class="pl-k">import</span> <span class="pl-v">org.virtuslab.unicorn.</span>{<span class="pl-v">BaseId</span>, <span class="pl-v">WithId</span>}
<span class="pl-k">import</span> <span class="pl-v">org.virtuslab.unicorn.LongUnicornPlayIdentifiers.</span><span class="pl-v">_</span>

<span class="pl-c"><span class="pl-c">/**</span> Id class for type-safe joins and queries. <span class="pl-c">*/</span></span>
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">UserId</span>(<span class="pl-v">id</span>: <span class="pl-k">Long</span>) <span class="pl-k">extends</span> <span class="pl-e">AnyVal</span> <span class="pl-k">with</span> <span class="pl-e">BaseId</span>[<span class="pl-k">Long</span>]

<span class="pl-c"><span class="pl-c">/**</span> Companion object for id class, extends IdCompanion</span>
<span class="pl-c">  * and brings all required implicits to scope when needed.</span>
<span class="pl-c">  <span class="pl-c">*/</span></span>
<span class="pl-k">object</span> <span class="pl-en">UserId</span> <span class="pl-k">extends</span> <span class="pl-e">IdCompanion</span>[<span class="pl-en">UserId</span>]

<span class="pl-c"><span class="pl-c">/**</span> User entity.</span>
<span class="pl-c">  *</span>
<span class="pl-c">  * <span class="pl-k">@param</span> <span class="pl-v">id</span> user id</span>
<span class="pl-c">  * <span class="pl-k">@param</span> <span class="pl-v">email</span> user email address</span>
<span class="pl-c">  * <span class="pl-k">@param</span> <span class="pl-v">lastName</span> lastName</span>
<span class="pl-c">  * <span class="pl-k">@param</span> <span class="pl-v">firstName</span> firstName</span>
<span class="pl-c">  <span class="pl-c">*/</span></span>
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">UserRow</span>(<span class="pl-v">id</span>: <span class="pl-en">Option</span>[<span class="pl-en">UserId</span>],
                   <span class="pl-v">email</span>: <span class="pl-k">String</span>,
                   <span class="pl-v">firstName</span>: <span class="pl-k">String</span>,
                   <span class="pl-v">lastName</span>: <span class="pl-k">String</span>) <span class="pl-k">extends</span> <span class="pl-e">WithId</span>[<span class="pl-k">Long</span>, <span class="pl-en">UserId</span>]</pre>
  </div> 
  <h2><a id="user-content-defining-composable-repositories" class="anchor" href="https://github.com/virtuslab/unicorn#defining-composable-repositories" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Defining composable repositories</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">package</span> <span class="pl-en">repositories</span>
<span class="pl-c"><span class="pl-c">/**</span></span>
<span class="pl-c">  * A place for all objects directly connected with database.</span>
<span class="pl-c">  *</span>
<span class="pl-c">  * Put your user queries here.</span>
<span class="pl-c">  * Having them in separate in this trait keeps `UserRepository` neat and tidy.</span>
<span class="pl-c">  <span class="pl-c">*/</span></span>
<span class="pl-k">trait</span> <span class="pl-en">UserBaseRepositoryComponent</span> {
  <span class="pl-c1">self</span><span class="pl-k">:</span> <span class="pl-en">UnicornWrapper</span>[<span class="pl-k">Long</span>] <span class="pl-k">=&gt;</span>
  <span class="pl-k">import</span> <span class="pl-v">unicorn.</span><span class="pl-v">_</span>
  <span class="pl-k">import</span> <span class="pl-v">unicorn.driver.api.</span><span class="pl-v">_</span>


<span class="pl-c">  <span class="pl-c">/**</span> Table definition for users. <span class="pl-c">*/</span></span>
  <span class="pl-k">class</span> <span class="pl-en">Users</span>(<span class="pl-v">tag</span>: <span class="pl-en">Tag</span>) <span class="pl-k">extends</span> <span class="pl-e">IdTable</span>[<span class="pl-en">UserId</span>, <span class="pl-en">UserRow</span>](tag, <span class="pl-s"><span class="pl-pds">"</span>USERS<span class="pl-pds">"</span></span>) {

<span class="pl-c">    <span class="pl-c">/**</span> By definition id column is inserted as lowercase 'id',</span>
<span class="pl-c">      * if you want to change it, here is your setting.</span>
<span class="pl-c">      <span class="pl-c">*/</span></span>
    <span class="pl-k">protected</span> <span class="pl-k">override</span> <span class="pl-k">val</span> <span class="pl-en">idColumnName</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>ID<span class="pl-pds">"</span></span>

    <span class="pl-k">def</span> <span class="pl-en">email</span> <span class="pl-k">=</span> column[<span class="pl-k">String</span>](<span class="pl-s"><span class="pl-pds">"</span>EMAIL<span class="pl-pds">"</span></span>)

    <span class="pl-k">def</span> <span class="pl-en">firstName</span> <span class="pl-k">=</span> column[<span class="pl-k">String</span>](<span class="pl-s"><span class="pl-pds">"</span>FIRST_NAME<span class="pl-pds">"</span></span>)

    <span class="pl-k">def</span> <span class="pl-en">lastName</span> <span class="pl-k">=</span> column[<span class="pl-k">String</span>](<span class="pl-s"><span class="pl-pds">"</span>LAST_NAME<span class="pl-pds">"</span></span>)

    <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">*</span> <span class="pl-k">=</span> (id.<span class="pl-k">?</span>, email, firstName, lastName) <span class="pl-k">&lt;&gt;</span>(<span class="pl-en">UserRow</span>.tupled, <span class="pl-en">UserRow</span>.unapply)

  }

  <span class="pl-k">class</span> <span class="pl-en">UserBaseRepository</span>
    <span class="pl-k">extends</span> <span class="pl-e">BaseIdRepository</span>[<span class="pl-en">UserId</span>, <span class="pl-en">UserRow</span>, <span class="pl-en">Users</span>](<span class="pl-en">TableQuery</span>[<span class="pl-en">Users</span>])

  <span class="pl-k">val</span> <span class="pl-en">userBaseRepository</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">UserBaseRepository</span>

}
<span class="pl-k">@</span><span class="pl-en">Singleton</span>()
<span class="pl-k">class</span> <span class="pl-en">UserRepository</span> <span class="pl-k">@</span><span class="pl-en">Inject</span>() (<span class="pl-k">val</span> <span class="pl-en">unicorn</span><span class="pl-k">:</span> <span class="pl-en">LongUnicornPlayJDBC</span>)
  <span class="pl-k">extends</span> <span class="pl-e">UserBaseRepositoryComponent</span> <span class="pl-k">with</span> <span class="pl-e">UnicornWrapper</span>[<span class="pl-k">Long</span>] {

  <span class="pl-k">import</span> <span class="pl-v">unicorn.driver.api.</span><span class="pl-v">_</span>

  <span class="pl-k">def</span> <span class="pl-en">save</span>(<span class="pl-v">user</span>: <span class="pl-en">UserRow</span>)<span class="pl-k">:</span> <span class="pl-en">DBIO</span>[<span class="pl-en">UserId</span>] <span class="pl-k">=</span> {
    userBaseRepository.save(user)
  }
}</pre>
  </div> 
  <h2><a id="user-content-usage" class="anchor" href="https://github.com/virtuslab/unicorn#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">package</span> <span class="pl-en">repositories</span>

<span class="pl-k">import</span> <span class="pl-v">model.</span><span class="pl-v">UserRow</span>

<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.ExecutionContext.Implicits.</span><span class="pl-v">global</span>

<span class="pl-k">class</span> <span class="pl-en">UsersRepositoryTest</span> <span class="pl-k">extends</span> <span class="pl-e">BasePlayTest</span> <span class="pl-k">with</span> <span class="pl-e">UserBaseRepositoryComponent</span> {

  <span class="pl-s"><span class="pl-pds">"</span>Users Repository<span class="pl-pds">"</span></span> should <span class="pl-s"><span class="pl-pds">"</span>save and query users<span class="pl-pds">"</span></span> in runWithRollback {

    <span class="pl-k">val</span> <span class="pl-en">user</span> <span class="pl-k">=</span> <span class="pl-en">UserRow</span>(<span class="pl-c1">None</span>, <span class="pl-s"><span class="pl-pds">"</span>test@email.com<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Krzysztof<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Nowak<span class="pl-pds">"</span></span>)
    <span class="pl-k">val</span> <span class="pl-en">action</span> <span class="pl-k">=</span> <span class="pl-k">for</span> {
      _ <span class="pl-k">&lt;</span><span class="pl-k">-</span> userBaseRepository.create
      userId <span class="pl-k">&lt;</span><span class="pl-k">-</span> userBaseRepository.save(user)
      userOpt <span class="pl-k">&lt;</span><span class="pl-k">-</span> userBaseRepository.findById(userId)
    } <span class="pl-k">yield</span> userOpt

    action.map { userOpt <span class="pl-k">=&gt;</span>
      userOpt.map(_.email) shouldEqual <span class="pl-en">Some</span>(user.email)
      userOpt.map(_.firstName) shouldEqual <span class="pl-en">Some</span>(user.firstName)
      userOpt.map(_.lastName) shouldEqual <span class="pl-en">Some</span>(user.lastName)
      userOpt.flatMap(_.id) should not be (<span class="pl-c1">None</span>)
    }
  }
}</pre>
  </div> 
  <h1><a id="user-content-core-examples" class="anchor" href="https://github.com/virtuslab/unicorn#core-examples" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Core Examples</h1> 
  <p>If you do not want to include Play! but still want to use unicorn, <code>unicorn-core</code> will make it available for you.</p> 
  <h2><a id="user-content-preparing-unicorn-to-work" class="anchor" href="https://github.com/virtuslab/unicorn#preparing-unicorn-to-work" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Preparing Unicorn to work</h2> 
  <p>First you have to bake your own cake to provide <code>unicorn</code> with proper driver (in example case H2), as also build new object for Long ID support in entities:</p> 
  <pre><code>package infra

object LongUnicornIdentifiers extends Identifiers[Long] {
  override def ordering: Ordering[Long] = implicitly[Ordering[Long]]

  override type IdCompanion[Id &lt;: BaseId[Long]] = CoreCompanion[Id]
}

object Unicorn
    extends LongUnicornCore
    with HasJdbcDriver {

  override lazy val driver = H2Driver
}
</code></pre> 
  <p>Then you can use that cake to import driver and types provided by <code>unicorn</code> as shown in next sections.</p> 
  <h2><a id="user-content-defining-entities-1" class="anchor" href="https://github.com/virtuslab/unicorn#defining-entities-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Defining entities</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">package</span> <span class="pl-en">model</span>

<span class="pl-k">import</span> <span class="pl-v">infra.LongUnicornIdentifiers.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">infra.Unicorn.driver.api.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">slick.lifted.</span><span class="pl-v">Tag</span>

<span class="pl-c"><span class="pl-c">/**</span> Id class for type-safe joins and queries. <span class="pl-c">*/</span></span>
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">UserId</span>(<span class="pl-v">id</span>: <span class="pl-k">Long</span>) <span class="pl-k">extends</span> <span class="pl-e">AnyVal</span> <span class="pl-k">with</span> <span class="pl-e">BaseId</span>[<span class="pl-k">Long</span>]

<span class="pl-c"><span class="pl-c">/**</span> Companion object for id class, extends IdMapping</span>
<span class="pl-c">  * and brings all required implicits to scope when needed.</span>
<span class="pl-c">  <span class="pl-c">*/</span></span>
<span class="pl-k">object</span> <span class="pl-en">UserId</span> <span class="pl-k">extends</span> <span class="pl-e">IdCompanion</span>[<span class="pl-en">UserId</span>]

<span class="pl-c"><span class="pl-c">/**</span> User entity.  <span class="pl-c">*/</span></span>
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">UserRow</span>(<span class="pl-v">id</span>: <span class="pl-en">Option</span>[<span class="pl-en">UserId</span>],
                <span class="pl-v">email</span>: <span class="pl-k">String</span>,
                <span class="pl-v">firstName</span>: <span class="pl-k">String</span>,
                <span class="pl-v">lastName</span>: <span class="pl-k">String</span>) <span class="pl-k">extends</span> <span class="pl-e">WithId</span>[<span class="pl-k">Long</span>, <span class="pl-en">UserId</span>]

<span class="pl-c"><span class="pl-c">/**</span> Table definition for users. <span class="pl-c">*/</span></span>
<span class="pl-k">class</span> <span class="pl-en">Users</span>(<span class="pl-v">tag</span>: <span class="pl-en">Tag</span>) <span class="pl-k">extends</span> <span class="pl-e">IdTable</span>[<span class="pl-en">UserId</span>, <span class="pl-en">UserRow</span>](tag, <span class="pl-s"><span class="pl-pds">"</span>USERS<span class="pl-pds">"</span></span>) {

  <span class="pl-c"><span class="pl-c">//</span> use this property if you want to change name of `id` column to uppercase</span>
  <span class="pl-c"><span class="pl-c">//</span> you need this on H2 for example</span>
  <span class="pl-k">override</span> <span class="pl-k">val</span> <span class="pl-en">idColumnName</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>ID<span class="pl-pds">"</span></span>

  <span class="pl-k">def</span> <span class="pl-en">email</span> <span class="pl-k">=</span> column[<span class="pl-k">String</span>](<span class="pl-s"><span class="pl-pds">"</span>EMAIL<span class="pl-pds">"</span></span>)

  <span class="pl-k">def</span> <span class="pl-en">firstName</span> <span class="pl-k">=</span> column[<span class="pl-k">String</span>](<span class="pl-s"><span class="pl-pds">"</span>FIRST_NAME<span class="pl-pds">"</span></span>)

  <span class="pl-k">def</span> <span class="pl-en">lastName</span> <span class="pl-k">=</span> column[<span class="pl-k">String</span>](<span class="pl-s"><span class="pl-pds">"</span>LAST_NAME<span class="pl-pds">"</span></span>)

  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">*</span> <span class="pl-k">=</span> (id.<span class="pl-k">?</span>, email, firstName, lastName) <span class="pl-k">&lt;&gt;</span> (<span class="pl-en">UserRow</span>.tupled, <span class="pl-en">UserRow</span>.unapply)
}</pre>
  </div> 
  <h2><a id="user-content-defining-repositories" class="anchor" href="https://github.com/virtuslab/unicorn#defining-repositories" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Defining repositories</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">package</span> <span class="pl-en">repositories</span>

<span class="pl-k">import</span> <span class="pl-v">infra.Unicorn.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">infra.Unicorn.driver.api.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">model.</span><span class="pl-v">_</span>

<span class="pl-c"><span class="pl-c">/**</span></span>
<span class="pl-c"> * Repository for users.</span>
<span class="pl-c"> *</span>
<span class="pl-c"> * It brings all base repository methods with it from [[<span class="pl-e">BaseIdRepository</span>]], but you can add yours as well.</span>
<span class="pl-c"> *</span>
<span class="pl-c"> * Use your favourite DI method to instantiate it in your application.</span>
<span class="pl-c"> <span class="pl-c">*/</span></span>
<span class="pl-k">class</span> <span class="pl-en">UsersRepository</span> <span class="pl-k">extends</span> <span class="pl-e">BaseIdRepository</span>[<span class="pl-en">UserId</span>, <span class="pl-en">UserRow</span>, <span class="pl-en">Users</span>](<span class="pl-en">TableQuery</span>[<span class="pl-en">Users</span>])</pre>
  </div> 
  <h2><a id="user-content-usage-1" class="anchor" href="https://github.com/virtuslab/unicorn#usage-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">package</span> <span class="pl-en">repositories</span>

<span class="pl-k">import</span> <span class="pl-v">model.</span><span class="pl-v">UserRow</span>
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.ExecutionContext.Implicits.</span><span class="pl-v">global</span>


<span class="pl-k">class</span> <span class="pl-en">UsersRepositoryTest</span> <span class="pl-k">extends</span> <span class="pl-e">BaseTest</span>[<span class="pl-k">Long</span>] {

  <span class="pl-k">val</span> <span class="pl-en">usersRepository</span><span class="pl-k">:</span> <span class="pl-en">UsersRepository</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">UsersRepository</span>

  <span class="pl-s"><span class="pl-pds">"</span>Users Service<span class="pl-pds">"</span></span> should <span class="pl-s"><span class="pl-pds">"</span>save and query users<span class="pl-pds">"</span></span> in runWithRollback {
    <span class="pl-k">val</span> <span class="pl-en">user</span> <span class="pl-k">=</span> <span class="pl-en">UserRow</span>(<span class="pl-c1">None</span>, <span class="pl-s"><span class="pl-pds">"</span>test@email.com<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Krzysztof<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Nowak<span class="pl-pds">"</span></span>)

    <span class="pl-k">val</span> <span class="pl-en">actions</span> <span class="pl-k">=</span> <span class="pl-k">for</span> {
      _ <span class="pl-k">&lt;</span><span class="pl-k">-</span> usersRepository.create
      userId <span class="pl-k">&lt;</span><span class="pl-k">-</span> usersRepository.save(user)
      user <span class="pl-k">&lt;</span><span class="pl-k">-</span> usersRepository.findById(userId)
    } <span class="pl-k">yield</span> user

    actions map { userOpt <span class="pl-k">=&gt;</span>
      userOpt shouldBe defined

      userOpt.value should have(
        <span class="pl-en">'email</span>(user.email),
        <span class="pl-en">'firstName</span>(user.firstName),
        <span class="pl-en">'lastName</span>(user.lastName)
      )
      userOpt.value.id shouldBe defined
    }
  }
}</pre>
  </div> 
  <h1><a id="user-content-defining-custom-underlying-type" class="anchor" href="https://github.com/virtuslab/unicorn#defining-custom-underlying-type" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Defining custom underlying type</h1> 
  <p>All reviews examples used <code>Long</code> as underlying <code>Id</code> type. From version <code>0.6.0</code> there is possibility to define own.</p> 
  <p>Let's use <code>String</code> as our type for <code>id</code>. So we should bake unicorn with <code>String</code> parametrization.</p> 
  <h2><a id="user-content-play-example" class="anchor" href="https://github.com/virtuslab/unicorn#play-example" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Play example</h2> 
  <pre><code>@Singleton()
class StringUnicornPlay @Inject() (dbConfig: DatabaseConfig[JdbcProfile]) extends UnicornPlay[String](dbConfig)

object StringUnicornPlayIdentifiers extends PlayIdentifiersImpl[String] {
  override val ordering: Ordering[String] = implicitly[Ordering[String]]
  override type IdCompanion[Id &lt;: BaseId[String]] = PlayCompanion[Id]
}
</code></pre> 
  <h2><a id="user-content-core-example" class="anchor" href="https://github.com/virtuslab/unicorn#core-example" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Core example</h2> 
  <pre><code>object StringUnicornIdentifiers extends Identifiers[String] {
  override def ordering: Ordering[String] = implicitly[Ordering[String]]

  override type IdCompanion[Id &lt;: BaseId[Long]] = CoreCompanion[Id]
}

object Unicorn
    extends UnicornCore[String]
    with HasJdbcDriver {

  override lazy val driver = H2Driver
}
</code></pre> 
  <p>Usage is same as in <code>Long</code> example. Main difference is that you should import classes from self-baked cake. The only concern is that <code>id</code> is auto-increment so we can't use arbitrary type there. We plan to solve this problem in next versions.</p> 
 </article>
</div>