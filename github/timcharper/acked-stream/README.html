<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a href="https://github.com/timcharper/acked-stream#acknowledged-streams" aria-hidden="true" class="anchor" id="user-content-acknowledged-streams" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Acknowledged Streams</h1> 
  <p>Author: Tim Harper</p> 
  <h2><a href="https://github.com/timcharper/acked-stream#versions" aria-hidden="true" class="anchor" id="user-content-versions" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Versions</h2> 
  <p>Please use the following table to guide you with Akka comptability:</p> 
  <table> 
   <thead> 
    <tr> 
     <th>acked-streams version</th> 
     <th>akka version</th> 
     <th>Scala</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td>2.0.x</td> 
     <td>akka-stream-experimental 2.0.x</td> 
     <td>2.10.x</td> 
    </tr> 
    <tr> 
     <td>2.1.x</td> 
     <td>akka-stream 2.4.x</td> 
     <td>2.11.x, 2.12.x</td> 
    </tr>
   </tbody>
  </table> 
  <p>Note that <code>2.1.x</code> and onward do not support Scala <code>2.10</code>, as Akka <code>2.4.x</code> does not support it, either.</p> 
  <h2><a href="https://github.com/timcharper/acked-stream#installation" aria-hidden="true" class="anchor" id="user-content-installation" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Installation</h2> 
  <p>Acknowledged Streams builds against akka-stream-experimental <code>1.0</code>.</p> 
  <p>Add the following to <code>build.sbt</code>:</p> 
  <pre><code>libraryDependencies += "com.timcharper" %% "acked-streams" % "1.0-RC1"
</code></pre> 
  <h2><a href="https://github.com/timcharper/acked-stream#motivation" aria-hidden="true" class="anchor" id="user-content-motivation" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Motivation</h2> 
  <p>TL; DR - <a href="http://tim.theenchanter.com/2015/07/the-need-for-acknowledgement-in-streams.html" target="_blank">http://tim.theenchanter.com/2015/07/the-need-for-acknowledgement-in-streams.html</a></p> 
  <p>Acknowledged Streams builds on Akka streams and provides the mechansim to receive signal when a message has completed it's flight through a stream pipeline (was filtered, or processed by some sink). By so doing, it provides the underlying component necessary for stream persistence. It safely supports operations that modify element cardinality, such as <code>grouped</code>, <code>groupedWithin</code>, <code>mapConcat</code>, etc. It's heavily tested to ensure that it is impossible for an element to complete its flight through the stream and not be acknowledged.</p> 
  <p>The first version uses Promise objects to signal acknowledgement upstream. While there are situations in which this is not ideal (IE: acknolwedgement does not backpressure), it is incredibly simple to implement, and Akka streams presently lacks the extensibility to implement acknowledgment as generally as it is implemented in this library.</p> 
  <h2><a href="https://github.com/timcharper/acked-stream#usage" aria-hidden="true" class="anchor" id="user-content-usage" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <p>You can construct an acknowledged source by providing it an Iterable or a Source of <code>(Promise[Unit], T)</code>. The <code>Promise[Unit]</code> must not be acknowledged. Any exceptions in the stream will be propagated to this promise, regardless of the stream Supervision Decider. On acknowledgement, the Promise is completed.</p> 
  <p>Examples:</p> 
  <pre><code>  val data = Stream.continually(Promise[Unit]) zip Range(1, Math.max(40, (Random.nextInt(200))))
  AckedSource(data).
    map(...).
    ... etc
</code></pre> 
  <p>See the <a href="https://github.com/timcharper/acked-stream-demo" target="_blank">demo project</a>, or the <a href="https://github.com/timcharper/acked-stream/tree/master/src/test/scala/com/timcharper/acked" target="_blank">acked-stream tests</a>.</p> 
  <h2><a href="https://github.com/timcharper/acked-stream#supported-operations" aria-hidden="true" class="anchor" id="user-content-supported-operations" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Supported operations</h2> 
  <p>The API mirrors the Akka Stream API where it is possible to positively correlate a stream element with an input element. AckedFlow and AckedSink are implemented and behave accordingly (where an AckedSink is responsible for message acknowledgmeent).</p> 
  <p>Notes on operations:</p> 
  <ul> 
   <li><code>filter</code>: If a element is filtered, it is acknowledged.</li> 
   <li><code>collect</code>: If a element is filtered, it is acknowledged.</li> 
   <li><code>mapConcat</code>: If the output is 0 elements, the element is acknowledged. If the output is &gt;= 2 elements, the original element is acknowledged after all resulting elements are acknowledged.</li> 
   <li><code>groupedWithin</code>, <code>grouped</code>: If <code>n</code> elements go into the a single group, then all <code>n</code> elements are acknowledged after the grouped element is acknowledged.</li> 
   <li><code>unsafe</code>: If you wish to have manual control over acknowledgement, call <code>unsafe</code> to get a Source[(Promise[Unit], T)]. Note, as the method name suggests, and if you forget to acknowledge a Promise, then it will be forever unacknowledged.</li> 
  </ul> 
  <h2><a href="https://github.com/timcharper/acked-stream#future-plans" aria-hidden="true" class="anchor" id="user-content-future-plans" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Future plans</h2> 
  <p>Rather than using <code>Promise</code> to signal acknowledgement, convert to use a series of <code>BidiFlow</code>.</p> 
 </article>
</div>