<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <p>Database and Binary Storage Interface with adapter(s), written in Scala</p> 
  <p><a href="https://travis-ci.org/SeanCheatham/scala-storage" target="_blank"><img src="https://camo.githubusercontent.com/8687bfdc896d74f6b1b154b8faf46935acdedf96/68747470733a2f2f7472617669732d63692e6f72672f5365616e436865617468616d2f7363616c612d73746f726167652e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/SeanCheatham/scala-storage.svg?branch=master" style="max-width:100%;"></a></p> 
  <h1><a id="user-content-overview" class="anchor" href="https://github.com/seancheatham/scala-storage#overview" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Overview</h1> 
  <p>This library serves two purposes: 1. Provide a common abstraction for accessing and manipulating databases and binary storage backends 2. Provide adapters for various databases and storage backends</p> 
  <p>I am a one-man show, so at best, what you see here is work I need in side projects. I've open-sourced this library because other people may find some of it useful.</p> 
  <h1><a id="user-content-usage" class="anchor" href="https://github.com/seancheatham/scala-storage#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h1> 
  <p>This library is written in Scala. It <em>might</em> interoperate with other JVM languages, but I make no guarantees.</p> 
  <p>This library uses Typesafe's Play JSON library for serialization of content. I hope to support other mechanisms at some point.</p> 
  <h2><a id="user-content-include-the-library-in-your-project" class="anchor" href="https://github.com/seancheatham/scala-storage#include-the-library-in-your-project" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Include the library in your project.</h2> 
  <p>In your build.sbt:</p> 
  <h3><a id="user-content-firebase" class="anchor" href="https://github.com/seancheatham/scala-storage#firebase" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Firebase</h3> 
  <p><code>libraryDependencies += "com.seancheatham" %% "storage-firebase" % "0.1.3"</code></p> 
  <h3><a id="user-content-google-cloud-storage" class="anchor" href="https://github.com/seancheatham/scala-storage#google-cloud-storage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Google Cloud Storage</h3> 
  <p><code>libraryDependencies += "com.seancheatham" %% "storage-google-cloud" % "0.1.3"</code></p> 
  <h2><a id="user-content-connect-to-a-database" class="anchor" href="https://github.com/seancheatham/scala-storage#connect-to-a-database" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Connect to a Database</h2> 
  <h3><a id="user-content-firebase-1" class="anchor" href="https://github.com/seancheatham/scala-storage#firebase-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Firebase</h3> 
  <ul> 
   <li>Setup a <a href="https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk" target="_blank">Firebase Service Account</a></li> 
   <li>Generate/Download a new Private Key</li> 
   <li>Store the key as you see fit, depending on your environment setup. Just remember the path to it.</li> 
  </ul> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">//</span> You will need to provide an ExecutionContext.  If you have one, use it, otherwise, you can use this:</span>
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.ExecutionContext.Implicits.</span><span class="pl-v">global</span>

<span class="pl-k">import</span> <span class="pl-v">com.seancheatham.storage.firebase.</span><span class="pl-v">FirebaseDatabase</span>
<span class="pl-k">val</span> <span class="pl-en">db</span><span class="pl-k">:</span> <span class="pl-en">FirebaseDatabase</span> <span class="pl-k">=</span>
    <span class="pl-en">FirebaseDatabase</span>.fromServiceAccountKey(<span class="pl-s"><span class="pl-pds">"</span>/path/to/key.json<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>https://address-of-firebase-app.firebaseio.com<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <h2><a id="user-content-write-a-value" class="anchor" href="https://github.com/seancheatham/scala-storage#write-a-value" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Write a value</h2> 
  <p>Write or overwrite a value at a path. If data already existed at the path, it will be completely replaced.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.seancheatham.storage.DocumentStorage.</span><span class="pl-v">DocumentStorage</span>
<span class="pl-k">import</span> <span class="pl-v">play.api.libs.json.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">db</span><span class="pl-k">:</span> <span class="pl-en">DocumentStorage</span>[<span class="pl-en">JsValue</span>] <span class="pl-k">=</span> <span class="pl-k">???</span>
<span class="pl-k">val</span> <span class="pl-en">value</span> <span class="pl-k">=</span> <span class="pl-en">JsString</span>(<span class="pl-s"><span class="pl-pds">"</span>Alan<span class="pl-pds">"</span></span>)
<span class="pl-k">val</span> <span class="pl-en">userId</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>
<span class="pl-k">val</span> <span class="pl-en">writeFuture</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[_] <span class="pl-k">=</span> 
  db.write(<span class="pl-s"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span>, userId, <span class="pl-s"><span class="pl-pds">"</span>firstName<span class="pl-pds">"</span></span>)(value)
</pre>
  </div> 
  <h2><a id="user-content-read-a-value" class="anchor" href="https://github.com/seancheatham/scala-storage#read-a-value" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Read a value</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">userId</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>
<span class="pl-k">val</span> <span class="pl-en">readFuture</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-k">String</span>] <span class="pl-k">=</span> 
  db.get(<span class="pl-s"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span>, userId, <span class="pl-s"><span class="pl-pds">"</span>firstName<span class="pl-pds">"</span></span>) <span class="pl-c"><span class="pl-c">//</span> References /users/1/firstName</span>
    .map(_.as[<span class="pl-k">String</span>])</pre>
  </div> 
  <p>If the value doesn't exist, the Future will fail with a <code>NoSuchElementException</code> Alternatively, if you know the value is generally optional, you can <em>lift</em> it instead.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">readOptionalFuture</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">Option</span>[<span class="pl-en">JsValue</span>]] <span class="pl-k">=</span>
    db.lift(<span class="pl-s"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span>, userId, <span class="pl-s"><span class="pl-pds">"</span>lastName<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <h2><a id="user-content-merge-a-value" class="anchor" href="https://github.com/seancheatham/scala-storage#merge-a-value" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Merge a value</h2> 
  <p>Merges the given value into the value located at the given path. For example:</p> 
  <p><em>Original</em></p> 
  <div class="highlight highlight-source-json">
   <pre>{
  <span class="pl-s"><span class="pl-pds">"</span>firstName<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Alan<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>email<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>alan@turning.machine<span class="pl-pds">"</span></span>

}</pre>
  </div> 
  <p><em>To Merge In</em></p> 
  <div class="highlight highlight-source-json">
   <pre>{
  <span class="pl-s"><span class="pl-pds">"</span>email<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>alan@saved.us<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>lastName<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Turing<span class="pl-pds">"</span></span>
}</pre>
  </div> 
  <p><em>Results In</em></p> 
  <div class="highlight highlight-source-json">
   <pre>{
  <span class="pl-s"><span class="pl-pds">"</span>firstName<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Alan<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>lastName<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Turing<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>email<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>alan@saved.us<span class="pl-pds">"</span></span>
}</pre>
  </div> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">value</span> <span class="pl-k">=</span> <span class="pl-en">Json</span>.obj(<span class="pl-s"><span class="pl-pds">"</span>email<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>alan@saved.us<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>lastName<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>Turing<span class="pl-pds">"</span></span>)
<span class="pl-k">val</span> <span class="pl-en">userId</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>
<span class="pl-k">val</span> <span class="pl-en">mergeFuture</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[_] <span class="pl-k">=</span> 
  db.merge(<span class="pl-s"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span>, userId)(value)</pre>
  </div> 
  <h2><a id="user-content-delete-a-value" class="anchor" href="https://github.com/seancheatham/scala-storage#delete-a-value" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Delete a value</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">userId</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>
<span class="pl-k">val</span> <span class="pl-en">deleteFuture</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[_] <span class="pl-k">=</span> 
  db.delete(<span class="pl-s"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span>, userId, <span class="pl-s"><span class="pl-pds">"</span>lastName<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <h2><a id="user-content-connect-to-a-file-store" class="anchor" href="https://github.com/seancheatham/scala-storage#connect-to-a-file-store" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Connect to a File Store</h2> 
  <h3><a id="user-content-google-cloud-storage-1" class="anchor" href="https://github.com/seancheatham/scala-storage#google-cloud-storage-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Google Cloud Storage</h3> 
  <ul> 
   <li>Setup a <a href="https://console.developers.google.com/permissions/serviceaccounts" target="_blank">Service Account</a></li> 
   <li>Generate/Download a new Private Key</li> 
   <li>Store the key as you see fit, depending on your environment setup. Just remember the path to it.</li> 
  </ul> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">//</span> You will need to provide an ExecutionContext.  If you have one, use it, otherwise, you can use this:</span>
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.ExecutionContext.Implicits.</span><span class="pl-v">global</span>

<span class="pl-k">import</span> <span class="pl-v">com.seancheatham.storage.gcloud.</span><span class="pl-v">GoogleCloudStorage</span>
<span class="pl-k">val</span> <span class="pl-en">storage</span><span class="pl-k">:</span> <span class="pl-en">GoogleCloudStorage</span> <span class="pl-k">=</span>
    <span class="pl-en">GoogleCloudStorage</span>(<span class="pl-s"><span class="pl-pds">"</span>PROJECT_ID<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>/path/to/key.json<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <h2><a id="user-content-write-a-file" class="anchor" href="https://github.com/seancheatham/scala-storage#write-a-file" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Write a File</h2> 
  <p>Write or overwrite the file at a key path. For bucket-based storage systems, like Google Cloud Storage, the first item in the key path represents the bucket.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">storage</span><span class="pl-k">:</span> <span class="pl-en">BinaryStorage</span> <span class="pl-k">=</span> <span class="pl-k">???</span>
<span class="pl-k">val</span> <span class="pl-en">bytes</span><span class="pl-k">:</span> <span class="pl-en">Iterator</span>[<span class="pl-k">Byte</span>] <span class="pl-k">=</span> <span class="pl-k">???</span>
<span class="pl-k">val</span> <span class="pl-en">future</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[_] <span class="pl-k">=</span>
  storage.write(<span class="pl-s"><span class="pl-pds">"</span>BUCKET_NAME<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>photos<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>picture.jpg<span class="pl-pds">"</span></span>)(bytes)</pre>
  </div> 
  <h2><a id="user-content-read-a-file" class="anchor" href="https://github.com/seancheatham/scala-storage#read-a-file" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Read a File</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">readFuture</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">Iterator</span>[<span class="pl-k">Byte</span>]] <span class="pl-k">=</span> 
  storage.get(<span class="pl-s"><span class="pl-pds">"</span>BUCKET_NAME<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>photos<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>picture.jpg<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>If the file doesn't exist, the Future will fail with a <code>NoSuchElementException</code> Alternatively, if you know the value is generally optional, you can <em>lift</em> it instead.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">readOptionalFuture</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">Option</span>[<span class="pl-en">Iterator</span>[<span class="pl-k">Byte</span>]]] <span class="pl-k">=</span>
    storage.lift(<span class="pl-s"><span class="pl-pds">"</span>BUCKET_NAME<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>photos<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>picture.jpg<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <h2><a id="user-content-delete-a-file" class="anchor" href="https://github.com/seancheatham/scala-storage#delete-a-file" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Delete a File</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">deleteFuture</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[_] <span class="pl-k">=</span> 
  storage.delete(<span class="pl-s"><span class="pl-pds">"</span>BUCKET_NAME<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>photos<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>picture.jpg<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <h2><a id="user-content-firebase-only" class="anchor" href="https://github.com/seancheatham/scala-storage#firebase-only" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>FIREBASE ONLY:</h2> 
  <p>Firebase provides functionality to attach listeners at key-paths in their realtime database. This allows your application to react to changes in data almost immediately after they occur. Firebase allows for listening to a value at a specific path, or for listening to children-changes at a specific path.</p> 
  <h3><a id="user-content-value-listeners" class="anchor" href="https://github.com/seancheatham/scala-storage#value-listeners" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Value Listeners:</h3> 
  <p>Listen for changes or deletions of a value at a given path.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.seancheatham.storage.firebase.</span><span class="pl-v">_</span>
<span class="pl-k">val</span> <span class="pl-en">db</span><span class="pl-k">:</span> <span class="pl-en">FirebaseDatabase</span> <span class="pl-k">=</span> <span class="pl-k">???</span>
<span class="pl-k">val</span> <span class="pl-en">watcherId</span> <span class="pl-k">=</span>
    db.watchValue(<span class="pl-s"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>firstName<span class="pl-pds">"</span></span>)(
        <span class="pl-c"><span class="pl-c">//</span> Provide as many handlers as you want</span>
        <span class="pl-c"><span class="pl-c">//</span> For example, if the value changes to a new value:</span>
        <span class="pl-en">ValueChangedHandler</span>(
          (<span class="pl-v">v</span>: <span class="pl-en">JsValue</span>) <span class="pl-k">=&gt;</span>
            println(s<span class="pl-s"><span class="pl-pds">"</span>Hello ${v.as[String]}.  It looks like you just changed your name!<span class="pl-pds">"</span></span>)
        ),
        <span class="pl-c"><span class="pl-c">//</span> Or if the value changes: </span>
        <span class="pl-en">ValueRemovedHandler</span>(
          () <span class="pl-k">=&gt;</span>
            println(<span class="pl-s"><span class="pl-pds">"</span>User #1 just removed his/her first name<span class="pl-pds">"</span></span>)
        )
    )(
      <span class="pl-c"><span class="pl-c">//</span> Optional cancellation/error handler</span>
      <span class="pl-en">Cancelled</span>(
        (<span class="pl-v">error</span>: <span class="pl-en">DatabaseError</span>) <span class="pl-k">=&gt;</span>
          println(s<span class="pl-s"><span class="pl-pds">"</span>Oops, something broke: $e<span class="pl-pds">"</span></span>)
      )
    )

<span class="pl-c"><span class="pl-c">//</span> Make sure to clean up the watcher when you are finished with it.</span>
db.unwatchValue(watcherId)</pre>
  </div> 
  <h3><a id="user-content-collection-listeners" class="anchor" href="https://github.com/seancheatham/scala-storage#collection-listeners" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Collection Listeners:</h3> 
  <p>Listen for changes, additions, or deletions to children at a given path. Children are sub-nodes of an object. Firebase does not use arrays; instead collections are represented as objects, where keys are sequential but not numeric. As such, you can listen in when a new child is added (or changed or deleted).</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.seancheatham.storage.firebase.</span><span class="pl-v">_</span>
<span class="pl-k">val</span> <span class="pl-en">db</span><span class="pl-k">:</span> <span class="pl-en">FirebaseDatabase</span> <span class="pl-k">=</span> <span class="pl-k">???</span>
<span class="pl-k">val</span> <span class="pl-en">watcherId</span> <span class="pl-k">=</span>
    db.watchCollection(<span class="pl-s"><span class="pl-pds">"</span>posts<span class="pl-pds">"</span></span>)(
        <span class="pl-c"><span class="pl-c">//</span> Attach as many handlers as you want</span>
        <span class="pl-c"><span class="pl-c">//</span> For example, when a child is added</span>
        <span class="pl-en">ChildAddedHandler</span> {
          (<span class="pl-v">post</span>: <span class="pl-en">JsValue</span>) <span class="pl-k">=&gt;</span>
            <span class="pl-k">val</span> <span class="pl-en">title</span> <span class="pl-k">=</span>
              post.as[<span class="pl-en">Map</span>[<span class="pl-k">String</span>, <span class="pl-en">JsValue</span>]](<span class="pl-s"><span class="pl-pds">"</span>title<span class="pl-pds">"</span></span>).as[<span class="pl-k">String</span>]
            println(s<span class="pl-s"><span class="pl-pds">"</span>New post added: $postTitle<span class="pl-pds">"</span></span>)
        }
    )( <span class="pl-c"><span class="pl-c">/*</span> Optional cancellation/error handler <span class="pl-c">*/</span></span>)

<span class="pl-c"><span class="pl-c">//</span> Make sure to clean up the watcher when you are finished with it.</span>
db.unwatchCollection(watcherId)</pre>
  </div> 
 </article>
</div>