<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-spocr" class="anchor" href="https://github.com/daandi/spocr#spocr" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>spOCR</h1> 
  <p>A Library to work with OCR files enriched with positional information</p> 
  <p><a href="https://camo.githubusercontent.com/790fb779743cfc8477e591b6541d59c04a8063de/68747470733a2f2f7777772e636f6465736869702e696f2f70726f6a656374732f63656137363061302d393837622d303133312d613061392d3665666236353639363565662f737461747573" target="_blank"><img src="https://camo.githubusercontent.com/790fb779743cfc8477e591b6541d59c04a8063de/68747470733a2f2f7777772e636f6465736869702e696f2f70726f6a656374732f63656137363061302d393837622d303133312d613061392d3665666236353639363565662f737461747573" alt="alt tag" data-canonical-src="https://www.codeship.io/projects/cea760a0-987b-0131-a0a9-6efb656965ef/status" style="max-width:100%;"></a></p> 
  <h1><a id="user-content-supported-file-formats" class="anchor" href="https://github.com/daandi/spocr#supported-file-formats" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Supported file-formats</h1> 
  <ul> 
   <li>AbbyyXML - XML-Format produced by AbbyyFineReader </li> 
   <li>hOCR - Google-Format for encoding scanned Documents in HTML</li> 
  </ul> 
  <h1><a id="user-content-usage" class="anchor" href="https://github.com/daandi/spocr#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h1> 
  <h1><a id="user-content-general-usage" class="anchor" href="https://github.com/daandi/spocr#general-usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>General Usage</h1> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">doc</span><span class="pl-k">:</span> <span class="pl-en">Document</span>
<span class="pl-c">// Iterators</span>
document pages
document lines
document words</pre>
  </div> 
  <h1><a id="user-content-abbyyxml" class="anchor" href="https://github.com/daandi/spocr#abbyyxml" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>AbbyyXML</h1> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">package</span> <span class="pl-en">com.an_it.ocr.format</span>

<span class="pl-k">import</span> <span class="pl-v">org.specs2.mutable.</span><span class="pl-v">Specification</span>
<span class="pl-k">import</span> <span class="pl-v">xml.</span><span class="pl-v">XML</span>
<span class="pl-k">import</span> <span class="pl-v">com.an_it.ocr.</span><span class="pl-v">temporaryHTMLView</span>
<span class="pl-k">import</span> <span class="pl-v">org.specs2.specification.</span><span class="pl-v">Scope</span>


<span class="pl-k">class</span> <span class="pl-en">AbbyyXMLSpec</span> <span class="pl-k">extends</span> <span class="pl-e">Specification</span> {
  <span class="pl-s"><span class="pl-pds">"</span>AbbyyXML<span class="pl-pds">"</span></span> should {

    <span class="pl-k">val</span> <span class="pl-en">xml</span> <span class="pl-k">=</span> <span class="pl-en">XML</span>.load( getClass.getResourceAsStream(<span class="pl-s"><span class="pl-pds">"</span>/abbyy_xml_example.xml<span class="pl-pds">"</span></span>))

    <span class="pl-s"><span class="pl-pds">"</span>load a document from a file<span class="pl-pds">"</span></span> in {
      <span class="pl-en">AbbyyXML</span>.documentFromFile(getClass.getResource(<span class="pl-s"><span class="pl-pds">"</span>/abbyy_xml_example.xml<span class="pl-pds">"</span></span>).getFile) mustEqual <span class="pl-en">AbbyyXML</span>.documentFromXML(xml)
    }

    <span class="pl-s"><span class="pl-pds">"</span>construct a Document from given XML<span class="pl-pds">"</span></span> in {
      <span class="pl-en">AbbyyXML</span>.documentFromXML(xml).pages map (_.toText.size) mustEqual <span class="pl-en">IndexedSeq</span>(<span class="pl-c1">2215</span>)
    }
    <span class="pl-s"><span class="pl-pds">"</span>construct a Page from given XML<span class="pl-pds">"</span></span> in {
      <span class="pl-en">AbbyyXML</span>.pageFromXML( xml \\ <span class="pl-s"><span class="pl-pds">"</span>page<span class="pl-pds">"</span></span> head).toText mustEqual
        <span class="pl-s"><span class="pl-pds">"""</span>§a Entste h ung der M a L e r i e.</span>
<span class="pl-s">           |und Empfindung seiner Wirkungen als Eigen-</span>
<span class="pl-s">           |thum gegeben char.</span>
<span class="pl-s">           |Aus dieser allmächtigen Quelle siud auch</span>
<span class="pl-s">           |die Kräfte genommen worden^ die der Vater</span>
<span class="pl-s">           |aller Geister/ der Macht des Mm- Milletts</span>
<span class="pl-s">           |verliehen hatte, und welche m ZWheit des</span>
<span class="pl-s">           |Willens, durch die WiMschast des Bösen mis-</span>
<span class="pl-s">           |Krauchte;^ Sie haben der in sie wirkenden Ur-</span>
<span class="pl-s">           |kraft widerstanden, und find von ihr geschie-</span>
<span class="pl-s">           |Den worden.</span>
<span class="pl-s">           |~- ■' ii&gt;' ' ■ •</span>
<span class="pl-s">           |. Wenn wir Wchdenken wollen , auf was</span>
<span class="pl-s">           |Art zwei elastische/Krafte einander, widerstehen,</span>
<span class="pl-s">           |so finden wir,. daß es durch eine Ausdehnung</span>
<span class="pl-s">           |der einen / und durch die Verengerung der an-</span>
<span class="pl-s">           |dern geschehen müsset zumal wenn leztere die</span>
<span class="pl-s">           |erste in sich faßt. Aus diesen beiden Vermögen</span>
<span class="pl-s">           |besteht Mtch wirklich die WaUcitat, . das Urwe-,</span>
<span class="pl-s">           |fin im Mwegung. — Die zmn Widerstände</span>
<span class="pl-s">           |MMauchte elaWsche Waft^verwandeltL sich also</span>
<span class="pl-s">           |in eine mächtige Ausdehnung ihrer selbst undl</span>
<span class="pl-s">           |mußte durch ein aus der göttlichen Kraft aus»</span>
<span class="pl-s">           |Segangenes zusammendrückendes Gesaz von allen</span>
<span class="pl-s">           |'Seiten umschlossen Mrden» ;„: -%</span>
<span class="pl-s">           |? Dieß gab aber nur eine einige Form die</span>
<span class="pl-s">           |erste und größte — einen Kreis; — den Grund-</span>
<span class="pl-s">           |tß aller andern; Denn jede Form, «nd was</span>
<span class="pl-s">           |0 : wir</span>
<span class="pl-s">           |/Entstehung der Materle.</span>
<span class="pl-s">           |wir in der körperlichen Welt wahrnehmen, ist</span>
<span class="pl-s">           |mit krummen Linien umschlossen; es kann also</span>
<span class="pl-s">           |aus diesem nrayfanglichen Cirkel weder die 33aitu</span>
<span class="pl-s">           |negfaltigkeiL der. Formen und die Menge ihrer</span>
<span class="pl-s">           |B.estandcheile, noch die Vermischung vot? Wv</span>
<span class="pl-s">           |drigkeiten, so wir überall antreffen, unmittel¬</span>
<span class="pl-s">           |bar hergeleitet werden. Folglich muß etwas vors</span>
<span class="pl-s">           |gegangen seyn, wodurch Theilung und Zusanv</span>
<span class="pl-s">           |mensezung der expansiven und eo^preßrben KraM</span>
<span class="pl-s">           |entstanden ist. Ich stelle mir die Sache unter</span>
<span class="pl-s">           |folgenden Möglichkeiten vor:</span>
<span class="pl-s">           |Das natürlichste Mittel, eine Kraft zu ver-</span>
<span class="pl-s">           |mindern, ist Um Zertheilung. mft&gt; glaube ich,</span>
<span class="pl-s">           |daß. die bessernde Weisheit Gottes Zuerst die vow</span>
<span class="pl-s">           |ihm geschiedne Kraft des WwerßMdes zerstört</span>
<span class="pl-s">           |und in kleine Kreise eingeschlosserrhabe; dadurch</span>
<span class="pl-s">           |sind die Elemente der Materie entstanden, welche</span>
<span class="pl-s">           |in. bestimmter Größe und Anzahl, undurchdring^</span>
<span class="pl-s">           |lich und unauflösbar sind.</span>
<span class="pl-s">           |Da die Vollkommenheit Gottes sich nicht</span>
<span class="pl-s">           |unmittelbar mit dem Bösen abgeben konnte, so</span>
<span class="pl-s">           |hat er vermuthlich Werkzeuge gebraucht, welche</span>
<span class="pl-s">           |eine verettgernde Kraft habest MßM, die ans-</span>
<span class="pl-s">           |treibende zn bestrette^</span>
<span class="pl-s">           |mm<span class="pl-pds">"""</span></span>.stripMargin
    }


    <span class="pl-s"><span class="pl-pds">"</span>construct a Line from given XML<span class="pl-pds">"</span></span> in {
      <span class="pl-en">AbbyyXML</span>.lineFromXML( xml \\ <span class="pl-s"><span class="pl-pds">"</span>line<span class="pl-pds">"</span></span> head).toText mustEqual <span class="pl-s"><span class="pl-pds">"""</span>§a Entste h ung der M a L e r i e.<span class="pl-pds">"""</span></span>
    }
    <span class="pl-s"><span class="pl-pds">"</span>get coordinates from XML Seq<span class="pl-pds">"</span></span> in {
      <span class="pl-en">AbbyyXML</span>.extractCoordinatesFromXML(
        &lt;<span class="pl-ent">line</span> <span class="pl-e">baseline</span>=<span class="pl-s"><span class="pl-pds">"</span>505<span class="pl-pds">"</span></span> <span class="pl-e">l</span>=<span class="pl-s"><span class="pl-pds">"</span>1155<span class="pl-pds">"</span></span> <span class="pl-e">t</span>=<span class="pl-s"><span class="pl-pds">"</span>427<span class="pl-pds">"</span></span> <span class="pl-e">r</span>=<span class="pl-s"><span class="pl-pds">"</span>2535<span class="pl-pds">"</span></span> <span class="pl-e">b</span>=<span class="pl-s"><span class="pl-pds">"</span>518<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">line</span>&gt;) mustEqual ((<span class="pl-c1">1155</span>,<span class="pl-c1">427</span>),(<span class="pl-c1">2535</span>,<span class="pl-c1">518</span>))

    }

    <span class="pl-s"><span class="pl-pds">"</span>given an imagePath toHTML should create an HTML on an image <span class="pl-pds">"</span></span> in <span class="pl-k">new</span> <span class="pl-en">temporaryHTMLView</span> <span class="pl-k">with</span> <span class="pl-e">exampleDoc</span>{
      <span class="pl-k">val</span> <span class="pl-en">img</span> <span class="pl-k">=</span> getClass.getResource(<span class="pl-s"><span class="pl-pds">"</span>/abbyy_xml_example.png<span class="pl-pds">"</span></span>).getFile
      savePageToFile(page.copy(imgPath <span class="pl-k">=</span> <span class="pl-en">Some</span>(img)).toHTML ,<span class="pl-s"><span class="pl-pds">"</span>test_abbyy_new.html<span class="pl-pds">"</span></span>)
      pending
    }


  }

  <span class="pl-k">trait</span> <span class="pl-en">exampleDoc</span> <span class="pl-k">extends</span> <span class="pl-e">Scope</span> {
    <span class="pl-k">val</span> <span class="pl-en">doc</span> <span class="pl-k">=</span> <span class="pl-en">AbbyyXML</span>.documentFromXML(<span class="pl-en">XML</span>.load( getClass.getResourceAsStream(<span class="pl-s"><span class="pl-pds">"</span>/abbyy_xml_example.xml<span class="pl-pds">"</span></span>)))
    <span class="pl-k">val</span> <span class="pl-en">page</span> <span class="pl-k">=</span> doc.pages head
  }

}
</pre>
  </div> 
  <h1><a id="user-content-hocr" class="anchor" href="https://github.com/daandi/spocr#hocr" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>hOCR</h1> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-s"><span class="pl-pds">"</span>A Document<span class="pl-pds">"</span></span> should {
   <span class="pl-k">val</span> <span class="pl-en">d</span> <span class="pl-k">=</span> <span class="pl-en">HOCR</span>.fromFolder(getClass.getResource(<span class="pl-s"><span class="pl-pds">"</span>/doc/hocr/<span class="pl-pds">"</span></span>).getFile)
   <span class="pl-s"><span class="pl-pds">"</span>add all Pages from Files in a given folder<span class="pl-pds">"</span></span> in {
     <span class="pl-en">HOCR</span>.fromFolder(getClass.getResource(<span class="pl-s"><span class="pl-pds">"</span>/doc/hocr/<span class="pl-pds">"</span></span>).getFile).length shouldEqual  <span class="pl-c1">2</span>
   }
   <span class="pl-s"><span class="pl-pds">"</span>access pageFromXML by applying an int to Document<span class="pl-pds">"</span></span> in {
     pending
     <span class="pl-c">//d(0).pageNumber shouldEqual  5</span>
   }
   <span class="pl-s"><span class="pl-pds">"</span>have a method to get Page by pageNumber<span class="pl-pds">"</span></span> in {
     d.getPage(<span class="pl-c1">8</span>).pageNumber shouldEqual <span class="pl-c1">8</span>
   }
  }
  <span class="pl-s"><span class="pl-pds">"</span>Iterating over a documentFromXML<span class="pl-pds">"</span></span> should {
     <span class="pl-k">val</span> <span class="pl-en">exampleDoc</span> <span class="pl-k">=</span> <span class="pl-en">HOCR</span>.fromFolder(getClass.getResource(<span class="pl-s"><span class="pl-pds">"</span>/doc/hocr/<span class="pl-pds">"</span></span>).getFile)
     <span class="pl-s"><span class="pl-pds">"</span>per pageFromXML<span class="pl-pds">"</span></span> in {
        <span class="pl-k">val</span> <span class="pl-en">pageNumbers</span> <span class="pl-k">=</span> exampleDoc map (p <span class="pl-k">=&gt;</span> p.pageNumber)
        pageNumbers shouldEqual <span class="pl-en">List</span>(<span class="pl-c1">5</span>,<span class="pl-c1">8</span>)
     }

     <span class="pl-s"><span class="pl-pds">"</span>per lineFromXML<span class="pl-pds">"</span></span> in {
       exampleDoc.lines.size shouldEqual  <span class="pl-c1">78</span>
     }
     <span class="pl-s"><span class="pl-pds">"</span>per wordFromXML<span class="pl-pds">"</span></span> in {
       exampleDoc.words.size shouldEqual <span class="pl-c1">725</span>
     }

   }</pre>
  </div> 
 </article>
</div>