<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-reactivesax" class="anchor" href="https://github.com/jeremyrsmith/reactivesax#reactivesax" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>ReactiveSax</h1> 
  <h2><a id="user-content-what" class="anchor" href="https://github.com/jeremyrsmith/reactivesax#what" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>What</h2> 
  <p>ReactiveSax is a tiny, non-validating, reactive SAX parser for Scala. It does not implement the <code>org.xml.sax.Parser</code> interface (as do SAX1 parsers), nor the <code>org.xml.sax.XMLReader</code> interface (as do SAX2 parsers). Instead, it extends the <code>java.io.Writer</code> class, and provides a <code>write</code> method. When you write character data to the parser, it will be parsed character-by-character by the parser's state machine, and the provided <code>org.xml.sax.ContentHandler</code> will receive SAX events as appropriate. After you write the data, nothing else happens until you write more data, at which point parsing will pick up where it left off.</p> 
  <h2><a id="user-content-why" class="anchor" href="https://github.com/jeremyrsmith/reactivesax#why" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Why</h2> 
  <p>ReactiveSax arose from a fundamental flaw with SAX that makes it incompatible with the reactive programming model. The idea of SAX is great for reactive programming in that it is a push model - events are pushed to the next thing in the pipeline, which does some processing and pushes stuff to the next thing, etc. Unfortunately, the <code>XMLReader</code> interface defines a <code>parse</code> method, which calls <code>parse</code> up the chain until the actual parser is reached; that method takes an <code>InputSource</code> parameter, which must provide an <code>InputStream</code>. And therein lies the flaw - an InputStream is a blocking I/O, which is fundamentally a blocking <em>pull</em>. This goes against the push model of SAX and makes it unsuitable for reactive programming using <code>Future</code> or <code>Task</code>. If a bunch of parsers block all the threads waiting for input, and their ability to pull input relies on other bits of your program pushing data (into, let's say, a <code>java.nio.Pipe</code> or <code>java.io.PipedWriter</code>) then you'll have a deadlock on your hands.</p> 
  <p>Frustrated with this small piece of bad decision making (which arose from a failure to predict non-blocking I/O as a thing), I came up with ReactiveSax.</p> 
  <h2><a id="user-content-cons" class="anchor" href="https://github.com/jeremyrsmith/reactivesax#cons" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Cons</h2> 
  <p>This package was written to address my current needs only. There's a lot it doesn't do, and so to say it complies with any particular standard would be completely incorrect.</p> 
  <ul> 
   <li>It does no validation of any kind</li> 
   <li>It will happily continue trying to parse a malformed document (except in cases of certain catastrophic parse errors)</li> 
   <li>It does nothing with DTDs or other declarations like <code>&lt;!THING&gt;</code></li> 
   <li>It doesn't process any entities besides <code>&amp;amp;</code>, <code>&amp;lt;</code>, <code>&amp;gt;</code>, <code>&amp;quot;</code>, and valid numeric entities (except to provide a <code>skippedEntity(name)</code> event to the <code>ContentHandler</code>)</li> 
   <li>It produces no errors for an <code>ErrorHandler</code>. In the catastrophic cases mentioned above, it throws an exception.</li> 
   <li>It does no resolution of any external anything. It will never make a network request for any reason, nor attempt to resolve anything.</li> 
  </ul> 
  <h2><a id="user-content-pros--features" class="anchor" href="https://github.com/jeremyrsmith/reactivesax#pros--features" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Pros / Features</h2> 
  <ul> 
   <li>It is based on a deterministic finite state automaton 
    <ul> 
     <li>So it's very fast</li> 
     <li>And it needs very little memory</li> 
    </ul></li> 
   <li>It supports namespaces</li> 
   <li>It only parses while it's being pushed input, so parsing can be paused at any time 
    <ul> 
     <li>In other words, parsing will never block or wait for anything</li> 
    </ul></li> 
  </ul> 
  <h2><a id="user-content-usage" class="anchor" href="https://github.com/jeremyrsmith/reactivesax#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <p>The companion object <code>SAXPushParser</code> has two <code>apply</code> methods. Don't call the constructor of <code>SAXPushParser</code> directly.</p> 
  <p>To create an instance, if you already have the <code>ContentHandler</code> you'll be using:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">handler</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">MyContentHandler</span>
<span class="pl-k">val</span> <span class="pl-en">sax</span> <span class="pl-k">=</span> <span class="pl-en">ReactiveSax</span>(handler)
sax.write(<span class="pl-s"><span class="pl-pds">"</span>&lt;xml&gt;&lt;/xml&gt;<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>This makes the <code>ContentHandler</code> immutable.</p> 
  <p>To create an instance, if you're planning to set the <code>ContentHandler</code> later (this is discouraged):</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">sax</span> <span class="pl-k">=</span> <span class="pl-en">ReactiveSax</span>()
<span class="pl-c">//...</span>
sax.setContentHandler(handler)
sax.write(<span class="pl-s"><span class="pl-pds">"</span>&lt;xml&gt;&lt;/xml&gt;<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>Internally, this creates an identity <code>XMLFilter</code> and that it passes SAX events to, and <code>setContentHandler</code> calls the same on that <code>XMLFilter</code>. So it gives you some flexibility to set up your <code>ContentHandler</code> later on, but you <em>must</em> remember to do so, and you have no guarantee that you won't be switching handlers around willy-nilly causing problems.</p> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/jeremyrsmith/reactivesax#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p>reactivesax is licensed under the Apache License, Version 2.0 (the "License"); you may not use this software except in compliance with the License.</p> 
  <p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p> 
  <h2><a id="user-content-faq" class="anchor" href="https://github.com/jeremyrsmith/reactivesax#faq" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>FAQ</h2> 
  <p>These questions aren't frequently asked. In fact, nobody has ever asked me a question about this project. But these are some questions that you might be having if you're reading this README.</p> 
  <ol> 
   <li><p>Why don't you implement the <code>XMLReader</code> interface? How am I supposed to use this?</p> <p><em>A</em>: As mentioned above, you should call <code>open</code> and then <code>write</code> in order to parse some data. Implementing <code>XMLReader</code> would require implementing the <code>parse(InputSource)</code> method, which is fundamentally blocking/pull.</p></li> 
   <li><p>Is <code>SAXPushParser</code> thread safe?</p> <p><em>A</em>: No - whenever data is written, it will try to process it. You shouldn't write data from multiple threads simultaneously. If you find this happening, you should be sequencing your <code>Future</code>s more carefully. Typically, a thread that's getting character data from somewhere (a computation, or an event-driven input source, etc) will be writing that data out to the parser in order to pipe character input into a SAX pipeline.</p></li> 
  </ol> 
 </article>
</div>