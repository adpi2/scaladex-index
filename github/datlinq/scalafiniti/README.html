<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <p><a href="https://travis-ci.org/datlinq/scalafiniti" target="_blank"><img src="https://camo.githubusercontent.com/8b397143c604a8acf6de5d9b6a78a49a686f77e7/68747470733a2f2f696d672e736869656c64732e696f2f7472617669732f6461746c696e712f7363616c6166696e6974692e737667" alt="Travis" data-canonical-src="https://img.shields.io/travis/datlinq/scalafiniti.svg" style="max-width:100%;"></a> <a href="https://github.com/datlinq/scalafiniti/blob/master/LICENSE" target="_blank"><img src="https://camo.githubusercontent.com/b0224997019dec4e51d692c722ea9bee2818c837/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f6d6173686170652f6170697374617475732e737667" alt="license" data-canonical-src="https://img.shields.io/github/license/mashape/apistatus.svg" style="max-width:100%;"></a> <a href="https://coveralls.io/github/datlinq/scalafiniti?branch=master" target="_blank"><img src="https://camo.githubusercontent.com/02f006606a616a8175dce5c65c27239af03d73b0/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f6461746c696e712f7363616c6166696e6974692f62616467652e7376673f6272616e63683d6d6173746572" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/github/datlinq/scalafiniti/badge.svg?branch=master" style="max-width:100%;"></a> <a href="http://search.maven.org/#search%7Cga%7C1%7Cscalafiniti" target="_blank"><img src="https://camo.githubusercontent.com/370baaad4e341bfd207f6bd95520b3cc3d493fac/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f636f6d2e6461746c696e712f7363616c6166696e6974695f322e31322e7376673f6c6162656c3d6c617465737425323072656c65617365" data-canonical-src="https://img.shields.io/maven-central/v/com.datlinq/scalafiniti_2.12.svg?label=latest%20release" style="max-width:100%;"></a></p> 
  <h1><a href="https://github.com/datlinq/scalafiniti#scalafiniti-a-scala-wrapper-for-datafiniti-api" aria-hidden="true" class="anchor" id="user-content-scalafiniti-a-scala-wrapper-for-datafiniti-api" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scalafiniti: A Scala wrapper for Datafiniti API</h1> 
  <p>The Datafiniti API is owned and maintained by Datafinity See <a href="https://datafiniti-api.readme.io/" target="_blank">datafiniti-api.readme.io</a></p> 
  <p>This is an open source wrapper for that API, maintained by <a href="http://datlinq.com" target="_blank">Datlinq</a></p> 
  <h2><a href="https://github.com/datlinq/scalafiniti#datafiniti-api-endpoints-supported" aria-hidden="true" class="anchor" id="user-content-datafiniti-api-endpoints-supported" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Datafiniti API endpoints supported</h2> 
  <ul> 
   <li>Business Data</li> 
   <li>Product Data</li> 
  </ul> 
  <h2><a href="https://github.com/datlinq/scalafiniti#use" aria-hidden="true" class="anchor" id="user-content-use" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Use</h2> 
  <h3><a href="https://github.com/datlinq/scalafiniti#set-up-sbt" aria-hidden="true" class="anchor" id="user-content-set-up-sbt" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Set up SBT</h3> 
  <p>Add to your build.sbt</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.datlinq<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>scalafiniti<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.2.6<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>Then add import statement</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.datlinq.datafiniti.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">com.datlinq.datafiniti.config.DatafinitiAPIFormats.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">com.datlinq.datafiniti.config.DatafinitiAPIViews.</span><span class="pl-v">_</span></pre>
  </div> 
  <p>Create an APIv3 object</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">apiKey</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>...<span class="pl-pds">"</span></span>
<span class="pl-k">val</span> <span class="pl-en">apiv3</span> <span class="pl-k">=</span> <span class="pl-en">DatafinitiAPIv3</span>(apiKey)</pre>
  </div> 
  <h4><a href="https://github.com/datlinq/scalafiniti#query" aria-hidden="true" class="anchor" id="user-content-query" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Query</h4> 
  <p>Now query the API</p> 
  <p>Errors in the future or non-200 results are captured in DatafinitiErrors</p> 
  <p>Otherwise the result is parsed with json4s (even CSV requests, that return json with as CSV field)</p> 
  <p>The async calls return an DatafinitiFuture[T] which are <a href="https://typelevel.org/cats/api/cats/data/EitherT.html" target="_blank">EitherT</a>[Future,DatafinitiError,JValue]] (see cats library)</p> 
  <p>This makes the Eithers in Futures composable in for comprehensions and such</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">response</span><span class="pl-k">:</span><span class="pl-en">DatafinitiFuture</span>[<span class="pl-en">JValue</span>] <span class="pl-k">=</span> apiv3.query(
  apiView <span class="pl-k">=</span> <span class="pl-en">BusinessesAllBasic</span>, 
  query <span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>categories:hotels<span class="pl-pds">"</span></span>), 
  numberOfRecords <span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-c1">1</span>), 
  download <span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-c1">false</span>), 
  format <span class="pl-k">=</span> <span class="pl-en">JSON</span>)</pre>
  </div> 
  <h4><a href="https://github.com/datlinq/scalafiniti#download" aria-hidden="true" class="anchor" id="user-content-download" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Download</h4> 
  <p>The Download flow contains of multiple API calls first triggering the download, then redirect to polling API call untill the download is marked as COMPLETED afterwards redirecting to a similar API call to fetch the download URL's The method <code>downloadLinks</code> returns a List of Strings wrapped in a DatafinitiFuture.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">response</span><span class="pl-k">:</span><span class="pl-en">DatafinitiFuture</span>[<span class="pl-en">List</span>[<span class="pl-k">String</span>]] <span class="pl-k">=</span> apiv3.downloadLinks(
    apiView <span class="pl-k">=</span> <span class="pl-en">BusinessesAllNested</span>,
    query <span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"""</span>categories:hotels AND city:"Rotterdam"<span class="pl-pds">"""</span></span>),
    format <span class="pl-k">=</span> <span class="pl-en">JSON</span>,
    numRecords <span class="pl-k">=</span> <span class="pl-c1">None</span>)</pre>
  </div> 
  <p>or download all files directly to a stream. Pass an outputstream to append lines, beware that resulting file may have records be out of order if there are multiple download files in the response, to prevent this set sequential to true (will be slower). The returned integer contains the total count of all (or limited by numberOfRecords) imported records</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">response</span><span class="pl-k">:</span><span class="pl-en">DatafinitiFuture</span>[<span class="pl-k">Int</span>] <span class="pl-k">=</span> apiv3.download(
    apiView <span class="pl-k">=</span> <span class="pl-en">BusinessesAllNested</span>,
    query <span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"""</span>categories:hotels AND city:"Rotterdam"<span class="pl-pds">"""</span></span>),
    format <span class="pl-k">=</span> <span class="pl-en">JSON</span>,
    numberOfRecords <span class="pl-k">=</span> <span class="pl-c1">None</span>,
    sequential <span class="pl-k">=</span> <span class="pl-c1">false</span>)(stream)</pre>
  </div> 
  <h4><a href="https://github.com/datlinq/scalafiniti#user-info" aria-hidden="true" class="anchor" id="user-content-user-info" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>User info</h4> 
  <p>User information, including access rights and remaining requests are accessed by the</p> 
  <p>userInfo, returning the entire Json (or sub json if string was passed)</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">et</span><span class="pl-k">:</span> <span class="pl-en">DatafinitiFuture</span>[<span class="pl-en">JValue</span>] <span class="pl-k">=</span> apiv3.userInfo()</pre>
  </div> 
  <p>and userInfoField, returning a specificly extracted value from user info (like "available_downloads")</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">et</span><span class="pl-k">:</span> <span class="pl-en">DatafinitiFuture</span>[<span class="pl-en">Option</span>[<span class="pl-k">Long</span>]] <span class="pl-k">=</span> apiv3.userInfoField(<span class="pl-s"><span class="pl-pds">"</span>available_downloads<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <h3><a href="https://github.com/datlinq/scalafiniti#possible-formats" aria-hidden="true" class="anchor" id="user-content-possible-formats" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>possible Formats</h3> 
  <ul> 
   <li><code>JSON</code></li> 
   <li><code>CSV</code> (basic query still returns json result, but with one field filled with CSV data)</li> 
  </ul> 
  <h3><a href="https://github.com/datlinq/scalafiniti#possible-api-views-in-v3" aria-hidden="true" class="anchor" id="user-content-possible-api-views-in-v3" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>possible API Views in v3</h3> 
  <ul> 
   <li><code>BusinessesAll</code> - businesses_all</li> 
   <li><code>BusinessesAllMenusFlat</code> - businesses_all_menusFlat</li> 
   <li><code>BusinessesAllNested</code> - businesses_all_nested</li> 
   <li><code>BusinessesAllNestedNoReviews</code> - businesses_all_nested_no_reviews</li> 
   <li><code>BusinessesAllBasic</code> - businesses_basic</li> 
   <li><code>ProductsAll</code> - products_all</li> 
   <li><code>ProductsKeysSourceURLs</code> - products_keysSourceURLs</li> 
   <li><code>ProductsMultiValuedFieldsNested</code> - products_multiValuedFieldsNested</li> 
   <li><code>ProductsPricesFlat</code> - products_pricesFlat</li> 
   <li><code>ProductsReviewsFlat</code> - products_reviewsFlat</li> 
  </ul> 
  <h2><a href="https://github.com/datlinq/scalafiniti#history" aria-hidden="true" class="anchor" id="user-content-history" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>History</h2> 
  <h3><a href="https://github.com/datlinq/scalafiniti#the-current-maintainers-people-who-can-help-you-are" aria-hidden="true" class="anchor" id="user-content-the-current-maintainers-people-who-can-help-you-are" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>The current maintainers (people who can help you) are:</h3> 
  <ul> 
   <li>Tom Lous (<a href="https://github.com/TomLous" target="_blank">@tomlous</a>)</li> 
  </ul> 
  <h2><a href="https://github.com/datlinq/scalafiniti#sample" aria-hidden="true" class="anchor" id="user-content-sample" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Sample</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.datlinq.datafiniti.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">com.datlinq.datafiniti.config.DatafinitiAPIFormats.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">com.datlinq.datafiniti.config.DatafinitiAPIViews.</span><span class="pl-v">_</span>

<span class="pl-k">import</span> <span class="pl-v">org.json4s.JsonAST.</span><span class="pl-v">JNothing</span>
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.</span><span class="pl-v">Await</span>
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.duration.</span><span class="pl-v">Duration</span>

<span class="pl-k">import</span> <span class="pl-v">java.io.</span><span class="pl-v">FileOutputStream</span>

<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.ExecutionContext.Implicits.</span><span class="pl-v">global</span>



<span class="pl-k">val</span> <span class="pl-en">apiKey</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>....<span class="pl-pds">"</span></span>
<span class="pl-k">val</span> <span class="pl-en">apiv3</span> <span class="pl-k">=</span> <span class="pl-en">DatafinitiAPIv3</span>(apiKey)

<span class="pl-c"><span class="pl-c">//</span> query</span>
<span class="pl-k">val</span> <span class="pl-en">futureEither</span> <span class="pl-k">=</span> apiv3.query(
  apiView <span class="pl-k">=</span> <span class="pl-en">BusinessesAllNested</span>,
  query <span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"""</span>categories:hotels AND city:"Den Helder"<span class="pl-pds">"""</span></span>),
  numberOfRecords <span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-c1">10</span>),
  download <span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-c1">false</span>),
  format <span class="pl-k">=</span> <span class="pl-en">JSON</span>)

<span class="pl-k">val</span> <span class="pl-en">result</span> <span class="pl-k">=</span> <span class="pl-en">Await</span>.result(futureEither.value, <span class="pl-en">Duration</span>.<span class="pl-en">Inf</span>)

<span class="pl-k">val</span> <span class="pl-en">json</span> <span class="pl-k">=</span> result.getOrElse(<span class="pl-en">JNothing</span>)



<span class="pl-c"><span class="pl-c">//</span> download links</span>
<span class="pl-k">val</span> <span class="pl-en">futureEither2</span> <span class="pl-k">=</span> apiv3.downloadLinks(
  apiView <span class="pl-k">=</span> <span class="pl-en">BusinessesAllNested</span>,
  query <span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"""</span>categories:hotels AND city:"Den Helder"<span class="pl-pds">"""</span></span>),
  format <span class="pl-k">=</span> <span class="pl-en">JSON</span>,
  numberOfRecords <span class="pl-k">=</span> <span class="pl-c1">None</span>
)

<span class="pl-k">val</span> <span class="pl-en">result2</span> <span class="pl-k">=</span> <span class="pl-en">Await</span>.result(futureEither2.value, <span class="pl-en">Duration</span>.<span class="pl-en">Inf</span>)

<span class="pl-k">val</span> <span class="pl-en">links</span> <span class="pl-k">=</span> result2.getOrElse(<span class="pl-c1">Nil</span>)


<span class="pl-c"><span class="pl-c">//</span> download</span>
<span class="pl-k">val</span> <span class="pl-en">stream</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">FileOutputStream</span>(<span class="pl-s"><span class="pl-pds">"</span>/tmp/output.json<span class="pl-pds">"</span></span>)

<span class="pl-k">val</span> <span class="pl-en">futureEither3</span> <span class="pl-k">=</span> apiv3.downloadLinks(
  apiView <span class="pl-k">=</span> <span class="pl-en">BusinessesAllNested</span>,
  query <span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"""</span>categories:hotels AND city:"Den Helder"<span class="pl-pds">"""</span></span>),
  format <span class="pl-k">=</span> <span class="pl-en">JSON</span>,
  numberOfRecords <span class="pl-k">=</span> <span class="pl-c1">None</span>,
  sequential <span class="pl-k">=</span> <span class="pl-c1">false</span>
)(stream)

<span class="pl-k">val</span> <span class="pl-en">result3</span> <span class="pl-k">=</span> <span class="pl-en">Await</span>.result(futureEither3.value, <span class="pl-en">Duration</span>.<span class="pl-en">Inf</span>)

stream.close()

</pre>
  </div> 
  <h2><a href="https://github.com/datlinq/scalafiniti#compatibility" aria-hidden="true" class="anchor" id="user-content-compatibility" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Compatibility</h2> 
  <p>The code was build for scala 2.11, 2.12 and for version v3 of the Dafaniti API</p> 
 </article>
</div>