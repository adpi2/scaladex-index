<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-scalajs-gradle-" class="anchor" href="https://github.com/gtache/scalajs-gradle#scalajs-gradle-" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>scalajs-gradle <a href="https://travis-ci.org/gtache/scalajs-gradle" target="_blank"><img src="https://camo.githubusercontent.com/43a08a30819242b45d433cdfb92be74ac5394be0/68747470733a2f2f7472617669732d63692e6f72672f6774616368652f7363616c616a732d677261646c652e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/gtache/scalajs-gradle.svg?branch=master" style="max-width:100%;"></a></h1> 
  <h2><a id="user-content-requirements" class="anchor" href="https://github.com/gtache/scalajs-gradle#requirements" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Requirements</h2> 
  <p>You must <code>apply plugin: 'scalajs-plugin'</code> and declare</p> 
  <pre><code>buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'com.github.gtache:scalajs-plugin:sjs[scalaJSVersion]_[scalaVersion]_0.3.0'
    }
}
</code></pre> 
  <p>to use this plugin.<br> (With scalaJSVersion '0.6' and scalaVersion '2.12', that would be 'scalajs-plugin:sjs0.6_2.12_0.3.0')<br> <em>Check the build.gradle of scalajs-plugin-test if needed.</em><br> Needs .scala files to be in src/main/scala (or <a href="https://docs.gradle.org/current/userguide/scala_plugin.html" target="_blank">configure your ScalaCompile</a> task accordingly)<br> Needs tests to be in src/test/scala.</p> 
  <h2><a id="user-content-added-by-the-plugin" class="anchor" href="https://github.com/gtache/scalajs-gradle#added-by-the-plugin" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Added by the plugin</h2> 
  <p>This plugin adds :<br> -<code>apply plugin: 'java'</code><br> -<code>apply plugin: 'scala'</code><br> and dependencies on <strong>scalajs-library (version depending on plugin version)</strong>, <strong>scalajs-compiler (version depending on plugin version)</strong>, as well as <strong>org.eclipse.jetty:jetty-server:8.1.16.v20140903</strong> and <strong>org.eclipse.jetty:jetty-websocket:8.1.16.v20140903</strong> for PhantomJS</p> 
  <h2><a id="user-content-usage" class="anchor" href="https://github.com/gtache/scalajs-gradle#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <p><code>gradlew FastOptJS</code>, <code>gradlew FullOptJS</code> or <code>gradlew NoOptJS</code> to compile everything.</p> 
  <p>You can run the generated javascript file with <code>gradlew RunJS</code>.<br> You can run tests with <code>gradlew TestJS</code>. Be aware that this is still an early feature.<br> You can read the sjsir files with <code>gradlew Scalajsp</code>.</p> 
  <h2><a id="user-content-test-frameworks-supported" class="anchor" href="https://github.com/gtache/scalajs-gradle#test-frameworks-supported" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Test frameworks supported</h2> 
  <p>-ScalaTest<br> -JUnit <em><strong>(you have to add the junit-test-plugin to the compileTestScala task)</strong></em><br> -Minitest<br> -utest (not fully supported, the summary will print the tests as Unknown and the retest feature will ignore them)<br> -ScalaProps<br> You can mix them (Have a JUnit suite with a utest suite and a ScalaTest suite, etc)<br> You must obviously add the dependencies and TestFrameworks for those to work.</p> 
  <p>To add the JUnit plugin or the dependencies, please refer to the <em>build.gradle</em> in <em>scalajs-test-plugin</em>.</p> 
  <h3><a id="user-content-options-for-the-linker-fastfullnooptjs" class="anchor" href="https://github.com/gtache/scalajs-gradle#options-for-the-linker-fastfullnooptjs" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Options for the linker (Fast/Full/NoOptJS)</h3> 
  <p>-<code>-Po="pathtofile" | -Poutput="pathtofile"</code> to change where the js file will be generated <strong>This means that there will only be one file for every different build (fast, full, test or not)</strong><br> -<code>-Pp | -Pprettyprint</code> for prettyPrint<br> -<code>-Ps | -Psourcemap</code> for sourceMap<br> -<code>-PcompliantAsInstanceOfs</code><br> -<code>-Pm=NameOfMode | -PoutputMode=NameOfMode</code> to change the output mode (ECMAScript51Global, ECMAScript51Isolated, ECMAScript6)<br> -<code>-Pc | -PcheckIR</code><br> -<code>-Pr="PathToSourceMap" | -PrelativizeSourceMap="PathToSourceMap"</code> to add a sourceMap<br> -<code>-PlinkLogLevel=Debug|Info (default)|Warn|Error</code> to change the level of logging<br> -<code>-Pd | -Pdebug</code> for Debug level<br> -<code>-Pq | -Pquiet</code> for Warn level<br> -<code>-Pqq | -Preally-quiet</code> for Error level<br> -<code>-Pbatch</code> to turn on batch mode<br> -<code>-PnoParallel</code> to set parallel to false</p> 
  <h3><a id="user-content-options-for-runjs" class="anchor" href="https://github.com/gtache/scalajs-gradle#options-for-runjs" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Options for RunJS</h3> 
  <p>-<code>-Pclassname</code> is the fully qualified name of the class to run<br> -<code>-Pmethname</code> is the method of classname to run.<br> -<code>-PtoExec</code> (has higher priority than <code>-Pclassname</code>) will run the given explicit command<br> -<code>-PfileToExec</code> (has highest priority) will run the given js file.<br> -Adding <code>-PrunNoOpt</code> will run the unoptimized file<br> -Adding <code>-PrunFull</code> will run the fully optimized file<br> -It will run the fast optimized file by default.<br> RunJS will depend on FastOptJS (default), FullOptJS or NoOptJS accordingly.<br> -Adding <code>-Pphantom</code> will run the file in a phantomjs environment (needs phantomjs on path).<br> -Adding <code>-Prhino</code> will run the file in a rhino environment.<br> -Adding <code>-PjsDom</code> will run the file with Node.js on a JSDOM window.<br> -You can change the level of logging with <code>-PrunLogLevel=Warn</code> for example.<br> -You can add java system properties with '-PjavaOpt="-D=;=;..." (replace semicolon with colon if you are on an Unix system)</p> 
  <p>Examples : <code>gradlew RunJS -Pclassname="main.scala.DummyObject"</code> will compile everything and run DummyObject().main()</p> 
  <p><code>gradlew RunJS -Pclassname="main.scala.DummyObject" -Pmethname="printSomething(\"blabla\")" -PrunFull</code> will compile the fully optimized version of the files and will run DummyObject().printSomething("blabla")</p> 
  <p><code>gradlew RunJS -PtoExec="main.scala.DummyObject().main() -Pphantom"</code> will compile everything and run DummyObject().main() in a phantomjs environment.</p> 
  <p><code>gradlew RunJS -PfileToExec="testjs/TestRunWithFile.js"</code> will run TestRunWithFile.js with the environment loaded with the compiled js file.</p> 
  <h3><a id="user-content-options-for-testjs" class="anchor" href="https://github.com/gtache/scalajs-gradle#options-for-testjs" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Options for TestJS</h3> 
  <p>-<code>-PrunFull</code>, <code>-PrunNoOpt</code>, <code>-Pphantom</code>, <code>-PjsDom</code> and <code>-Prhino</code> have the same behavior as with RunJS.<br> -<code>-Ptest-only=class1;class2;*l*s3</code> and -<code>-Ptest-quick=...</code> should have the same behavior as their sbt counterparts. <strong>You can only select classes / suites at the moment, you can't select tests.</strong><br> -<code>-Pretest</code> should retest all failed tests (does not work with Utest).<br> You can change the level of logging with <code>-PtestLogLevel=Error</code> for example.<br> <em>Note that retest / test-quick need a Gradle daemon to work</em>.</p> 
  <h3><a id="user-content-options-for-scalajsp" class="anchor" href="https://github.com/gtache/scalajs-gradle#options-for-scalajsp" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Options for Scalajsp</h3> 
  <p>-<code>-Ps</code> | <code>-Psupported</code> will display the supported sjsir versions<br> -<code>-Pi</code> | <code>-Pinfo</code> will display informations about the file(s)<br> -<code>-Pf</code> | <code>-Pfilename</code> to choose which file(s) to see (eg : 'build/classes/main/com/github/gtache/DummyObject$.sjsir')<br> -<code>-Pj</code> | <code>-Pjarfile</code> to choose a jar</p> 
  <h3><a id="user-content-making-options-permanent" class="anchor" href="https://github.com/gtache/scalajs-gradle#making-options-permanent" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Making options 'permanent'</h3> 
  <p>Don't forget that you can set the options directly in build.gradle. Simply put the property in the 'ext' closure.<br> Example : Instead of writing -PtestLogLevel=Debug -Po="generated.js" -Pd -PfileToExec="toExec/exec.js" everytime, write</p> 
  <pre><code>ext {    
    testLogLevel="Debug" //Use a string
    o="generated.js"
    d=true //or false, or whatever, it just checks that the property exists
    fileToExec="toExec/exec.js"
    testFrameworks=["utest.runner.Framework","minitest.runner.Framework"] //If you need to add TestFrameworks
}
</code></pre> 
  <h3><a id="user-content-possible-problems" class="anchor" href="https://github.com/gtache/scalajs-gradle#possible-problems" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Possible problems</h3> 
  <p>-<em>Permission denied</em><br> =&gt; Solution : apply chmod +x to gradlew<br> -<em>GC overhead limit exceeded</em> when running CompileJS<br> =&gt; Solution : edit gradle.properties in %USER%/.gradle/ with <code>org.gradle.jvmargs=-Xmx4096m -XX:MaxPermSize=4096m -XX:+HeapDumpOnOutOfMemoryError</code> (or tweak the numbers) (source : <a href="http://stackoverflow.com/questions/27164452/how-to-solve-java-lang-outofmemoryerror-gc-overhead-limit-exceeded-error-in-and" target="_blank">http://stackoverflow.com/questions/27164452/how-to-solve-java-lang-outofmemoryerror-gc-overhead-limit-exceeded-error-in-and</a>)<br> (Don't forget to delete the hprof file in the project folder)<br> -Something related to the linker state, after a failure while linking<br> =&gt; Solution : <code>gradlew --stop</code> to stop the daemon containing the linker. Then rerun the desired command as usual. (This problem should be fixed now)</p> 
  <h2><a id="user-content-changelog" class="anchor" href="https://github.com/gtache/scalajs-gradle#changelog" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Changelog</h2> 
  <p>###0.3.0 (uses Scala 2.12.1 or Scala 2.11.8 with scalajs 0.6.15)<br> -Updates to Scala 2.12 and Scalajs 0.6.15<br> -Adds Scalajsp<br> -Adds JSDOMNode environment<br> -Adds custom environment option<br> -Adds custom semantics option<br> -Adds custom OptimizerOptions option<br> -Adds batchMode, parallel<br> -Adds Java system properties<br> -Various improvements / bugfixes</p> 
  <p>###0.2.0 (uses Scala 2.11.8 with scalajs 0.6.9)<br> -Adds support for RhinoJS and PhantomJS<br> -Adds options for the linker<br> -Removes useless tasks<br> -Adds support for basic testing<br> -Various improvements (cleaning, bugs, etc)</p> 
  <p>###0.1.1 (uses Scala 2.11.8 with scalajs 0.6.9)<br> -Adds -PtoExec to input directly what to execute.<br> -Linker and Cache are kept alive (should increase speed dramatically). Only works with a gradle daemon.<br> -Fixes a problem with the linker not linking when files are changed.</p> 
  <p>###0.1.0 (uses Scala 2.11.8 with scalajs 0.6.9)<br> -First version</p> 
 </article>
</div>