<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-slakka-bot" class="anchor" href="https://github.com/dvmlls/slakka-bot#slakka-bot" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>slakka-bot</h1> 
  <p><a href="https://travis-ci.org/dvmlls/slakka-bot" target="_blank"><img src="https://camo.githubusercontent.com/fcee8a989faf317edcc1ba54858eac58a5cee12c/68747470733a2f2f7472617669732d63692e6f72672f64766d6c6c732f736c616b6b612d626f742e7376673f6272616e63683d6d6173746572" alt="travis status" data-canonical-src="https://travis-ci.org/dvmlls/slakka-bot.svg?branch=master" style="max-width:100%;"></a> <a href="http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22slakka-bot_2.11%22" target="_blank"><img src="https://camo.githubusercontent.com/c8ff5f940ea127e2758a9e4a63963aa84fc9ebff/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f6361742e64766d6c6c732f736c616b6b612d626f745f322e31312e7376673f6d61784167653d33363030" alt="maven central" data-canonical-src="https://img.shields.io/maven-central/v/cat.dvmlls/slakka-bot_2.11.svg?maxAge=3600" style="max-width:100%;"></a> <a href="https://codecov.io/github/dvmlls/slakka-bot?branch=master" target="_blank"><img src="https://camo.githubusercontent.com/a085cdca0ce383b66a9dc007c95f257282d4fa13/68747470733a2f2f696d672e736869656c64732e696f2f636f6465636f762f632f6769746875622f64766d6c6c732f736c616b6b612d626f742f6d61737465722e737667" alt="Coverage Status" data-canonical-src="https://img.shields.io/codecov/c/github/dvmlls/slakka-bot/master.svg" style="max-width:100%;"></a> <a href="http://dvmlls.cat" target="_blank"><img src="https://camo.githubusercontent.com/93cf8b40df0613e719163b8243b1ea71945d07fb/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646176652d617765736f6d652d626c75652e737667" alt="Dave" data-canonical-src="https://img.shields.io/badge/dave-awesome-blue.svg" style="max-width:100%;"></a></p> 
  <p>Slack chat bot built with akka. </p> 
  <h2><a id="user-content-dependencies" class="anchor" href="https://github.com/dvmlls/slakka-bot#dependencies" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Dependencies</h2> 
  <h3><a id="user-content-java" class="anchor" href="https://github.com/dvmlls/slakka-bot#java" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Java</h3> 
  <p>The virtual machine the bot runs on, and the SDK necessary to target it. </p> 
  <p>The Java 8 SDK: <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></p> 
  <pre><code>$ java -version
java version "1.8.0_60"
Java(TM) SE Runtime Environment (build 1.8.0_60-b27)
</code></pre> 
  <p>To change your default java on OSX: <a href="http://stackoverflow.com/questions/21964709/how-to-set-or-change-the-default-java-jdk-version-on-os-x" target="_blank">http://stackoverflow.com/questions/21964709/how-to-set-or-change-the-default-java-jdk-version-on-os-x</a></p> 
  <h3><a id="user-content-sbt" class="anchor" href="https://github.com/dvmlls/slakka-bot#sbt" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>SBT</h3> 
  <p>Simple Build Tool, an interactive compilation environment: <a href="http://www.scala-sbt.org/0.13/docs/Setup.html" target="_blank">http://www.scala-sbt.org/0.13/docs/Setup.html</a></p> 
  <p>On OSX:</p> 
  <pre><code>$ brew install sbt
</code></pre> 
  <p>I'm using version 0.13.9: </p> 
  <pre><code>$ sbt 'inspect sbtVersion'
[info] Set current project to slakka-bot (in build file:/Users/dmills/src/slakka-bot/)
[info] Setting: java.lang.String = 0.13.9
</code></pre> 
  <h3><a id="user-content-intellij" class="anchor" href="https://github.com/dvmlls/slakka-bot#intellij" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>IntelliJ</h3> 
  <p>IntelliJ 15 Community: <a href="https://www.jetbrains.com/idea/download/" target="_blank">https://www.jetbrains.com/idea/download/</a> </p> 
  <p>When it starts up, install the <code>scala</code> plugin:</p> 
  <ul> 
   <li>Configure --&gt; Plugins</li> 
   <li>Install JetBrains Plugin...</li> 
   <li>Install the <code>scala</code> plugin</li> 
  </ul> 
  <h2><a id="user-content-get-a-slack-token" class="anchor" href="https://github.com/dvmlls/slakka-bot#get-a-slack-token" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Get a Slack Token</h2> 
  <p>Go to <a href="https://my.slack.com/services/new/bot" target="_blank">https://my.slack.com/services/new/bot</a> to register your bot. If you have multiple slack accounts, you can use https://[TEAM].slack.com/services/new/bot instead. </p> 
  <p>Call it whatever you want, and save your token somewhere - you'll pass it on every API call you make. </p> 
  <p>You can review your tokens here: <a href="https://api.slack.com/web#authentication" target="_blank">https://api.slack.com/web#authentication</a> </p> 
  <h2><a id="user-content-run-a-basic-bot" class="anchor" href="https://github.com/dvmlls/slakka-bot#run-a-basic-bot" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Run a Basic Bot</h2> 
  <p>I added some config to tell the bot to log to <code>stderr</code> instead of <code>stdout</code>, allowing me to fiddle with it from the command line.</p> 
  <p>I'm going to use two terminals: one to interact with the bot, and the other to watch the logs.</p> 
  <p>In one terminal:</p> 
  <pre><code>slakka-bot $ export SLACK_TOKEN="[your slack token]"
slakka-bot $ sbt console 2&gt;&gt;~/bot.log
[info] Set current project to slakka-bot (in build file:/Users/dmills/src/slakka-bot/)
[info] Starting scala interpreter...
[info]
Welcome to Scala version 2.11.7 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_60).
Type in expressions to have them evaluated.
Type :help for more information.

scala&gt;
</code></pre> 
  <p>Now load a sample bot:</p> 
  <pre><code>scala&gt; :load EchoBot.scala
Loading EchoBot.scala...
import java.net.URI
import java.util.concurrent.TimeUnit
import akka.actor._
...
scala&gt; 
</code></pre> 
  <p>In another terminal:</p> 
  <pre><code>$ tail -f ~/bot.log
...
2016-02-10 10:23:21:699 [default-akka.actor.default-dispatcher-3] INFO akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2016-02-10 10:23:21:710 [default-akka.actor.default-dispatcher-3] DEBUG akka.event.EventStream - logger log1-Slf4jLogger started
2016-02-10 10:23:21:711 [default-akka.actor.default-dispatcher-3] DEBUG akka.actor.LocalActorRefProvider$SystemGuardian - now supervising Actor[akka://default/system/UnhandledMessageForwarder#654532009]
2016-02-10 10:23:21:711 [default-akka.actor.default-dispatcher-3] DEBUG akka.event.EventStream - Default Loggers started
...
</code></pre> 
  <p>Send someone a direct message:</p> 
  <pre><code>scala&gt; kernel ! Chat(IM("dave"), "your face")
</code></pre> 
  <p><a href="https://camo.githubusercontent.com/91f181f21348153a63be30495e4decb10988e568/687474703a2f2f692e696d6775722e636f6d2f6b716e444e7a362e706e67" target="_blank"><img src="https://camo.githubusercontent.com/91f181f21348153a63be30495e4decb10988e568/687474703a2f2f692e696d6775722e636f6d2f6b716e444e7a362e706e67" alt="Imgur" data-canonical-src="http://i.imgur.com/kqnDNz6.png" style="max-width:100%;"></a></p> 
  <p>When they reply, it'll show up in the logs:</p> 
  <pre><code>unhandled message from Actor[akka://default/user/kernel/slack#828626119]: MessageReceived(D0K3XHE3Y,U06DF12SU,no YOUR face)
</code></pre> 
  <p>Chat in a channel:</p> 
  <pre><code>scala&gt; kernel ! Chat(Channel("general"), "your face")
</code></pre> 
  <p>To shut down your bot cleanly, terminate the actor system first, shutting down all the background threads:</p> 
  <pre><code>scala&gt; system.shutdown(); sys.exit()
[success] Total time: 208 s, completed Jan 29, 2016 11:22:29 AM
$ 
</code></pre> 
  <h2><a id="user-content-releasing-a-new-version" class="anchor" href="https://github.com/dvmlls/slakka-bot#releasing-a-new-version" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Releasing a new version</h2> 
  <p><a href="https://github.com/xerial/sbt-sonatype#command-line-usage" target="_blank">https://github.com/xerial/sbt-sonatype#command-line-usage</a></p> 
  <p>Publish to Sonatype staging (<code>publishSigned</code>) and release to Maven Central (<code>sonatypeRelease</code>): </p> 
  <pre><code>$ sbt publishSigned &amp;&amp; sbt sonatypeRelease
</code></pre> 
  <p>View the project on:</p> 
  <ul> 
   <li>Staging: <a href="https://oss.sonatype.org" target="_blank">Sonatype</a></li> 
   <li>Release: <a href="https://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22cat.dvmlls%22%20AND%20a%3A%22slakka-bot_2.11%22" target="_blank">Maven Central</a></li> 
  </ul> 
 </article>
</div>