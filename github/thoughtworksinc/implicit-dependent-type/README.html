<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-implicit-dependent-type-" class="anchor" href="https://github.com/thoughtworksinc/implicit-dependent-type#implicit-dependent-type-" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>implicit-dependent-type <a href="http://thoughtworks.com/" target="_blank"><img align="right" src="https://camo.githubusercontent.com/4e8bb83ad97ee6b683cb5529d8c5489e4927855a/68747470733a2f2f7777772e74686f75676874776f726b732e636f6d2f696d67732f74772d6c6f676f2e706e67" title="ThoughtWorks" height="15" data-canonical-src="https://www.thoughtworks.com/imgs/tw-logo.png" style="max-width:100%;"></a></h1> 
  <p><a href="https://gitter.im/ThoughtWorksInc/implicit-dependent-type?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank"><img src="https://camo.githubusercontent.com/8e469b162812634ea5bcf266a5f1aac18426b8b2/68747470733a2f2f6261646765732e6769747465722e696d2f54686f75676874576f726b73496e632f696d706c696369742d646570656e64656e742d747970652e737667" alt="Join the chat at https://gitter.im/ThoughtWorksInc/implicit-dependent-type" data-canonical-src="https://badges.gitter.im/ThoughtWorksInc/implicit-dependent-type.svg" style="max-width:100%;"></a> <a href="https://travis-ci.org/ThoughtWorksInc/implicit-dependent-type" target="_blank"><img src="https://camo.githubusercontent.com/2aaa683b6ae7ab8ca8afad8f4e73d388a23e0808/68747470733a2f2f7472617669732d63692e6f72672f54686f75676874576f726b73496e632f696d706c696369742d646570656e64656e742d747970652e737667" alt="Build Status" data-canonical-src="https://travis-ci.org/ThoughtWorksInc/implicit-dependent-type.svg" style="max-width:100%;"></a></p> 
  <p><strong>implicit-dependent-type</strong> is a Scala compiler plugin that resolves dependent types from implicit type classes, especially useful when working with <a href="https://github.com/milessabin/shapeless" target="_blank">shapeless</a> or other type-level programming libraries.</p> 
  <h2><a id="user-content-setup" class="anchor" href="https://github.com/thoughtworksinc/implicit-dependent-type#setup" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Setup</h2> 
  <div class="highlight highlight-source-scala">
   <pre>addCompilerPlugin(<span class="pl-s"><span class="pl-pds">"</span>com.thoughtworks.implicit-dependent-type<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>implicit-dependent-type<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>latest.release<span class="pl-pds">"</span></span>)

addCompilerPlugin(<span class="pl-s"><span class="pl-pds">"</span>org.scalamacros<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>paradise<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>2.1.0<span class="pl-pds">"</span></span> cross <span class="pl-en">CrossVersion</span>.full)

libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.chuusai<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>shapeless<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>latest.release<span class="pl-pds">"</span></span></pre>
  </div> 
  <h2><a id="user-content-foobarbaz-syntax" class="anchor" href="https://github.com/thoughtworksinc/implicit-dependent-type#foobarbaz-syntax" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><code>Foo[Bar]##Baz</code> syntax</h2> 
  <p>This plugin provides a syntactic sugar that substitutes all <code>Foo[Bar]##Baz</code> with <code>shapeless.the.`Foo[Bar]`.Baz</code>, which inlines resolved implicit type classes into type declaration positions.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">shapeless.</span><span class="pl-v">_</span>

<span class="pl-k">final</span> <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Foo</span>(<span class="pl-v">bar</span>: <span class="pl-k">Int</span>, <span class="pl-v">baz</span>: <span class="pl-k">String</span>)

<span class="pl-k">val</span> <span class="pl-en">hlistForFoo</span><span class="pl-k">:</span> <span class="pl-en">Generic</span>[<span class="pl-en">Foo</span>]##<span class="pl-en">Repr</span> <span class="pl-k">=</span> <span class="pl-c1">1</span> <span class="pl-k">::</span> <span class="pl-s"><span class="pl-pds">"</span>xxx<span class="pl-pds">"</span></span> <span class="pl-k">::</span> <span class="pl-en">HNil</span>
<span class="pl-k">val</span> <span class="pl-en">foo</span><span class="pl-k">:</span> <span class="pl-en">Foo</span> <span class="pl-k">=</span> <span class="pl-en">Generic</span>[<span class="pl-en">Foo</span>].from(hlistForFoo)</pre>
  </div> 
  <p>The above example equals to the following code:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">shapeless.</span><span class="pl-v">_</span>

<span class="pl-k">final</span> <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Foo</span>(<span class="pl-v">bar</span>: <span class="pl-k">Int</span>, <span class="pl-v">baz</span>: <span class="pl-k">String</span>)

<span class="pl-k">val</span> <span class="pl-en">g</span> <span class="pl-k">=</span> <span class="pl-en">Generic</span>[<span class="pl-en">Foo</span>]
<span class="pl-k">val</span> <span class="pl-en">hlistForFoo</span><span class="pl-k">:</span> g.<span class="pl-en">Repr</span> <span class="pl-k">=</span> <span class="pl-c1">1</span> <span class="pl-k">::</span> <span class="pl-s"><span class="pl-pds">"</span>xxx<span class="pl-pds">"</span></span> <span class="pl-k">::</span> <span class="pl-en">HNil</span>
<span class="pl-k">val</span> <span class="pl-en">foo</span><span class="pl-k">:</span> <span class="pl-en">Foo</span> <span class="pl-k">=</span> <span class="pl-en">Generic</span>[<span class="pl-en">Foo</span>].from(hlistForFoo)</pre>
  </div> 
  <p>As you see, without this plugin, <code>Generic[Foo]</code> is not a stable value, thus it is unable to be placed at a type position. You will have to assign it to a temporary variable <code>g</code>.</p> 
  <p>This plugin resolves this problem.</p> 
  <h2><a id="user-content-foo-bar-syntax-since-20" class="anchor" href="https://github.com/thoughtworksinc/implicit-dependent-type#foo-bar-syntax-since-20" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><code>Foo @Bar</code> syntax (since 2.0)</h2> 
  <p>Another syntactic sugar provided by this plugin is converting <code>Foo @Bar</code> to <code>shapeless.the.`Bar[Foo]`.`@`</code>.</p> 
  <p>For example:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">trait</span> <span class="pl-en">GetElement</span>[<span class="pl-en">A</span>] {
  <span class="pl-k">type</span> <span class="pl-en">`@`</span>
}

<span class="pl-k">implicit</span> <span class="pl-k">def</span> <span class="pl-en">getArrayElement</span>[<span class="pl-en">Element</span>] <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">GetElement</span>[<span class="pl-en">Array</span>[<span class="pl-en">Element</span>]] {
  <span class="pl-k">override</span> <span class="pl-k">type</span> <span class="pl-en">`@`</span> <span class="pl-k">=</span> <span class="pl-en">Element</span>
}

<span class="pl-k">val</span> <span class="pl-en">i</span><span class="pl-k">:</span> <span class="pl-en">Array</span>[<span class="pl-k">Int</span>] <span class="pl-k">@</span><span class="pl-en">GetElement</span> <span class="pl-k">=</span> <span class="pl-c1">1</span>
<span class="pl-k">val</span> <span class="pl-en">s</span><span class="pl-k">:</span> <span class="pl-en">Array</span>[<span class="pl-k">String</span>] <span class="pl-k">@</span><span class="pl-en">GetElement</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>In the above example, <code>@GetElement</code> acts as a type level function, calculating the element type of the given type.</p> 
  <p>Note that the <code>Foo @Bar</code> syntax only applied if <code>Bar</code> starts with an upper case character. Thus, this plugin does not affect built-in annotations like <code>@specialize</code>, <code>@cps</code> or <code>@suspendable</code> because they start with a lower case character.</p> 
 </article>
</div>