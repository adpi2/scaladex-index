<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-vertx-json-schema-validator" class="anchor" href="https://github.com/campudus/vertx-json-schema-validator#vertx-json-schema-validator" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>vertx-json-schema-validator</h1> 
  <p>Vertx module to validate JSON against a schema (see <a href="http://json-schema.org/" target="_blank">http://json-schema.org/</a>)</p> 
  <p>This module relies internally on the Java implementation of JSON-Schema by Francis Galiegue (see <a href="https://github.com/fge/json-schema-validator" target="_blank">https://github.com/fge/json-schema-validator</a>), licensed under the <a href="https://github.com/fge/json-schema-validator/blob/master/LICENSE" target="_blank">LGPLv3</a> and <a href="https://github.com/fge/json-schema-validator/blob/master/LICENSE" target="_blank">ASL 2.0</a>. So if you use this module, don't forget to give credit to Francis.</p> 
  <h2><a id="user-content-requirements" class="anchor" href="https://github.com/campudus/vertx-json-schema-validator#requirements" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Requirements</h2> 
  <ul> 
   <li>Vert.x 2.1.x</li> 
   <li>Vert.x lang-scala 1.1.0-M1</li> 
  </ul> 
  <h2><a id="user-content-installation" class="anchor" href="https://github.com/campudus/vertx-json-schema-validator#installation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Installation</h2> 
  <p><code>vertx install com.campudus~json-schema-validator~1.2.0</code></p> 
  <p>You might need to update your <code>langs.properties</code> file, to use <code>lang-scala</code> version <code>1.1.0-M1</code> for the newest version.</p> 
  <h2><a id="user-content-configuration" class="anchor" href="https://github.com/campudus/vertx-json-schema-validator#configuration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Configuration</h2> 
  <pre><code>{
  "address" : &lt;event-bus-address-to-listen-on&gt;,
  "schemas" : [{"key" : &lt;keyForYourJsonSchema&gt;, "schema" : &lt;yourJsonSchema&gt;},{"key" : &lt;keyForYourJsonSchema&gt;, "schema" : &lt;yourJsonSchema&gt;}]
}
</code></pre> 
  <ul> 
   <li><code>address</code> - The address this module should register on the event bus. Defaults to <code>campudus.jsonvalidator</code></li> 
   <li><code>schemas</code> - This is an Array of schemas which are available to check against. Every schema in this Array is described by a JsonObject which should look like following:</li> 
  </ul> 
  <pre><code>    {
      "key" : &lt;keyForYourJsonSchema&gt;,
      "schema" : &lt;yourJsonSchema&gt;
    }
</code></pre> 
  <ul> 
   <li><code>key</code> - This is a key for this schema which is later used to define which schema should be used to check your JSON against. The key is a must have. If you don't define a key, you cant't deploy the module.</li> 
   <li><code>schema</code> - This is the JsonSchema Object which describes your JsonSchema (see <a href="http://json-schema.org/" target="_blank">http://json-schema.org/</a>)</li> 
  </ul> 
  <h3><a id="user-content-example-configuration" class="anchor" href="https://github.com/campudus/vertx-json-schema-validator#example-configuration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Example Configuration</h3> 
  <pre><code>{
  "schemas" : [
    {
      "key" : "simple_schema",
      "schema" : {
        "$schema": "http://json-schema.org/draft-04/schema#",
        "title": "Example Schema",
        "type": "object",
        "properties": {
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          },
          "age": {
            "description": "Age in years",
            "type": "integer",
            "minimum": 0
          }
        },
        "required": ["firstName", "lastName"]
      }
    }
  ]
}
</code></pre> 
  <h2><a id="user-content-usage" class="anchor" href="https://github.com/campudus/vertx-json-schema-validator#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <p>Currently there are three commands for this module.</p> 
  <h3><a id="user-content-validate-json" class="anchor" href="https://github.com/campudus/vertx-json-schema-validator#validate-json" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Validate Json</h3> 
  <p>Use this action to validate a Json against a JsonSchema.</p> 
  <pre><code>{
  "action" : "validate",
  "key" : "simple_schema",
  "json" : {
    "firstName" : "Hans",
    "lastName" : "Dampf"
  }
}
</code></pre> 
  <ul> 
   <li><code>action</code> - Always <code>validate</code> for validating a Json</li> 
   <li><code>key</code> - The key to the JsonSchema to validate against</li> 
   <li><code>json</code> - The Json which should be validated</li> 
  </ul> 
  <h3><a id="user-content-get-all-schema-keys" class="anchor" href="https://github.com/campudus/vertx-json-schema-validator#get-all-schema-keys" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Get all schema keys</h3> 
  <p>Use this action to get all registered schema keys</p> 
  <pre><code>{
  "action" : "getSchemaKeys",
}
</code></pre> 
  <h3><a id="user-content-add-new-jsonschema" class="anchor" href="https://github.com/campudus/vertx-json-schema-validator#add-new-jsonschema" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Add new JsonSchema</h3> 
  <p>Use this action to add a new JsonSchema.</p> 
  <pre><code>{
  "action" : "addSchema",
  "key" : "simpleAddSchema",
  "jsonSchema" : {
    "$schema": "http://json-schema.org/draft-04/schema#",
    "title": "Example Schema",
    "type": "object",
    "properties": {
      "firstName": {
        "type": "string"
      },
      "lastName": {
        "type": "string"
      },
        "age": {
          "description": "Age in years",
          "type": "integer",
          "minimum": 0
        }
      },
      "required": ["firstName", "lastName"]
    }
  }
}
</code></pre> 
  <ul> 
   <li><code>action</code> - Always <code>addSchema</code> for add a new JsonSchema</li> 
   <li><code>key</code> - The key for the new JsonSchema</li> 
   <li><code>jsonSchema</code> - The JsonSchema which should be added</li> 
  </ul> 
  <p><strong>With Version 1.0.0 replacement of a JsonSchema was possible. This feature was removed in version 1.1.0!</strong></p> 
  <h3><a id="user-content-referencing-in-a-json-schema" class="anchor" href="https://github.com/campudus/vertx-json-schema-validator#referencing-in-a-json-schema" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Referencing in a Json schema</h3> 
  <p>In a Json schema it is possible to reference to a schema defined by an URI. This module does <strong>not</strong> support the natively supported schemes from the underlying Java library. This is because the Java library is using blocking code, which can't be used in a vertx module.</p> 
  <p>Although this module offers to reference to schemas which are already added through the config or with the <code>addSchema</code> command. To do this you have to use <code>vertxjsonschema://</code> followed by the key of the schema as the URI. Here is a short example on how this works:</p> 
  <p>First add a schema which should be referenced later (either within the config or with the <code>addSchema</code> command). I used <code>addSchema</code> here:</p> 
  <pre><code>{
  "action" : "addSchema",
  "key" : "geoschema",
  "description": "A geographical coordinate",
  "type": "object",
  "properties": {
    "latitude": { "type": "number" },
    "longitude": { "type": "number" }
  },
  "required": ["latitude", "longitude"]
}
</code></pre> 
  <p>After that you can reference to this schema like following:</p> 
  <pre><code>{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "Example Schema",
  "type": "object",
  "properties": {
    "person": {
      "type" : "object",
      "properties": {
        "location" : {
          "$ref": "vertxjsonschema://geoschema"
        },
        "job": {
          "type": "string"
        }
      }
    }
  }
}
</code></pre> 
  <h3><a id="user-content-reply-messages" class="anchor" href="https://github.com/campudus/vertx-json-schema-validator#reply-messages" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Reply messages</h3> 
  <p>The module will reply to all requests. In the message, there will be either a <code>"status" : "ok"</code> or a <code>"status" : "error"</code>.</p> 
  <h4><a id="user-content-reply-to-validate-action" class="anchor" href="https://github.com/campudus/vertx-json-schema-validator#reply-to-validate-action" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Reply to <code>validate</code> action</h4> 
  <p>If the request could be processed without problems, it will result in an "ok" status. See an example here:</p> 
  <pre><code>{
  "status" : "ok",
}
</code></pre> 
  <p>If the request resulted in an error, a possible reply message looks like this:</p> 
  <pre><code>{
  "status" : "error",
  "error" : &lt;ERROR_KEY&gt;,
  "message" : &lt;ERROR_MESSAGE&gt;,
  "report" : &lt;VALIDATION_REPORT&gt;
}
</code></pre> 
  <ul> 
   <li><code>error</code> - Possible error keys are: <code>MISSING_JSON</code> <code>INVALID_SCHEMA_KEY</code> <code>MISSING_SCHEMA_KEY</code> <code>VALIDATION_ERROR</code> <code>VALIDATION_PROCESS_ERROR</code> <code>INVALID_JSON</code></li> 
   <li><code>message</code> - The message which describes the error</li> 
   <li><p><code>report</code> - This field is only present when the validation failed. A report can look like (see <a href="https://github.com/fge/json-schema-validator" target="_blank">https://github.com/fge/json-schema-validator</a>):</p> <p>[ { "level" : "error", "schema" : { "loadingURI" : "#", "pointer" : "" }, "instance" : { "pointer" : "" }, "domain" : "validation", "keyword" : "required", "message" : "missing required property(ies)", "required" : [ "firstName", "lastName" ], "missing" : [ "lastName" ] } ]</p></li> 
  </ul> 
  <h4><a id="user-content-reply-to-getschemakeys-action" class="anchor" href="https://github.com/campudus/vertx-json-schema-validator#reply-to-getschemakeys-action" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Reply to <code>getSchemaKeys</code> action</h4> 
  <p>The request will result in an "ok" status and a JsonArray <code>schemas</code> with the schema keys. See an example here:</p> 
  <pre><code>{
  "status" : "ok",
  "schemas" : ["simple_schema", "complex_schema"]
}
</code></pre> 
  <h4><a id="user-content-reply-to-addschema-action" class="anchor" href="https://github.com/campudus/vertx-json-schema-validator#reply-to-addschema-action" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Reply to <code>addSchema</code> action</h4> 
  <p>If the request could be processed without problems, it will result in an "ok" status. See an example here:</p> 
  <pre><code>{
  "status" : "ok",
}
</code></pre> 
  <p>If the request resulted in an error, a possible reply message looks like this:</p> 
  <pre><code>{
  "status" : "error",
  "error" : &lt;ERROR_KEY&gt;,
  "message" : &lt;ERROR_MESSAGE&gt;
}
</code></pre> 
  <ul> 
   <li><code>error</code> - Possible error keys are: <code>EXISTING_SCHEMA_KEY</code> <code>INVALID_SCHEMA</code> <code>MISSING_JSON</code> <code>MISSING_SCHEMA_KEY</code></li> 
   <li><code>message</code> - The message which describes the error</li> 
  </ul> 
  <h2><a id="user-content-licence" class="anchor" href="https://github.com/campudus/vertx-json-schema-validator#licence" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Licence</h2> 
  <p>This project is freely available under the Apache 2 licence, fork, fix and send back :)</p> 
 </article>
</div>