<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <p><a href="https://snap-ci.com/ashwanthkumar/finder/branch/master" target="_blank"><img src="https://camo.githubusercontent.com/8c8c849d8642b302f2ec03deec75e4696fbb0257/68747470733a2f2f736e61702d63692e636f6d2f61736877616e74686b756d61722f66696e6465722f6272616e63682f6d61737465722f6275696c645f696d616765" alt="Build Status" data-canonical-src="https://snap-ci.com/ashwanthkumar/finder/branch/master/build_image" style="max-width:100%;"></a></p> 
  <h1><a id="user-content-finder" class="anchor" href="https://github.com/ashwanthkumar/finder#finder" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>finder</h1> 
  <p>Finder is a hobby project to build a <a href="https://github.com/iipc/openwayback/" target="_blank">Wayback</a> like system without converting our existing crawled data which are in SequenceFiles to WARC / ARC formats. Architecture is very much inspired from Wayback but with a few changes. Finder not only supports HTML but can provide key+timestamp based access to any dataset. These are very typical in the <a href="http://lambda-architecture.net/" target="_blank">Î» Architecture</a> world, where raw immutable dataset is the fundamental assumption.</p> 
  <h2><a id="user-content-getting-started" class="anchor" href="https://github.com/ashwanthkumar/finder#getting-started" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Getting Started</h2> 
  <ul> 
   <li>Run the <code>SampleDatagenerator</code> program from your fav. IDE</li> 
   <li>By default it would create a folder in the project structure called "example-user-data"</li> 
   <li>Run the <code>FinderService</code> from <code>services</code> module</li> 
   <li>Example Queries 
    <ul> 
     <li><a href="http://localhost:7070/user/search/Tanek" target="_blank">http://localhost:7070/user/search/Tanek</a></li> 
     <li><a href="http://localhost:7070/user/get/Tanek/timestamp_from_previous_search" target="_blank">http://localhost:7070/user/get/Tanek/timestamp_from_previous_search</a></li> 
    </ul></li> 
  </ul> 
  <h2><a id="user-content-dependencies" class="anchor" href="https://github.com/ashwanthkumar/finder#dependencies" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Dependencies</h2> 
  <p>To build datasets for your models, use the following dependency on finder-core.</p> 
  <p>For Maven,</p> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">dependency</span>&gt;
  &lt;<span class="pl-ent">groupId</span>&gt;in.ashwanthkumar&lt;/<span class="pl-ent">groupId</span>&gt;
  &lt;<span class="pl-ent">artifactId</span>&gt;finder-core_2.10&lt;/<span class="pl-ent">artifactId</span>&gt;
  &lt;<span class="pl-ent">version</span>&gt;0.0.1&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre>
  </div> 
  <p>For SBT,</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>in.ashwanthkumar<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>finder-core<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.0.1<span class="pl-pds">"</span></span></pre>
  </div> 
  <h2><a id="user-content-finder-http-service" class="anchor" href="https://github.com/ashwanthkumar/finder#finder-http-service" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Finder HTTP Service</h2> 
  <p>Finder comes with a simple microservice that gives you access to the dataset.</p> 
  <pre><code>GET  /:dataset/search/:key  Searches for a given key in the given dataset. Key is prefix matched with the key that's used in the dataset while indexing.
GET  /:dataset/get/:key/:timestamp Returns the underlying record from the Dataset.
</code></pre> 
  <h2><a id="user-content-more-info" class="anchor" href="https://github.com/ashwanthkumar/finder#more-info" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>More Info</h2> 
  <p>You can define a custom Dataset like</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">finder.spec.</span><span class="pl-v">Dataset</span>
<span class="pl-k">import</span> <span class="pl-v">finder.util.</span><span class="pl-v">JSONUtil</span>

<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">User</span>(<span class="pl-v">name</span>: <span class="pl-k">String</span>, <span class="pl-v">age</span>: <span class="pl-k">Int</span>, <span class="pl-v">timestamp</span>: <span class="pl-k">Long</span>)

<span class="pl-k">class</span> <span class="pl-en">UserDataset</span> <span class="pl-k">extends</span> <span class="pl-e">Dataset</span>[<span class="pl-en">User</span>] {
  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">key</span>(<span class="pl-v">input</span>: <span class="pl-en">User</span>)<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> input.name
<span class="pl-c">  <span class="pl-c">/**</span></span>
<span class="pl-c">   * Timestamp of the record in UTC timezone</span>
<span class="pl-c">   <span class="pl-c">*/</span></span>
  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">timestamp</span>(<span class="pl-v">input</span>: <span class="pl-en">User</span>)<span class="pl-k">:</span> <span class="pl-k">Long</span> <span class="pl-k">=</span> input.timestamp
  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">serialize</span>(<span class="pl-v">input</span>: <span class="pl-en">User</span>)<span class="pl-k">:</span> <span class="pl-en">Array</span>[<span class="pl-k">Byte</span>] <span class="pl-k">=</span> <span class="pl-en">JSONUtil</span>.toJson(input).getBytes
  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">deserialize</span>(<span class="pl-v">input</span>: <span class="pl-en">Array</span>[<span class="pl-k">Byte</span>])<span class="pl-k">:</span> <span class="pl-en">User</span> <span class="pl-k">=</span> <span class="pl-en">JSONUtil</span>.readAs(<span class="pl-c1">classOf</span>[<span class="pl-en">User</span>])(<span class="pl-k">new</span> <span class="pl-en">String</span>(input))
}</pre>
  </div> 
  <p>All the dataset goes with a configuration in <code>application.conf</code> like</p> 
  <pre lang="hocon"><code>finder {
  datasets {
    descriptors: [{
      name: "user"
      impl: "finder.models.UserDataset"
      index {
        params {
          db-location: "user-db"
        }
      }
    }]
  }
}
</code></pre> 
  <p>Finder uses an Index to store and retrieve metadata information regarding every record. By default we use LevelDB backed index, but again it is pluggable. Most likely we could use something like <a href="https://github.com/nathanmarz/elephantdb" target="_blank">ElephantDB</a> to query the index.</p> 
  <h2><a id="user-content-todos" class="anchor" href="https://github.com/ashwanthkumar/finder#todos" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>TODOs</h2> 
  <ul> 
   <li><s>Build a HTTP service to provide access to these datasets</s></li> 
   <li>ElephantDB Adaptors</li> 
   <li>Partitioned Indexes - Comes for free with ElephantDB but for local LevelDB instances we might want to build something on our own</li> 
   <li>Versioned datasets - Each version could be a different run of the view in Batch Layer</li> 
  </ul> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/ashwanthkumar/finder#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p>Licensed under the Apache License, Version 2.0: <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">http://www.apache.org/licenses/LICENSE-2.0</a></p> 
 </article>
</div>