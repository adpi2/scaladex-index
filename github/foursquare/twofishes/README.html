<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h2><a id="user-content-notice---this-project-has-moved" class="anchor" href="https://github.com/foursquare/twofishes#notice---this-project-has-moved" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>NOTICE - This project has moved.</h2> 
  <p>It is now part of Foursquare's open source monorepo <a href="https://github.com/foursquare/fsqio" target="_blank">Fsq.io</a> and all future work will be published there.</p> 
  <p>The project very much lives on but this Github repo is deprecated.</p> 
  <h2><a id="user-content-twofishes" class="anchor" href="https://github.com/foursquare/twofishes#twofishes" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Twofishes</h2> 
  <p>A coarse, splitting geocoder and reverse geocoder in scala -- Prebuilt indexes and binaries available at <a href="http://twofishes.net/" target="_blank">twofishes.net</a>. Discussion at <a href="https://groups.google.com/forum/?fromgroups#!forum/twofishes" target="_blank">google groups</a>.</p> 
  <h1><a id="user-content-what-is-a-geocoder" class="anchor" href="https://github.com/foursquare/twofishes#what-is-a-geocoder" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>What is a Geocoder?</h1> 
  <p>A geocoder is a piece of software that translates from strings to coordinates. "New York, NY" to "40.74, -74.0". This is an implementation of a coarse (city level, meaning it can't understand street addresses) geocoder that also supports splitting (breaking off the non-geocoded part in the final response).</p> 
  <h1><a id="user-content-overview" class="anchor" href="https://github.com/foursquare/twofishes#overview" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Overview</h1> 
  <p>This geocoder was designed around the geonames data, which is relatively small, and easy to parse in a short amount of time in a single thread without much post-processing. Geonames is a collection of simple text files that represent political features across the world. The geonames data has the nice property that all the features are listed with stable identifiers for their parents, the bigger political features that contain them (rego park -&gt; queens county -&gt; new york state -&gt; united states). In one pass, we can build a database where each entry is a feature with a list of names for indexing, names for display, and a list of parents.</p> 
  <h1><a id="user-content-the-data" class="anchor" href="https://github.com/foursquare/twofishes#the-data" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>The Data</h1> 
  <ul> 
   <li><a href="https://github.com/foursquare/twofishes/blob/master/docs/twofishes_inputs.md" target="_blank">Twofishes Input Data File Documentation</a></li> 
  </ul> 
  <p>Geonames is great, but not perfect. Southeast Asia doesn't have the most comprehensive coverage. Geonames doesn't have bounding boxes, so we add some of those from <a href="http://code.flickr.com/blog/2011/01/08/flickr-shapefiles-public-dataset-2-0/" target="_blank">http://code.flickr.com/blog/2011/01/08/flickr-shapefiles-public-dataset-2-0/</a> where possible.</p> 
  <p>Geonames is licensed under CC-BY <a href="http://www.geonames.org/" target="_blank">http://www.geonames.org/</a>. They take a pretty liberal interpretation of this and just ask for about page attribution if you make use of the data. Flickr shapefiles are public domain</p> 
  <h1><a id="user-content-reverse-geocoding-and-polygons" class="anchor" href="https://github.com/foursquare/twofishes#reverse-geocoding-and-polygons" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Reverse Geocoding and Polygons</h1> 
  <p>To enable reverse geocoding in twofishes, you need to add polygon data to the inputs. geonames does not distribute polygons, nor does the twofishes distribution contain shapefiles. Shapefiles must be in epsg:4326 projection. The following script will write a copy of your shapefile with an extra property that is the geonameid of the matching feature.</p> 
  <p>I will add automated scripts for this soon, but for now, if you have shapefiles that map to existing geonames features that you want to put into twofishes</p> 
  <ul> 
   <li>load geonames in postgis accoridng to <a href="https://github.com/colemanm/gazetteer/blob/master/docs/geonames_postgis_import.md" target="_blank">https://github.com/colemanm/gazetteer/blob/master/docs/geonames_postgis_import.md</a></li> 
   <li>run the shape-gn-matchr script from <a href="https://github.com/blackmad/shputils" target="_blank">https://github.com/blackmad/shputils</a> (see instructions below)</li> 
   <li>take the resulting shapefile (the shp, shx, cpg, dbf) and put them in data/private/polygons</li> 
  </ul> 
  <p>examples:</p> 
  <p>US place (locality) data -- <a href="ftp://ftp2.census.gov/geo/tiger/TIGER2010/PLACE/2010/" target="_blank">ftp://ftp2.census.gov/geo/tiger/TIGER2010/PLACE/2010/</a> ~/shputils/shape-gn-matchr.py --shp_name_keys=NAME10 tl_2010_35_place10.shp gn-tl_2010_35_place10.shp</p> 
  <p>US county data -- <a href="ftp://ftp2.census.gov/geo/tiger/TIGER2010/COUNTY/2010/" target="_blank">ftp://ftp2.census.gov/geo/tiger/TIGER2010/COUNTY/2010/</a> ../shputils/shape-gn-matchr.py --dbname=gis --shp_name_keys=NAME10 --allowed_gn_classes='' --allowed_gn_codes=ADM2 --fallback_allowed_gn_classes='' --fallback_allowed_gn_codes='' tl_2010_us_county10.shp gn-us-adm2.shp</p> 
  <p>MX locality data -- <a href="http://blog.diegovalle.net/2013/02/download-shapefiles-of-mexico.html" target="_blank">http://blog.diegovalle.net/2013/02/download-shapefiles-of-mexico.html</a> ogr2ogr -t_srs EPSG:4326 mx-4326.shp MUNICIPIOS.shp ./shputils/shape-gn-matchr.py --dbname=gis --shp_name_keys=NOM_MUN mx-4326.shp gn-mx-localities.shp</p> 
  <h1><a id="user-content-requirements" class="anchor" href="https://github.com/foursquare/twofishes#requirements" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Requirements</h1> 
  <ul> 
   <li>Java (jre and jdk)</li> 
   <li><a href="http://www.mongodb.org/display/DOCS/Quickstart" target="_blank">Mongo</a></li> 
   <li>curl</li> 
   <li>unzip</li> 
  </ul> 
  <h1><a id="user-content-first-time-setup" class="anchor" href="https://github.com/foursquare/twofishes#first-time-setup" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>First time setup</h1> 
  <ul> 
   <li>git clone <a href="https://github.com/foursquare/twofishes.git" target="_blank">https://github.com/foursquare/twofishes.git</a></li> 
   <li>cd twofishes</li> 
   <li>If you want to download country: ./download-country.sh [ISO 3166 country code] (For example US, GB, etc)</li> 
   <li>If you want to download world: ./download-world.sh</li> 
  </ul> 
  <h1><a id="user-content-data-import" class="anchor" href="https://github.com/foursquare/twofishes#data-import" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Data import</h1> 
  <ul> 
   <li>mongod --dbpath /local/directory/for/output/</li> 
   <li>If you want to import countries: ./parse.py -c US /output/dir (Note that you can specify list of countries separating them by comma: US,GB,RU)</li> 
   <li>If you want to import world: ./parse.py -w /output/dir</li> 
  </ul> 
  <h1><a id="user-content-serving" class="anchor" href="https://github.com/foursquare/twofishes#serving" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Serving</h1> 
  <ul> 
   <li>./serve.py -p 8080 /output/dir – Where /output/dir will contain a subdirectory whose name will be the date of the most recent build, for example <code>2013-02-25-01-08-23.803740</code>. You need to point to this subdirectory or to a folder called <code>latest</code> which is created during the build process (in the twofishes directory) and is a symlink to the most recent dated subdirectory.</li> 
   <li>server should be responding to finagle-thrift on the port specified (8080 by default), and responding to http requests at the next port up: <a href="http://localhost:8081/?query=rego+park+ny" target="_blank">http://localhost:8081/?query=rego+park+ny</a> <a href="http://localhost:8081/static/geocoder.html#rego+park" target="_blank">http://localhost:8081/static/geocoder.html#rego+park</a></li> 
   <li>use the --host flag to specify a bind address (defaults to 0.0.0.0)</li> 
   <li>to enable hotfixes and allow refreshing, use the --hotfix_basepath and --enable_private_endpoints params as detailed under <a href="https://github.com/foursquare/twofishes#hotfixes" target="_blank">Hotfixes</a> below</li> 
  </ul> 
  <p>NOTE: mongod is not required for serving, only index building.</p> 
  <p>A better option is to run "./sbt server/assembly" and then use the resulting server/target/server-assembly-VERSION.jar. Serve that with java -jar JARFILE --hfile_basepath /directory</p> 
  <h1><a id="user-content-hotfixes" class="anchor" href="https://github.com/foursquare/twofishes#hotfixes" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Hotfixes</h1> 
  <p><a name="user-content-hotfixes" target="_blank" href=""></a> Hotfixes are expressed as fine-grained edits on top of features in the index. Features can be quickly added, removed or modified on a live server without requiring a full index rebuild and redeploy. Most fields on a <a href="https://github.com/foursquare/twofishes/blob/master/interface/src/main/thrift/geocoder.thrift#L216" target="_blank">GeocodeServingFeature</a> and fields on its nested structs can be edited via a <a href="https://github.com/foursquare/twofishes/blob/master/interface/src/main/thrift/feature_edits.thrift#L35" target="_blank">GeocodeServingFeatureEdit</a> object.</p> 
  <p>To enable hotfix support, the server can be pointed to a hotfix directory at startup via the --hotfix_basepath param. Any .json files found in this directory will be deserialized from JSON to Thrift.</p> 
  <p>There is only basic tooling to build these JSON hotfix files at present. In <a href="https://github.com/foursquare/twofishes/blob/master/server/src/main/scala/JsonHotfixFileBuilder.scala" target="_blank">JsonHotfixFileBuilder.scala</a>, use <code>GeocodeServingFeatureEdit.newBuilder</code> to build up individual hotfixes in code. Then run build-hotfix-file.py specifying an output file. I will provide a better way shortly.</p> 
  <p>The server can reload hotfixes on-demand via the /refreshStore endpoint. There is no authentication on this endpoint (or any other private endpoints), so it is disabled by default. Use the --enable_private_endpoints param to enable at your own risk, only if your servers are not publicly accessible. When enabled, calling this endpoint on an individual server will cause it to re-scan the hotfix_basepath directory. Use the helper script refresh-store.py.</p> 
  <h1><a id="user-content-troubleshooting" class="anchor" href="https://github.com/foursquare/twofishes#troubleshooting" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Troubleshooting</h1> 
  <p>If you see a java OutOfMemory error at start, you may need to up your # of mapped files</p> 
  <p>on linux: sysctl -w vm.max_map_count = 131072</p> 
  <h1><a id="user-content-talking-to-the-server" class="anchor" href="https://github.com/foursquare/twofishes#talking-to-the-server" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Talking to the Server</h1> 
  <ul> 
   <li><a href="https://github.com/foursquare/twofishes/blob/master/docs/twofishes_requests.md" target="_blank">Twofishes Request Format Documentation</a></li> 
  </ul> 
  <h1><a id="user-content-technical-details" class="anchor" href="https://github.com/foursquare/twofishes#technical-details" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Technical Details</h1> 
  <p>I use mongo to save state during the index building phase (so that, for instance, we can parse the alternateNames file, which adds name+lang pairs to features defined in a separate file, or adding the flickr bounding boxes). A final pass goes over the database, dereferences ids and outputs some hadoop mapfiles and hfiles. These two hfiles are all that is required for serving the data.</p> 
  <p>If we were doing heavier processing on the incoming data, a mapreduce that spits out hfiles might make more sense.</p> 
  <p>When we parse a query, we do a rough recursive descent parse, starting from the left. If being used to split geographic queries like "pizza new york" we expect the "what" to be on the left. All of the features found in a parse must be parents of the smallest</p> 
  <p>The geocoder currently may return multiple valid parses, however, it only returns the longest possible parses. For "Springfield, US" we will return multiple features that match that query (there are dozens of springfields in the US). It will not return a parse of "Springfield" near "US" with only US geocoded if it can find a longer parse, but it will return multiple valid interpretations of the longest parse.</p> 
  <h1><a id="user-content-performance" class="anchor" href="https://github.com/foursquare/twofishes#performance" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Performance</h1> 
  <p>Twofishes can handle 100s of queries a second at &lt; 5ms/query on average.</p> 
  <p>Point reverse geocoding is absurdly performant -- 1000s of queries a second at &lt; 1ms/query.</p> 
  <h1><a id="user-content-future" class="anchor" href="https://github.com/foursquare/twofishes#future" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Future</h1> 
  <p>I'd like to integrate more data from OSM and possibly an entire build solely from OSM. I'd also like to get supplemental data from the Foursquare database where possible. If I was feeling more US-centric, I'd parse the TIGER-line data for US polygons, but I'm expecting those to mostly be in OSM.</p> 
  <p>Also US-centric are zillow neighborhood polygons, also CC-by-SA. I might add an "attribution" field to the response for certain datasources. I'm not looking forward to writing a conflater with precedence for overlapping features from different data sets.</p> 
  <h1><a id="user-content-contributors" class="anchor" href="https://github.com/foursquare/twofishes#contributors" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Contributors</h1> 
  <ul> 
   <li>David Blackman <a href="mailto:blackmad@twitter.com" target="_blank">blackmad@twitter.com</a></li> 
   <li>Rahul Maddimsetty <a href="mailto:rahul@foursquare.com" target="_blank">rahul@foursquare.com</a></li> 
   <li>John Gallagher <a href="mailto:john@foursquare.com" target="_blank">john@foursquare.com</a></li> 
   <li>Jeff Kao <a href="mailto:jeffk@foursquare.com" target="_blank">jeffk@foursquare.com</a></li> 
   <li>Arkadiy Kukarkin <a href="mailto:parkan@gmail.com" target="_blank">parkan@gmail.com</a></li> 
   <li>Neil Sanchala</li> 
  </ul> 
  <p>Many thanks for assistance:</p> 
  <ul> 
   <li>Jorge Ortiz</li> 
  </ul> 
  <h1><a id="user-content-unrelated" class="anchor" href="https://github.com/foursquare/twofishes#unrelated" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Unrelated</h1> 
  <p>These are the two fishes I grilled the night I started coding the original python implementation <a href="https://twitter.com/#!/whizziwig/statuses/154431957630066688" target="_blank">https://twitter.com/#!/whizziwig/statuses/154431957630066688</a></p> 
 </article>
</div>