<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-tempest-a-real-time-graph-database-beta" class="anchor" href="https://github.com/teapot-co/tempest#tempest-a-real-time-graph-database-beta" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Tempest: A real-time graph database (Beta)</h1> 
  <p><strong>Table of Contents</strong></p> 
  <ul> 
   <li><a href="https://github.com/teapot-co/tempest#features" target="_blank">Features</a></li> 
   <li><a href="https://github.com/teapot-co/tempest#introduction" target="_blank">Introduction</a> 
    <ul> 
     <li><a href="https://github.com/teapot-co/tempest#graphs-are-everywhere" target="_blank">Graphs are Everywhere</a></li> 
     <li><a href="https://github.com/teapot-co/tempest#applications-of-graph-analysis" target="_blank">Applications of Graph Analysis</a></li> 
     <li><a href="https://github.com/teapot-co/tempest#why-a-new-graph-database" target="_blank">Why a new Graph Database?</a></li> 
     <li><a href="https://github.com/teapot-co/tempest#our-approach" target="_blank">Our Approach</a></li> 
     <li><a href="https://github.com/teapot-co/tempest#created-by" target="_blank">Created by</a></li> 
    </ul></li> 
   <li><a href="https://github.com/teapot-co/tempest#using-tempest-db" target="_blank">Using Tempest DB</a> 
    <ul> 
     <li><a href="https://github.com/teapot-co/tempest#recommended-machine-sizes" target="_blank">Recommended Machine Sizes</a></li> 
    </ul></li> 
   <li><a href="https://github.com/teapot-co/tempest#using-the-tempest-library" target="_blank">Using Tempest as a library</a> 
    <ul> 
     <li><a href="https://github.com/teapot-co/tempest#requirements" target="_blank">Requirements</a></li> 
     <li><a href="https://github.com/teapot-co/tempest#converting-a-graph-to-tempest-format" target="_blank">Converting a Graph to Tempest Format</a></li> 
     <li><a href="https://github.com/teapot-co/tempest#language-support-for-tempest" target="_blank">Language Support for Tempest</a> 
      <ul> 
       <li><a href="https://github.com/teapot-co/tempest#scala" target="_blank">Scala</a></li> 
       <li><a href="https://github.com/teapot-co/tempest#java" target="_blank">Java</a></li> 
       <li><a href="https://github.com/teapot-co/tempest#python" target="_blank">Python</a></li> 
      </ul></li> 
    </ul></li> 
   <li><a href="https://github.com/teapot-co/tempest#project-roadmap" target="_blank">Project Roadmap</a></li> 
  </ul> 
  <h2><a id="user-content-features" class="anchor" href="https://github.com/teapot-co/tempest#features" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Features</h2> 
  <ul> 
   <li>Single machine, scale-up architecture: Graphs are notoriously hard to partition if you also need to support real-time traversals. So Tempest runs on a single commodity machine with large-ish memory (see <a href="https://github.com/teapot-co/tempest#recommended-machine-sizes" target="_blank">here</a>).</li> 
   <li>Scalable: Despite running on a single machine, Tempest supports graphs with billions of nodes and edges. For example, it can store a 30 billion edge graph using 300GB of RAM.</li> 
   <li>Fast traversal: Accessing a neighbor of a node is as fast as two RAM accesses. You can run Personalized PageRank in &lt; 200ms.</li> 
   <li>High write throughput: Tempest supports about 1000 edge additions per second when storing them persistently, and hundreds of thousands per second when storing in RAM only.</li> 
   <li>Convenient: Tempest is installed with a single Docker command. Tempest can also be used as a in-memory graph analytics library, and is available as a single sbt or Maven dependency.<br></li> 
   <li>Fast loading: Tempest loads its graph format instantly, even for 30-billion edge graphs, so you can quickly deploy new versions of your code.</li> 
   <li>Flexible: Tempest DB supports clients in any language <a href="https://thrift.apache.org/" target="_blank">Thrift</a> supports. We provide client wrappers for Python and Ruby.</li> 
  </ul> 
  <h2><a id="user-content-introduction" class="anchor" href="https://github.com/teapot-co/tempest#introduction" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Introduction</h2> 
  <h3><a id="user-content-graphs-are-everywhere" class="anchor" href="https://github.com/teapot-co/tempest#graphs-are-everywhere" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Graphs are everywhere</h3> 
  <p>A graph database like Tempest enables you to store and access your graphs the way you conceptually think of them: as nodes and their connections. Graphs donâ€™t just mean social networks; graphs are everywhere. There are communication graphs such as messaging, Skype, and email. There are graphs of users and products, with each purchase (or view or click) corresponding to an edge in the graph. There are interest graphs such as Twitter and Pinterest. There are collaboration graphs such as Wikipedia and, increasingly, Google Docs and Office 365. The Internet of Things (IoT) is really a graph of connected devices. These graphs are growing, and will continue to grow, both in scale and in diversity. Traditional data storage and analytics systems (e.g., SQL, Hadoop, Spark) are poorly suited to help you store, access and analyze your graphs. You need a graph database for it.</p> 
  <h3><a id="user-content-applications-of-graph-analysis" class="anchor" href="https://github.com/teapot-co/tempest#applications-of-graph-analysis" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Applications of Graph Analysis</h3> 
  <p>Graphs are useful in a variety of search and recommendation problems, for example:</p> 
  <ul> 
   <li>Given the search query "John" from a user Alice, find all users named John who are friends-of-friends with Alice.</li> 
   <li>Find all products similar to the ones Jane has bought, where two products are similar if a large fraction of people who buy one also buy the other.</li> 
  </ul> 
  <p>A number of graph databases out there perform very poorly on neighborhood and traversal queries. And that performance degrades rapidly as the graph scales. In fact, no graph database out there can be used for real-time queries at the scale of Twitter or Linkedin. That is, no graph database other than Tempest. </p> 
  <p>Tempest was purpose-built to enable blazingly fast neighborhood queries. By blazingly fast, we mean in under 250 milliseconds for a graph with 100M nodes and 5B edges. In fact, Tempest is about 15x faster at these queries than Neo4j. Tempest scales to graphs with up to 4B nodes and 50B edges. It supports 1000 writes (new nodes and edges) per second while supporting truly real-time queries.</p> 
  <h3><a id="user-content-why-a-new-graph-database" class="anchor" href="https://github.com/teapot-co/tempest#why-a-new-graph-database" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Why a new Graph Database?</h3> 
  <p>At <a href="http://teapot.co" target="_blank">Teapot</a> we work with large social networks, and we needed a graph library that could efficiently allow real-time computation on graphs with 10s of billions of edges. We wanted a JVM-based library so we could write efficient high-level code in Scala. Our web backend is in Ruby, so we also needed a way for languages like Ruby or python to efficiently access our graph. We considered using a distributed library like GraphX or Giraph, but those libraries don't support real-time queries, and the complexity and overhead of managing a cluster were undesirable. On AWS, the cost of a machine scales linearly with the amount of RAM used, so for the price of a 256GB cluster, we could rent a single 256GB machine, and have the convenience and performance of running Scala code directly on a single machine. We initially used the <a href="https://github.com/twitter/cassovary" target="_blank">Cassovary</a> library, but as our graph grew beyond a few billion edges, Cassovary was taking hours to load our graph, making deployments difficult without significant downtime to our service. This led us to rethink how we store graphs.</p> 
  <h3><a id="user-content-our-approach" class="anchor" href="https://github.com/teapot-co/tempest#our-approach" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Our Approach</h3> 
  <p>A key feature of Tempest is reading data directly from a memory mapped binary file, so there is no parsing required and no object or garbage collector overhead. Once the graph file is cached in RAM by the OS, Tempest can read the graph instantly rather than load the graph at start-up as other libraries would. This makes deploying code changes quick and easy. It requires only 8 bytes per edge for bi-directional edge access, so, for example, it can store the <a href="http://law.di.unimi.it/webdata/twitter-2010/" target="_blank">Twitter-2010</a> graph of 1.5 billion edges using 12GB of RAM. We use the Tempest library in production, and it has careful unit tests.</p> 
  <h3><a id="user-content-created-by" class="anchor" href="https://github.com/teapot-co/tempest#created-by" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Created by</h3> 
  <p>Tempest was built by a team of Stanford PhDs---<a href="https://github.com/teapot-co/tempest/blob/master/@plofgren" target="_blank">Peter Lofgren</a> (lead developer), <a href="https://github.com/teapot-co/tempest/blob/master/@ashishgoel" target="_blank">Ashish Goel</a>, <a href="https://github.com/teapot-co/tempest/blob/master/@dandekar" target="_blank">Pranav Dandekar</a>---who have built state-of-the-art systems and algorithms for large scale network analytics at Stanford, Twitter and Amazon. If you have any questions about using Tempest or have feature requests, create a Github issue or send an email to <a href="mailto:peter.lofgren@cs.stanford.edu" target="_blank">peter.lofgren@cs.stanford.edu</a>.</p> 
  <h2><a id="user-content-using-tempest-db-alpha" class="anchor" href="https://github.com/teapot-co/tempest#using-tempest-db-alpha" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Using Tempest DB (alpha)</h2> 
  <ol> 
   <li><p>Tempest's dependencies (including postgres and java) are neatly packaged in a Docker container. Tempest stores your data in a given directory outside docker, so you can upgrade tempest without losing your data. To use Tempest DB, install docker on your machine, then run</p> <p><code>docker run -t -i -v $YOUR_DATA_DIR:/data -p 127.0.0.1:10001:10001 teapotco/tempestdb:latest bash</code> You can make additional directories available to docker as needed, for example, to make your home directory available from inside docker, add <code>-v ~/:/mnt/home/</code> to the above command. The docker image contains a built release of Tempest. If you're a developer and would like to run against a tempest repo you've checked out locally (say at ~/tempest), add <code>-v ~/tempest/:/root/tempest/</code> to the above command. For development, you should also add <code>-p 5432:5432</code> to the above command, and follow the below instructions for creating the test node and edge types, so that your tests can run outside docker against the postgres database inside docker.</p></li> 
   <li><p>You need three types of file to fire up the Tempest server with your graph: a) a csv file for each node type, b) a csv file for each edge type, and c) a folder of config files (one file for each node type and each edge type).</p> <p>To see the format of the headerless node csv and the edge csv expected by Tempest, look at <code>example/users.csv</code> and <code>follows.csv</code>.</p></li> 
   <li>Once you have your node and edge files in csv format, create a config file in <code>$YOUR_DATA_DIR/config/</code> for each node and edge type. The name of the config file must match the name of the node or edge type, so for example if you have a node type called <code>user</code> there must be a file in <code>$YOUR_DATA_DIR/config/user.yaml</code>. As in the example files <code>example/user.yaml</code> and <code>example/book.yaml</code>, each <code>&lt;node_type&gt;.yaml</code> file should have the following fields: 
    <ul> 
     <li>csvFile: the headerless csv file, for example "/mnt/home/data/users.csv"</li> 
     <li>nodeAttributes A list of name and type for each attribute in your csv file. Attributes type may only be 'string', 'int' (32 bit), 'bigint' (64 bit), or 'boolean'. Enter the attributes in the same order as they appear in the node file.</li> 
     <li>One of your nodeAttributes must be called 'id'. This nodeAttribute must have type string, and must be unique across all nodes of this type. As in the example files <code>example/follows.yaml</code> and <code>example/has_read.yaml</code>, each <code>&lt;edge_type&gt;.yaml</code> file should have the following fields:</li> 
     <li>csvFile: the headerless csv file, for example '/mnt/home/data/has_read.csv'. Every line of this file must be a pair "sourceId,targetId" where sourceId matches some id of sourceNodeType, and targetId matches the id of some node in targetNodeType</li> 
     <li>sourceNodeType: The type of node on the left of each edge, for example 'user'</li> 
     <li>targetNodeType: The type of node on the right of each edge, for example 'book'</li> 
    </ul></li> 
   <li><p>Convert your graph to binary and load your nodes and edges into Postgres by running <code>create_node_type.sh &lt;node_type&gt;</code> or <code>create_edge_type.sh &lt;edge_type&gt;</code> for each node or edge type. For example, to load the example graphs, from inside docker run</p> <pre><code># Note: normally you'd create config files outside docker, directly in $YOUR_DATA_DIR
mkdir /data/config/
cp /root/tempest/example/{user,book,follows,has_read}.yaml /data/config/
create_node_type.sh user
create_node_type.sh book
create_edge_type.sh follows
create_edge_type.sh has_read
</code></pre> <p>Depending on the size of your initial graph, this step may take up to a few hours. For example, for a graph of 1B edges, this step will take about 4 hours. We realize that is a long time to wait to get your hands on Tempest, but this is one-time hassle: once Tempest is initialized, stopping/starting only takes a few seconds.</p></li> 
   <li>Start the server <code>start_server.sh</code></li> 
   <li><p>Now you can connect to the server from inside or outside docker. If outside docker, first run <code>pip install tempest_db</code>. Then in <code>ipython</code> you can run, for example</p> <pre><code>import tempest_db
c = tempest_db.TempestClient()
alice_id = c.nodes("user", "username = 'alice'")[0]
alice_book_ids = c.out_neighbors("has_read", alice_id)
alice_book_titles = c.multi_node_attribute("book", alice_book_ids, "title")
</code></pre></li> 
  </ol> 
  <h3><a id="user-content-recommended-machine-sizes" class="anchor" href="https://github.com/teapot-co/tempest#recommended-machine-sizes" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Recommended Machine Sizes</h3> 
  <table>
   <thead> 
    <tr> 
     <th>Number of edges in the graph</th> 
     <th>EC2 Instance type</th> 
     <th>Volume size (in GB)</th> 
    </tr> 
   </thead>
   <tbody> 
    <tr> 
     <td>&lt; 50M</td> 
     <td>r3.large</td> 
     <td>100</td> 
    </tr> 
    <tr> 
     <td>50M-500M</td> 
     <td>r3.xlarge</td> 
     <td>200</td> 
    </tr> 
    <tr> 
     <td>500M-5B</td> 
     <td>r3.2xlarge</td> 
     <td>2000</td> 
    </tr> 
    <tr> 
     <td>5B-10B</td> 
     <td>r3.4xlarge</td> 
     <td>5000</td> 
    </tr> 
    <tr> 
     <td>10B+</td> 
     <td>r3.8xlarge</td> 
     <td>10,000</td> 
    </tr> 
   </tbody>
  </table> 
  <h2><a id="user-content-using-tempest-as-a-library" class="anchor" href="https://github.com/teapot-co/tempest#using-tempest-as-a-library" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Using Tempest as a library</h2> 
  <h3><a id="user-content-requirements" class="anchor" href="https://github.com/teapot-co/tempest#requirements" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Requirements</h3> 
  <p>Tempest depends on Java, <a href="http://www.scala-sbt.org/download.html" target="_blank">sbt</a>, and <a href="https://thrift.apache.org/" target="_blank">thrift</a>. To install thrift on OS X, you can run <code>brew install thrift</code>, or for other platforms see their <a href="https://thrift.apache.org/docs/install/" target="_blank">install instructions</a>. Before compiling Tempest, you'll need to generate thrift files using <code>src/main/bash/generate_thrift.sh</code>.</p> 
  <h3><a id="user-content-converting-a-graph-to-tempest-format" class="anchor" href="https://github.com/teapot-co/tempest#converting-a-graph-to-tempest-format" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Converting a Graph to Tempest Format</h3> 
  <p>For large graphs, you will want to first convert your graph to the Tempest binary format. The input to our converter is a simple text format where each line has the form "id1 id2" to indicate an edge from id1 to id2, where id1 and id2 are integers between 0 and 2^31. To convert the test graph, for example, run:</p> 
  <pre><code>git clone https://github.com/teapot-co/tempest.git
cd tempest
src/main/bash/generate_thrift.sh
bin/convert_graph_immutable.sh src/test/resources/test_graph.txt test_graph.dat
</code></pre> 
  <h3><a id="user-content-languages-supported-by-tempest" class="anchor" href="https://github.com/teapot-co/tempest#languages-supported-by-tempest" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Languages Supported by Tempest</h3> 
  <h4><a id="user-content-scala" class="anchor" href="https://github.com/teapot-co/tempest#scala" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scala</h4> 
  <p>Simply add</p> 
  <pre><code>libraryDependencies += "co.teapot" %% "tempest" % "0.14.0"
</code></pre> 
  <p>to your <code>build.sbt</code> file. The graph classes in tempest are the following:</p> 
  <ul> 
   <li><a href="http://teapot-co.github.io/tempest/scaladoc/#co.teapot.tempest.graph.DirectedGraph" target="_blank">DirectedGraph</a> defines the interface for graphs</li> 
   <li><a href="http://teapot-co.github.io/tempest/scaladoc/#co.teapot.tempest.graph.MemoryMappedDirectedGraph" target="_blank">MemoryMappedDirectedGraph</a> efficiently reads an immutable graph from a Tempest binary graph file</li> 
   <li><a href="http://teapot-co.github.io/tempest/scaladoc/#co.teapot.tempest.graph.MemMappedDynamicDirectedGraph" target="_blank">MemoryMappedMutableDirectedGraph</a> efficiently stores a large graph in a binary file and allows efficient edge additions</li> 
   <li><a href="http://teapot-co.github.io/tempest/scaladoc/#co.teapot.tempest.graph.ConcurrentHashMapDynamicGraph" target="_blank">ConcurrentHashMapDynamicGraph</a> is a simple mutable graph class based on ConcurrentHashMap</li> 
  </ul> 
  <p>As an example of using the graph methods, convert the test graph to test_graph.dat as described above, then run the following from the tempest directory:</p> 
  <pre><code>sbt console
val graph = co.teapot.tempest.graph.MemoryMappedDirectedGraph("test_graph.dat")
graph.nodeCount
graph.edgeCount
graph.outDegree(4)
graph.outNeighbors(4)
graph.inNeighbors(4)
</code></pre> 
  <h4><a id="user-content-java" class="anchor" href="https://github.com/teapot-co/tempest#java" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Java</h4> 
  <p>Because scala compiles to the jvm, you can naturally use Tempest from Java. Tempest is in a maven repo, so you're using maven, simply add</p> 
  <pre><code>&lt;dependency&gt;
      &lt;groupId&gt;co.teapot&lt;/groupId&gt;
      &lt;artifactId&gt;tempest_2.11&lt;/artifactId&gt;
      &lt;version&gt;0.14.0&lt;/version&gt;
    &lt;/dependency&gt;
</code></pre> 
  <p>to your pom.xml file to access the Tempest dependency. Then for example, in Java you can <code>import co.teapot.tempest.graph.MemoryMappedDirectedGraph</code> and write</p> 
  <pre><code>MemoryMappedDirectedGraph graph = new MemoryMappedDirectedGraph(new File("test_graph.dat"));
System.out.println("out-neighbors of 2: " + graph.outNeighborList(2));
</code></pre> 
  <p>The documentation javadoc for the graph classes is linked above in the Scala section.</p> 
  <h4><a id="user-content-python" class="anchor" href="https://github.com/teapot-co/tempest#python" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Python</h4> 
  <p>To use tempest from python, it has a client/server mode, where the server stores large graphs in RAM, while the client is conveniently in python. The server and client can even be on different machines; for example the client can run on a web server while the server runs in a large graph server.</p> 
  <p>First clone the repository and convert the graph to Tempest binary format, as described above. Then start the server, supplying the binary graph name, for example</p> 
  <pre><code>bin/start_graph_only_server.sh test_graph.dat 
</code></pre> 
  <p>The server runs by default on TCP port 10001, but you can change this, for example</p> 
  <pre><code>bin/start_graph_only_server.shtest_graph.dat 12345
</code></pre> 
  <p>Finally, connect to the server from python. First run <code>pip install tempest_db</code>. Then from the python console:</p> 
  <pre><code>&gt;&gt;&gt; import tempest_db
&gt;&gt;&gt; graph = tempest_db.client()
&gt;&gt;&gt; graph.max_node_id()
9
&gt;&gt;&gt; graph.out_degree(2)
4
&gt;&gt;&gt; graph.out_neighbors(2)
[0, 1, 3, 9]
</code></pre> 
  <h2><a id="user-content-project-roadmap" class="anchor" href="https://github.com/teapot-co/tempest#project-roadmap" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Project Roadmap</h2> 
  <ul> 
   <li>Improve support for multiple edge types.</li> 
   <li>Support edge attributes.</li> 
  </ul> 
 </article>
</div>