<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-spark-lucenerdd" class="anchor" href="https://github.com/zouzias/spark-lucenerdd#spark-lucenerdd" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>spark-lucenerdd</h1> 
  <p><a href="https://travis-ci.org/zouzias/spark-lucenerdd" target="_blank"><img src="https://camo.githubusercontent.com/1569699ba790ff6093fcca8436564a989c516621/68747470733a2f2f7472617669732d63692e6f72672f7a6f757a6961732f737061726b2d6c7563656e657264642e7376673f6272616e63683d6d6173746572" alt="Master" data-canonical-src="https://travis-ci.org/zouzias/spark-lucenerdd.svg?branch=master" style="max-width:100%;"></a> <a href="https://codecov.io/gh/zouzias/spark-lucenerdd" target="_blank"><img src="https://camo.githubusercontent.com/f50fbd498b3404041562bfd09ba79a030994aaf4/68747470733a2f2f636f6465636f762e696f2f67682f7a6f757a6961732f737061726b2d6c7563656e657264642f6272616e63682f6d61737465722f67726170682f62616467652e737667" alt="codecov" data-canonical-src="https://codecov.io/gh/zouzias/spark-lucenerdd/branch/master/graph/badge.svg" style="max-width:100%;"></a> <a href="https://maven-badges.herokuapp.com/maven-central/org.zouzias/spark-lucenerdd_2.11/" target="_blank"><img src="https://camo.githubusercontent.com/120a4479e453a9848f6ddf45a4a072dd91ad2367/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f6f72672e7a6f757a6961732f737061726b2d6c7563656e657264645f322e31312e737667" alt="Maven" data-canonical-src="https://img.shields.io/maven-central/v/org.zouzias/spark-lucenerdd_2.11.svg" style="max-width:100%;"></a> <a href="http://javadoc.io/doc/org.zouzias/spark-lucenerdd_2.11/" target="_blank"><img src="https://camo.githubusercontent.com/a140acd64e01382966282b94a9b9c16b01c1f91f/687474703a2f2f6a617661646f632e696f2f62616467652f6f72672e7a6f757a6961732f737061726b2d6c7563656e657264645f322e31313a302e332e302e7376673f636f6c6f723d79656c6c6f77677265656e" alt="Javadocs" data-canonical-src="http://javadoc.io/badge/org.zouzias/spark-lucenerdd_2.11:0.3.0.svg?color=yellowgreen" style="max-width:100%;"></a> <a href="https://gitter.im/spark-lucenerdd/Lobby" target="_blank"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Gitter" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg" style="max-width:100%;"></a></p> 
  <p><a href="http://spark.apache.org" target="_blank">Spark</a> RDD with Apache <a href="https://lucene.apache.org" target="_blank">Lucene</a>'s query capabilities.</p> 
  <p>The main abstractions are special types of <code>RDD</code> called <code>LuceneRDD</code>, <code>FacetedLuceneRDD</code> and <code>ShapeLuceneRDD</code>, which instantiate a Lucene index on each Spark executor. These <code>RDD</code>s distribute search queries and aggregate search results between the Spark driver and its executors. Currently, the following queries are supported:</p> 
  <table> 
   <thead> 
    <tr> 
     <th>Operation</th> 
     <th>Syntax</th> 
     <th>Description</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td>Term Query</td> 
     <td><code>LuceneRDD.termQuery(field, query, topK)</code></td> 
     <td>Exact term search</td> 
    </tr> 
    <tr> 
     <td>Fuzzy Query</td> 
     <td><code>LuceneRDD.fuzzyQuery(field, query, maxEdits, topK)</code></td> 
     <td>Fuzzy term search</td> 
    </tr> 
    <tr> 
     <td>Phrase Query</td> 
     <td><code>LuceneRDD.phraseQuery(field, query, topK)</code></td> 
     <td>Phrase search</td> 
    </tr> 
    <tr> 
     <td>Prefix Query</td> 
     <td><code>LuceneRDD.prefixSearch(field, prefix, topK)</code></td> 
     <td>Prefix search</td> 
    </tr> 
    <tr> 
     <td>Query Parser</td> 
     <td><code>LuceneRDD.query(queryString, topK)</code></td> 
     <td>Query parser search</td> 
    </tr> 
    <tr> 
     <td>Faceted Search</td> 
     <td><code>FacetedLuceneRDD.facetQuery(queryString, field, topK)</code></td> 
     <td>Faceted Search</td> 
    </tr> 
    <tr> 
     <td><a href="https://github.com/zouzias/spark-lucenerdd/wiki/Record-Linkage" target="_blank">Record Linkage</a></td> 
     <td><code>LuceneRDD.link(otherEntity: RDD[T], linkageFct: T =&gt; searchQuery, topK)</code></td> 
     <td>Record linkage via Lucene queries</td> 
    </tr> 
    <tr> 
     <td>Circle Search</td> 
     <td><code>ShapeLuceneRDD.circleSearch((x,y), radius, topK)</code></td> 
     <td>Search within radius</td> 
    </tr> 
    <tr> 
     <td>Bbox Search</td> 
     <td><code>ShapeLuceneRDD.bboxSearch(lowerLeft, upperLeft, topK)</code></td> 
     <td>Bounding box</td> 
    </tr> 
    <tr> 
     <td>Spatial Linkage</td> 
     <td><code>ShapeLuceneRDD.linkByRadius(RDD[T], linkage: T =&gt; (x,y), radius, topK)</code></td> 
     <td>Spatial radius linkage</td> 
    </tr>
   </tbody>
  </table> 
  <p>Using the query parser, you can perform prefix queries, fuzzy queries, prefix queries, etc and any combination of those. For more information on using Lucene's query parser, see <a href="https://lucene.apache.org/core/5_5_0/queryparser/org/apache/lucene/queryparser/classic/QueryParser.html" target="_blank">Query Parser</a>.</p> 
  <h3><a id="user-content-examples" class="anchor" href="https://github.com/zouzias/spark-lucenerdd#examples" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Examples</h3> 
  <p>Here are a few examples using <code>LuceneRDD</code> for full text search, spatial search and record linkage. All examples exploit Lucene's flexible query language. For spatial search, <code>lucene-spatial</code> and <code>jts</code> are required.</p> 
  <ul> 
   <li><a href="https://github.com/zouzias/spark-lucenerdd/wiki/Full-text-search" target="_blank">Text Search</a></li> 
   <li><a href="https://github.com/zouzias/spark-lucenerdd/wiki/Spatial-search" target="_blank">Spatial Search</a></li> 
   <li><a href="https://github.com/zouzias/spark-lucenerdd/wiki/Record-Linkage" target="_blank">Record Linkage</a></li> 
  </ul> 
  <p>For more, check the <a href="https://github.com/zouzias/spark-lucenerdd/wiki" target="_blank">wiki</a>. More examples are available at <a href="https://github.com/zouzias/spark-lucenerdd-examples" target="_blank">examples</a> and performance evaluation examples on AWS can be found <a href="https://github.com/zouzias/spark-lucenerdd-aws" target="_blank">here</a>.</p> 
  <h2><a id="user-content-presentations" class="anchor" href="https://github.com/zouzias/spark-lucenerdd#presentations" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Presentations</h2> 
  <p>For an overview of the library, check these <a href="http://www.slideshare.net/zouzias/lucenerdd-for-geospatial-search-and-entity-linkage" target="_blank">ScalaIO 2016 Slides</a>.</p> 
  <h2><a id="user-content-linking" class="anchor" href="https://github.com/zouzias/spark-lucenerdd#linking" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Linking</h2> 
  <p>You can link against this library (for Spark 1.4+) in your program at the following coordinates:</p> 
  <p>Using SBT:</p> 
  <pre><code>libraryDependencies += "org.zouzias" %% "spark-lucenerdd" % "0.3.0"
</code></pre> 
  <p>Using Maven:</p> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">dependency</span>&gt;
    &lt;<span class="pl-ent">groupId</span>&gt;org.zouzias&lt;/<span class="pl-ent">groupId</span>&gt;
    &lt;<span class="pl-ent">artifactId</span>&gt;spark-lucenerdd_2.11&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;0.3.0&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre>
  </div> 
  <p>This library can also be added to Spark jobs launched through <code>spark-shell</code> or <code>spark-submit</code> by using the <code>--packages</code> command line option. For example, to include it when starting the spark shell:</p> 
  <pre><code>$ bin/spark-shell --packages org.zouzias:spark-lucenerdd_2.11:0.3.0
</code></pre> 
  <p>Unlike using <code>--jars</code>, using <code>--packages</code> ensures that this library and its dependencies will be added to the classpath. The <code>--packages</code> argument can also be used with <code>bin/spark-submit</code>.</p> 
  <h3><a id="user-content-compatibility" class="anchor" href="https://github.com/zouzias/spark-lucenerdd#compatibility" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Compatibility</h3> 
  <p>The project has the following compatibility with Apache Spark:</p> 
  <table> 
   <thead> 
    <tr> 
     <th>spark-lucenerdd</th> 
     <th>Release Date</th> 
     <th>Spark compatibility</th> 
     <th>Notes</th> 
     <th>Status</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td>0.3.1-SNAPSHOT</td> 
     <td></td> 
     <td>&gt;= 2.2.0, &gt;=JVM 8</td> 
     <td><a href="https://github.com/zouzias/spark-lucenerdd/tree/develop" target="_blank">develop</a></td> 
     <td>Under Development</td> 
    </tr> 
    <tr> 
     <td>0.3.0</td> 
     <td>2017-07-14</td> 
     <td>&gt;= 2.2.0, &gt;=JVM 8</td> 
     <td><a href="https://github.com/zouzias/spark-lucenerdd/tree/v0.3.0" target="_blank">tagv0.3.0</a></td> 
     <td>Released</td> 
    </tr> 
    <tr> 
     <td>0.2.8</td> 
     <td>2017-05-30</td> 
     <td>2.1.x, JVM 7</td> 
     <td><a href="https://github.com/zouzias/spark-lucenerdd/tree/v0.2.8" target="_blank">tag v0.2.8</a></td> 
     <td>Released</td> 
    </tr> 
    <tr> 
     <td>0.1.0</td> 
     <td>2016-09-26</td> 
     <td>1.4.x, 1.5.x, 1.6.x</td> 
     <td><a href="https://github.com/zouzias/spark-lucenerdd/tree/v0.1.0" target="_blank">tag v0.1.0</a></td> 
     <td>Cross-released with 2.10/2.11</td> 
    </tr>
   </tbody>
  </table> 
  <h3><a id="user-content-project-status-and-limitations" class="anchor" href="https://github.com/zouzias/spark-lucenerdd#project-status-and-limitations" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Project Status and Limitations</h3> 
  <p>Implicit conversions for the primitive types (Int, Float, Double, Long, String) are supported. Moreover, implicit conversions for all product types (i.e., tuples and case classes) of the above primitives are supported. Implicits for tuples default the field names to "_1", "_2", "_3, ... following Scala's naming conventions for tuples.</p> 
  <h3><a id="user-content-custom-case-classes" class="anchor" href="https://github.com/zouzias/spark-lucenerdd#custom-case-classes" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Custom Case Classes</h3> 
  <p>If you want to use your own custom class with <code>LuceneRDD</code> you can do it provided that your class member types are one of the primitive types (Int, Float, Double, Long, String).</p> 
  <p>For more details, see <code>LuceneRDDCustomcaseClassImplicits</code> under the tests directory.</p> 
  <h2><a id="user-content-development" class="anchor" href="https://github.com/zouzias/spark-lucenerdd#development" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Development</h2> 
  <h3><a id="user-content-docker" class="anchor" href="https://github.com/zouzias/spark-lucenerdd#docker" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Docker</h3> 
  <p>A docker compose script is setup with some preliminary notebook in Zeppelin, run</p> 
  <pre><code>docker-compose up
</code></pre> 
  <p>For more LuceneRDD examples on Zeppelin, check these <a href="https://github.com/zouzias/spark-lucenerdd-examples" target="_blank">examples</a></p> 
  <h3><a id="user-content-build-from-source" class="anchor" href="https://github.com/zouzias/spark-lucenerdd#build-from-source" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Build from Source</h3> 
  <p>Install Java, <a href="http://www.scala-sbt.org" target="_blank">SBT</a> and clone the project</p> 
  <div class="highlight highlight-source-shell">
   <pre>git clone https://github.com/zouzias/spark-lucenerdd.git
<span class="pl-c1">cd</span> spark-lucenerdd
sbt compile assembly</pre>
  </div> 
  <p>The above will create an assembly jar containing spark-lucenerdd functionality under <code>target/scala-*/spark-lucenerdd-assembly-*.jar</code></p> 
 </article>
</div>