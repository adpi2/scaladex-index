<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <p align="center"> <a href="https://camo.githubusercontent.com/a28e06d3ab1aff761404dbd11a78e1df1ccc7241/68747470733a2f2f706163346a2e6769746875622e696f2f706163346a2f696d672f6c6f676f2d706c61792e706e67" target="_blank"><img src="https://camo.githubusercontent.com/a28e06d3ab1aff761404dbd11a78e1df1ccc7241/68747470733a2f2f706163346a2e6769746875622e696f2f706163346a2f696d672f6c6f676f2d706c61792e706e67" width="300" data-canonical-src="https://pac4j.github.io/pac4j/img/logo-play.png" style="max-width:100%;"></a> </p> 
  <p>The <code>play-pac4j</code> project is an <strong>easy and powerful security library for Play framework v2</strong> web applications which supports authentication and authorization, but also application logout and advanced features like CSRF protection. It can work with Deadbolt. It's based on Play 2.5 and on the <strong><a href="https://github.com/pac4j/pac4j" target="_blank">pac4j security engine</a></strong>. It's available under the Apache 2 license.</p> 
  <p>Several versions of the library are available for the different versions of the Play framework:</p> 
  <table>
   <thead> 
    <tr> 
     <th>Play version</th> 
     <th>pac4j version</th> 
     <th>play-pac4j version</th> 
    </tr> 
   </thead>
   <tbody> 
    <tr> 
     <td>2.0</td> 
     <td>1.7</td> 
     <td><a href="https://github.com/pac4j/play-pac4j/tree/1.1.x" target="_blank">play-pac4j_java 1.1.x</a> (Java) / <a href="https://github.com/pac4j/play-pac4j/tree/1.1.x" target="_blank">play-pac4j_scala2.9 1.1.x</a> (Scala)</td> 
    </tr> 
    <tr> 
     <td>2.1</td> 
     <td>1.7</td> 
     <td><a href="https://github.com/pac4j/play-pac4j/tree/1.1.x" target="_blank">play-pac4j_java 1.1.x</a> (Java) / <a href="https://github.com/pac4j/play-pac4j/tree/1.1.x" target="_blank">play-pac4j_scala2.10 1.1.x</a> (Scala)</td> 
    </tr> 
    <tr> 
     <td>2.2</td> 
     <td>1.7</td> 
     <td><a href="https://github.com/pac4j/play-pac4j/tree/1.2.x" target="_blank">play-pac4j_java 1.2.x</a> (Java) / <a href="https://github.com/pac4j/play-pac4j/tree/1.2.x" target="_blank">play-pac4j_scala 1.2.x</a> (Scala)</td> 
    </tr> 
    <tr> 
     <td>2.3</td> 
     <td>1.7</td> 
     <td><a href="https://github.com/pac4j/play-pac4j/tree/1.4.x" target="_blank">play-pac4j_java 1.4.x</a> (Java) / <a href="https://github.com/pac4j/play-pac4j/tree/1.4.x" target="_blank">play-pac4j_scala2.10</a> and <a href="https://github.com/pac4j/play-pac4j/tree/1.4.x" target="_blank">play-pac4j_scala2.11 1.4.x</a> (Scala)</td> 
    </tr> 
    <tr> 
     <td>2.4</td> 
     <td>1.9</td> 
     <td><a href="https://github.com/pac4j/play-pac4j/tree/2.3.x" target="_blank">play-pac4j 2.3.x</a> (Java &amp; Scala)</td> 
    </tr> 
    <tr> 
     <td>2.5</td> 
     <td>1.9</td> 
     <td>play-pac4j 2.6.x (Java &amp; Scala)</td> 
    </tr> 
   </tbody>
  </table> 
  <p><a href="http://www.pac4j.org/docs/main-concepts-and-components.html" target="_blank"><strong>Main concepts and components:</strong></a></p> 
  <p>1) A <a href="http://www.pac4j.org/docs/clients.html" target="_blank"><strong>client</strong></a> represents an authentication mechanism. It performs the login process and returns a user profile. An indirect client is for UI authentication while a direct client is for web services authentication:</p> 
  <p>▸ OAuth - SAML - CAS - OpenID Connect - HTTP - OpenID - Google App Engine - LDAP - SQL - JWT - MongoDB - Stormpath - IP address</p> 
  <p>2) An <a href="http://www.pac4j.org/docs/authorizers.html" target="_blank"><strong>authorizer</strong></a> is meant to check authorizations on the authenticated user profile(s) or on the current web context:</p> 
  <p>▸ Roles / permissions - Anonymous / remember-me / (fully) authenticated - Profile type, attribute - CORS - CSRF - Security headers - IP address, HTTP method</p> 
  <p>3) The <code>Secure</code> annotation / function or the <code>SecurityFilter</code> protects an url by checking that the user is authenticated and that the authorizations are valid, according to the clients and authorizers configuration. If the user is not authenticated, it performs authentication for direct clients or starts the login process for indirect clients</p> 
  <p>4) The <code>CallbackController</code> finishes the login process for an indirect client</p> 
  <p>5) The <code>ApplicationLogoutController</code> logs out the user from the application.</p> 
  <h1></h1> 
  <p>Just follow these easy steps to secure your Play 2 web application:</p> 
  <h3><a id="user-content-1-add-the-required-dependencies-play-pac4j--pac4j--libraries" class="anchor" href="https://github.com/pac4j/play-pac4j#1-add-the-required-dependencies-play-pac4j--pac4j--libraries" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>1) Add the required dependencies (<code>play-pac4j</code> + <code>pac4j-*</code> libraries)</h3> 
  <p>You need to add a dependency on:</p> 
  <ul> 
   <li>the <code>play-pac4j</code> library (<em>groupId</em>: <strong>org.pac4j</strong>, <em>version</em>: <strong>2.6.0</strong>)</li> 
   <li>the appropriate <code>pac4j</code> <a href="http://www.pac4j.org/docs/clients.html" target="_blank">submodules</a> (<em>groupId</em>: <strong>org.pac4j</strong>, <em>version</em>: <strong>1.9.4</strong>): <code>pac4j-oauth</code> for OAuth support (Facebook, Twitter...), <code>pac4j-cas</code> for CAS support, <code>pac4j-ldap</code> for LDAP authentication, etc.</li> 
  </ul> 
  <p>All released artifacts are available in the <a href="http://search.maven.org/#search%7Cga%7C1%7Cpac4j" target="_blank">Maven central repository</a>.</p> 
  <hr> 
  <h3><a id="user-content-2-define-the-configuration-config--client--authorizer--playsessionstore" class="anchor" href="https://github.com/pac4j/play-pac4j#2-define-the-configuration-config--client--authorizer--playsessionstore" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>2) Define the configuration (<code>Config</code> + <code>Client</code> + <code>Authorizer</code> + <code>PlaySessionStore</code>)</h3> 
  <p>The configuration (<code>org.pac4j.core.config.Config</code>) contains all the clients and authorizers required by the application to handle security.</p> 
  <p>The <code>Config</code> is bound for injection in a <code>SecurityModule</code> (or whatever the name you call it):</p> 
  <p><em>In Java:</em></p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">SecurityModule</span> <span class="pl-k">extends</span> <span class="pl-e">AbstractModule</span> {

  <span class="pl-k">@Override</span>
  <span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">configure</span>() {  
    bind(<span class="pl-smi">PlaySessionStore</span><span class="pl-k">.</span>class)<span class="pl-k">.</span>to(<span class="pl-smi">PlayCacheStore</span><span class="pl-k">.</span>class);

    <span class="pl-smi">FacebookClient</span> facebookClient <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">FacebookClient</span>(<span class="pl-s"><span class="pl-pds">"</span>fbId<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>fbSecret<span class="pl-pds">"</span></span>);
    <span class="pl-smi">TwitterClient</span> twitterClient <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">TwitterClient</span>(<span class="pl-s"><span class="pl-pds">"</span>twId<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>twSecret<span class="pl-pds">"</span></span>);

    <span class="pl-smi">FormClient</span> formClient <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">FormClient</span>(baseUrl <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>/loginForm<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">SimpleTestUsernamePasswordAuthenticator</span>());
    <span class="pl-smi">IndirectBasicAuthClient</span> basicAuthClient <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">IndirectBasicAuthClient</span>(<span class="pl-k">new</span> <span class="pl-smi">SimpleTestUsernamePasswordAuthenticator</span>());

    <span class="pl-smi">CasClient</span> casClient <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">CasClient</span>(<span class="pl-s"><span class="pl-pds">"</span>http://mycasserver/login<span class="pl-pds">"</span></span>);
    casClient<span class="pl-k">.</span>setLogoutHandler(<span class="pl-k">new</span> <span class="pl-smi">PlayCacheLogoutHandler</span>(getProvider(<span class="pl-smi">CacheApi</span><span class="pl-k">.</span>class)));

    <span class="pl-smi">SAML2ClientConfiguration</span> cfg <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">SAML2ClientConfiguration</span>(<span class="pl-s"><span class="pl-pds">"</span>resource:samlKeystore.jks<span class="pl-pds">"</span></span>,
                    <span class="pl-s"><span class="pl-pds">"</span>pac4j-demo-passwd<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>pac4j-demo-passwd<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>resource:openidp-feide.xml<span class="pl-pds">"</span></span>);
    cfg<span class="pl-k">.</span>setMaximumAuthenticationLifetime(<span class="pl-c1">3600</span>);
    cfg<span class="pl-k">.</span>setServiceProviderEntityId(<span class="pl-s"><span class="pl-pds">"</span>urn:mace:saml:pac4j.org<span class="pl-pds">"</span></span>);
    cfg<span class="pl-k">.</span>setServiceProviderMetadataPath(<span class="pl-k">new</span> <span class="pl-smi">File</span>(<span class="pl-s"><span class="pl-pds">"</span>target<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>sp-metadata.xml<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>getAbsolutePath());
    <span class="pl-smi">SAML2Client</span> saml2Client <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">SAML2Client</span>(cfg);

    <span class="pl-smi">OidcClient</span> oidcClient <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">OidcClient</span>();
    oidcClient<span class="pl-k">.</span>setClientID(<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>);
    oidcClient<span class="pl-k">.</span>setSecret(<span class="pl-s"><span class="pl-pds">"</span>secret<span class="pl-pds">"</span></span>);
    oidcClient<span class="pl-k">.</span>setDiscoveryURI(<span class="pl-s"><span class="pl-pds">"</span>https://accounts.google.com/.well-known/openid-configuration<span class="pl-pds">"</span></span>);
    oidcClient<span class="pl-k">.</span>addCustomParam(<span class="pl-s"><span class="pl-pds">"</span>prompt<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>consent<span class="pl-pds">"</span></span>);

    <span class="pl-smi">ParameterClient</span> parameterClient <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">ParameterClient</span>(<span class="pl-s"><span class="pl-pds">"</span>token<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">JwtAuthenticator</span>(<span class="pl-s"><span class="pl-pds">"</span>salt<span class="pl-pds">"</span></span>));

    <span class="pl-smi">Clients</span> clients <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Clients</span>(<span class="pl-s"><span class="pl-pds">"</span>http://localhost:9000/callback<span class="pl-pds">"</span></span>, facebookClient, twitterClient, formClient,
      basicAuthClient, casClient, saml2Client, oidcClient, parameterClient);

    <span class="pl-smi">Config</span> config <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Config</span>(clients);
    config<span class="pl-k">.</span>addAuthorizer(<span class="pl-s"><span class="pl-pds">"</span>admin<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-k">RequireAnyRoleAuthorizer&lt;&gt;</span>(<span class="pl-s"><span class="pl-pds">"</span>ROLE_ADMIN<span class="pl-pds">"</span></span>));
    config<span class="pl-k">.</span>addAuthorizer(<span class="pl-s"><span class="pl-pds">"</span>custom<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">CustomAuthorizer</span>());
    config<span class="pl-k">.</span>setHttpActionAdapter(<span class="pl-k">new</span> <span class="pl-smi">DemoHttpActionAdapter</span>());
    bind(<span class="pl-smi">Config</span><span class="pl-k">.</span>class)<span class="pl-k">.</span>toInstance(config);
  }
}</pre>
  </div> 
  <p><em>In Scala:</em></p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">class</span> <span class="pl-en">SecurityModule</span>(<span class="pl-v">environment</span>: <span class="pl-en">Environment</span>, <span class="pl-v">configuration</span>: <span class="pl-en">Configuration</span>) <span class="pl-k">extends</span> <span class="pl-e">AbstractModule</span> {

  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">configure</span>()<span class="pl-k">:</span> <span class="pl-k">Unit</span> <span class="pl-k">=</span> {

    bind(<span class="pl-c1">classOf</span>[<span class="pl-en">PlaySessionStore</span>]).to(<span class="pl-c1">classOf</span>[<span class="pl-en">PlayCacheStore</span>])

    <span class="pl-k">val</span> <span class="pl-en">facebookClient</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">FacebookClient</span>(<span class="pl-s"><span class="pl-pds">"</span>fbId<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>fbSecret<span class="pl-pds">"</span></span>)
    <span class="pl-k">val</span> <span class="pl-en">twitterClient</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">TwitterClient</span>(<span class="pl-s"><span class="pl-pds">"</span>twId<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>twSecret<span class="pl-pds">"</span></span>)

    <span class="pl-k">val</span> <span class="pl-en">formClient</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">FormClient</span>(baseUrl <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>/loginForm<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-en">SimpleTestUsernamePasswordAuthenticator</span>())
    <span class="pl-k">val</span> <span class="pl-en">basicAuthClient</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">IndirectBasicAuthClient</span>(<span class="pl-k">new</span> <span class="pl-en">SimpleTestUsernamePasswordAuthenticator</span>())

    <span class="pl-k">val</span> <span class="pl-en">casClient</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">CasClient</span>(<span class="pl-s"><span class="pl-pds">"</span>http://mycasserver/login<span class="pl-pds">"</span></span>)
    casClient.setLogoutHandler(<span class="pl-k">new</span> <span class="pl-en">PlayCacheLogoutHandler</span>(getProvider(<span class="pl-c1">classOf</span>[<span class="pl-en">CacheApi</span>])))

    <span class="pl-k">val</span> <span class="pl-en">cfg</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SAML2ClientConfiguration</span>(<span class="pl-s"><span class="pl-pds">"</span>resource:samlKeystore.jks<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>pac4j-demo-passwd<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>pac4j-demo-passwd<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>resource:openidp-feide.xml<span class="pl-pds">"</span></span>)
    cfg.setMaximumAuthenticationLifetime(<span class="pl-c1">3600</span>)
    cfg.setServiceProviderEntityId(<span class="pl-s"><span class="pl-pds">"</span>urn:mace:saml:pac4j.org<span class="pl-pds">"</span></span>)
    cfg.setServiceProviderMetadataPath(<span class="pl-k">new</span> <span class="pl-en">File</span>(<span class="pl-s"><span class="pl-pds">"</span>target<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>sp-metadata.xml<span class="pl-pds">"</span></span>).getAbsolutePath())
    <span class="pl-k">val</span> <span class="pl-en">saml2Client</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SAML2Client</span>(cfg)

    <span class="pl-k">val</span> <span class="pl-en">oidcClient</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">OidcClient</span>()
    oidcClient.setClientID(<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>)
    oidcClient.setSecret(<span class="pl-s"><span class="pl-pds">"</span>secret<span class="pl-pds">"</span></span>)
    oidcClient.setDiscoveryURI(<span class="pl-s"><span class="pl-pds">"</span>https://accounts.google.com/.well-known/openid-configuration<span class="pl-pds">"</span></span>)
    oidcClient.addCustomParam(<span class="pl-s"><span class="pl-pds">"</span>prompt<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>consent<span class="pl-pds">"</span></span>)

    <span class="pl-k">val</span> <span class="pl-en">parameterClient</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">ParameterClient</span>(<span class="pl-s"><span class="pl-pds">"</span>token<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-en">JwtAuthenticator</span>(<span class="pl-s"><span class="pl-pds">"</span>salt<span class="pl-pds">"</span></span>))

    <span class="pl-k">val</span> <span class="pl-en">clients</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Clients</span>(<span class="pl-s"><span class="pl-pds">"</span>http://localhost:9000/callback<span class="pl-pds">"</span></span>, facebookClient, twitterClient, formClient,
      basicAuthClient, casClient, saml2Client, oidcClient, parameterClient)

    <span class="pl-k">val</span> <span class="pl-en">config</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Config</span>(clients)
    config.addAuthorizer(<span class="pl-s"><span class="pl-pds">"</span>admin<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-en">RequireAnyRoleAuthorizer</span>[<span class="pl-en">Nothing</span>](<span class="pl-s"><span class="pl-pds">"</span>ROLE_ADMIN<span class="pl-pds">"</span></span>))
    config.addAuthorizer(<span class="pl-s"><span class="pl-pds">"</span>custom<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-en">CustomAuthorizer</span>())
    config.setHttpActionAdapter(<span class="pl-k">new</span> <span class="pl-en">DemoHttpActionAdapter</span>())
    bind(<span class="pl-c1">classOf</span>[<span class="pl-en">Config</span>]).toInstance(config)
  }
}</pre>
  </div> 
  <p><code>http://localhost:8080/callback</code> is the url of the callback endpoint, which is only necessary for indirect clients. The <code>PlayCacheStore</code> is defined as the implementation for the session store: profiles will be saved in the Play Cache.</p> 
  <p>Notice that you can also configure a specific <code>HttpActionAdapter</code> to handle specific HTTP actions (like redirections, forbidden / unauthorized pages) via the <code>setHttpActionAdapter</code> method of the <code>Config</code> object. The default available implementation is the <code>DefaultHttpActionAdapter</code>, but you can subclass it to define your own HTTP 401 / 403 error pages for example.</p> 
  <p>You can also define a specific <code>SecurityLogic</code> via the <code>setSecurityLogic</code> method.</p> 
  <hr> 
  <h3><a id="user-content-3a-protect-urls-per-action-secure" class="anchor" href="https://github.com/pac4j/play-pac4j#3a-protect-urls-per-action-secure" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>3a) Protect urls per Action (<code>Secure</code>)</h3> 
  <p>You can protect (authentication + authorizations) the urls of your Play application by using the <code>Secure</code> annotation / function. It has the following behaviour:</p> 
  <p>1) First, if the user is not authenticated (no profile) and if some clients have been defined in the <code>clients</code> parameter, a login is tried for the direct clients.</p> 
  <p>2) Then, if the user has a profile, authorizations are checked according to the <code>authorizers</code> configuration. If the authorizations are valid, the user is granted access. Otherwise, a 403 error page is displayed.</p> 
  <p>3) Finally, if the user is still not authenticated (no profile), he is redirected to the appropriate identity provider if the first defined client is an indirect one in the <code>clients</code> configuration. Otherwise, a 401 error page is displayed.</p> 
  <p>The following parameters are available:</p> 
  <p>1) <code>clients</code> (optional): the list of client names (separated by commas) used for authentication:</p> 
  <ul> 
   <li>in all cases, this filter requires the user to be authenticated. Thus, if the <code>clients</code> is blank or not defined, the user must have been previously authenticated</li> 
   <li>if the <code>client_name</code> request parameter is provided, only this client (if it exists in the <code>clients</code>) is selected.</li> 
  </ul> 
  <p>2) <code>authorizers</code> (optional): the list of authorizer names (separated by commas) used to check authorizations:</p> 
  <ul> 
   <li>if the <code>authorizers</code> is blank or not defined, no authorization is checked</li> 
   <li>the following authorizers are available by default (without defining them in the configuration): 
    <ul> 
     <li><code>isFullyAuthenticated</code> to check if the user is authenticated but not remembered, <code>isRemembered</code> for a remembered user, <code>isAnonymous</code> to ensure the user is not authenticated, <code>isAuthenticated</code> to ensure the user is authenticated (not necessary by default unless you use the <code>AnonymousClient</code>)</li> 
     <li><code>hsts</code> to use the <code>StrictTransportSecurityHeader</code> authorizer, <code>nosniff</code> for <code>XContentTypeOptionsHeader</code>, <code>noframe</code> for <code>XFrameOptionsHeader</code>, <code>xssprotection</code> for <code>XSSProtectionHeader</code>, <code>nocache</code> for <code>CacheControlHeader</code> or <code>securityHeaders</code> for the five previous authorizers</li> 
     <li><code>csrfToken</code> to use the <code>CsrfTokenGeneratorAuthorizer</code> with the <code>DefaultCsrfTokenGenerator</code> (it generates a CSRF token and saves it as the <code>pac4jCsrfToken</code> request attribute and in the <code>pac4jCsrfToken</code> cookie), <code>csrfCheck</code> to check that this previous token has been sent as the <code>pac4jCsrfToken</code> header or parameter in a POST request and <code>csrf</code> to use both previous authorizers.</li> 
    </ul></li> 
  </ul> 
  <p>3) <code>multiProfile</code> (optional): it indicates whether multiple authentications (and thus multiple profiles) must be kept at the same time (<code>false</code> by default).</p> 
  <p>For example in your controllers:</p> 
  <p><em>In Java:</em></p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">@Secure</span>(<span class="pl-c1">clients</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>FacebookClient<span class="pl-pds">"</span></span>)
<span class="pl-k">public</span> <span class="pl-smi">Result</span> facebookIndex() {
  <span class="pl-k">return</span> protectedIndexView();
}</pre>
  </div> 
  <p><em>In Scala:</em></p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">def</span> <span class="pl-en">facebookIndex</span> <span class="pl-k">=</span> <span class="pl-en">Secure</span>(<span class="pl-s"><span class="pl-pds">"</span>FacebookClient<span class="pl-pds">"</span></span>) { profiles <span class="pl-k">=&gt;</span>
 <span class="pl-en">Action</span> { request <span class="pl-k">=&gt;</span>
   <span class="pl-en">Ok</span>(views.html.protectedIndex(profiles))
 }
}</pre>
  </div> 
  <h1></h1> 
  <h3><a id="user-content-3b-protect-urls-via-the-securityfilter" class="anchor" href="https://github.com/pac4j/play-pac4j#3b-protect-urls-via-the-securityfilter" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>3b) Protect urls via the <code>SecurityFilter</code></h3> 
  <p>In order to protect multiple urls at the same tine, you can configure the <code>SecurityFilter</code>. You need to configure your application to include the <code>SecurityFilter</code> as follows:</p> 
  <p>First define a <code>Filters</code> class in your application (if you have not yet done so).</p> 
  <p><em>In Java:</em></p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">package</span> <span class="pl-smi">filters</span>;

<span class="pl-k">import</span> <span class="pl-smi">org.pac4j.play.filters.SecurityFilter</span>;
<span class="pl-k">import</span> <span class="pl-smi">play.http.HttpFilters</span>;
<span class="pl-k">import</span> <span class="pl-smi">play.mvc.EssentialFilter</span>;

<span class="pl-k">import</span> <span class="pl-smi">javax.inject.Inject</span>;

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Filters</span> <span class="pl-k">implements</span> <span class="pl-e">HttpFilters</span> {

    <span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">SecurityFilter</span> securityFilter;

    <span class="pl-k">@Inject</span>
    <span class="pl-k">public</span> <span class="pl-en">Filters</span>(<span class="pl-smi">SecurityFilter</span> <span class="pl-v">securityFilter</span>) {
        <span class="pl-v">this</span><span class="pl-k">.</span>securityFilter <span class="pl-k">=</span> securityFilter;
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">EssentialFilter</span>[] <span class="pl-en">filters</span>() {
        <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">EssentialFilter</span>[] { securityFilter<span class="pl-k">.</span>asJava() };
    }
}</pre>
  </div> 
  <p><em>In Scala:</em></p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">package</span> <span class="pl-en">filters</span>

<span class="pl-k">import</span> <span class="pl-v">javax.inject.</span><span class="pl-v">Inject</span>
<span class="pl-k">import</span> <span class="pl-v">org.pac4j.play.filters.</span><span class="pl-v">SecurityFilter</span>
<span class="pl-k">import</span> <span class="pl-v">play.api.http.</span><span class="pl-v">HttpFilters</span>

<span class="pl-k">class</span> <span class="pl-en">Filters</span> <span class="pl-k">@</span><span class="pl-en">Inject</span>()(<span class="pl-v">securityFilter</span>: <span class="pl-en">SecurityFilter</span>) <span class="pl-k">extends</span> <span class="pl-e">HttpFilters</span> {

  <span class="pl-k">def</span> <span class="pl-en">filters</span> <span class="pl-k">=</span> <span class="pl-en">Seq</span>(securityFilter)

}</pre>
  </div> 
  <p>Then tell your application to use the filters in <code>application.conf</code>:</p> 
  <pre><code>play.http.filters = "filters.Filters"
</code></pre> 
  <p>See for more information on the use of filters in Play the <a href="https://www.playframework.com/documentation/2.4.x/ScalaHttpFilters" target="_blank">Play documentation on Filters</a>.</p> 
  <p>Rules for the security filter can be supplied in application.conf. An example is shown below. It consists of a list of filter rules, where the key is a regular expression that will be used to match the url. Make sure that the / is escaped by \ to make a valid regular expression.</p> 
  <p>For each regex key, there are two subkeys: <code>authorizers</code> and <code>clients</code>. Here you can define the correct values, like you would supply to the <code>RequireAuthentication</code> method in controllers. There two exceptions: <code>authorizers</code> can have two special values: <code>_authenticated_</code> and <code>_anonymous_</code>.</p> 
  <p><code>_anonymous_</code> will disable authentication and authorization for urls matching the regex. <code>_authenticated_</code> will require authentication, but will set clients and authorizers both to <code>null</code>.</p> 
  <p>Rules are applied top to bottom. The first matching rule will define which clients and authorizers are used. When not provided, the value will be <code>null</code>.</p> 
  <pre><code>pac4j.security.rules = [
  # Admin pages need a special authorizer and do not support login via Twitter.
  {"/admin/.*" = {
    authorizers = "admin"
    clients = "FormClient"
  }}
  # Rules for the REST services. These don't specify a client and will return 401
  # when not authenticated.
  {"/restservices/.*" = {
    authorizers = "_authenticated_"
  }}
  # The login page needs to be publicly accessible.
  {"/login.html" = {
    authorizers = "_anonymous_"
  }}
  # 'Catch all' rule to make sure the whole application stays secure.
  {".*" = {
    authorizers = "_authenticated_"
    clients = "FormClient,TwitterClient"
  }}
]
</code></pre> 
  <h1></h1> 
  <h3><a id="user-content-3c-working-with-deadbolt-only-java" class="anchor" href="https://github.com/pac4j/play-pac4j#3c-working-with-deadbolt-only-java" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>3c) Working with Deadbolt (only Java)</h3> 
  <p>While the <code>play-pac4j</code> security library can handle authorizations on its own, <a href="http://deadbolt.ws" target="_blank">Deadbolt</a> is a famous and much used library for authorizations. So you can use it seamlessly with <code>play-pac4j</code>.</p> 
  <p>You need to bind the Deadbolt <code>HandlerCache</code> to the <code>Pac4jHandlerCache</code> (in your <code>SecurityModule</code>):</p> 
  <div class="highlight highlight-source-java">
   <pre>bind(<span class="pl-smi">HandlerCache</span><span class="pl-k">.</span>class)<span class="pl-k">.</span>to(<span class="pl-smi">Pac4jHandlerCache</span><span class="pl-k">.</span>class);</pre>
  </div> 
  <p>Thus, everytime you use a <em>Deadbolt</em> handler, the <em>Deadbolt</em> subject will be automatically built from the current <em>pac4j</em> authenticated user profile, the key used to get the appropriate handler will represent the <code>clients</code> parameter used to perform the <em>pac4j</em> authentication (like in the <code>Secure</code> annotation).</p> 
  <p>Example to secure an action in a controller:</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">@SubjectPresent</span></pre>
  </div> 
  <p>Example to secure an action in a controller and start a Facebook login process if not authenticated:</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">@SubjectPresent</span>(<span class="pl-c1">handlerKey</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>FacebookClient<span class="pl-pds">"</span></span>, <span class="pl-c1">forceBeforeAuthCheck</span> <span class="pl-k">=</span> <span class="pl-c1">true</span>)</pre>
  </div> 
  <hr> 
  <h3><a id="user-content-4-define-the-callback-endpoint-only-for-indirect-clients-callbackcontroller" class="anchor" href="https://github.com/pac4j/play-pac4j#4-define-the-callback-endpoint-only-for-indirect-clients-callbackcontroller" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>4) Define the callback endpoint only for indirect clients (<code>CallbackController</code>)</h3> 
  <p>For indirect clients (like Facebook), the user is redirected to an external identity provider for login and then back to the application. Thus, a callback endpoint is required in the application. It is managed by the <code>CallbackController</code> which has the following behaviour:</p> 
  <p>1) the credentials are extracted from the current request to fetch the user profile (from the identity provider) which is then saved in the web session</p> 
  <p>2) finally, the user is redirected back to the originally requested url (or to the <code>defaultUrl</code>).</p> 
  <p>The following parameters are available:</p> 
  <p>1) <code>defaultUrl</code> (optional): it's the default url after login if no url was originally requested (<code>/</code> by default)</p> 
  <p>2) <code>multiProfile</code> (optional): it indicates whether multiple authentications (and thus multiple profiles) must be kept at the same time (<code>false</code> by default).</p> 
  <p>In the <code>routes</code> file:</p> 
  <div class="highlight highlight-source-ini">
   <pre>GET    /callback    @org.pac4j.play.CallbackController.callback()</pre>
  </div> 
  <p>In the <code>SecurityModule</code>:</p> 
  <p><em>In Java:</em></p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-smi">CallbackController</span> callbackController <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">CallbackController</span>();
callbackController<span class="pl-k">.</span>setDefaultUrl(<span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span>);
bind(<span class="pl-smi">CallbackController</span><span class="pl-k">.</span>class)<span class="pl-k">.</span>toInstance(callbackController);</pre>
  </div> 
  <p><em>In Scala:</em></p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">callbackController</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">CallbackController</span>()
callbackController.setDefaultUrl(<span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span>)
bind(<span class="pl-c1">classOf</span>[<span class="pl-en">CallbackController</span>]).toInstance(callbackController)</pre>
  </div> 
  <hr> 
  <h3><a id="user-content-5-get-the-user-profile-profilemanager" class="anchor" href="https://github.com/pac4j/play-pac4j#5-get-the-user-profile-profilemanager" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>5) Get the user profile (<code>ProfileManager</code>)</h3> 
  <p>You can get the profile of the authenticated user using <code>profileManager.get(true)</code> (<code>false</code> not to use the session, but only the current HTTP request). You can test if the user is authenticated using <code>profileManager.isAuthenticated()</code>. You can get all the profiles of the authenticated user (if ever multiple ones are kept) using <code>profileManager.getAll(true)</code>.</p> 
  <p>Examples:</p> 
  <p><em>In Java:</em></p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Application</span> {

    <span class="pl-k">@Inject</span>
    <span class="pl-k">protected</span> <span class="pl-smi">PlaySessionStore</span> playSessionStore;  

    <span class="pl-k">public</span> <span class="pl-smi">Result</span> <span class="pl-en">getUserProfile</span>() {
        <span class="pl-smi">PlayWebContext</span> webContext <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">PlayWebContext</span>(ctx(), playSessionStore)
        <span class="pl-k">ProfileManager&lt;<span class="pl-smi">CommonProfile</span>&gt;</span> profileManager <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">ProfileManager</span>(context);
        <span class="pl-k">Optional&lt;<span class="pl-smi">CommonProfile</span>&gt;</span> profile <span class="pl-k">=</span> profileManager<span class="pl-k">.</span>get(<span class="pl-c1">true</span>);
        <span class="pl-c1">....</span>
    } 

}</pre>
  </div> 
  <p><em>In Scala:</em></p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">class</span> <span class="pl-en">Application</span> <span class="pl-k">@</span><span class="pl-en">Inject</span>()(<span class="pl-v">sessionStore</span>: <span class="pl-en">PlaySessionStore</span>) <span class="pl-k">extends</span> <span class="pl-e">Controller</span> {

    <span class="pl-k">def</span> <span class="pl-en">getUserProfile</span>() <span class="pl-k">=</span> <span class="pl-en">Action</span> { request <span class="pl-k">=&gt;</span>
        <span class="pl-k">val</span> <span class="pl-en">webContext</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">PlayWebContext</span>(request, playSessionStore)
        <span class="pl-k">val</span> <span class="pl-en">profileManager</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">ProfileManager</span>[<span class="pl-en">CommonProfile</span>](webContext)
        <span class="pl-k">val</span> <span class="pl-en">profile</span> <span class="pl-k">=</span> profileManager.get(<span class="pl-c1">true</span>)
        ....
    }
}</pre>
  </div> 
  <p>The retrieved profile is at least a <code>CommonProfile</code>, from which you can retrieve the most common attributes that all profiles share. But you can also cast the user profile to the appropriate profile according to the provider used for authentication. For example, after a Facebook authentication:</p> 
  <p><em>In Java:</em></p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-smi">FacebookProfile</span> facebookProfile <span class="pl-k">=</span> (<span class="pl-smi">FacebookProfile</span>) commonProfile;</pre>
  </div> 
  <p><em>In Scala:</em></p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">facebookProfile</span> <span class="pl-k">=</span> commonProfile.<span class="pl-c1">asInstanceOf</span>[<span class="pl-en">FacebookProfile</span>]</pre>
  </div> 
  <hr> 
  <h3><a id="user-content-6-logout-applicationlogoutcontroller" class="anchor" href="https://github.com/pac4j/play-pac4j#6-logout-applicationlogoutcontroller" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>6) Logout (<code>ApplicationLogoutController</code>)</h3> 
  <p>You can log out the current authenticated user using the <code>ApplicationLogoutController</code>. It has the following behaviour:</p> 
  <p>1) after logout, the user is redirected to the url defined by the <code>url</code> request parameter if it matches the <code>logoutUrlPattern</code></p> 
  <p>2) or the user is redirected to the <code>defaultUrl</code> if it is defined</p> 
  <p>3) otherwise, a blank page is displayed.</p> 
  <p>The following parameters are available:</p> 
  <p>1) <code>defaultUrl</code> (optional): the default logout url if no <code>url</code> request parameter is provided or if the <code>url</code> does not match the <code>logoutUrlPattern</code> (not defined by default)</p> 
  <p>2) <code>logoutUrlPattern</code> (optional): the logout url pattern that the <code>url</code> parameter must match (only relative urls are allowed by default).</p> 
  <p>In the <code>routes</code> file:</p> 
  <div class="highlight highlight-source-ini">
   <pre>GET     /logout     @org.pac4j.play.ApplicationLogoutController.logout()</pre>
  </div> 
  <p>In the <code>SecurityModule</code>:</p> 
  <p><em>In Java:</em></p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-smi">ApplicationLogoutController</span> logoutController <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">ApplicationLogoutController</span>();
logoutController<span class="pl-k">.</span>setDefaultUrl(<span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span>);
bind(<span class="pl-smi">ApplicationLogoutController</span><span class="pl-k">.</span>class)<span class="pl-k">.</span>toInstance(logoutController);</pre>
  </div> 
  <p><em>In Scala:</em></p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">logoutController</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">ApplicationLogoutController</span>()
logoutController.setDefaultUrl(<span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span>)
bind(<span class="pl-c1">classOf</span>[<span class="pl-en">ApplicationLogoutController</span>]).toInstance(logoutController)</pre>
  </div> 
  <hr> 
  <h2><a id="user-content-migration-guide" class="anchor" href="https://github.com/pac4j/play-pac4j#migration-guide" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Migration guide</h2> 
  <h3><a id="user-content-240-play-25---250-play-25" class="anchor" href="https://github.com/pac4j/play-pac4j#240-play-25---250-play-25" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>2.4.0 (Play 2.5) -&gt; 2.5.0 (Play 2.5)</h3> 
  <p>The <code>SecurityModule</code> class needs to bind the <code>PlaySessionStore</code> to the <code>PlayCacheStore</code>.</p> 
  <p>The <code>PlayWebContext</code> needs a <code>PlaySessionStore</code>, see examples at heading 5 (Get the user profile (<code>ProfileManager</code>)).</p> 
  <h3><a id="user-content-210-play-24--220-play-25---230-play-24--240-play-25" class="anchor" href="https://github.com/pac4j/play-pac4j#210-play-24--220-play-25---230-play-24--240-play-25" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>2.1.0 (Play 2.4) / 2.2.0 (Play 2.5) -&gt; 2.3.0 (Play 2.4) / 2.4.0 (Play 2.5)</h3> 
  <p>The <code>RequiresAuthentication</code> annotation and function have been renamed as <code>Secure</code> with the <code>clients</code> and <code>authorizers</code> parameters (instead of <code>clientName</code> and <code>authorizerName</code>).</p> 
  <p>The <code>UserProfileController</code> class and the <code>getUserProfile</code> method in the <code>Security</code> trait no longer exist and the <code>ProfileManager</code> must be used instead.</p> 
  <p>The <code>ApplicationLogoutController</code> behaviour has slightly changed: even without any <code>url</code> request parameter, the user will be redirected to the <code>defaultUrl</code> if it has been defined</p> 
  <h3><a id="user-content-201---210" class="anchor" href="https://github.com/pac4j/play-pac4j#201---210" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>2.0.1 -&gt; 2.1.0</h3> 
  <p>The separate Scala and Java projects have been merged. You need to change the dependency <code>play-pac4j-java</code> or <code>play-pac4j-scala</code> to simply <code>play-pac4j</code>.</p> 
  <p>The <code>getUserProfile</code> method of the <code>Security</code> trait returns a <code>Option[CommonProfile]</code> instead of just a <code>UserProfile</code>.</p> 
  <h3><a id="user-content-200---201" class="anchor" href="https://github.com/pac4j/play-pac4j#200---201" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>2.0.0 -&gt; 2.0.1</h3> 
  <p>The <code>DataStore</code> concept is replaced by the pac4j <code>SessionStore</code> concept. The <code>PlayCacheStore</code> does no longer need to be bound in the security module. A new session store could be defined using the <code>config.setSessionStore</code> method.</p> 
  <p>The <code>DefaultHttpActionAdapter</code> does not need to be bound in the security module, but must to be set using the <code>config.setHttpActionAdapter</code> method.</p> 
  <h2><a id="user-content-demo" class="anchor" href="https://github.com/pac4j/play-pac4j#demo" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Demo</h2> 
  <p>Two demo webapps: <a href="https://github.com/pac4j/play-pac4j-java-demo" target="_blank">play-pac4j-java-demo</a> &amp; <a href="https://github.com/pac4j/play-pac4j-scala-demo" target="_blank">play-pac4j-scala-demo</a> are available for tests and implement many authentication mechanisms: Facebook, Twitter, form, basic auth, CAS, SAML, OpenID Connect, JWT...</p> 
  <p>Test them online: <a href="http://play-pac4j-java-demo.herokuapp.com" target="_blank">http://play-pac4j-java-demo.herokuapp.com</a> and <a href="http://play-pac4j-scala-demo.herokuapp.com" target="_blank">http://play-pac4j-scala-demo.herokuapp.com</a>.</p> 
  <h2><a id="user-content-release-notes" class="anchor" href="https://github.com/pac4j/play-pac4j#release-notes" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Release notes</h2> 
  <p>See the <a href="https://github.com/pac4j/play-pac4j/wiki/Release-notes" target="_blank">release notes</a>. Learn more by browsing the <a href="http://www.javadoc.io/doc/org.pac4j/play-pac4j/2.6.0" target="_blank">play-pac4j Javadoc</a> and the <a href="http://www.pac4j.org/apidocs/pac4j/1.9.4/index.html" target="_blank">pac4j Javadoc</a>.</p> 
  <h2><a id="user-content-need-help" class="anchor" href="https://github.com/pac4j/play-pac4j#need-help" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Need help?</h2> 
  <p>If you have any question, please use the following mailing lists:</p> 
  <ul> 
   <li><a href="https://groups.google.com/forum/?hl=en#!forum/pac4j-users" target="_blank">pac4j users</a></li> 
   <li><a href="https://groups.google.com/forum/?hl=en#!forum/pac4j-dev" target="_blank">pac4j developers</a></li> 
  </ul> 
  <h2><a id="user-content-development" class="anchor" href="https://github.com/pac4j/play-pac4j#development" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Development</h2> 
  <p>The version 2.6.1-SNAPSHOT is under development.</p> 
  <p>Maven artifacts are built via Travis: <a href="https://travis-ci.org/pac4j/play-pac4j" target="_blank"><img src="https://camo.githubusercontent.com/306e012de5855b52bd1b66314cd4379179bb8ac9/68747470733a2f2f7472617669732d63692e6f72672f706163346a2f706c61792d706163346a2e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/pac4j/play-pac4j.png?branch=master" style="max-width:100%;"></a> and available in the <a href="https://oss.sonatype.org/content/repositories/snapshots/org/pac4j" target="_blank">Sonatype snapshots repository</a>. This repository must be added in the <code>resolvers</code> of your <code>build.sbt</code> file:</p> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(<span class="pl-en">Resolver</span>.mavenLocal, <span class="pl-s"><span class="pl-pds">"</span>Sonatype snapshots repository<span class="pl-pds">"</span></span> at <span class="pl-s"><span class="pl-pds">"</span>https://oss.sonatype.org/content/repositories/snapshots/<span class="pl-pds">"</span></span>)</pre>
  </div> 
 </article>
</div>