<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-jmx-integration----" class="anchor" href="https://github.com/kamon-io/kamon-jmx#jmx-integration----" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>JMX Integration <a href="https://camo.githubusercontent.com/90e0edfd3aaa2879ce3b133fd30acf8061666bfd/68747470733a2f2f7472617669732d63692e6f72672f6b616d6f6e2d696f2f6b616d6f6e2d6a6d782e7376673f6272616e63683d6d6173746572" target="_blank"><img src="https://camo.githubusercontent.com/90e0edfd3aaa2879ce3b133fd30acf8061666bfd/68747470733a2f2f7472617669732d63692e6f72672f6b616d6f6e2d696f2f6b616d6f6e2d6a6d782e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/kamon-io/kamon-jmx.svg?branch=master" style="max-width:100%;"></a></h1> 
  <p><a href="https://gitter.im/kamon-io/Kamon?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Gitter" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg" style="max-width:100%;"></a> <a href="https://maven-badges.herokuapp.com/maven-central/io.kamon/kamon-jmx_2.11" target="_blank"><img src="https://camo.githubusercontent.com/fba8eee9dd0de275ad6eb990768dfdbac73a0676/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f696f2e6b616d6f6e2f6b616d6f6e2d6a6d785f322e31312f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/io.kamon/kamon-jmx_2.11/badge.svg" style="max-width:100%;"></a></p> 
  <h1><a id="user-content-reporting-metrics-to-jmx-mbeans" class="anchor" href="https://github.com/kamon-io/kamon-jmx#reporting-metrics-to-jmx-mbeans" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Reporting Metrics to JMX MBeans</h1> 
  <p><a href="https://en.wikipedia.org/wiki/Java_Management_Extensions" target="_blank">JMX</a> is a Java technology that supplies tools for managing and monitoring applications, system objects, devices and service-oriented networks. Those resources are represented by objects called MBeans (for Managed Bean).</p> 
  <h3><a id="user-content-getting-started" class="anchor" href="https://github.com/kamon-io/kamon-jmx#getting-started" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Getting Started</h3> 
  <p>Kamon jmx module is currently available for Scala 2.10, 2.11 and 2.12.</p> 
  <p>Supported releases and dependencies are shown below.</p> 
  <table> 
   <thead> 
    <tr> 
     <th align="center">kamon-jmx</th> 
     <th align="center">status</th> 
     <th align="center">jdk</th> 
     <th>scala</th> 
     <th align="center">akka</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td align="center">0.6.5</td> 
     <td align="center">stable</td> 
     <td align="center">1.7+, 1.8+</td> 
     <td>2.10, 2.11, 2.12</td> 
     <td align="center">2.3.x, 2.4.x</td> 
    </tr>
   </tbody>
  </table> 
  <p>To get started with SBT, simply add the following to your <code>build.sbt</code> file:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>io.kamon<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>kamon-scala<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.6.5<span class="pl-pds">"</span></span></pre>
  </div> 
  <h2><a id="user-content-configuration" class="anchor" href="https://github.com/kamon-io/kamon-jmx#configuration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Configuration</h2> 
  <p>The JMX module subscribes itself to the entities included in the <code>kamon.jmx.subscriptions</code> key. By default, the following subscriptions are included:</p> 
  <pre lang="typesafeconfig"><code>kamon.jmx {
  subscriptions {
    histogram       = [ "**" ]
    min-max-counter = [ "**" ]
    gauge           = [ "**" ]
    counter         = [ "**" ]
    trace           = [ "**" ]
    trace-segment   = [ "**" ]
    akka-actor      = [ "**" ]
    akka-dispatcher = [ "**" ]
    akka-router     = [ "**" ]
    system-metric   = [ "**" ]
    http-server     = [ "**" ]
  }
}
</code></pre> 
  <p>If you are interested in reporting additional entities to JMX please ensure that you include the categories and name patterns accordingly.</p> 
  <h2><a id="user-content-integration-notes" class="anchor" href="https://github.com/kamon-io/kamon-jmx#integration-notes" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Integration Notes</h2> 
  <p>For all single instrument entities (those tracking counters, histograms, gaugues and min-max-counters) the generated metric key will follow the <code>kamon.instrument-type.entity-name</code> pattern. Additionaly all tags supplied when creating the instrument will also be reported.</p> 
  <ul> 
   <li><strong>Connection</strong>: For connect to your application you need [add some JVM parameters] for start JMX agent and install a JMX client (for example <a href="http://visualvm.java.net/download.html" target="_blank">VisualVM</a>)</li> 
   <li><strong>Histogram percentile</strong>: You may calculate any percentile on hystogram values.</li> 
  </ul> 
  <p><a href="https://camo.githubusercontent.com/8fb62ba637ea27d5a5f22871b240e8ce1d934b0d/687474703a2f2f6b616d6f6e2e696f2f6173736574732f696d672f6a6d782d6d6f64756c652d70657263656e74696c652e706e67" target="_blank"><img src="https://camo.githubusercontent.com/8fb62ba637ea27d5a5f22871b240e8ce1d934b0d/687474703a2f2f6b616d6f6e2e696f2f6173736574732f696d672f6a6d782d6d6f64756c652d70657263656e74696c652e706e67" data-canonical-src="http://kamon.io/assets/img/jmx-module-percentile.png" style="max-width:100%;"></a></p> 
  <h2><a id="user-content-visualization-and-fun" class="anchor" href="https://github.com/kamon-io/kamon-jmx#visualization-and-fun" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Visualization and Fun</h2> 
  <p>Here is a very simple example of a JMX values in VisualVM MBeans plugin with metrics reported by Kamon:</p> 
  <p><a href="https://camo.githubusercontent.com/d48e38f0b1b4a0110a3f5cf259a4c15a10056036/687474703a2f2f6b616d6f6e2e696f2f6173736574732f696d672f6a6d782d6d6f64756c652d6f7665726965772e706e67" target="_blank"><img src="https://camo.githubusercontent.com/d48e38f0b1b4a0110a3f5cf259a4c15a10056036/687474703a2f2f6b616d6f6e2e696f2f6173736574732f696d672f6a6d782d6d6f64756c652d6f7665726965772e706e67" data-canonical-src="http://kamon.io/assets/img/jmx-module-overiew.png" style="max-width:100%;"></a></p> 
  <h1><a id="user-content-importing-jmx-metrics-into-kamon" class="anchor" href="https://github.com/kamon-io/kamon-jmx#importing-jmx-metrics-into-kamon" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Importing JMX Metrics into Kamon</h1> 
  <h2><a id="user-content-installation" class="anchor" href="https://github.com/kamon-io/kamon-jmx#installation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Installation</h2> 
  <p>The kamon-jmx module now provides both moving metrics data into JMX and exporting metrics out of JMX. So just like above, add the <code>kamon-jmx</code> dependency to your project and ensure that it is in your classpath at runtime, that’s it. Kamon’s module loader will detect that the JMX module is in the classpath and automatically start it.</p> 
  <h2><a id="user-content-configuration-1" class="anchor" href="https://github.com/kamon-io/kamon-jmx#configuration-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Configuration</h2> 
  <p>To use the JMX to Kamon functionality, you must do three things. First, you add a subscription named kamon-mxbeans to the kamon.jmx.subscriptions key. Here is an example:</p> 
  <pre lang="typesafeconfig"><code>kamon.jmx {
  subscriptions {
    histogram       = [ "**" ]
    min-max-counter = [ "**" ]
    gauge           = [ "**" ]
    counter         = [ "**" ]
    trace           = [ "**" ]
    trace-segment   = [ "**" ]
    system-metric   = [ "**" ]
    http-server     = [ "**" ]
    kamon-mxbeans   = [ "**" ]
  }
}
</code></pre> 
  <p>Note: only the kamon-mxbeans line is important here. You can add or remove other subscriptions here without effecting the behavior of the JMX metrics exporting.</p> 
  <hr> 
  <p>Second, add the kamon-mxbeans module to the kamon.modules part of the configuration. Here is an example:</p> 
  <pre lang="typesafeconfig"><code>kamon.modules {
  kamon-mxbeans {
    auto-start = yes
    requires-aspectj = no
    extension-class = "kamon.jmx.extension.JMXMetricImporter"
  }
}
</code></pre> 
  <hr> 
  <p>Finally, add a kamon.kamon-mxbeans configuration object to your config. Here is an example:</p> 
  <pre><code>kamon.kamon-mxbeans {
  mbeans = [
    { "name": "example-mbean", "jmxQuery": "example:type=myBean,name=*",
      "attributes": [
        { "name": "Counter1", "type": "counter" },
        { "name": "Counter2", "type": "counter" }
      ]
    }
  ],
  identify-delay-interval-ms = 1000,
  identify-interval-ms = 1000,
  value-check-interval-ms = 1000
}
</code></pre> 
  <p>The jmxQuery allows this Kamon module to find the mbean(s) that should be exported to Kamon. The name is the Kamon name of this new metric. The attributes are metrics to export to Kamon and the type of metric to export. The supported types are counter, guage, min_max_counter and histogram. The identify-delay-interval-ms is the number of milliseconds to wait before querying JMX the first time. The identify-interval-ms is how often to query JMX for new mxbeans. And value-check-interval-ms is the number of milliseconds between polling of known mxbeans for new metric values.</p> 
  <h2><a id="user-content-full-example" class="anchor" href="https://github.com/kamon-io/kamon-jmx#full-example" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Full Example</h2> 
  <pre lang="typesafeconfig"><code>kamon {
  jmx {
    subscriptions {
      histogram       = [ "**" ]
      min-max-counter = [ "**" ]
      gauge           = [ "**" ]
      counter         = [ "**" ]
      trace           = [ "**" ]
      trace-segment   = [ "**" ]
      akka-actor      = [ "**" ]
      akka-dispatcher = [ "**" ]
      akka-router     = [ "**" ]
      system-metric   = [ "**" ]
      http-server     = [ "**" ]
      # Here is the addition of the JMX exporting functionality to the subscriptions
      kamon-mxbeans   = [ "**" ]
    }
  }

  # adding the JMX to Kamon module
  modules {
    kamon-mxbeans {
      auto-start = yes
      requires-aspectj = no
      extension-class = "kamon.jmx.extension.JMXMetricImporter"
    }
  }

  # Configuring what JMX metrics to export to Kamon
  kamon-mxbeans {
    mbeans = [
      { "name": "my-mbean", "jmxQuery": "test:type=exampleBean,name=*",
        "attributes": [
      { "name": "Value1", "type": "counter" },
      { "name": "Value2", "type": "counter" } ] }
    ],
    identify-delay-interval-ms = 1000,
    identify-interval-ms = 1000,
    value-check-interval-ms = 1000
  }
}
</code></pre> 
 </article>
</div>