<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-fluentd-integration----" class="anchor" href="https://github.com/kamon-io/kamon-fluentd#fluentd-integration----" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Fluentd Integration <a href="https://camo.githubusercontent.com/bc7583ca1b2fc326c80db8e3a5c56d49073e59a1/68747470733a2f2f7472617669732d63692e6f72672f6b616d6f6e2d696f2f6b616d6f6e2d666c75656e74642e7376673f6272616e63683d6d6173746572" target="_blank"><img src="https://camo.githubusercontent.com/bc7583ca1b2fc326c80db8e3a5c56d49073e59a1/68747470733a2f2f7472617669732d63692e6f72672f6b616d6f6e2d696f2f6b616d6f6e2d666c75656e74642e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/kamon-io/kamon-fluentd.svg?branch=master" style="max-width:100%;"></a></h1> 
  <p><a href="https://gitter.im/kamon-io/Kamon?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Gitter" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg" style="max-width:100%;"></a> <a href="https://maven-badges.herokuapp.com/maven-central/io.kamon/kamon-fluentd_2.11" target="_blank"><img src="https://camo.githubusercontent.com/5708065599b62de0a74cd44e604b1efe806c7c7d/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f696f2e6b616d6f6e2f6b616d6f6e2d666c75656e74645f322e31312f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/io.kamon/kamon-fluentd_2.11/badge.svg" style="max-width:100%;"></a></p> 
  <h1><a id="user-content-reporting-metrics-to-fluentd" class="anchor" href="https://github.com/kamon-io/kamon-fluentd#reporting-metrics-to-fluentd" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Reporting Metrics to Fluentd</h1> 
  <p><a href="http://www.fluentd.org/" target="_blank">Fluentd</a> is distributed, reliable, realtime and programmable data collector. Fluentd's 300+ plugins connect it to <a href="http://www.fluentd.org/datasources" target="_blank">many data sources</a> and <a href="http://www.fluentd.org/dataoutputs" target="_blank">data outputs</a> while keeping its core small and fast (30-40MB memory footprint). And, <a href="http://www.fluentd.org/testimonials" target="_blank">2,000+ data-driven companies</a> rely on Fluentd to differentiate their products with better use of data.</p> 
  <p><code>kamon-fluentd</code> module provides capabilities to send kamon metrics to fluentd server. The module provides kamon users huge flexibility on interacting with kamon metrics because user can use bunch of <a href="http://www.fluentd.org/plugins" target="_blank">fluentd-plugin ecosystem</a> for reforming, filtering and forwarding kamon-metrics to anywhere.</p> 
  <h2><a id="user-content-installation" class="anchor" href="https://github.com/kamon-io/kamon-fluentd#installation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Installation</h2> 
  <p>Add the <code>kamon-fluentd</code> dependency to your project and ensure that it is in your classpath at runtime, that's it. Kamon's module loader will detect that the Fluentd module is in the classpath and automatically start it.</p> 
  <h3><a id="user-content-getting-started" class="anchor" href="https://github.com/kamon-io/kamon-fluentd#getting-started" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Getting Started</h3> 
  <p>Kamon kamon-fluentd module is currently available for Scala 2.11 and 2.12.</p> 
  <p>Supported releases and dependencies are shown below.</p> 
  <table> 
   <thead> 
    <tr> 
     <th align="center">kamon-fluentd</th> 
     <th align="center">status</th> 
     <th align="center">jdk</th> 
     <th>scala</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td align="center">0.6.6</td> 
     <td align="center">stable</td> 
     <td align="center">1.8+</td> 
     <td>2.11, 2.12</td> 
    </tr>
   </tbody>
  </table> 
  <p>To get started with SBT, simply add the following to your <code>build.sbt</code> file:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>io.kamon<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>kamon-fluentd <span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.6.6<span class="pl-pds">"</span></span></pre>
  </div> 
  <h2><a id="user-content-configuration" class="anchor" href="https://github.com/kamon-io/kamon-fluentd#configuration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Configuration</h2> 
  <p>By default, this module assumes that you have an instance of the Fluentd daemon running in localhost and listening on port 24224. If that is not the case the you can use the <code>kamon.fluentd.hostname</code> and <code>kamon.fluentd.port</code> configuration keys to point the module at your Fluentd daemon.</p> 
  <p>The Fluentd module subscribes itself to the entities included in the <code>kamon.fluentd.subscriptions</code> key. By default, the following subscriptions are included:</p> 
  <pre><code class="language-typesafeconfig">kamon.fluentd {
  subscriptions {
    histogram       = [ "**" ]
    min-max-counter = [ "**" ]
    gauge           = [ "**" ]
    counter         = [ "**" ]
    trace           = [ "**" ]
    trace-segment   = [ "**" ]
    akka-actor      = [ "**" ]
    akka-dispatcher = [ "**" ]
    akka-router     = [ "**" ]
    system-metric   = [ "**" ]
    http-server     = [ "**" ]
  }
}
</code></pre> 
  <p>If you are interested in reporting additional entities to Fluentd please ensure that you include the categories and name patterns accordingly.</p> 
  <h3><a id="user-content-customizing-statistical-metrics-over-histogram-snapshots" class="anchor" href="https://github.com/kamon-io/kamon-fluentd#customizing-statistical-metrics-over-histogram-snapshots" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Customizing Statistical Metrics over Histogram Snapshots</h3> 
  <p>You can also configure statistical metrics over histogram snapshots via <code>kamon.fluentd.histogram-stats</code> property.</p> 
  <pre><code class="language-typesafeconfig">kamon.fluentd {
  # statistic values to be reported for histogram type metrics
  # (i.e. Histogram, MinMaxCounter, Gauge).
  histogram-stats {
    # stats values:
    # "count", "min", "max", "average", "percentiles" are supported.
    # you can use "*" for wildcards.
    subscription = [ "count", "min", "max", "average", "percentiles" ],

    # percentile points:
    # this will be used when you set "percentiles" in "subscription" above.
    # In this example, kamon-fluentd reports 50th 90th, 99th and 99.9th percentiles.
    percentiles = [50.0, 90.0, 99.0, 99.9]
  }
}
</code></pre> 
  <h3><a id="user-content-json-formats-passed-to-fluentd" class="anchor" href="https://github.com/kamon-io/kamon-fluentd#json-formats-passed-to-fluentd" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Json Formats passed to Fluentd</h3> 
  <p>Fluentd's messages are represented by JSON format. Sample Json Format generetad by the module is below:</p> 
  <pre><code>{
  "time": 1445776940
  "tag": "kamon.fluentd.kamon-fluentd-example.akka-actor.kamon/user/metrics.mailbox-size",
  "app.name":"kamon-fluentd-example",
  "category.name":"akka-actor",
  "metric.name":"mailbox-size",
  "entity.name":"kamon/user/metrics",
  "stats.name":"average",
  "value": 2.0,
  "unit_of_measurement.name":"unknown",
  "unit_of_measurement.label":"unknown",
  "tags.some_tag_key":"some_tag_value",
  "canonical_metric.name":"kamon-fluentd-example.akka-actor.kamon/user/metrics.mailbox-size.average",
  "kamon-fluentd-example.akka-actor.kamon/user/metrics.mailbox-size.average": 2.0
}
</code></pre> 
  <p>Fluentd's JSON must have <code>time</code> and <code>tag</code> properties. <code>tag</code> is the property which is used for identifying data streams in Fluentd. <code>tag</code> which are generated by the module consists of tag prefix and canonical metric name. You can configure tag prefix via <code>kamon.fluentd.tag</code> property.</p> 
  <p>Naming convention of canonical metric name is as follows:</p> 
  <ul> 
   <li> <p>For all single instrument entities (those tracking counters, histograms, gaugues and min-max-counters), tag name will be <code>&lt;app.name&gt;.&lt;instrument.type&gt;.&lt;entity.name&gt;.&lt;stats.name&gt;</code>. Instrument type will be <code>counter</code>, <code>histogram</code> and etc.. stats name will be <code>count</code>, <code>min</code>, <code>max</code>, <code>average</code>, <code>percentiles.50</code>, etc. depending on instrument type.</p> </li> 
   <li> <p>For all other entities the pattern is a little different. the pattern will be <code>&lt;app.name&gt;.&lt;category.name&gt;.&lt;entity.name&gt;.&lt;metric.name&gt;.&lt;stats_name&gt;</code>. For example, mailbox-size measurements of <code>actor:kamon/user/metrics</code> are reported under the <code>&lt;app.name&gt;.akka-actor.kamon/user/metrics.mailbox-size.&lt;stats_name&gt;</code> metrics.</p> </li> 
  </ul> 
  <p>You can configure <code>&lt;app_name&gt;</code> via <code>kamon.fluend.application-name</code>.</p> 
  <p>For all tags which are set in Kamon entities, please be noted that <code>tag</code> property in JSON message above is different from this, they will be embedded into Json messages as the form of <code>"tags.&lt;tag_key&gt;" : &lt;tag_value&gt;</code>.</p> 
  <p>"canonical_metric.name" and <code>&lt;canonical_metric.name&gt; : &lt;value&gt;</code> will be embedded too for user's convenience.</p> 
  <h2><a id="user-content-integration-notes" class="anchor" href="https://github.com/kamon-io/kamon-fluentd#integration-notes" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Integration Notes</h2> 
  <p>We don't flush the metrics data as soon as the measurements are taken but instead, all metrics data is buffered by the <code>kamon-fluentd</code> module and flushed periodically using the configured <code>kamon.fluentd.flush-interval</code>.</p> 
  <h2><a id="user-content-examples" class="anchor" href="https://github.com/kamon-io/kamon-fluentd#examples" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Examples</h2> 
  <p>Please look at <a href="https://github.com/kamon-io/Kamon/tree/master/kamon-examples/kamon-fluentd-example" target="_blank">kamon-fluentd-example</a> for further details.</p> 
 </article>
</div>