<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-executor-service-metrics-tracker-" class="anchor" href="https://github.com/kamon-io/kamon-executors#executor-service-metrics-tracker-" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Executor Service Metrics Tracker <a href="https://camo.githubusercontent.com/a475d30b3125d9f25a2ade1c57a329859ff97b60/68747470733a2f2f7261776769742e636f6d2f6b616d6f6e2d696f2f4b616d6f6e2f6d61737465722f6b616d6f6e2d6c6f676f2e737667" target="_blank"><img align="right" src="https://camo.githubusercontent.com/a475d30b3125d9f25a2ade1c57a329859ff97b60/68747470733a2f2f7261776769742e636f6d2f6b616d6f6e2d696f2f4b616d6f6e2f6d61737465722f6b616d6f6e2d6c6f676f2e737667" height="150px" data-canonical-src="https://rawgit.com/kamon-io/Kamon/master/kamon-logo.svg" style="max-width:100%;"></a></h1> 
  <p><a href="https://travis-ci.org/kamon-io/kamon-executors" target="_blank"><img src="https://camo.githubusercontent.com/c017abc04ee93560a025264357954b768632878a/68747470733a2f2f7472617669732d63692e6f72672f6b616d6f6e2d696f2f6b616d6f6e2d6578656375746f72732e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/kamon-io/kamon-executors.svg?branch=master" style="max-width:100%;"></a> <a href="https://gitter.im/kamon-io/Kamon?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Gitter" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg" style="max-width:100%;"></a> <a href="https://maven-badges.herokuapp.com/maven-central/io.kamon/kamon-executors_2.11" target="_blank"><img src="https://camo.githubusercontent.com/c2717bbe1241bf50e1f2d4a18843f490b6b8d59b/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f696f2e6b616d6f6e2f6b616d6f6e2d6578656375746f72735f322e31312f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/io.kamon/kamon-executors_2.11/badge.svg" style="max-width:100%;"></a></p> 
  <h3><a id="user-content-getting-started" class="anchor" href="https://github.com/kamon-io/kamon-executors#getting-started" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Getting Started</h3> 
  <p>Executor Service Metrics is currently available for Scala 2.10, 2.11 and 2.12.</p> 
  <p>Supported releases and dependencies are shown below.</p> 
  <table> 
   <thead> 
    <tr> 
     <th align="center">kamon</th> 
     <th align="center">status</th> 
     <th align="center">jdk</th> 
     <th>scala</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td align="center">1.0.0</td> 
     <td align="center">stable</td> 
     <td align="center">1.8+</td> 
     <td>2.10, 2.11, 2.12</td> 
    </tr>
   </tbody>
  </table> 
  <p>To get started with SBT, simply add the following to your <code>build.sbt</code> file:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>io.kamon<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>kamon-executors<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.0.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <h3><a id="user-content-documentation" class="anchor" href="https://github.com/kamon-io/kamon-executors#documentation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Documentation</h3> 
  <h3><a id="user-content-thread-pools" class="anchor" href="https://github.com/kamon-io/kamon-executors#thread-pools" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Thread Pools</h3> 
  <p>A <strong>Thread Pool</strong> is represented by a instance of the class <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html" target="_blank">ExecutorService</a>. Using a <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html" target="_blank">ExecutorService</a>, you can submit a series of tasks that will be completed in the future.</p> 
  <p><a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html" target="_blank">Executors</a> class provides some factory methods in order to create types of thread pools as following:</p> 
  <ul> 
   <li><strong>Single Thread Executor:</strong> A thread pool with only one thread.</li> 
   <li><strong>Cached Thread Pool:</strong> A thread pool that create as many threads it needs to execute the task in parallel.</li> 
   <li><strong>Fixed Thread Pool:</strong> A thread pool with a fixed number of threads.</li> 
   <li><strong>Scheduled Thread Pool:</strong> A thread pool made to schedule future task.</li> 
   <li><strong>Single Thread Scheduled Pool:</strong> A thread pool with only one thread to schedule future task.</li> 
   <li><strong>Work Stealing Pool:</strong> Creates a work-stealing thread pool using all available processors as its target parallelism level.</li> 
  </ul> 
  <h3><a id="user-content-thread-pool-metrics" class="anchor" href="https://github.com/kamon-io/kamon-executors#thread-pool-metrics" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Thread Pool Metrics</h3> 
  <p>The metrics provided for each <strong>Thread Pool</strong> will change depending on the type of pool at hand. To know for sure what kind of pool you are looking at, we will always include a tag named <code>executor-type</code> whose value will always be present and be either <code>fork-join-pool</code> for <code>thread-pool-executor</code>, matching the type of thread pool that you actually created.</p> 
  <h3><a id="user-content-fork-join-pool" class="anchor" href="https://github.com/kamon-io/kamon-executors#fork-join-pool" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Fork Join Pool</h3> 
  <p>When your pool type is <code>fork-join-pool</code> you will get:</p> 
  <ul> 
   <li><strong>parallelism</strong>: a min max counter with the desired parallelism value. This value will remain steady over time.</li> 
   <li><strong>pool-size</strong>: a gauge tracking the number of worker threads that have started but not yet terminated. This value will differ that of <code>parallelism</code> if threads are created to maintain parallelism when others are cooperatively blocked.</li> 
   <li><strong>active-threads</strong>: a gauge tracking an estimate of the number of threads that are currently stealing or executing tasks.</li> 
   <li><strong>running-threads</strong>: a gauge tracking an estimate of the number of worker threads that are not blocked waiting to join tasks or for other managed synchronization.</li> 
   <li><strong>queued-task-count</strong>: a gauge tracking the total number of tasks currently held in queues by worker threads (but not including tasks submitted to the pool that have not begun executing). This value is only an approximation, obtained by iterating across all threads in the pool.</li> 
  </ul> 
  <h3><a id="user-content-thread-pool-executor" class="anchor" href="https://github.com/kamon-io/kamon-executors#thread-pool-executor" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Thread Pool Executor</h3> 
  <p>When your pool type is <code>thread-pool-executor</code> you will get:</p> 
  <ul> 
   <li><strong>core-pool-size</strong>: a gauge tracking the core pool size of the executor.</li> 
   <li><strong>max-pool-size</strong>: a gauge tracking the maximum number of threads allowed by the executor.</li> 
   <li><strong>pool-size</strong>: a gauge tracking the current number of threads in the pool.</li> 
   <li><strong>active-threads</strong>: a gauge tracking the number of threads that are actively executing tasks.</li> 
   <li><strong>processed-tasks</strong>: a gauge tracking the number of processed tasks for the executor. Please not that even while the <code>ThreadPoolExecutor</code> provides us with the total number of tasks ever processed by the executor, this metrics is effectively tracking the number of tasks as a differential from the last recorded value.</li> 
  </ul> 
  <p><strong>Thread Pools</strong> are very important to execute synchronous and asynchronous processes in our applications and for that reason <code>Kamon</code> provides a simple way to monitoring them.</p> 
  <h3><a id="user-content-scala-example" class="anchor" href="https://github.com/kamon-io/kamon-executors#scala-example" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scala example</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">forkJoinPool</span> <span class="pl-k">=</span> <span class="pl-en">Executors</span>.newWorkStealingPool()
<span class="pl-k">val</span> <span class="pl-en">fixedThreadPool</span> <span class="pl-k">=</span> <span class="pl-en">Executors</span>.newFixedThreadPool(<span class="pl-c1">10</span>)

<span class="pl-en">Executors</span>.register(<span class="pl-s"><span class="pl-pds">"</span>java-fork-join-pool<span class="pl-pds">"</span></span>, forkJoinPool)
<span class="pl-en">Executors</span>.register(<span class="pl-s"><span class="pl-pds">"</span>fixed-thread-pool<span class="pl-pds">"</span></span>, fixedThreadPool)

<span class="pl-k">for</span> (_ <span class="pl-k">&lt;</span><span class="pl-k">-</span> <span class="pl-c1">0</span> to <span class="pl-c1">100</span>) {
  forkJoinPool.submit(<span class="pl-en">HeavyWeightTask</span>())
  fixedThreadPool.submit(<span class="pl-en">HeavyWeightTask</span>())
}

forkJoinPool.shutdown()
fixedThreadPool.shutdown()
</pre>
  </div> 
  <h3><a id="user-content-java-example" class="anchor" href="https://github.com/kamon-io/kamon-executors#java-example" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Java example</h3> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">final</span> <span class="pl-smi">ExecutorService</span> forkJoinPool <span class="pl-k">=</span> <span class="pl-smi">Executors</span><span class="pl-k">.</span>newWorkStealingPool();
<span class="pl-k">final</span> <span class="pl-smi">ExecutorService</span> fixedThreadPool <span class="pl-k">=</span> <span class="pl-smi">Executors</span><span class="pl-k">.</span>newFixedThreadPool(<span class="pl-c1">10</span>);

<span class="pl-smi">Executors</span><span class="pl-k">.</span>register(<span class="pl-s"><span class="pl-pds">"</span>fork-join-pool<span class="pl-pds">"</span></span>, forkJoinPool);
<span class="pl-smi">Executors</span><span class="pl-k">.</span>register(<span class="pl-s"><span class="pl-pds">"</span>fixed-thread-pool<span class="pl-pds">"</span></span>, fixedThreadPool);

<span class="pl-k">for</span>(<span class="pl-k">int</span> i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> <span class="pl-c1">100</span>; i<span class="pl-k">++</span>) {
    forkJoinPool<span class="pl-k">.</span>submit(<span class="pl-k">new</span> <span class="pl-smi">HeavyWeightTask</span>());
    fixedThreadPool<span class="pl-k">.</span>submit(<span class="pl-k">new</span> <span class="pl-smi">HeavyWeightTask</span>());
}

forkJoinPool<span class="pl-k">.</span>shutdown();
fixedThreadPool<span class="pl-k">.</span>shutdown();</pre>
  </div> 
  <p>The output for example above using the <code>kamon-log-reporter</code> module should be like the following:</p> 
  <pre lang="text"><code>+------------------------------------------------------------------------------------------------+
|  Thread-Pool-Executor                                                                          |
|                                                                                                |
|  Name: fixed-thread-pool                                                                       |
|                                                                                                |
|  Core Pool Size: 10                                                                            |
|  Max  Pool Size: 10                                                                            |
|                                                                                                |
|                                                                                                |
|                         Pool Size        Active Threads          Processed Task                |
|           Min              10                  0                      0                        |
|           Avg              10.0                1.0                    0.0                      |
|           Max              10                  10                     0                        |
|                                                                                                |
+------------------------------------------------------------------------------------------------+
+------------------------------------------------------------------------------------------------+
|  Fork-Join-Pool                                                                                |
|                                                                                                |
|  Name: fork-join-pool                                                                          |
|                                                                                                |
|  Paralellism: 4                                                                                |
|                                                                                                |
|                 Pool Size       Active Threads     Running Threads     Queue Task Count        |
|      Min           2                 0                   0                   0                 |
|      Avg           3.0               0.0                 1.0                 0.0               |
|      Max           4                 0                   4                   0                 |
|                                                                                                |
+------------------------------------------------------------------------------------------------+

</code></pre> 
 </article>
</div>