<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-ignite-scala" class="anchor" href="https://github.com/rubanm/ignite-scala#ignite-scala" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>ignite scala</h1> 
  <p>Scala API for distributed closures on <a href="https://ignite.incubator.apache.org/" target="_blank">Apache Ignite</a>. Inspired by <a href="https://github.com/twitter/scalding/" target="_blank">Scalding</a>.</p> 
  <p><a href="http://apacheignite.readme.io/v1.0/docs/distributed-closures" target="_blank">http://apacheignite.readme.io/v1.0/docs/distributed-closures</a></p> 
  <h4><a id="user-content-example-0---cluster-setup" class="anchor" href="https://github.com/rubanm/ignite-scala#example-0---cluster-setup" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>example 0 - cluster setup</h4> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">org.apache.ignite.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">org.apache.ignite.configuration.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">ignite.scala.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">cfg</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">IgniteConfiguration</span> <span class="pl-c"><span class="pl-c">//</span> configure as appropriate</span>
<span class="pl-k">val</span> <span class="pl-en">ignite</span> <span class="pl-k">=</span> <span class="pl-en">Ignition</span>.start(cfg)
<span class="pl-k">val</span> <span class="pl-en">compute</span> <span class="pl-k">=</span> ignite.compute(ignite.cluster)
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">cr</span> <span class="pl-k">=</span> <span class="pl-en">ComputeRunner</span>(compute)</pre>
  </div> 
  <h4><a id="user-content-example-1---character-count" class="anchor" href="https://github.com/rubanm/ignite-scala#example-1---character-count" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>example 1 - character count</h4> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.twitter.algebird.</span><span class="pl-v">Semigroup</span>

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">sg</span> <span class="pl-k">=</span> <span class="pl-en">Semigroup</span>.intSemigroup

<span class="pl-k">val</span> <span class="pl-en">chain</span> <span class="pl-k">=</span> <span class="pl-en">IgnitePipe</span>.from(<span class="pl-s"><span class="pl-pds">"</span>The quick brown fox jumps over the lazy dog.<span class="pl-pds">"</span></span>.split(<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>))
  .map(_.length) <span class="pl-c"><span class="pl-c">//</span> fork</span>
  .reduce <span class="pl-c"><span class="pl-c">//</span> join</span>

chain.execute <span class="pl-c"><span class="pl-c">//</span> Option[Int]</span></pre>
  </div> 
  <h4><a id="user-content-example-2---working-with-distributed-cache" class="anchor" href="https://github.com/rubanm/ignite-scala#example-2---working-with-distributed-cache" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>example 2 - working with distributed cache</h4> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">cache</span> <span class="pl-k">=</span> {
  <span class="pl-k">val</span> <span class="pl-en">cfg</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">CacheConfiguration</span>[<span class="pl-en">K</span>, <span class="pl-en">V</span>]
  cfg.setName(name)
  ignite.getOrCreateCache(cfg)
}

<span class="pl-k">val</span> <span class="pl-en">process</span><span class="pl-k">:</span> <span class="pl-en">V</span> <span class="pl-k">=&gt;</span> <span class="pl-en">R</span> <span class="pl-c"><span class="pl-c">//</span> computation</span>
<span class="pl-k">val</span> <span class="pl-en">isValid</span><span class="pl-k">:</span> <span class="pl-en">R</span> <span class="pl-k">=&gt;</span> <span class="pl-k">Boolean</span>

<span class="pl-en">IgnitePipe</span>.from(keys)
  .map { k <span class="pl-k">=&gt;</span>
    <span class="pl-k">val</span> <span class="pl-en">v</span> <span class="pl-k">=</span> cache.get(k)
    process(v)
  }
  .filter(isValid)
  .execute <span class="pl-c"><span class="pl-c">//</span> Iterable[R]</span></pre>
  </div> 
  <h4><a id="user-content-example-3---collocating-compute-with-cache" class="anchor" href="https://github.com/rubanm/ignite-scala#example-3---collocating-compute-with-cache" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>example 3 - collocating compute with cache</h4> 
  <p>Ignite allows routing computations to the nodes where data is cached.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-en">IgnitePipe</span>.collocated(cache, keys) { (c, k) <span class="pl-k">=&gt;</span>
  <span class="pl-k">val</span> <span class="pl-en">v</span> <span class="pl-k">=</span> c.localPeek(k)
  process(v)
}
.filter(isValid)
.execute</pre>
  </div> 
  <h4><a id="user-content-example-4---more-chaining" class="anchor" href="https://github.com/rubanm/ignite-scala#example-4---more-chaining" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>example 4 - more chaining</h4> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">cache</span><span class="pl-k">:</span> <span class="pl-en">IgniteCache</span>[<span class="pl-en">K</span>, <span class="pl-en">V</span>]
<span class="pl-k">val</span> <span class="pl-en">db</span><span class="pl-k">:</span> <span class="pl-en">CacheJdbcBlobStore</span>[<span class="pl-en">K</span>, <span class="pl-en">V</span>]

<span class="pl-k">val</span> <span class="pl-en">cacheResults</span> <span class="pl-k">=</span> <span class="pl-en">IgnitePipe</span>.from(keys)
  .map { k <span class="pl-k">=&gt;</span> cacheGetAndCompute(cache, k) }

<span class="pl-k">val</span> <span class="pl-en">dbResults</span> <span class="pl-k">=</span> <span class="pl-en">IgnitePipe</span>.from(keys)
  .map { k <span class="pl-k">=&gt;</span> dbGetAndCompute(db, k) }

<span class="pl-k">val</span> <span class="pl-en">combined</span> <span class="pl-k">=</span> (cacheResults <span class="pl-k">++</span> dbResults)
  .reduce <span class="pl-c"><span class="pl-c">//</span> reduction could be to consolidate cache and db for instance</span>
  .toPipe <span class="pl-c"><span class="pl-c">//</span> continuation</span>

combined.map { exportResults(_) }.execute</pre>
  </div> 
  <h4><a id="user-content-installing" class="anchor" href="https://github.com/rubanm/ignite-scala#installing" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>installing</h4> 
  <p>Add the following to your build.sbt (fetches from sonatype)</p> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-en">Resolver</span>.sonatypeRepo(<span class="pl-s"><span class="pl-pds">"</span>releases<span class="pl-pds">"</span></span>)
libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.github.rubanm<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>ignite-scala<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.0.1<span class="pl-pds">"</span></span></pre>
  </div> 
  <h4><a id="user-content-core-api" class="anchor" href="https://github.com/rubanm/ignite-scala#core-api" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>core api</h4> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">/*</span> Provides composable distributed closures that can run on Apache Ignite. <span class="pl-c">*/</span></span>
<span class="pl-k">trait</span> <span class="pl-en">IgnitePipe</span>[<span class="pl-en">T</span>] {

  <span class="pl-k">def</span> <span class="pl-en">map</span>[<span class="pl-en">U</span>](<span class="pl-v">f</span>: <span class="pl-en">T</span> <span class="pl-k">=&gt;</span> <span class="pl-en">U</span>)<span class="pl-k">:</span> <span class="pl-en">IgnitePipe</span>[<span class="pl-en">U</span>]

  <span class="pl-k">def</span> <span class="pl-en">flatMap</span>[<span class="pl-en">U</span>](<span class="pl-v">f</span>: <span class="pl-en">T</span> <span class="pl-k">=&gt;</span> <span class="pl-en">TraversableOnce</span>[<span class="pl-en">U</span>])<span class="pl-k">:</span> <span class="pl-en">IgnitePipe</span>[<span class="pl-en">U</span>]

  <span class="pl-k">def</span> <span class="pl-en">++</span>(<span class="pl-v">p</span>: <span class="pl-en">IgnitePipe</span>[<span class="pl-en">T</span>])<span class="pl-k">:</span> <span class="pl-en">IgnitePipe</span>[<span class="pl-en">T</span>]

  <span class="pl-k">def</span> <span class="pl-en">reduce</span>(<span class="pl-k">implicit</span> <span class="pl-v">sg</span>: <span class="pl-en">Semigroup</span>[<span class="pl-en">T</span>])<span class="pl-k">:</span> <span class="pl-en">Reduction</span>[<span class="pl-en">T</span>]

  <span class="pl-k">def</span> <span class="pl-en">execute</span><span class="pl-k">:</span> <span class="pl-en">Iterable</span>[<span class="pl-en">T</span>]
}

<span class="pl-c"><span class="pl-c">/*</span> Represents a reduction of the distributed closure results.<span class="pl-c">*/</span></span>
<span class="pl-k">trait</span> <span class="pl-en">Reduction</span>[<span class="pl-en">T</span>] {

  <span class="pl-k">def</span> <span class="pl-en">execute</span><span class="pl-k">:</span> <span class="pl-en">Option</span>[<span class="pl-en">T</span>]

  <span class="pl-k">def</span> <span class="pl-en">toPipe</span><span class="pl-k">:</span> <span class="pl-en">IgnitePipe</span>[<span class="pl-en">T</span>]
}</pre>
  </div> 
 </article>
</div>