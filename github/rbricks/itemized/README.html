<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="" class="anchor" href="https://github.com/rbricks/itemized#" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><a href="https://raw.githubusercontent.com/rbricks/rbricks.github.io/master/logo/itemized.png" target="_blank"><img src="https://raw.githubusercontent.com/rbricks/rbricks.github.io/master/logo/itemized.png" alt="rbricks itemized" style="max-width:100%;"></a></h1> 
  <p>A small library (&lt;300 loc) that provides macros and typeclasses for enums encoded as <code>sealed trait</code> hierarchies.</p> 
  <p>Part of <a href="http://rbricks.io" target="_blank">rbricks</a>, a collection of composable, small-footprint libraries for scala.</p> 
  <p><a href="https://travis-ci.org/rbricks/itemized" target="_blank"><img src="https://camo.githubusercontent.com/66a5610cec2d1adac838f2318c91793184fb6340/68747470733a2f2f7472617669732d63692e6f72672f72627269636b732f6974656d697a65642e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/rbricks/itemized.svg?branch=master" style="max-width:100%;"></a></p> 
  <h2><a id="user-content-features" class="anchor" href="https://github.com/rbricks/itemized#features" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Features</h2> 
  <ol> 
   <li><p>(Optional) <em>macro annotations</em> for compact "enum" syntax.</p> 
    <div class="highlight highlight-source-scala">
     <pre><span class="pl-k">import</span> <span class="pl-v">io.rbricks.itemized.annotation.</span><span class="pl-v">enum</span>

<span class="pl-k">@</span>enum <span class="pl-k">trait</span> <span class="pl-en">Planet</span> {
  <span class="pl-k">object</span> <span class="pl-en">Earth</span>
  <span class="pl-k">object</span> <span class="pl-en">Venus</span>
  <span class="pl-k">object</span> <span class="pl-en">Mercury</span>
}</pre>
    </div> <p>This expands to:</p> 
    <div class="highlight highlight-source-scala">
     <pre><span class="pl-k">sealed</span> <span class="pl-k">trait</span> <span class="pl-en">Planet</span> <span class="pl-k">extends</span> <span class="pl-e">io.rbricks.itemized.Itemized</span>
<span class="pl-k">object</span> <span class="pl-en">Planet</span> {
  <span class="pl-k">case</span> <span class="pl-k">object</span> <span class="pl-en">Earth</span> <span class="pl-k">extends</span> <span class="pl-e">Planet</span>
  <span class="pl-k">case</span> <span class="pl-k">object</span> <span class="pl-en">Venus</span> <span class="pl-k">extends</span> <span class="pl-e">Planet</span>
  <span class="pl-k">case</span> <span class="pl-k">object</span> <span class="pl-en">Mercury</span> <span class="pl-k">extends</span> <span class="pl-e">Planet</span>
}</pre>
    </div></li> 
   <li><p><em>Typeclass instances</em> to convert to and from <code>String</code> are automatically derived:</p> 
    <div class="highlight highlight-source-scala">
     <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">io.rbricks.itemized.</span><span class="pl-v">ItemizedCodec</span>

scala<span class="pl-k">&gt;</span> <span class="pl-en">ItemizedCodec</span>[<span class="pl-en">Planet</span>].fromRep(<span class="pl-s"><span class="pl-pds">"</span>Earth<span class="pl-pds">"</span></span>)
res0<span class="pl-k">:</span> <span class="pl-en">Option</span>[<span class="pl-en">Planet</span>] <span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-en">Earth</span>)

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">planet</span><span class="pl-k">:</span> <span class="pl-en">Planet</span> <span class="pl-k">=</span> <span class="pl-en">Planet</span>.<span class="pl-en">Earth</span>

scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">io.rbricks.itemized.ItemizedCodec.ops.</span><span class="pl-v">_</span>

scala<span class="pl-k">&gt;</span> planet.toRep</pre>
    </div></li> 
   <li><p>Pattern matching against the sealed hierarchy supports <em>exhaustiveness checking</em>, for added safety.</p> 
    <div class="highlight highlight-source-scala">
     <pre>scala<span class="pl-k">&gt;</span> (<span class="pl-en">Planet</span>.<span class="pl-en">Earth</span> <span class="pl-k">:</span> <span class="pl-en">Planet</span>) <span class="pl-k">match</span> {
     <span class="pl-k">|</span>   <span class="pl-k">case</span> <span class="pl-en">Planet</span>.<span class="pl-en">Earth</span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>close<span class="pl-pds">"</span></span>
     <span class="pl-k">|</span>   <span class="pl-k">case</span> <span class="pl-en">Planet</span>.<span class="pl-en">Venus</span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>far<span class="pl-pds">"</span></span>
     <span class="pl-k">|</span> }
&lt;<span class="pl-ent">console</span>&gt;<span class="pl-k">:</span><span class="pl-c1">19</span><span class="pl-k">:</span> <span class="pl-v">warning</span>: <span class="pl-k">match</span> may not be exhaustive.
<span class="pl-en">It</span> would fail on the following <span class="pl-v">input</span>: <span class="pl-en">Mercury</span>
       (<span class="pl-en">Planet</span>.<span class="pl-en">Earth</span> <span class="pl-k">:</span> <span class="pl-en">Planet</span>) <span class="pl-k">match</span> {
                     ^
res1<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> close</pre>
    </div></li> 
   <li><p>Support for serialization libraries, currently (click on links for usage/installation instructions):</p> 
    <ul> 
     <li><a href="https://github.com/rbricks/itemized/blob/master/circe/README.md" target="_blank">circe (JSON)</a></li> 
    </ul></li> 
  </ol> 
  <h2><a id="user-content-install" class="anchor" href="https://github.com/rbricks/itemized#install" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Install</h2> 
  <p>Artifacts for Scala 2.11 and 2.12 are available on Maven Central.</p> 
  <p>Add the dependency to your <code>build.sbt</code></p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>io.rbricks<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>itemized<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.1.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>To enable the macro paradise plugin (for the <code>@enum</code> annotation), also add</p> 
  <div class="highlight highlight-source-scala">
   <pre>addCompilerPlugin(<span class="pl-s"><span class="pl-pds">"</span>org.scalamacros<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>paradise<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>2.1.0<span class="pl-pds">"</span></span> cross <span class="pl-en">CrossVersion</span>.full)</pre>
  </div> 
  <h2><a id="user-content-convention-and-marker-trait" class="anchor" href="https://github.com/rbricks/itemized#convention-and-marker-trait" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Convention and marker trait</h2> 
  <p>The <code>@enum</code> annotation builds enumerations that follow the library's convention for how ADT-based enums should be encoded. However, usage of the macro annotation can be avoided by manually writing out the ADT. Here's an example that serves as an informal definition of the convention.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">sealed</span> <span class="pl-k">trait</span> <span class="pl-en">Planet</span> <span class="pl-k">extends</span> <span class="pl-e">io.rbricks.itemized.Itemized</span>
<span class="pl-k">object</span> <span class="pl-en">Planet</span> {
  <span class="pl-k">case</span> <span class="pl-k">object</span> <span class="pl-en">Earth</span> <span class="pl-k">extends</span> <span class="pl-e">Planet</span>
  <span class="pl-k">case</span> <span class="pl-k">object</span> <span class="pl-en">Venus</span> <span class="pl-k">extends</span> <span class="pl-e">Planet</span>
  <span class="pl-k">case</span> <span class="pl-k">object</span> <span class="pl-en">Mercury</span> <span class="pl-k">extends</span> <span class="pl-e">Planet</span>
}</pre>
  </div> 
  <p>This is equivalent to the following (which expands to the same encoding).</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">@</span>enum <span class="pl-k">trait</span> <span class="pl-en">Planet</span> {
  <span class="pl-k">object</span> <span class="pl-en">Earth</span>
  <span class="pl-k">object</span> <span class="pl-en">Venus</span>
  <span class="pl-k">object</span> <span class="pl-en">Mercury</span>
}</pre>
  </div> 
  <p>Usage of the <code>@enum</code> macro annotations requires the macro paradise plugin to be enabled in your project. Refer to the <a href="https://github.com/rbricks/itemized#Install" target="_blank">Install</a> section for how to set it up.</p> 
  <h2><a id="user-content-to-and-from-string" class="anchor" href="https://github.com/rbricks/itemized#to-and-from-string" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>To and from String</h2> 
  <p>The <code>ItemizedCodec</code> typeclass provides operations to convert ADT-based enumerations to and from Strings.</p> 
  <p>Implemetors of encoding and decoding (serialization) protocols may use it as follows:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">def</span> <span class="pl-en">itemizedJsonEncoding</span>[<span class="pl-en">T</span> <span class="pl-k">&lt;</span><span class="pl-k">:</span> <span class="pl-en">Itemized</span>](<span class="pl-k">implicit</span> <span class="pl-v">instance</span>: <span class="pl-en">ItemizedCodec</span>[<span class="pl-en">T</span>]) <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">JsonEncoding</span>[<span class="pl-en">T</span>] {
  <span class="pl-k">def</span> <span class="pl-en">write</span>(<span class="pl-v">value</span>: <span class="pl-en">T</span>)<span class="pl-k">:</span> <span class="pl-en">JsonObject</span> <span class="pl-k">=</span> <span class="pl-en">JsonString</span>(instance.caseToString(value))
  <span class="pl-k">def</span> <span class="pl-en">read</span>(<span class="pl-v">jsonObject</span>: <span class="pl-en">JsonObject</span>) <span class="pl-k">=</span> ... instance.itemizedFromString(str).get
}</pre>
  </div> 
  <h2><a id="user-content-enumerations-with-an-associated-value" class="anchor" href="https://github.com/rbricks/itemized#enumerations-with-an-associated-value" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Enumerations with an associated value</h2> 
  <p>The <code>@indexedEnum</code> annotation builds enumerations that follow the library's convention for ADT-based enums with an associated value.</p> 
  <pre><code>sealed trait Planet extends io.rbricks.itemized.IndexedEnum {
  type Index = Int
}
object Planet {
  case object Earth extends Planet { val index = 1 }
  case object Venus extends Planet { val index = 2 }
  case object Mercury extends Planet { val index = 3 }
}
</code></pre> 
  <p>This is equivalent to the following.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">io.rbricks.itemized.annotation.</span><span class="pl-v">indexedEnum</span>

<span class="pl-k">@</span>indexedEnum <span class="pl-k">trait</span> <span class="pl-en">Planet</span> {
  <span class="pl-k">type</span> <span class="pl-en">Index</span> <span class="pl-k">=</span> <span class="pl-k">Int</span>
  <span class="pl-k">object</span> <span class="pl-en">Earth</span>   { <span class="pl-c1">1</span> }
  <span class="pl-k">object</span> <span class="pl-en">Venus</span>   { <span class="pl-c1">2</span> }
  <span class="pl-k">object</span> <span class="pl-en">Mercury</span> { <span class="pl-c1">3</span> }
}</pre>
  </div> 
  <p>Usage of the <code>@indexedEnum</code> macro annotations requires the macro paradise plugin to be enabled in your project. Refer to the <a href="https://github.com/rbricks/itemized#Install" target="_blank">Install</a> section for how to set it up.</p> 
  <h2><a id="user-content-to-and-from-the-associated-value-index" class="anchor" href="https://github.com/rbricks/itemized#to-and-from-the-associated-value-index" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>To and from the associated value ("index")</h2> 
  <p>The <code>ItemizedIndex</code> typeclass provides operations to convert ADT-based enums to and from their associated values.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">io.rbricks.itemized.annotation.</span><span class="pl-v">indexedEnum</span>

<span class="pl-k">@</span>indexedEnum <span class="pl-k">trait</span> <span class="pl-en">Planet</span> {
  <span class="pl-k">type</span> <span class="pl-en">Index</span> <span class="pl-k">=</span> <span class="pl-k">Int</span>
  <span class="pl-k">object</span> <span class="pl-en">Earth</span>   { <span class="pl-c1">1</span> }
  <span class="pl-k">object</span> <span class="pl-en">Venus</span>   { <span class="pl-c1">2</span> }
  <span class="pl-k">object</span> <span class="pl-en">Mercury</span> { <span class="pl-c1">3</span> }
}</pre>
  </div> 
  <p>Examples of usage follow.</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">io.rbricks.itemized.</span><span class="pl-v">ItemizedIndex</span>

scala<span class="pl-k">&gt;</span> <span class="pl-en">ItemizedIndex</span>[<span class="pl-en">Planet</span>].fromIndex(<span class="pl-c1">2</span>)
res0<span class="pl-k">:</span> <span class="pl-en">Option</span>[<span class="pl-en">Planet</span>] <span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-en">Venus</span>)

scala<span class="pl-k">&gt;</span> <span class="pl-en">Planet</span>.<span class="pl-en">Mercury</span>.index
res1<span class="pl-k">:</span> <span class="pl-k">Int</span> <span class="pl-k">=</span> <span class="pl-c1">3</span>

scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">io.rbricks.itemized.ItemizedIndex.ops.</span><span class="pl-v">_</span>

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">planet</span><span class="pl-k">:</span> <span class="pl-en">Planet</span> <span class="pl-k">=</span> <span class="pl-en">Planet</span>.<span class="pl-en">Mercury</span>

scala<span class="pl-k">&gt;</span> planet.toIndex
res2<span class="pl-k">:</span> <span class="pl-en">Planet</span>#<span class="pl-en">Index</span> <span class="pl-k">=</span> <span class="pl-c1">3</span></pre>
  </div> 
 </article>
</div>