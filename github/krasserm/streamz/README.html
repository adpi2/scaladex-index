<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-streamz" class="anchor" href="https://github.com/krasserm/streamz#streamz" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Streamz</h1> 
  <p><a href="https://gitter.im/krasserm/streamz?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge" target="_blank"><img src="https://camo.githubusercontent.com/562dc9528099f138263b73aa23434e70089427f9/68747470733a2f2f6261646765732e6769747465722e696d2f6b7261737365726d2f73747265616d7a2e737667" alt="Gitter" data-canonical-src="https://badges.gitter.im/krasserm/streamz.svg" style="max-width:100%;"></a></p> 
  <p>Streamz is a resource combinator library for <a href="https://github.com/functional-streams-for-scala/fs2" target="_blank">FS2</a>. It supports </p> 
  <ul> 
   <li>conversion of <a href="http://doc.akka.io/docs/akka/2.4/scala/stream/index.html" target="_blank">Akka Stream</a> <code>Source</code>s, <code>Flow</code>s and <code>Sink</code>s to and from FS2 <code>Stream</code>s, <code>Pipe</code>s and <code>Sink</code>s, respectively.</li> 
   <li>usage of <a href="http://camel.apache.org/" target="_blank">Apache Camel</a> endpoints in FS2 <code>Stream</code>s.</li> 
  </ul> 
  <h2><a id="user-content-dependencies" class="anchor" href="https://github.com/krasserm/streamz#dependencies" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Dependencies</h2> 
  <p>Streamz artifacts are available for Scala 2.11 and 2.12:</p> 
  <pre><code>resolvers += "krasserm at bintray" at "http://dl.bintray.com/krasserm/maven"

// transitively depends on akka-camel 2.4.13
libraryDependencies += "com.github.krasserm" %% "streamz-akka-camel" % "0.5.1"

// transitively depends on akka-stream 2.4.13
libraryDependencies += "com.github.krasserm" %% "streamz-akka-stream" % "0.5.1"
</code></pre> 
  <h2><a id="user-content-combinators-for-akka-stream" class="anchor" href="https://github.com/krasserm/streamz#combinators-for-akka-stream" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Combinators for Akka Stream</h2> 
  <p>These combinators support the conversion of <a href="http://doc.akka.io/docs/akka/2.4/scala/stream/index.html" target="_blank">Akka Stream</a> <code>Source</code>s, <code>Flow</code>s and <code>Sink</code>s to and from FS2 <code>Stream</code>s, <code>Pipe</code>s and <code>Sink</code>s, respectively. They can be imported with </p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">streamz.akka.stream.</span><span class="pl-v">_</span></pre>
  </div> 
  <p>and require the following implicit values:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">akka.actor.</span><span class="pl-v">ActorRefFactory</span>
<span class="pl-k">import</span> <span class="pl-v">akka.stream.</span><span class="pl-v">ActorMaterializer</span>
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.</span><span class="pl-v">ExecutionContext</span>

<span class="pl-k">val</span> <span class="pl-en">factory</span><span class="pl-k">:</span> <span class="pl-en">ActorRefFactory</span> <span class="pl-k">=</span> ...

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">executionContext</span><span class="pl-k">:</span> <span class="pl-en">ExecutionContext</span> <span class="pl-k">=</span> factory.dispatcher
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">materializer</span><span class="pl-k">:</span> <span class="pl-en">ActorMaterializer</span> <span class="pl-k">=</span> <span class="pl-en">ActorMaterializer</span>()(factory)</pre>
  </div> 
  <h3><a id="user-content-conversions-from-akka-stream-to-fs2" class="anchor" href="https://github.com/krasserm/streamz#conversions-from-akka-stream-to-fs2" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Conversions from Akka Stream to FS2</h3> 
  <p><strong>Overview</strong>:</p> 
  <table>
   <thead> 
    <tr> 
     <th>From</th> 
     <th>With</th> 
     <th>To</th> 
    </tr> 
   </thead>
   <tbody> 
    <tr> 
     <td><code>Graph[SourceShape[O], M]</code></td> 
     <td><code>toStream()</code></td> 
     <td><code>Stream[Task, O]</code></td> 
    </tr> 
    <tr> 
     <td><code>Graph[SinkShape[I], M]</code></td> 
     <td><code>toSink()</code></td> 
     <td><code>Sink[Task, I]</code></td> 
    </tr> 
    <tr> 
     <td><code>Graph[FlowShape[I, O], M]</code></td> 
     <td><code>toPipe()</code></td> 
     <td><code>Pipe[Task, I, O]</code></td> 
    </tr> 
   </tbody>
  </table> 
  <p><strong>Examples</strong> (<a href="https://github.com/krasserm/streamz/blob/master/streamz-akka-stream/src/test/scala/streamz/akka/stream/example/ConverterExample.scala" target="_blank">source code</a>):</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">akka.stream.scaladsl.</span>{<span class="pl-v">Flow</span> <span class="pl-k">=&gt;</span> <span class="pl-v">AkkaFlow</span>, <span class="pl-v">Sink</span> <span class="pl-k">=&gt;</span> <span class="pl-v">AkkaSink</span>, <span class="pl-v">Source</span> <span class="pl-k">=&gt;</span> <span class="pl-v">AkkaSource</span>}
<span class="pl-k">import</span> <span class="pl-v">akka.</span>{<span class="pl-v">Done</span>, <span class="pl-v">NotUsed</span>}

<span class="pl-k">import</span> <span class="pl-v">fs2.</span>{<span class="pl-v">Pipe</span>, <span class="pl-v">Sink</span>, <span class="pl-v">Stream</span>, <span class="pl-v">Task</span>}

<span class="pl-k">import</span> <span class="pl-v">scala.collection.immutable.</span><span class="pl-v">Seq</span>
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.</span><span class="pl-v">Future</span>

<span class="pl-k">val</span> <span class="pl-en">numbers</span><span class="pl-k">:</span> <span class="pl-en">Seq</span>[<span class="pl-k">Int</span>] <span class="pl-k">=</span> <span class="pl-c1">1</span> to <span class="pl-c1">10</span>
<span class="pl-k">def</span> <span class="pl-en">f</span>(<span class="pl-v">i</span>: <span class="pl-k">Int</span>) <span class="pl-k">=</span> <span class="pl-en">List</span>(s<span class="pl-s"><span class="pl-pds">"</span>$i-1<span class="pl-pds">"</span></span>, s<span class="pl-s"><span class="pl-pds">"</span>$i-2<span class="pl-pds">"</span></span>)

<span class="pl-k">val</span> <span class="pl-en">aSink1</span><span class="pl-k">:</span> <span class="pl-en">AkkaSink</span>[<span class="pl-k">Int</span>, <span class="pl-en">Future</span>[<span class="pl-en">Done</span>]] <span class="pl-k">=</span> <span class="pl-en">AkkaSink</span>.foreach[<span class="pl-k">Int</span>](println)
<span class="pl-k">val</span> <span class="pl-en">fSink1</span><span class="pl-k">:</span> <span class="pl-en">Sink</span>[<span class="pl-en">Task</span>, <span class="pl-k">Int</span>] <span class="pl-k">=</span> aSink1.toSink()

<span class="pl-k">val</span> <span class="pl-en">aSource1</span><span class="pl-k">:</span> <span class="pl-en">AkkaSource</span>[<span class="pl-k">Int</span>, <span class="pl-en">NotUsed</span>] <span class="pl-k">=</span> <span class="pl-en">AkkaSource</span>(numbers)
<span class="pl-k">val</span> <span class="pl-en">fStream1</span><span class="pl-k">:</span> <span class="pl-en">Stream</span>[<span class="pl-en">Task</span>, <span class="pl-k">Int</span>] <span class="pl-k">=</span> aSource1.toStream()

<span class="pl-k">val</span> <span class="pl-en">aFlow1</span><span class="pl-k">:</span> <span class="pl-en">AkkaFlow</span>[<span class="pl-k">Int</span>, <span class="pl-k">String</span>, <span class="pl-en">NotUsed</span>] <span class="pl-k">=</span> <span class="pl-en">AkkaFlow</span>[<span class="pl-k">Int</span>].mapConcat(f)
<span class="pl-k">val</span> <span class="pl-en">fPipe1</span><span class="pl-k">:</span> <span class="pl-en">Pipe</span>[<span class="pl-en">Task</span>, <span class="pl-k">Int</span>, <span class="pl-k">String</span>] <span class="pl-k">=</span> aFlow1.toPipe()

fStream1.to(fSink1).run.unsafeRun() <span class="pl-c">// prints numbers</span>
assert(fStream1.runLog.unsafeRun() <span class="pl-k">==</span> numbers)
assert(fStream1.through(fPipe1).runLog.unsafeRun() <span class="pl-k">==</span> numbers.flatMap(f))</pre>
  </div> 
  <p><code>aSink1</code>, <code>aSource1</code> and <code>aFlow1</code> are materialized when the <code>Task</code>s of the FS2 streams that compose <code>fSink1</code>, <code>fStream1</code> and <code>fPipe1</code> are run. Their materialized value can be obtained via the <code>onMaterialization</code> callback that is a parameter of <code>toStream(onMaterialization: M =&gt; Unit)</code>, <code>toSink(onMaterialization: M =&gt; Unit)</code> and <code>toPipe(onMaterialization: M =&gt; Unit)</code> (not shown in the examples). </p> 
  <h3><a id="user-content-conversions-from-fs2-to-akka-stream" class="anchor" href="https://github.com/krasserm/streamz#conversions-from-fs2-to-akka-stream" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Conversions from FS2 to Akka Stream</h3> 
  <p><strong>Overview</strong>:</p> 
  <table>
   <thead> 
    <tr> 
     <th>From</th> 
     <th>With</th> 
     <th>To</th> 
    </tr> 
   </thead>
   <tbody> 
    <tr> 
     <td><code>Stream[F[_], O]</code></td> 
     <td><code>toSource()</code></td> 
     <td><code>Graph[SourceShape[O], NotUsed]</code></td> 
    </tr> 
    <tr> 
     <td><code>Sink[F[_], I]</code></td> 
     <td><code>toSink()</code></td> 
     <td><code>Graph[SinkShape[I], Future[Done]]</code></td> 
    </tr> 
    <tr> 
     <td><code>Pipe[F[_], I, O]</code></td> 
     <td><code>toFlow()</code></td> 
     <td><code>Graph[FlowShape[I, O], NotUsed]</code></td> 
    </tr> 
   </tbody>
  </table> 
  <p><strong>Examples</strong> (<a href="https://github.com/krasserm/streamz/blob/master/streamz-akka-stream/src/test/scala/streamz/akka/stream/example/ConverterExample.scala" target="_blank">source code</a>):</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">akka.stream.scaladsl.</span>{<span class="pl-v">Flow</span> <span class="pl-k">=&gt;</span> <span class="pl-v">AkkaFlow</span>, <span class="pl-v">Sink</span> <span class="pl-k">=&gt;</span> <span class="pl-v">AkkaSink</span>, <span class="pl-v">Source</span> <span class="pl-k">=&gt;</span> <span class="pl-v">AkkaSource</span>, <span class="pl-v">Keep</span>}
<span class="pl-k">import</span> <span class="pl-v">akka.</span>{<span class="pl-v">Done</span>, <span class="pl-v">NotUsed</span>}

<span class="pl-k">import</span> <span class="pl-v">fs2.</span>{<span class="pl-v">Pipe</span>, <span class="pl-v">Pure</span>, <span class="pl-v">Sink</span>, <span class="pl-v">Stream</span>, <span class="pl-v">pipe</span>}

<span class="pl-k">import</span> <span class="pl-v">scala.collection.immutable.</span><span class="pl-v">Seq</span>
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.</span>{<span class="pl-v">Await</span>, <span class="pl-v">Future</span>}
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.duration.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">numbers</span><span class="pl-k">:</span> <span class="pl-en">Seq</span>[<span class="pl-k">Int</span>] <span class="pl-k">=</span> <span class="pl-c1">1</span> to <span class="pl-c1">10</span>
<span class="pl-k">def</span> <span class="pl-en">g</span>(<span class="pl-v">i</span>: <span class="pl-k">Int</span>) <span class="pl-k">=</span> i <span class="pl-k">+</span> <span class="pl-c1">10</span>

<span class="pl-k">val</span> <span class="pl-en">fSink2</span><span class="pl-k">:</span> <span class="pl-en">Sink</span>[<span class="pl-en">Pure</span>, <span class="pl-k">Int</span>] <span class="pl-k">=</span> s <span class="pl-k">=&gt;</span> pipe.lift(g)(s).map(println)
<span class="pl-k">val</span> <span class="pl-en">aSink2</span><span class="pl-k">:</span> <span class="pl-en">AkkaSink</span>[<span class="pl-k">Int</span>, <span class="pl-en">Future</span>[<span class="pl-en">Done</span>]] <span class="pl-k">=</span> <span class="pl-en">AkkaSink</span>.fromGraph(fSink2.toSink)

<span class="pl-k">val</span> <span class="pl-en">fStream2</span><span class="pl-k">:</span> <span class="pl-en">Stream</span>[<span class="pl-en">Pure</span>, <span class="pl-k">Int</span>] <span class="pl-k">=</span> <span class="pl-en">Stream</span>.emits(numbers)
<span class="pl-k">val</span> <span class="pl-en">aSource2</span><span class="pl-k">:</span> <span class="pl-en">AkkaSource</span>[<span class="pl-k">Int</span>, <span class="pl-en">NotUsed</span>] <span class="pl-k">=</span> <span class="pl-en">AkkaSource</span>.fromGraph(fStream2.toSource)

<span class="pl-k">val</span> <span class="pl-en">fpipe2</span><span class="pl-k">:</span> <span class="pl-en">Pipe</span>[<span class="pl-en">Pure</span>, <span class="pl-k">Int</span>, <span class="pl-k">Int</span>] <span class="pl-k">=</span> pipe.lift[<span class="pl-en">Pure</span>, <span class="pl-k">Int</span>, <span class="pl-k">Int</span>](g)
<span class="pl-k">val</span> <span class="pl-en">aFlow2</span><span class="pl-k">:</span> <span class="pl-en">AkkaFlow</span>[<span class="pl-k">Int</span>, <span class="pl-k">Int</span>, <span class="pl-en">NotUsed</span>] <span class="pl-k">=</span> <span class="pl-en">AkkaFlow</span>.fromGraph(fpipe2.toFlow)

aSource2.toMat(aSink2)(<span class="pl-en">Keep</span>.right).run() <span class="pl-c">// prints numbers</span>
assert(<span class="pl-en">Await</span>.result(aSource2.toMat(<span class="pl-en">AkkaSink</span>.seq)(<span class="pl-en">Keep</span>.right).run(), <span class="pl-c1">5.</span>seconds) <span class="pl-k">==</span> numbers)
assert(<span class="pl-en">Await</span>.result(aSource2.via(aFlow2).toMat(<span class="pl-en">AkkaSink</span>.seq)(<span class="pl-en">Keep</span>.right).run(), <span class="pl-c1">5.</span>seconds) <span class="pl-k">==</span> numbers.map(g))</pre>
  </div> 
  <p><code>fSink2</code>, <code>fStream2</code> and <code>fPipe2</code> are run when the Akka streams that compose <code>aSink2</code>, <code>aSource2</code> and <code>aFlow2</code> are materialized.</p> 
  <h3><a id="user-content-backpressure-cancellation-completion-and-errors" class="anchor" href="https://github.com/krasserm/streamz#backpressure-cancellation-completion-and-errors" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Backpressure, cancellation, completion and errors</h3> 
  <p>Downstream demand and cancellation as well as upstream completion and error signals are properly mediated between Akka Stream and FS2 (see also <a href="https://github.com/krasserm/streamz/blob/master/streamz-akka-stream/src/test/scala/streamz/akka/stream/ConverterSpec.scala" target="_blank">ConverterSpec</a>). </p> 
  <h2><a id="user-content-combinators-for-apache-camel" class="anchor" href="https://github.com/krasserm/streamz#combinators-for-apache-camel" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Combinators for Apache Camel</h2> 
  <p>These combinators support the usage of <a href="http://camel.apache.org/" target="_blank">Apache Camel</a> endpoints in FS2 <a href="https://oss.sonatype.org/service/local/repositories/releases/archive/co/fs2/fs2-core_2.11/0.9.1/fs2-core_2.11-0.9.1-javadoc.jar/!/index.html#fs2.Stream" target="_blank"><code>Stream</code></a>s.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">akka.actor.</span><span class="pl-v">ActorSystem</span>
<span class="pl-k">import</span> <span class="pl-v">fs2.</span><span class="pl-v">Task</span>
<span class="pl-k">import</span> <span class="pl-v">fs2.</span><span class="pl-v">Stream</span>

<span class="pl-k">import</span> <span class="pl-v">streamz.akka.camel.</span><span class="pl-v">_</span>

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">system</span> <span class="pl-k">=</span> <span class="pl-en">ActorSystem</span>(<span class="pl-s"><span class="pl-pds">"</span>example<span class="pl-pds">"</span></span>)

<span class="pl-k">val</span> <span class="pl-en">s</span><span class="pl-k">:</span> <span class="pl-en">Stream</span>[<span class="pl-en">Task</span>,<span class="pl-k">Unit</span>] <span class="pl-k">=</span>
  <span class="pl-c">// receive from endpoint</span>
  receive[<span class="pl-k">String</span>](<span class="pl-s"><span class="pl-pds">"</span>seda:q1<span class="pl-pds">"</span></span>)
  <span class="pl-c">// in-only message exchange with endpoint and continue stream with in-message</span>
  .sendW(<span class="pl-s"><span class="pl-pds">"</span>seda:q3<span class="pl-pds">"</span></span>)
  <span class="pl-c">// in-out message exchange with endpoint and continue stream with out-message</span>
  .request[<span class="pl-k">Int</span>](<span class="pl-s"><span class="pl-pds">"</span>bean:service?method=length<span class="pl-pds">"</span></span>)
  <span class="pl-c">// in-only message exchange with endpoint</span>
  .send(<span class="pl-s"><span class="pl-pds">"</span>seda:q2<span class="pl-pds">"</span></span>)

  <span class="pl-c">// create concurrent task from stream</span>
  <span class="pl-k">val</span> <span class="pl-en">t</span><span class="pl-k">:</span> <span class="pl-en">Task</span>[<span class="pl-k">Unit</span>] <span class="pl-k">=</span> s.run

  <span class="pl-c">// run task (side effects only here) ...</span>
  t.unsafeRun</pre>
  </div> 
  <p>An implicit <code>ActorSystem</code> must be in scope because the combinator implementation depends on <a href="http://doc.akka.io/docs/akka/2.4/scala/camel.html" target="_blank">Akka Camel</a>. A discrete stream starting from a Camel endpoint can be created with <code>receive</code> where its type parameter is used to convert received message bodies to given type using a Camel type converter, if needed:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">s1</span><span class="pl-k">:</span> <span class="pl-en">Stream</span>[<span class="pl-en">Task</span>,<span class="pl-k">String</span>] <span class="pl-k">=</span> receive[<span class="pl-k">String</span>](<span class="pl-s"><span class="pl-pds">"</span>seda:q1<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>Streams can also be targeted at Camel endpoints. The <code>send</code> and <code>sendW</code> combinators initiate in-only message exchanges with a Camel endpoint:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">s2</span><span class="pl-k">:</span> <span class="pl-en">Stream</span>[<span class="pl-en">Task</span>,<span class="pl-k">Unit</span>] <span class="pl-k">=</span> s1.send(<span class="pl-s"><span class="pl-pds">"</span>seda:q2<span class="pl-pds">"</span></span>)
<span class="pl-k">val</span> <span class="pl-en">s3</span><span class="pl-k">:</span> <span class="pl-en">Stream</span>[<span class="pl-en">Task</span>,<span class="pl-k">String</span>] <span class="pl-k">=</span> s1.sendW(<span class="pl-s"><span class="pl-pds">"</span>seda:q3<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>The <code>request</code> combinator initiates in-out message exchanges with a Camel endpoint where its type parameter is used to convert response message bodies to given type using a Camel type converter, if needed:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">s4</span><span class="pl-k">:</span> <span class="pl-en">Stream</span>[<span class="pl-en">Task</span>,<span class="pl-k">Int</span>] <span class="pl-k">=</span> s1.request[<span class="pl-k">Int</span>](<span class="pl-s"><span class="pl-pds">"</span>bean:service?method=length<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>These combinators are compatible with all available <a href="http://camel.apache.org/components.html" target="_blank">Camel endpoints</a> and all <code>Stream</code> combinators (and now supersede the <a href="https://github.com/krasserm/scalaz-camel" target="_blank">scalaz-camel</a> project). A more concrete example how to process files from an FTP server is available <a href="https://github.com/krasserm/streamz/blob/master/streamz-akka-camel/src/test/scala/streamz/example/FtpExample.scala" target="_blank">here</a>.</p> 
 </article>
</div>