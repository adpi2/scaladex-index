<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-freedsl" class="anchor" href="https://github.com/iscpif/freedsl#freedsl" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>FreeDSL</h1> 
  <h2><a id="user-content-overview" class="anchor" href="https://github.com/iscpif/freedsl#overview" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Overview</h2> 
  <p>FreeDSL is a library for pure composition of side effects, weaving typeclasses on an abstract wrapping type and the Free Monad.</p> 
  <h2><a id="user-content-examples" class="anchor" href="https://github.com/iscpif/freedsl#examples" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Examples</h2> 
  <h3><a id="user-content-creating-a-new-dsl" class="anchor" href="https://github.com/iscpif/freedsl#creating-a-new-dsl" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Creating a new DSL</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">freedsl.dsl.</span><span class="pl-v">_</span>

<span class="pl-k">object</span> <span class="pl-en">Random</span> {

  <span class="pl-k">def</span> <span class="pl-en">interpreter</span>(<span class="pl-v">random</span>: util.<span class="pl-en">Random</span>) <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Interpreter</span> {
    <span class="pl-k">def</span> <span class="pl-en">nextDouble</span>(<span class="pl-k">implicit</span> <span class="pl-v">context</span>: <span class="pl-en">Context</span>) <span class="pl-k">=</span> random.nextDouble
    <span class="pl-k">def</span> <span class="pl-en">nextInt</span>(<span class="pl-v">n</span>: <span class="pl-k">Int</span>)(<span class="pl-k">implicit</span> <span class="pl-v">context</span>: <span class="pl-en">Context</span>) <span class="pl-k">=</span> random.nextInt(n)
    <span class="pl-k">def</span> <span class="pl-en">shuffle</span>[<span class="pl-en">A</span>](<span class="pl-v">s</span>: <span class="pl-en">Seq</span>[<span class="pl-en">A</span>])(<span class="pl-k">implicit</span> <span class="pl-v">context</span>: <span class="pl-en">Context</span>) <span class="pl-k">=</span> result(random.shuffle(s))
    <span class="pl-k">def</span> <span class="pl-en">fakeError</span>(<span class="pl-k">implicit</span> <span class="pl-v">context</span>: <span class="pl-en">Context</span>) <span class="pl-k">=</span> failure(<span class="pl-en">FakeError</span>(<span class="pl-s"><span class="pl-pds">"</span>for some reason there was an error<span class="pl-pds">"</span></span>))
  }

  <span class="pl-k">def</span> <span class="pl-en">interpreter</span>(<span class="pl-v">seed</span>: <span class="pl-k">Long</span>)<span class="pl-k">:</span> <span class="pl-en">Interpreter</span> <span class="pl-k">=</span> interpreter(<span class="pl-k">new</span> <span class="pl-en">util.Random</span>(seed))
  
  <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">FakeError</span>(<span class="pl-v">cause</span>: <span class="pl-k">String</span>) <span class="pl-k">extends</span> <span class="pl-e">Error</span>

}

<span class="pl-k">@</span>dsl <span class="pl-k">trait</span> <span class="pl-en">Random</span>[<span class="pl-en">M</span>[_]] {
  <span class="pl-k">def</span> <span class="pl-en">nextDouble</span><span class="pl-k">:</span> <span class="pl-en">M</span>[<span class="pl-k">Double</span>]
  <span class="pl-k">def</span> <span class="pl-en">nextInt</span>(<span class="pl-v">n</span>: <span class="pl-k">Int</span>)<span class="pl-k">:</span> <span class="pl-en">M</span>[<span class="pl-k">Int</span>]
  <span class="pl-k">def</span> <span class="pl-en">shuffle</span>[<span class="pl-en">A</span>](<span class="pl-v">s</span>: <span class="pl-en">Seq</span>[<span class="pl-en">A</span>])<span class="pl-k">:</span> <span class="pl-en">M</span>[<span class="pl-en">Seq</span>[<span class="pl-en">A</span>]]
  <span class="pl-k">def</span> <span class="pl-en">fakeError</span><span class="pl-k">:</span> <span class="pl-en">M</span>[<span class="pl-k">Unit</span>]
}</pre>
  </div> 
  <h3><a id="user-content-using-your-new-dsl" class="anchor" href="https://github.com/iscpif/freedsl#using-your-new-dsl" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Using your new DSL</h3> 
  <h4><a id="user-content-merging-interpreters" class="anchor" href="https://github.com/iscpif/freedsl#merging-interpreters" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Merging interpreters</h4> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">cats.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">cats.implicits.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">freedsl.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">freedsl.random.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">freedsl.util.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">freedsl.log.</span><span class="pl-v">_</span>

<span class="pl-k">import</span> <span class="pl-v">squants.time.TimeConversions.</span><span class="pl-v">_</span>

<span class="pl-c"><span class="pl-c">//</span> Pure functions that describe computations depending on side effects</span>
<span class="pl-k">def</span> <span class="pl-en">randomData</span>[<span class="pl-en">M</span>[_]](<span class="pl-k">implicit</span> <span class="pl-v">randomM</span>: <span class="pl-en">Random</span>[<span class="pl-en">M</span>])<span class="pl-k">:</span> <span class="pl-en">M</span>[<span class="pl-en">Seq</span>[<span class="pl-k">Int</span>]] <span class="pl-k">=</span>
  randomM.shuffle(<span class="pl-en">Seq</span>(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">3</span>, <span class="pl-c1">3</span>))

<span class="pl-k">def</span> <span class="pl-en">randomSleep</span>[<span class="pl-en">M</span>[_]<span class="pl-k">:</span> <span class="pl-en">Monad</span>](<span class="pl-k">implicit</span> <span class="pl-v">randomM</span>: <span class="pl-en">Random</span>[<span class="pl-en">M</span>], <span class="pl-v">utilM</span>: <span class="pl-en">Util</span>[<span class="pl-en">M</span>], <span class="pl-v">logM</span>: <span class="pl-en">Log</span>[<span class="pl-en">M</span>])<span class="pl-k">:</span> <span class="pl-en">M</span>[<span class="pl-k">Unit</span>] <span class="pl-k">=</span> <span class="pl-k">for</span> {
  s <span class="pl-k">&lt;</span><span class="pl-k">-</span> randomM.nextInt(<span class="pl-c1">10</span>)
  _ <span class="pl-k">&lt;</span><span class="pl-k">-</span> logM.print(s<span class="pl-s"><span class="pl-pds">"</span>Sleeping for $s seconds<span class="pl-pds">"</span></span>)
  _ <span class="pl-k">&lt;</span><span class="pl-k">-</span> utilM.sleep(s seconds)
} <span class="pl-k">yield</span> ()


<span class="pl-c"><span class="pl-c">//</span> Construct the interpreter and a type M along with implicit instances of Random[M], Util[M] and Log[M]</span>
<span class="pl-c"><span class="pl-c">//</span> they are build using the free monad and the freek library</span>

<span class="pl-k">val</span> <span class="pl-en">interpreter</span> <span class="pl-k">=</span> merge(<span class="pl-en">Util</span>.interpreter, <span class="pl-en">Random</span>.interpreter(<span class="pl-c1">42</span>), <span class="pl-en">Log</span>.interpreter)
<span class="pl-k">import</span> <span class="pl-v">interpreter.implicits.</span><span class="pl-v">_</span>

<span class="pl-k">def</span> <span class="pl-en">prg</span> <span class="pl-k">=</span>
  <span class="pl-k">for</span> {
    b <span class="pl-k">←</span> randomData[interpreter.<span class="pl-en">M</span>]
    _ <span class="pl-k">←</span> randomSleep[interpreter.<span class="pl-en">M</span>]
  } <span class="pl-k">yield</span> b
  

<span class="pl-c"><span class="pl-c">//</span> All the side effects take place here in the interpreter</span>
interpreter.run(prg) <span class="pl-k">match</span> {
  <span class="pl-k">case</span> <span class="pl-en">Right</span>(v) <span class="pl-k">=&gt;</span> println(s<span class="pl-s"><span class="pl-pds">"</span>This is a success: $v<span class="pl-pds">"</span></span>)
  <span class="pl-k">case</span> <span class="pl-en">Left</span>(e) <span class="pl-k">=&gt;</span> println(s<span class="pl-s"><span class="pl-pds">"</span>OhOh, error: $e<span class="pl-pds">"</span></span>)
}</pre>
  </div> 
  <h4><a id="user-content-merging-dsls" class="anchor" href="https://github.com/iscpif/freedsl#merging-dsls" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Merging DSLs</h4> 
  <p>Types can be merged independently from intepreters. For instance:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">merged</span> <span class="pl-k">=</span> merge(<span class="pl-en">Util</span>, <span class="pl-en">Random</span>, <span class="pl-en">Log</span>)
<span class="pl-k">import</span> <span class="pl-v">merged.implicits.</span><span class="pl-v">_</span>

<span class="pl-k">def</span> <span class="pl-en">prg</span> <span class="pl-k">=</span>
  <span class="pl-k">for</span> {
    b <span class="pl-k">←</span> randomData[merged.<span class="pl-en">M</span>]
    _ <span class="pl-k">←</span> randomSleep[merged.<span class="pl-en">M</span>]
  } <span class="pl-k">yield</span> b

  
<span class="pl-k">val</span> <span class="pl-en">interpreter</span> <span class="pl-k">=</span> merge(<span class="pl-en">Util</span>.interpreter, <span class="pl-en">Random</span>.interpreter(<span class="pl-c1">42</span>), <span class="pl-en">Log</span>.interpreter)

<span class="pl-c"><span class="pl-c">//</span> All the side effects take place here in the interpreter</span>
interpreter.run(prg) <span class="pl-k">match</span> {
  <span class="pl-k">case</span> <span class="pl-en">Right</span>(v) <span class="pl-k">=&gt;</span> println(s<span class="pl-s"><span class="pl-pds">"</span>This is a success: $v<span class="pl-pds">"</span></span>)
  <span class="pl-k">case</span> <span class="pl-en">Left</span>(e) <span class="pl-k">=&gt;</span> println(s<span class="pl-s"><span class="pl-pds">"</span>OhOh, error: $e<span class="pl-pds">"</span></span>)
}</pre>
  </div> 
  <h4><a id="user-content-mutli-level-merging" class="anchor" href="https://github.com/iscpif/freedsl#mutli-level-merging" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Mutli-level merging</h4> 
  <p>DSLs and interpreters can be merged at multiple scala. For instance:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">partialMerge</span> <span class="pl-k">=</span> merge(<span class="pl-en">Util</span>, <span class="pl-en">Random</span>)
<span class="pl-k">val</span> <span class="pl-en">merged</span> <span class="pl-k">=</span> merge(partialMerge, <span class="pl-en">Log</span>)
<span class="pl-k">import</span> <span class="pl-v">merged.implicits.</span><span class="pl-v">_</span>

<span class="pl-k">def</span> <span class="pl-en">prg</span> <span class="pl-k">=</span>
  <span class="pl-k">for</span> {
    b <span class="pl-k">←</span> randomData[merged.<span class="pl-en">M</span>]
    _ <span class="pl-k">←</span> randomSleep[merged.<span class="pl-en">M</span>]
  } <span class="pl-k">yield</span> b

  
<span class="pl-k">val</span> <span class="pl-en">interpreter</span> <span class="pl-k">=</span> merge(<span class="pl-en">Util</span>.interpreter, <span class="pl-en">Random</span>.interpreter(<span class="pl-c1">42</span>), <span class="pl-en">Log</span>.interpreter)

<span class="pl-c"><span class="pl-c">//</span> All the side effects take place here in the interpreter</span>
interpreter.run(prg) <span class="pl-k">match</span> {
  <span class="pl-k">case</span> <span class="pl-en">Right</span>(v) <span class="pl-k">=&gt;</span> println(s<span class="pl-s"><span class="pl-pds">"</span>This is a success: $v<span class="pl-pds">"</span></span>)
  <span class="pl-k">case</span> <span class="pl-en">Left</span>(e) <span class="pl-k">=&gt;</span> println(s<span class="pl-s"><span class="pl-pds">"</span>OhOh, error: $e<span class="pl-pds">"</span></span>)
}</pre>
  </div> 
  <p>And for interpreters:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">//</span> Construct the interpreter and a type M along with implicit instances of Random[M], Util[M] and Log[M]</span>
<span class="pl-c"><span class="pl-c">//</span> they are build using the free monad and the freek library</span>

<span class="pl-k">val</span> <span class="pl-en">partialMerge</span> <span class="pl-k">=</span> merge(<span class="pl-en">Util</span>.interpreter, <span class="pl-en">Random</span>.interpreter(<span class="pl-c1">42</span>))

<span class="pl-c"><span class="pl-c">//</span> In case several interpreters are provided for a given DSL, the first one in the list is retained</span>
<span class="pl-k">val</span> <span class="pl-en">interpreter</span> <span class="pl-k">=</span> merge(partialMerge, <span class="pl-en">Log</span>.interpreter)
<span class="pl-k">import</span> <span class="pl-v">interpreter.implicits.</span><span class="pl-v">_</span>

<span class="pl-k">def</span> <span class="pl-en">prg</span> <span class="pl-k">=</span>
  <span class="pl-k">for</span> {
    b <span class="pl-k">←</span> randomData[interpreter.<span class="pl-en">M</span>]
    _ <span class="pl-k">←</span> randomSleep[interpreter.<span class="pl-en">M</span>]
  } <span class="pl-k">yield</span> b
  

<span class="pl-c"><span class="pl-c">//</span> All the side effects take place here in the interpreter</span>
interpreter.run(prg) <span class="pl-k">match</span> {
  <span class="pl-k">case</span> <span class="pl-en">Right</span>(v) <span class="pl-k">=&gt;</span> println(s<span class="pl-s"><span class="pl-pds">"</span>This is a success: $v<span class="pl-pds">"</span></span>)
  <span class="pl-k">case</span> <span class="pl-en">Left</span>(e) <span class="pl-k">=&gt;</span> println(s<span class="pl-s"><span class="pl-pds">"</span>OhOh, error: $e<span class="pl-pds">"</span></span>)
}</pre>
  </div> 
  <h2><a id="user-content-wrapping-errors" class="anchor" href="https://github.com/iscpif/freedsl#wrapping-errors" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Wrapping errors</h2> 
  <p>To return meaningful errors, it is sometimes necessary to wrap errors produced by side effects:</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-k">object</span> <span class="pl-en">DSLTest1M</span> {
    <span class="pl-k">def</span> <span class="pl-en">interpreter</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Interpreter</span> {
      <span class="pl-k">def</span> <span class="pl-en">get</span>(<span class="pl-k">implicit</span> <span class="pl-v">context</span>: <span class="pl-en">Context</span>) <span class="pl-k">=</span> failure(<span class="pl-en">DSL1Error</span>(<span class="pl-s"><span class="pl-pds">"</span>Boooh<span class="pl-pds">"</span></span>))
    }

    <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">DSL1Error</span>(<span class="pl-v">s</span>: <span class="pl-k">String</span>) <span class="pl-k">extends</span> <span class="pl-e">Error</span>
  }

  <span class="pl-k">@</span>dsl <span class="pl-k">trait</span> <span class="pl-en">DSLTest1M</span>[<span class="pl-en">M</span>[_]] {
    <span class="pl-k">def</span> <span class="pl-en">get</span><span class="pl-k">:</span> <span class="pl-en">M</span>[<span class="pl-k">String</span>]
  }

  <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">WrapError</span>(<span class="pl-v">e</span>: <span class="pl-en">Error</span>) <span class="pl-k">extends</span> <span class="pl-e">Error</span>

  <span class="pl-k">def</span> <span class="pl-en">prg</span>[<span class="pl-en">M</span>[_]](<span class="pl-k">implicit</span> <span class="pl-v">dSLTest1M</span>: <span class="pl-en">DSLTest1M</span>[<span class="pl-en">M</span>], <span class="pl-v">errorWrapping</span>: <span class="pl-en">ErrorWrapping</span>[<span class="pl-en">M</span>]) <span class="pl-k">=</span> errorWrapping.wrap(e <span class="pl-k">=&gt;</span> <span class="pl-en">WrapError</span>(e)) {
    dSLTest1M.get
  }</pre>
  </div> 
  <h2><a id="user-content-getting-freedsl" class="anchor" href="https://github.com/iscpif/freedsl#getting-freedsl" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Getting FreeDSL</h2> 
  <p>FreeDSL is published to <a href="https://oss.sonatype.org/" target="_blank">sonatype</a>.</p> 
  <p>FreeDSL supports Scala 2.11 and 2.12. If you use SBT, you can include FreeDSL via the following <code>build.sbt</code> snippets:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">//</span> Repository for Freek</span>
resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-en">Resolver</span>.bintrayRepo(<span class="pl-s"><span class="pl-pds">"</span>projectseptemberinc<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>maven<span class="pl-pds">"</span></span>)

<span class="pl-c"><span class="pl-c">//</span> For scala 2.12, for 2.11 use Miles Sabin's plugin for type unification.</span>
scalacOptions <span class="pl-k">:</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(<span class="pl-s"><span class="pl-pds">"</span>-Ypartial-unification<span class="pl-pds">"</span></span>)

<span class="pl-k">def</span> <span class="pl-en">freedslVersion</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>0.9-SNAPSHOT<span class="pl-pds">"</span></span>

<span class="pl-c"><span class="pl-c">//</span> pick a particular subproject</span>
libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>fr.iscpif.freedsl<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>util<span class="pl-pds">"</span></span> <span class="pl-k">%</span> freedslVersion,
libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>fr.iscpif.freedsl<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>random<span class="pl-pds">"</span></span> <span class="pl-k">%</span> freedslVersion <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span></pre>
  </div> 
  <h3><a id="user-content-detailed-information" class="anchor" href="https://github.com/iscpif/freedsl#detailed-information" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Detailed Information</h3> 
  <p>TODO</p> 
  <h3><a id="user-content-known-issues" class="anchor" href="https://github.com/iscpif/freedsl#known-issues" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Known Issues</h3> 
  <p>DSLs don't suport default parameter value. It raises an error at runtime, such as:</p> 
  <pre><code>java.lang.AbstractMethodError: freedsl.dsl.DSLTest$InterpretationContext$1$MergedDSL$1$$anon$12$$anon$10.defaultValue$default$2()Ljava/lang/String;
</code></pre> 
  <h3><a id="user-content-future-work" class="anchor" href="https://github.com/iscpif/freedsl#future-work" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Future Work</h3> 
  <p>TODO</p> 
  <h3><a id="user-content-copyright-and-license" class="anchor" href="https://github.com/iscpif/freedsl#copyright-and-license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Copyright and License</h3> 
  <p>All code is available to you under the LGPL license, available at <a href="https://www.gnu.org/licenses/lgpl.html" target="_blank">https://www.gnu.org/licenses/lgpl.html</a> and also in the <a href="https://github.com/iscpif/freedsl/blob/master/ISCPIF/freedsl/blob/COPYING" target="_blank">COPYING</a> file.</p> 
  <p>Copyright Romain Reuillon, 2016</p> 
  <h3><a id="user-content-no-warranty" class="anchor" href="https://github.com/iscpif/freedsl#no-warranty" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>No Warranty</h3> 
  <blockquote> 
   <p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p> 
  </blockquote> 
 </article>
</div>