<div class="announce instapaper_body md" data-path="readme.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <p><a href="https://gitter.im/Jacoby6000/Scala-SQL-AST?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank"><img src="https://camo.githubusercontent.com/8f65daae76d804e714f0516f90666d5309698c7c/68747470733a2f2f6261646765732e6769747465722e696d2f4a61636f6279363030302f5363616c612d53514c2d4153542e737667" alt="Join the chat at https://gitter.im/Jacoby6000/Scala-SQL-AST" data-canonical-src="https://badges.gitter.im/Jacoby6000/Scala-SQL-AST.svg" style="max-width:100%;"></a> <a href="https://travis-ci.org/Jacoby6000/scoobie" target="_blank"><img src="https://camo.githubusercontent.com/17d9daacb25c40d4cb8465968d6ea51ae30afa15/68747470733a2f2f7472617669732d63692e6f72672f4a61636f6279363030302f73636f6f6269652e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/Jacoby6000/scoobie.svg?branch=master" style="max-width:100%;"></a> <a href="https://codecov.io/gh/Jacoby6000/scoobie" target="_blank"><img src="https://camo.githubusercontent.com/005c3e95db42c9057e3651b162580092abc76abd/68747470733a2f2f636f6465636f762e696f2f67682f4a61636f6279363030302f73636f6f6269652f6272616e63682f6d61737465722f67726170682f62616467652e737667" alt="codecov" data-canonical-src="https://codecov.io/gh/Jacoby6000/scoobie/branch/master/graph/badge.svg" style="max-width:100%;"></a></p> 
  <h3><a id="user-content-querying-with-doobie-without-raw-sql" class="anchor" href="https://github.com/jacoby6000/scoobie#querying-with-doobie-without-raw-sql" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Querying with <a href="https://github.com/tpolecat/doobie" target="_blank">Doobie</a>, without raw sql</h3> 
  <p>The goal of this project is to produce an alternative to writing SQL queries for use with Doobie.</p> 
  <p>As it stands now, there is a quick 'n dirty SQL DSL, implemented with a lightweight AST. Other DSLs may be created in the future.</p> 
  <h3><a id="user-content-getting-started" class="anchor" href="https://github.com/jacoby6000/scoobie#getting-started" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Getting Started</h3> 
  <p>Add the sonatype releases resolver</p> 
  <div class="highlight highlight-source-scala">
   <pre>  resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-en">Resolver</span>.sonatypeRepo(<span class="pl-s"><span class="pl-pds">"</span>releases<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>Add this project as a dependency.</p> 
  <div class="highlight highlight-source-scala">
   <pre>  libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> {
    <span class="pl-k">val</span> <span class="pl-en">scoobieVersion</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>0.2.1<span class="pl-pds">"</span></span>

    <span class="pl-en">Seq</span>(
      <span class="pl-s"><span class="pl-pds">"</span>com.github.jacoby6000<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>scoobie-contrib-doobie30-postgres<span class="pl-pds">"</span></span> <span class="pl-k">%</span> scoobieVersion, <span class="pl-c"><span class="pl-c">//</span> import doobie 3.0 postgres support</span>
      <span class="pl-s"><span class="pl-pds">"</span>com.github.jacoby6000<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>scoobie-contrib-mild-sql-dsl<span class="pl-pds">"</span></span> <span class="pl-k">%</span> scoobieVersion <span class="pl-c"><span class="pl-c">//</span> import the weak sql dsl</span>
    )
  }</pre>
  </div> 
  <p>Refer to the chart below to see what dependencies use what versions of things</p> 
  <table> 
   <thead> 
    <tr> 
     <th align="center">scoobie distribution</th> 
     <th align="center">scoobie version</th> 
     <th align="center">doobie</th> 
     <th align="center">status</th> 
     <th align="center">jdk</th> 
     <th align="center">scala</th> 
     <th align="center">scalaz</th> 
     <th align="center">scalaz-stream</th> 
     <th align="center">shapeless</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td align="center">scoobie-contrib-doobie30-postgres</td> 
     <td align="center">0.2.1</td> 
     <td align="center">0.3.0</td> 
     <td align="center">stable</td> 
     <td align="center">1.8+</td> 
     <td align="center">2.11</td> 
     <td align="center">7.2</td> 
     <td align="center">0.8a</td> 
     <td align="center">2.3</td> 
    </tr> 
    <tr> 
     <td align="center">scoobie-contrib-doobie23-postgres</td> 
     <td align="center">0.2.1</td> 
     <td align="center">0.2.3</td> 
     <td align="center">stable</td> 
     <td align="center">1.6+</td> 
     <td align="center">2.11</td> 
     <td align="center">7.1</td> 
     <td align="center">0.8</td> 
     <td align="center">2.2</td> 
    </tr> 
    <tr> 
     <td align="center">scoobie-contrib-mild-sql-dsl</td> 
     <td align="center">0.2.1</td> 
     <td align="center">N/A</td> 
     <td align="center">stable</td> 
     <td align="center">1.6+</td> 
     <td align="center">2.11</td> 
     <td align="center">N/A</td> 
     <td align="center">N/A</td> 
     <td align="center">2.3</td> 
    </tr>
   </tbody>
  </table> 
  <h3><a id="user-content-using-the-sql-dsl" class="anchor" href="https://github.com/jacoby6000/scoobie#using-the-sql-dsl" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Using the SQL DSL</h3> 
  <p>Below is a sample query that somebody may want to write. The query below is perfectly valid; try it out!</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">scoobie.doobie.doo.postgres.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">scoobie.doobie.doo.postgres.</span><span class="pl-v">_</span>

scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">scoobie.snacks.mild.sql.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">scoobie.snacks.mild.sql.</span><span class="pl-v">_</span>

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">q</span> <span class="pl-k">=</span>
     <span class="pl-k">|</span>   select (
     <span class="pl-k">|</span>     p<span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-c1">10</span> as <span class="pl-s"><span class="pl-pds">"</span>woozle<span class="pl-pds">"</span></span>,
     <span class="pl-k">|</span>     `<span class="pl-k">*</span>`
     <span class="pl-k">|</span>   ) from ( 
     <span class="pl-k">|</span>     p<span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span> 
     <span class="pl-k">|</span>   ) leftOuterJoin (
     <span class="pl-k">|</span>     p<span class="pl-s"><span class="pl-pds">"</span>baz<span class="pl-pds">"</span></span> as <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span> on (
     <span class="pl-k">|</span>       p<span class="pl-s"><span class="pl-pds">"</span>bar.id<span class="pl-pds">"</span></span> <span class="pl-k">===</span> p<span class="pl-s"><span class="pl-pds">"</span>b.barId<span class="pl-pds">"</span></span>
     <span class="pl-k">|</span>     )
     <span class="pl-k">|</span>   ) innerJoin (
     <span class="pl-k">|</span>     p<span class="pl-s"><span class="pl-pds">"</span>biz<span class="pl-pds">"</span></span> as <span class="pl-s"><span class="pl-pds">"</span>c<span class="pl-pds">"</span></span> on (
     <span class="pl-k">|</span>       p<span class="pl-s"><span class="pl-pds">"</span>c.id<span class="pl-pds">"</span></span> <span class="pl-k">===</span> p<span class="pl-s"><span class="pl-pds">"</span>bar.bizId<span class="pl-pds">"</span></span>
     <span class="pl-k">|</span>     ) 
     <span class="pl-k">|</span>   ) where (
     <span class="pl-k">|</span>     p<span class="pl-s"><span class="pl-pds">"</span>c.name<span class="pl-pds">"</span></span> <span class="pl-k">===</span> <span class="pl-s"><span class="pl-pds">"</span>LightSaber<span class="pl-pds">"</span></span> and
     <span class="pl-k">|</span>     p<span class="pl-s"><span class="pl-pds">"</span>c.age<span class="pl-pds">"</span></span> <span class="pl-k">&gt;</span> <span class="pl-c1">27</span>
     <span class="pl-k">|</span>   ) orderBy p<span class="pl-s"><span class="pl-pds">"</span>c.age<span class="pl-pds">"</span></span>.desc groupBy p<span class="pl-s"><span class="pl-pds">"</span>b.worth<span class="pl-pds">"</span></span>.asc
q<span class="pl-k">:</span> scoobie.snacks.mild.sql.<span class="pl-en">QueryBuilder</span>[shapeless.<span class="pl-en">HNil</span>,shapeless.<span class="pl-k">::</span>[scoobie.ast.<span class="pl-en">QueryProjection</span>[shapeless.<span class="pl-k">::</span>[<span class="pl-k">Int</span>,shapeless.<span class="pl-en">HNil</span>]],shapeless.<span class="pl-k">::</span>[scoobie.ast.<span class="pl-en">QueryProjection</span>[shapeless.<span class="pl-en">HNil</span>],shapeless.<span class="pl-en">HNil</span>]],shapeless.<span class="pl-k">::</span>[scoobie.ast.<span class="pl-en">QueryUnion</span>[shapeless.<span class="pl-en">HNil</span>],shapeless.<span class="pl-k">::</span>[scoobie.ast.<span class="pl-en">QueryUnion</span>[shapeless.<span class="pl-en">HNil</span>],shapeless.<span class="pl-en">HNil</span>]],shapeless.<span class="pl-k">::</span>[<span class="pl-k">Int</span>,shapeless.<span class="pl-en">HNil</span>],shapeless.<span class="pl-en">HNil</span>,<span class="pl-c1">this</span>.<span class="pl-en">Out</span>,shapeless.<span class="pl-k">::</span>[<span class="pl-k">Int</span>,shapeless.<span class="pl-en">HNil</span>],shapeless.<span class="pl-k">::</span>[<span class="pl-k">Int</span>,shapeless.<span class="pl-en">HNil</span>],<span class="pl-c1">this</span>.<span class="pl-en">Out</span>] <span class="pl-k">=</span> <span class="pl-en">QueryBuilder</span>(<span class="pl-en">QueryProjectOne</span>(<span class="pl-en">QueryPathEnd</span>(bar),<span class="pl-c1">None</span>),<span class="pl-en">QueryProjectOne</span>(<span class="pl-en">QueryAdd</span>(<span class="pl-en">QueryPathEnd</span>(foo),<span class="pl-en">QueryParameter</span>(<span class="pl-c1">10</span> <span class="pl-k">::</span> <span class="pl-en">HNil</span>),<span class="pl-c1">10</span> <span class="pl-k">::</span> <span class="pl-en">HNil</span>),<span class="pl-en">Some</span>(woozle)) <span class="pl-k">::</span> <span class="pl-en">QueryProjectAll</span> <span class="pl-k">::</span> <span class="pl-en">HNil</span>,<span class="pl-en">QueryLeftOuterJoin</span>(<span class="pl-en">QueryProjectOne</span>(<span class="pl-en">QueryPathEnd</span>(baz),<span class="pl-en">Some</span>(b)),<span class="pl-en">QueryEqual</span>(<span class="pl-en">QueryPathCons</span>(bar,<span class="pl-en">QueryPathEnd</span>(id)),<span class="pl-en">QueryPathCons</span>(b,<span class="pl-en">QueryPathEnd</span>(barId)),<span class="pl-en">HNil</span>),<span class="pl-en">HNil</span>) <span class="pl-k">::</span> ...

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">sql</span> <span class="pl-k">=</span> q.build.genSql <span class="pl-c"><span class="pl-c">//</span> Generate the sql associated with this query</span>
sql<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> <span class="pl-en">SELECT</span> <span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-k">?</span> <span class="pl-en">AS</span> woozle, <span class="pl-k">*</span> <span class="pl-en">FROM</span> <span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span> <span class="pl-en">LEFT</span> <span class="pl-en">OUTER</span> <span class="pl-en">JOIN</span> <span class="pl-s"><span class="pl-pds">"</span>baz<span class="pl-pds">"</span></span> <span class="pl-en">AS</span> b <span class="pl-en">ON</span> <span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>barId<span class="pl-pds">"</span></span> <span class="pl-en">INNER</span> <span class="pl-en">JOIN</span> <span class="pl-s"><span class="pl-pds">"</span>biz<span class="pl-pds">"</span></span> <span class="pl-en">AS</span> c <span class="pl-en">ON</span> <span class="pl-s"><span class="pl-pds">"</span>c<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>bizId<span class="pl-pds">"</span></span> <span class="pl-en">WHERE</span> <span class="pl-s"><span class="pl-pds">"</span>c<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-k">=</span> <span class="pl-k">?</span>  <span class="pl-en">AND</span>  <span class="pl-s"><span class="pl-pds">"</span>c<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span> <span class="pl-k">&gt;</span> <span class="pl-k">?</span> <span class="pl-en">ORDER</span> <span class="pl-en">BY</span> <span class="pl-s"><span class="pl-pds">"</span>c<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span> <span class="pl-en">DESC</span> <span class="pl-en">GROUP</span> <span class="pl-en">BY</span> <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>worth<span class="pl-pds">"</span></span> <span class="pl-en">ASC</span></pre>
  </div> 
  <p>The formatted output of this is</p> 
  <div class="highlight highlight-source-sql">
   <pre><span class="pl-k">SELECT</span>
    <span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span> <span class="pl-k">+</span> ? <span class="pl-k">AS</span> woozle,
    <span class="pl-k">*</span> 
<span class="pl-k">FROM</span>
    <span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span> 
<span class="pl-k">LEFT OUTER JOIN</span>
    <span class="pl-s"><span class="pl-pds">"</span>baz<span class="pl-pds">"</span></span> <span class="pl-k">AS</span> b 
        <span class="pl-k">ON</span> <span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>barId<span class="pl-pds">"</span></span> 
<span class="pl-k">INNER JOIN</span>
    <span class="pl-s"><span class="pl-pds">"</span>biz<span class="pl-pds">"</span></span> <span class="pl-k">AS</span> c 
        <span class="pl-k">ON</span> <span class="pl-s"><span class="pl-pds">"</span>c<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>bizId<span class="pl-pds">"</span></span> 
<span class="pl-k">WHERE</span>
    <span class="pl-s"><span class="pl-pds">"</span>c<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-k">=</span> ?
    <span class="pl-k">AND</span>  <span class="pl-s"><span class="pl-pds">"</span>c<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span> <span class="pl-k">&gt;</span> ? 
<span class="pl-k">ORDER BY</span>
    <span class="pl-s"><span class="pl-pds">"</span>c<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span> <span class="pl-k">DESC</span> 
<span class="pl-k">GROUP BY</span>
    <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>worth<span class="pl-pds">"</span></span> <span class="pl-k">ASC</span></pre>
  </div> 
  <p>As a proof of concept, here are some examples translated over from the book of doobie</p> 
  <p>First, lets set up a repl session with our imports, plus what we need to run doobie.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">scoobie.doobie.doo.postgres.</span><span class="pl-v">_ </span><span class="pl-c"><span class="pl-c">//</span> Use postgres with doobie support</span>
<span class="pl-k">import</span> <span class="pl-v">scoobie.snacks.mild.sql.</span><span class="pl-v">_ </span><span class="pl-c"><span class="pl-c">//</span> Import the Sql-like weakly (mildly) typed DSL.</span>
<span class="pl-k">import</span> <span class="pl-v">doobie.imports.</span><span class="pl-v">DriverManagerTransactor </span><span class="pl-c"><span class="pl-c">//</span> Import doobie transactor</span>
<span class="pl-k">import</span> <span class="pl-v">scalaz.concurrent.</span><span class="pl-v">Task </span>

<span class="pl-k">val</span> <span class="pl-en">xa</span> <span class="pl-k">=</span> <span class="pl-en">DriverManagerTransactor</span>[<span class="pl-en">Task</span>](
  <span class="pl-s"><span class="pl-pds">"</span>org.postgresql.Driver<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>jdbc:postgresql:world<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>postgres<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>postgres<span class="pl-pds">"</span></span>
)

<span class="pl-k">import</span> <span class="pl-v">xa.yolo.</span><span class="pl-v">_</span>

<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Country</span>(<span class="pl-v">code</span>: <span class="pl-k">String</span>, <span class="pl-v">name</span>: <span class="pl-k">String</span>, <span class="pl-v">pop</span>: <span class="pl-k">Int</span>, <span class="pl-v">gnp</span>: <span class="pl-en">Option</span>[<span class="pl-k">Double</span>])

<span class="pl-k">val</span> <span class="pl-en">baseQuery</span> <span class="pl-k">=</span>
  select(
    p<span class="pl-s"><span class="pl-pds">"</span>code<span class="pl-pds">"</span></span>,
    p<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>,
    p<span class="pl-s"><span class="pl-pds">"</span>population<span class="pl-pds">"</span></span>,
    p<span class="pl-s"><span class="pl-pds">"</span>gnp<span class="pl-pds">"</span></span>
  ) from p<span class="pl-s"><span class="pl-pds">"</span>country<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>And now lets run some basic queries (Note, instead of <code>.queryAndPrint[T](printer)</code> you can use <code>.query[T]</code> if you do not care to see that sql being generated.)</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">def</span> <span class="pl-en">biggerThan</span>(<span class="pl-v">n</span>: <span class="pl-k">Int</span>) <span class="pl-k">=</span> {
     <span class="pl-k">|</span>   (baseQuery where p<span class="pl-s"><span class="pl-pds">"</span>population<span class="pl-pds">"</span></span> <span class="pl-k">&gt;</span> n)
     <span class="pl-k">|</span>     .build
     <span class="pl-k">|</span>     .queryAndPrint[<span class="pl-en">Country</span>](sql <span class="pl-k">=&gt;</span> println(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span><span class="pl-pds">"</span></span> <span class="pl-k">+</span> sql))
     <span class="pl-k">|</span> }
biggerThan<span class="pl-k">:</span> (<span class="pl-v">n</span>: <span class="pl-k">Int</span>)doobie.imports.<span class="pl-en">Query0</span>[<span class="pl-en">Country</span>]

scala<span class="pl-k">&gt;</span> biggerThan(<span class="pl-c1">150000000</span>).quick.unsafePerformSync

<span class="pl-en">SELECT</span> <span class="pl-s"><span class="pl-pds">"</span>code<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>population<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>gnp<span class="pl-pds">"</span></span> <span class="pl-en">FROM</span> <span class="pl-s"><span class="pl-pds">"</span>country<span class="pl-pds">"</span></span>  <span class="pl-en">WHERE</span> <span class="pl-s"><span class="pl-pds">"</span>population<span class="pl-pds">"</span></span> <span class="pl-k">&gt;</span> <span class="pl-k">?</span>
  <span class="pl-en">Country</span>(<span class="pl-en">BRA</span>,<span class="pl-en">Brazil</span>,<span class="pl-c1">170115000</span>,<span class="pl-en">Some</span>(<span class="pl-c1">776739.0</span>))
  <span class="pl-en">Country</span>(<span class="pl-en">IDN</span>,<span class="pl-en">Indonesia</span>,<span class="pl-c1">212107000</span>,<span class="pl-en">Some</span>(<span class="pl-c1">84982.0</span>))
  <span class="pl-en">Country</span>(<span class="pl-en">IND</span>,<span class="pl-en">India</span>,<span class="pl-c1">1013662000</span>,<span class="pl-en">Some</span>(<span class="pl-c1">447114.0</span>))
  <span class="pl-en">Country</span>(<span class="pl-en">CHN</span>,<span class="pl-en">China</span>,<span class="pl-c1">1277558000</span>,<span class="pl-en">Some</span>(<span class="pl-c1">982268.0</span>))
  <span class="pl-en">Country</span>(<span class="pl-en">PAK</span>,<span class="pl-en">Pakistan</span>,<span class="pl-c1">156483000</span>,<span class="pl-en">Some</span>(<span class="pl-c1">61289.0</span>))
  <span class="pl-en">Country</span>(<span class="pl-en">USA</span>,<span class="pl-en">United</span> <span class="pl-en">States</span>,<span class="pl-c1">278357000</span>,<span class="pl-en">Some</span>(<span class="pl-c1">8510700.0</span>))

scala<span class="pl-k">&gt;</span> <span class="pl-k">def</span> <span class="pl-en">populationIn</span>(<span class="pl-v">r</span>: <span class="pl-en">Range</span>) <span class="pl-k">=</span> {
     <span class="pl-k">|</span>   (baseQuery where (
     <span class="pl-k">|</span>     p<span class="pl-s"><span class="pl-pds">"</span>population<span class="pl-pds">"</span></span> <span class="pl-k">&gt;=</span> r.min and
     <span class="pl-k">|</span>     p<span class="pl-s"><span class="pl-pds">"</span>population<span class="pl-pds">"</span></span> <span class="pl-k">&lt;=</span> r.max
     <span class="pl-k">|</span>   )).build
     <span class="pl-k">|</span>     .queryAndPrint[<span class="pl-en">Country</span>](sql <span class="pl-k">=&gt;</span> println(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span><span class="pl-pds">"</span></span> <span class="pl-k">+</span> sql))
     <span class="pl-k">|</span> } 
populationIn<span class="pl-k">:</span> (<span class="pl-v">r</span>: <span class="pl-en">Range</span>)doobie.imports.<span class="pl-en">Query0</span>[<span class="pl-en">Country</span>]

scala<span class="pl-k">&gt;</span> populationIn(<span class="pl-c1">150000000</span> to <span class="pl-c1">200000000</span>).quick.unsafePerformSync

<span class="pl-en">SELECT</span> <span class="pl-s"><span class="pl-pds">"</span>code<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>population<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>gnp<span class="pl-pds">"</span></span> <span class="pl-en">FROM</span> <span class="pl-s"><span class="pl-pds">"</span>country<span class="pl-pds">"</span></span>  <span class="pl-en">WHERE</span> <span class="pl-s"><span class="pl-pds">"</span>population<span class="pl-pds">"</span></span> <span class="pl-k">&gt;=</span> <span class="pl-k">?</span>  <span class="pl-en">AND</span>  <span class="pl-s"><span class="pl-pds">"</span>population<span class="pl-pds">"</span></span> <span class="pl-k">&lt;=</span> <span class="pl-k">?</span>
  <span class="pl-en">Country</span>(<span class="pl-en">BRA</span>,<span class="pl-en">Brazil</span>,<span class="pl-c1">170115000</span>,<span class="pl-en">Some</span>(<span class="pl-c1">776739.0</span>))
  <span class="pl-en">Country</span>(<span class="pl-en">PAK</span>,<span class="pl-en">Pakistan</span>,<span class="pl-c1">156483000</span>,<span class="pl-en">Some</span>(<span class="pl-c1">61289.0</span>))</pre>
  </div> 
  <p>And a more complicated example</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">ComplimentaryCountries</span>(<span class="pl-v">code1</span>: <span class="pl-k">String</span>, <span class="pl-v">name1</span>: <span class="pl-k">String</span>, <span class="pl-v">code2</span>: <span class="pl-k">String</span>, <span class="pl-v">name2</span>: <span class="pl-k">String</span>)
defined <span class="pl-k">class</span> <span class="pl-en">ComplimentaryCountries</span>

scala<span class="pl-k">&gt;</span> <span class="pl-k">def</span> <span class="pl-en">joined</span> <span class="pl-k">=</span> {
     <span class="pl-k">|</span>   (select(
     <span class="pl-k">|</span>     p<span class="pl-s"><span class="pl-pds">"</span>c1.code<span class="pl-pds">"</span></span>,
     <span class="pl-k">|</span>     p<span class="pl-s"><span class="pl-pds">"</span>c1.name<span class="pl-pds">"</span></span>,
     <span class="pl-k">|</span>     p<span class="pl-s"><span class="pl-pds">"</span>c2.code<span class="pl-pds">"</span></span>,
     <span class="pl-k">|</span>     p<span class="pl-s"><span class="pl-pds">"</span>c2.name<span class="pl-pds">"</span></span>
     <span class="pl-k">|</span>   ) from (
     <span class="pl-k">|</span>     p<span class="pl-s"><span class="pl-pds">"</span>country<span class="pl-pds">"</span></span> as <span class="pl-s"><span class="pl-pds">"</span>c1<span class="pl-pds">"</span></span>
     <span class="pl-k">|</span>   ) innerJoin (
     <span class="pl-k">|</span>     p<span class="pl-s"><span class="pl-pds">"</span>country<span class="pl-pds">"</span></span> as <span class="pl-s"><span class="pl-pds">"</span>c2<span class="pl-pds">"</span></span> on (
     <span class="pl-k">|</span>       func<span class="pl-s"><span class="pl-pds">"</span>reverse<span class="pl-pds">"</span></span>(p<span class="pl-s"><span class="pl-pds">"</span>c1.code<span class="pl-pds">"</span></span>) <span class="pl-k">===</span> p<span class="pl-s"><span class="pl-pds">"</span>c2.code<span class="pl-pds">"</span></span>
     <span class="pl-k">|</span>     )
     <span class="pl-k">|</span>   ) where (
     <span class="pl-k">|</span>     p<span class="pl-s"><span class="pl-pds">"</span>c2.name<span class="pl-pds">"</span></span> <span class="pl-k">!==</span> p<span class="pl-s"><span class="pl-pds">"</span>c1.name<span class="pl-pds">"</span></span>
     <span class="pl-k">|</span>   )).build
     <span class="pl-k">|</span>     .queryAndPrint[<span class="pl-en">ComplimentaryCountries</span>](sql <span class="pl-k">=&gt;</span> println(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span><span class="pl-pds">"</span></span> <span class="pl-k">+</span> sql))
     <span class="pl-k">|</span> }
joined<span class="pl-k">:</span> doobie.imports.<span class="pl-en">Query0</span>[<span class="pl-en">ComplimentaryCountries</span>]

scala<span class="pl-k">&gt;</span> joined.quick.unsafePerformSync

<span class="pl-en">SELECT</span> <span class="pl-s"><span class="pl-pds">"</span>c1<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>code<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>c1<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>c2<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>code<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>c2<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-en">FROM</span> <span class="pl-s"><span class="pl-pds">"</span>country<span class="pl-pds">"</span></span> <span class="pl-en">AS</span> c1 <span class="pl-en">INNER</span> <span class="pl-en">JOIN</span> <span class="pl-s"><span class="pl-pds">"</span>country<span class="pl-pds">"</span></span> <span class="pl-en">AS</span> c2 <span class="pl-en">ON</span> <span class="pl-s"><span class="pl-pds">"</span>reverse<span class="pl-pds">"</span></span>(<span class="pl-s"><span class="pl-pds">"</span>c1<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>code<span class="pl-pds">"</span></span>) <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>c2<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>code<span class="pl-pds">"</span></span> <span class="pl-en">WHERE</span> <span class="pl-s"><span class="pl-pds">"</span>c2<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-k">&lt;&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>c1<span class="pl-pds">"</span></span>.<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>
  <span class="pl-en">ComplimentaryCountries</span>(<span class="pl-en">PSE</span>,<span class="pl-en">Palestine</span>,<span class="pl-en">ESP</span>,<span class="pl-en">Spain</span>)
  <span class="pl-en">ComplimentaryCountries</span>(<span class="pl-en">YUG</span>,<span class="pl-en">Yugoslavia</span>,<span class="pl-en">GUY</span>,<span class="pl-en">Guyana</span>)
  <span class="pl-en">ComplimentaryCountries</span>(<span class="pl-en">ESP</span>,<span class="pl-en">Spain</span>,<span class="pl-en">PSE</span>,<span class="pl-en">Palestine</span>)
  <span class="pl-en">ComplimentaryCountries</span>(<span class="pl-en">SUR</span>,<span class="pl-en">Suriname</span>,<span class="pl-en">RUS</span>,<span class="pl-en">Russian</span> <span class="pl-en">Federation</span>)
  <span class="pl-en">ComplimentaryCountries</span>(<span class="pl-en">RUS</span>,<span class="pl-en">Russian</span> <span class="pl-en">Federation</span>,<span class="pl-en">SUR</span>,<span class="pl-en">Suriname</span>)
  <span class="pl-en">ComplimentaryCountries</span>(<span class="pl-en">VUT</span>,<span class="pl-en">Vanuatu</span>,<span class="pl-en">TUV</span>,<span class="pl-en">Tuvalu</span>)
  <span class="pl-en">ComplimentaryCountries</span>(<span class="pl-en">TUV</span>,<span class="pl-en">Tuvalu</span>,<span class="pl-en">VUT</span>,<span class="pl-en">Vanuatu</span>)
  <span class="pl-en">ComplimentaryCountries</span>(<span class="pl-en">GUY</span>,<span class="pl-en">Guyana</span>,<span class="pl-en">YUG</span>,<span class="pl-en">Yugoslavia</span>)</pre>
  </div> 
  <p>Check out <a href="https://github.com/Jacoby6000/scoobie/blob/master/postgres/src/test/scala/scoobie/doobie/PostgresTest.scala#L71" target="_blank">this end to end example</a> for an idea of how to utilize insert/update/delete as well.</p> 
 </article>
</div>