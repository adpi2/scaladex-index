<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a href="https://github.com/valenterry/bamboomigrate#bamboomigrate" aria-hidden="true" class="anchor" id="user-content-bamboomigrate" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Bamboomigrate</h1> 
  <p><a href="https://travis-ci.org/valenterry/bamboomigrate" target="_blank"><img src="https://camo.githubusercontent.com/6184c4a35c409990b163a92557929a710cd648fd/68747470733a2f2f6170692e7472617669732d63692e6f72672f76616c656e74657272792f62616d626f6f6d6967726174652e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://api.travis-ci.org/valenterry/bamboomigrate.png?branch=master" style="max-width:100%;"></a> <a href="https://maven-badges.herokuapp.com/maven-central/de.willscher/bamboomigrate_2.11" target="_blank"><img src="https://camo.githubusercontent.com/b86b298c43282b2262480f4cc3483058bba3fb09/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f64652e77696c6c73636865722f62616d626f6f6d6967726174655f322e31312e737667" alt="Maven Central" data-canonical-src="https://img.shields.io/maven-central/v/de.willscher/bamboomigrate_2.11.svg" style="max-width:100%;"></a><sup>(Scala 2.11)</sup> <a href="https://maven-badges.herokuapp.com/maven-central/de.willscher/bamboomigrate_2.12" target="_blank"><img src="https://camo.githubusercontent.com/a06df0b0a88b0d4541c647f715045e5fd5720885/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f64652e77696c6c73636865722f62616d626f6f6d6967726174655f322e31322e737667" alt="Maven Central" data-canonical-src="https://img.shields.io/maven-central/v/de.willscher/bamboomigrate_2.12.svg" style="max-width:100%;"></a><sup>(Scala 2.12)</sup></p> 
  <h2><a href="https://github.com/valenterry/bamboomigrate#table-of-contents" aria-hidden="true" class="anchor" id="user-content-table-of-contents" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Table of Contents</h2> 
  <ol> 
   <li><a href="https://github.com/valenterry/bamboomigrate#about" target="_blank">About</a></li> 
   <li><a href="https://github.com/valenterry/bamboomigrate#how-to-use" target="_blank">How to use</a> 
    <ol> 
     <li><a href="https://github.com/valenterry/bamboomigrate#sbt" target="_blank">SBT</a></li> 
     <li><a href="https://github.com/valenterry/bamboomigrate#maven" target="_blank">Maven</a></li> 
     <li><a href="https://github.com/valenterry/bamboomigrate#why-bamboomigrate" target="_blank">Why Bamboomigrate</a></li> 
     <li><a href="https://github.com/valenterry/bamboomigrate#basic-example" target="_blank">Basic example</a></li> 
     <li><a href="https://github.com/valenterry/bamboomigrate#documentation" target="_blank">Documentation</a></li> 
    </ol> </li> 
   <li><a href="https://github.com/valenterry/bamboomigrate#summary" target="_blank">Summary</a></li> 
   <li><a href="https://github.com/valenterry/bamboomigrate#known-issues" target="_blank">Known issues</a></li> 
  </ol> 
  <h2><a href="https://github.com/valenterry/bamboomigrate#about" aria-hidden="true" class="anchor" id="user-content-about" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>About</h2> 
  <p>Bamboomigrate is a Scala library that allows to transforms types into other types (for instance case classes), purely at compile time.</p> 
  <p>It makes heavy use of <a href="https://github.com/milessabin/shapeless" target="_blank">shapeless</a> and its typelevel programming features. Apart from that, Bamboomigrate is written in plain Scala and does not use any kind of macro magic or runtime reflection, trying to explore what is possible with the Scala typesystem alone.</p> 
  <p>While the intended main usage is to provide a convenient way to deserialize multiple historical versions of json into the same case class, it is designed to be extended for different purposes.</p> 
  <h2><a href="https://github.com/valenterry/bamboomigrate#how-to-use" aria-hidden="true" class="anchor" id="user-content-how-to-use" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>How to use</h2> 
  <p>Bamboomigrate is built for Scala 2.11 and 2.12, with dependencies of shapeless and also <a href="https://github.com/playframework/play-json" target="_blank">play-json</a> (together with <a href="https://github.com/julienrf/play-json-derived-codecs" target="_blank">play-json-derived-codecs</a>) and <a href="https://circe.github.io/circe/" target="_blank">circe</a> for third party json (de)serialization support. The latest stable version is 0.2. You can easily include it via SBT or Maven.</p> 
  <h3><a href="https://github.com/valenterry/bamboomigrate#sbt" aria-hidden="true" class="anchor" id="user-content-sbt" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>SBT</h3> 
  <p>Add the following to your built.sbt:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>de.willscher<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>bamboomigrate<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.2<span class="pl-pds">"</span></span></pre>
  </div> 
  <h3><a href="https://github.com/valenterry/bamboomigrate#maven" aria-hidden="true" class="anchor" id="user-content-maven" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Maven</h3> 
  <p>For 2.11 add to your pom.xml:</p> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">dependency</span>&gt;
  &lt;<span class="pl-ent">groupId</span>&gt;de.willscher&lt;/<span class="pl-ent">groupId</span>&gt;
  &lt;<span class="pl-ent">artifactId</span>&gt;bamboomigrate_2.11&lt;/<span class="pl-ent">artifactId</span>&gt;
  &lt;<span class="pl-ent">version</span>&gt;0.2&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre>
  </div> 
  <p>For 2.12 add to your pom.xml:</p> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">dependency</span>&gt;
  &lt;<span class="pl-ent">groupId</span>&gt;de.willscher&lt;/<span class="pl-ent">groupId</span>&gt;
  &lt;<span class="pl-ent">artifactId</span>&gt;bamboomigrate_2.12&lt;/<span class="pl-ent">artifactId</span>&gt;
  &lt;<span class="pl-ent">version</span>&gt;0.2&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre>
  </div> 
  <h3><a href="https://github.com/valenterry/bamboomigrate#why-bamboomigrate" aria-hidden="true" class="anchor" id="user-content-why-bamboomigrate" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Why Bamboomigrate</h3> 
  <p>The idea for Bamboomigrate stems from the various issues that arise when a code base is changed over time. An application (built from some sources of some specific point in time) often needs to handle data in a specified format, for instance json or xml. In practice it will need to query a NoSQL database or receive a web request, both of it resulting in some json which needs to be parsed. In the most simple case there is only one kind of json-format to handle. However, in most real world applications, the format of json will change over time. In the internal model - usually implemented with case classes) - fields are getting added, removed or changed, but older json versions of that model might still exist in the database or older clients. This makes handling this json more complex over time because multiple versions need to be considered and parsed.</p> 
  <p>It is hard enough to make a big application work in the simple case with just one kind of json for each internal model even though Scalas powerful typesystem makes this burden much lighter and aids in typesafe (de)serialization json into case classes.</p> 
  <p>However, as soon as compatibility with old json must be taken into account, most applications lose typesafety. It is now up to the developer to make sure that changes to important case classes don't break compatibility with old json versions. The developer must either implement fallback mechanisms or he needs to get rid of the old json versions e.g. by converting them to newer versions. The latter is often hard, error-prone or even impossible for external clients or big databases. Even worse, if a developer who is not familiar with the codebase changes a case class and forgets to add the correct fallback mechanisms, then runtime errors can occur and break the application.<br> Tests can help but it is easy to forget to write them, keep them up to date and work them out in a way that no errors can slip through.</p> 
  <p>Bamboomigrate solves both the tedious manual implementation of implementing fallbacks and the danger of forgetting to add fallbacks.</p> 
  <h3><a href="https://github.com/valenterry/bamboomigrate#basic-example" aria-hidden="true" class="anchor" id="user-content-basic-example" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Basic example</h3> 
  <p>Consider an application for user administration. In the beginning there was a case class to describe the users:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">User</span>(<span class="pl-v">firstname</span>: <span class="pl-k">String</span>, <span class="pl-v">familyname</span>: <span class="pl-k">String</span>, <span class="pl-v">birthdate</span>: <span class="pl-k">Long</span>)`</pre>
  </div> 
  <p>Over time, we needed to change the model of our user step by step. We renamed <code>firstname</code> to <code>givenname</code>, added the number of <code>logins</code>, removed the birthdate due to compliance rules and added a <code>nickname</code>. These changes made it so that in our application a user now looks like that:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">User</span>(<span class="pl-v">givenname</span>: <span class="pl-k">String</span>, <span class="pl-v">familyname</span>: <span class="pl-k">String</span>, <span class="pl-v">nickname</span>: <span class="pl-en">Option</span>[<span class="pl-k">String</span>], <span class="pl-v">logins</span>: <span class="pl-k">Int</span>)</pre>
  </div> 
  <p>With Bamboomigrate we model these changes over time in the following way (in this example we decide to use play-json):</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">play.api.libs.json.</span><span class="pl-v">_</span>

<span class="pl-c"><span class="pl-c">//</span>How the user looked when he was first created</span>
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">InitialUser</span>(<span class="pl-v">firstname</span>: <span class="pl-k">String</span>, <span class="pl-v">familyname</span>: <span class="pl-k">String</span>, <span class="pl-v">birthdate</span>: <span class="pl-k">Long</span>)

<span class="pl-c"><span class="pl-c">//</span>How the user is currently used everywhere in our application</span>
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">User</span>(<span class="pl-v">givenname</span>: <span class="pl-k">String</span>, <span class="pl-v">familyname</span>: <span class="pl-k">String</span>, <span class="pl-v">nickname</span>: <span class="pl-en">Option</span>[<span class="pl-k">String</span>], <span class="pl-v">logins</span>: <span class="pl-k">Int</span>)

<span class="pl-k">object</span> <span class="pl-en">User</span> {
   <span class="pl-k">import</span> <span class="pl-v">bamboomigrate.</span><span class="pl-v">_, </span><span class="pl-v">playjson.</span><span class="pl-v">_</span>
   <span class="pl-k">import</span> <span class="pl-v">shapeless.syntax.singleton.</span><span class="pl-v">mkSingletonOps</span>

   <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">userReads</span> <span class="pl-k">=</span> <span class="pl-en">PlayJson</span>.createFallbackReads(                <span class="pl-c"><span class="pl-c">//</span>Create a fallback-reads for the following migrations</span>
      <span class="pl-en">Migration</span>.between[<span class="pl-en">InitialUser</span>, <span class="pl-en">User</span>](                              <span class="pl-c"><span class="pl-c">//</span>from the class InitialUser to the target class User</span>
         <span class="pl-en">RenameStep</span>(<span class="pl-en">'firstname</span> <span class="pl-k">-</span><span class="pl-k">&gt;&gt;</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, <span class="pl-en">'givenname</span> <span class="pl-k">-</span><span class="pl-k">&gt;&gt;</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>) <span class="pl-k">::</span>             <span class="pl-c"><span class="pl-c">//</span>We first change the name of the firstname-field</span>
         <span class="pl-en">AppendStep</span>(<span class="pl-en">'logins</span> <span class="pl-k">-</span><span class="pl-k">&gt;&gt;</span> <span class="pl-c1">0</span>) <span class="pl-k">::</span>                                    <span class="pl-c"><span class="pl-c">//</span>Then we add a logins-field at the end of the class, giving 0 as default value</span>
         <span class="pl-en">RemoveStep</span>(<span class="pl-en">'birthdate</span>.narrow) <span class="pl-k">::</span>                                <span class="pl-c"><span class="pl-c">//</span>Remove the birthday field, we are not allowed to use this anymore</span>
         <span class="pl-en">InsertAtStep</span>(<span class="pl-en">Nat</span>(<span class="pl-c1">2</span>), <span class="pl-en">'nickname</span> <span class="pl-k">-</span><span class="pl-k">&gt;&gt;</span> (<span class="pl-c1">None</span><span class="pl-k">:</span> <span class="pl-en">Option</span>[<span class="pl-k">String</span>]) ) <span class="pl-k">::</span>  <span class="pl-c"><span class="pl-c">//</span>Add a nickname-field behind familyname, with None as default value</span>
         <span class="pl-en">HNil</span>
      )
   )
}</pre>
  </div> 
  <p>We can now safely parse <em>all</em> versions of user-json that ever existed at some point in time in our business. Some examples:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">user1</span><span class="pl-k">:</span> <span class="pl-en">JsResult</span>[<span class="pl-en">User</span>] <span class="pl-k">=</span> <span class="pl-en">Json</span>.parse(<span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">   {"firstname": "miles", "familyname": "sabin", "birthdate": 123456 }</span>
<span class="pl-s"><span class="pl-pds">"""</span></span>).validate[<span class="pl-en">User</span>]
<span class="pl-c"><span class="pl-c">//</span>user1 = JsSuccess(User(miles,sabin,None,0),)</span>

<span class="pl-k">val</span> <span class="pl-en">user2</span><span class="pl-k">:</span> <span class="pl-en">JsResult</span>[<span class="pl-en">User</span>] <span class="pl-k">=</span> <span class="pl-en">Json</span>.parse(<span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">   {"givenname": "travis", "familyname": "brown", "birthdate": 123456, "logins": 5 }</span>
<span class="pl-s"><span class="pl-pds">"""</span></span>).validate[<span class="pl-en">User</span>]
<span class="pl-c"><span class="pl-c">//</span>user2 = JsSuccess(User(travis,brown,None,5),)</span>

<span class="pl-k">val</span> <span class="pl-en">user3</span><span class="pl-k">:</span> <span class="pl-en">JsResult</span>[<span class="pl-en">User</span>] <span class="pl-k">=</span> <span class="pl-en">Json</span>.parse(<span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">   {"givenname": "jeremy r.", "familyname": "smith", "nickname": "jeremyrsmith", "logins": 42 }</span>
<span class="pl-s"><span class="pl-pds">"""</span></span>).validate[<span class="pl-en">User</span>]
<span class="pl-c"><span class="pl-c">//</span>user3 = JsSuccess(User(jeremy r.,smith,Some(jeremyrsmith),42),)</span></pre>
  </div> 
  <p>So far so good. But what happens when someone makes a change to the <code>User</code> to add a karma value to the user? (karma describes if the user is rather famous or not) Without Bamboomigrate, reading the json in our previous exmaples will fail at runtime and might break the application. On the other hand, if we use Bamboomigrate our application won't even compile in the beginning. Let's try this out and change the <code>User</code>:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">User</span>(<span class="pl-v">karma</span>: <span class="pl-k">Double</span>, <span class="pl-v">givenname</span>: <span class="pl-k">String</span>, <span class="pl-v">familyname</span>: <span class="pl-k">String</span>, <span class="pl-v">nickname</span>: <span class="pl-en">Option</span>[<span class="pl-k">String</span>], <span class="pl-v">logins</span>: <span class="pl-k">Int</span>)</pre>
  </div> 
  <p>We get an error at compile time (formatted):</p> 
  <pre><code>Error:(14, 39) Unable to migrate from base InitialUser to target User using steps
   bamboomigrate.RenameStep[Symbol with shapeless.tag.Tagged[String("firstname")],Symbol with shapeless.tag.Tagged[String("givenname")]] ::
   bamboomigrate.AppendStep[Symbol with shapeless.tag.Tagged[String("logins")],Int] ::
   bamboomigrate.RemoveStep[Symbol with shapeless.tag.Tagged[String("birthdate")]] ::
   bamboomigrate.InsertAtStep[shapeless.Succ[shapeless.Succ[shapeless._0]],Symbol with shapeless.tag.Tagged[String("nickname")],Option[String]] ::
   shapeless.HNil.
Check that transforming the specified base step by step (in order) of the provided steps really leads to the specified base
</code></pre> 
  <p>It tells us that using the <code>RenameStep</code>, <code>AppendStep</code> and so on cannot successfully transform an <code>InitialUser</code> to an <code>User</code>. To fix the error, we are forced to add another transformation <code>PrependStep('karma -&gt;&gt; 20.0)</code> with a specified default karma value of 20 like so:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">userReads</span> <span class="pl-k">=</span> <span class="pl-en">PlayJson</span>.createFallbackReads(
   <span class="pl-en">Migration</span>.between[<span class="pl-en">InitialUser</span>, <span class="pl-en">User</span>](
      <span class="pl-en">RenameStep</span>(<span class="pl-en">'firstname</span> <span class="pl-k">-</span><span class="pl-k">&gt;&gt;</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, <span class="pl-en">'givenname</span> <span class="pl-k">-</span><span class="pl-k">&gt;&gt;</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>) <span class="pl-k">::</span>
      <span class="pl-en">AppendStep</span>(<span class="pl-en">'logins</span> <span class="pl-k">-</span><span class="pl-k">&gt;&gt;</span> <span class="pl-c1">0</span>) <span class="pl-k">::</span>
      <span class="pl-en">RemoveStep</span>(<span class="pl-en">'birthdate</span>.narrow) <span class="pl-k">::</span>
      <span class="pl-en">InsertAtStep</span>(<span class="pl-en">Nat</span>(<span class="pl-c1">2</span>), <span class="pl-en">'nickname</span> <span class="pl-k">-</span><span class="pl-k">&gt;&gt;</span> (<span class="pl-c1">None</span><span class="pl-k">:</span> <span class="pl-en">Option</span>[<span class="pl-k">String</span>]) ) <span class="pl-k">::</span>
      <span class="pl-en">PrependStep</span>(<span class="pl-en">'karma</span> <span class="pl-k">-</span><span class="pl-k">&gt;&gt;</span> <span class="pl-c1">20.0</span>) <span class="pl-k">::</span> <span class="pl-c"><span class="pl-c">//</span> &lt;- here we add the karma-field at the beginning of the class</span>
      <span class="pl-en">HNil</span>
   )
)</pre>
  </div> 
  <p>Now our code will not only compile again. By adding the new transformation, Bamboomigrate is also able to deserialize all versions of json that existed before adding the karma-field. For instance, the first of our json examples will still be successfully parsed, but the result will correspond to the updated <code>User</code> class:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">user1</span><span class="pl-k">:</span> <span class="pl-en">JsResult</span>[<span class="pl-en">User</span>] <span class="pl-k">=</span> <span class="pl-en">Json</span>.parse(<span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">   {"firstname": "miles", "familyname": "sabin", "birthdate": 123456 }</span>
<span class="pl-s"><span class="pl-pds">"""</span></span>).validate[<span class="pl-en">User</span>]
<span class="pl-c"><span class="pl-c">//</span>user1 = JsSuccess(User(20.0,miles,sabin,None,0),)</span></pre>
  </div> 
  <h3><a href="https://github.com/valenterry/bamboomigrate#documentation" aria-hidden="true" class="anchor" id="user-content-documentation" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Documentation</h3> 
  <p>More detailed examples and more documentation of the API can be found here:</p> 
  <p>Coming soon... for now, taking a look into <a href="https://github.com/valenterry/bamboomigrate/blob/master/src/test/scala/MigrationTests.scala" target="_blank">the tests</a> might help</p> 
  <h2><a href="https://github.com/valenterry/bamboomigrate#summary" aria-hidden="true" class="anchor" id="user-content-summary" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Summary</h2> 
  <p>Bamboomigrate forces us to add support for older versions of our models. If we forget something, our program stops compiling and we can't ship broken software. We also don't have to write a lot of boilerplate code ourselves. When writing software, we should aim to only write down the code that really reflects our intend. In this case our intend is to change a class in a defined way to support older versions. We should therefore model our class to reflect the current state and additionally describe, in which way we accomplished to get to this state. Bamboomigrate helps us doing that, typesafe without macros nor reflection.</p> 
  <p>Feel free to contribute or to get in touch! :)</p> 
  <h2><a href="https://github.com/valenterry/bamboomigrate#known-issues" aria-hidden="true" class="anchor" id="user-content-known-issues" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Known issues</h2> 
  <ul> 
   <li>Compiletimes can get slow when using many transformation steps. Putting the case class and its compagnion object into its own file can help a bit. Using the typelevel compiler with the <code>-Yinduction-heuristics</code> flag greatly improves performance. See <a href="https://github.com/scala/scala/pull/5649" target="_blank">pull request 5649</a> and this projects <code>built.sbt</code> for reference.</li> 
   <li>The syntax for some steps looks alien (e.g. for the <code>RenameStep</code>). This is due to literal types not beeing available in the langage yet. See <a href="http://docs.scala-lang.org/sips/pending/42.type.html" target="_blank">literal types SIP</a> for reference.</li> 
   <li>The API is partly still poorly documentated. Feel free to improve it. ;)</li> 
  </ul> 
 </article>
</div>