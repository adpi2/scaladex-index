<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h2><a id="user-content-cornichon-gherkin" class="anchor" href="https://github.com/olegilyenko/cornichon-gherkin#cornichon-gherkin" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>cornichon-gherkin</h2> 
  <p><a href="https://travis-ci.org/OlegIlyenko/cornichon-gherkin" target="_blank"><img src="https://camo.githubusercontent.com/a0f4023d805329b89f87f83332d2353ca03cad5c/68747470733a2f2f7472617669732d63692e6f72672f4f6c6567496c79656e6b6f2f636f726e6963686f6e2d676865726b696e2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/OlegIlyenko/cornichon-gherkin.svg?branch=master" style="max-width:100%;"></a></p> 
  <p><a href="http://agourlay.github.io/cornichon/" target="_blank">Cornichon</a> - <a href="https://github.com/cucumber/cucumber/wiki/Gherkin" target="_blank">Gherkin</a> integration. Combines clean extensible functional core from <a href="http://agourlay.github.io/cornichon/" target="_blank">Cornichon</a> with great BDD feature definition language - <a href="https://github.com/cucumber/cucumber/wiki/Gherkin" target="_blank">Gherkin</a>.</p> 
  <h3><a id="user-content-basic-setup" class="anchor" href="https://github.com/olegilyenko/cornichon-gherkin#basic-setup" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Basic setup</h3> 
  <p>Add following SBT dependency:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.github.olegilyenko<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>cornichon-gherkin<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.0.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>As version indicates, it's still POC.</p> 
  <p>Now you can create a normal test class and extend <code>GherkinBasedFeature</code> to. The name of the feature file is inferred based on the test class name. So, for instance, for <code>StarWarsFeature</code> the feature fine would be <code>starWars.feature</code>. You can override this behaviour by overriding <code>featureFile</code> method. I would recommend to your <code>*.feature</code> files in <code>src/test/resources</code> folder.</p> 
  <p>Here is an example of basic test class <a href="https://github.com/OlegIlyenko/cornichon-gherkin/blob/master/src/test/scala/cornichonGherkin/StarWarsFeature.scala" target="_blank"><code>StarWarsFeature</code></a>:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">class</span> <span class="pl-en">StarWarsFeature</span> <span class="pl-k">extends</span> <span class="pl-e">GherkinBasedFeature</span> {
  <span class="pl-k">lazy</span> <span class="pl-k">val</span> <span class="pl-en">stepDefinitions</span> <span class="pl-k">=</span> <span class="pl-en">Steps</span> {
    step<span class="pl-s"><span class="pl-pds">"</span>I get ${strArg.ph}<span class="pl-pds">"</span></span> { url <span class="pl-k">⇒</span>
      <span class="pl-en">When</span> <span class="pl-en">I</span> get(url.toString)
    }

    step<span class="pl-s"><span class="pl-pds">"</span>response code is $intArg<span class="pl-pds">"</span></span> { code <span class="pl-k">⇒</span>
      <span class="pl-en">Then</span> assert status.is(code)
    }

    <span class="pl-c"><span class="pl-c">//</span> ...</span>

    <span class="pl-en">After</span>(<span class="pl-s"><span class="pl-pds">"</span>@showSession<span class="pl-pds">"</span></span>) {
      show_session
    }
  }
}</pre>
  </div> 
  <p>And complementary feature file <a href="https://github.com/OlegIlyenko/cornichon-gherkin/blob/master/src/test/resources/starWars.feature" target="_blank"><code>starWars.feature</code></a>:</p> 
  <div class="highlight highlight-text-gherkin-feature">
   <pre><span class="pl-k">Feature</span>:<span class="pl-s"> Star Wars API</span>

  <span class="pl-k">Scenario</span>:<span class="pl-s"> check out Luke Skywalker</span>
    <span class="pl-k">When </span>I get http://swapi.co/api/people/1/
    <span class="pl-k">Then </span>response code is 200
    <span class="pl-k">And </span>response body with whitelisting is
    <span class="pl-s">"""</span>
<span class="pl-s">    {</span>
<span class="pl-s">      "name": "Luke Skywalker",</span>
<span class="pl-s">      "height": "172",</span>
<span class="pl-s">      "mass": "77",</span>
<span class="pl-s">      "hair_color": "blond",</span>
<span class="pl-s">      "skin_color": "fair",</span>
<span class="pl-s">      "eye_color": "blue",</span>
<span class="pl-s">      "birth_year": "19BBY",</span>
<span class="pl-s">      "gender": "male",</span>
<span class="pl-s">      "homeworld": "http://swapi.co/api/planets/1/"</span>
<span class="pl-s">    }</span>
<span class="pl-s">    """</span>
    <span class="pl-k">And </span>I save path <span class="pl-s">'homeworld'</span> as <span class="pl-s">'homeworld-url'</span>

    ...</pre>
  </div> 
  <h3><a id="user-content-step-definitions" class="anchor" href="https://github.com/olegilyenko/cornichon-gherkin#step-definitions" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Step Definitions</h3> 
  <p>Step definitions are based on regular expressions, but <code>StringContext</code>-based <code>step</code> macro makes it type safe. Regular expressions (variable parts of the step) can only be expressed with string-interpolation variable which must be of type <code>RegExpExtractor</code>.</p> 
  <p>Here is an example:</p> 
  <div class="highlight highlight-source-scala">
   <pre>step<span class="pl-s"><span class="pl-pds">"</span>response body at path $strArg $whitelist is: $strTableArg<span class="pl-pds">"</span></span> { (path, wl, value) <span class="pl-k">⇒</span>
  <span class="pl-en">Then</span> assert body.copy(whitelist <span class="pl-k">=</span> wl).path(path).is(value)
}

<span class="pl-k">lazy</span> <span class="pl-k">val</span> <span class="pl-en">whitelist</span><span class="pl-k">:</span> <span class="pl-en">RegExpExtractor</span>[<span class="pl-k">Boolean</span>] <span class="pl-k">=</span>
  strArg(<span class="pl-s"><span class="pl-pds">"</span>with whitelisting<span class="pl-pds">"</span></span>).opt.transform(v <span class="pl-k">⇒</span> <span class="pl-en">Right</span>(v.isDefined))</pre>
  </div> 
  <p>As you can see, you can also transform the arguments. Each argument also can be made optional with <code>arg.opt</code> or accept a placeholder (like <code>&lt;foo-bar&gt;</code>) in place of this argument with <code>arg.ph</code> (resulting type is of type <code>Argument[T]</code> which can be either <code>Value[T]</code> or a <code>Placeholder[T]</code>).</p> 
  <p>Doc strings and data tables are also supported. They must appear at the end of the step definition string proceeded by colon (e.g. <code>"...: $foo"</code>). This last argument must be either of type <code>TableExtractor[T]</code> or <code>DocStringExtractor[T]</code>.</p> 
  <p>Here is an example:</p> 
  <div class="highlight highlight-source-scala">
   <pre>step<span class="pl-s"><span class="pl-pds">"</span>response body $whitelist is: $docStrArg<span class="pl-pds">"</span></span> { (whitelist, respBody) <span class="pl-k">⇒</span>
  <span class="pl-en">Then</span> assert body.copy(whitelist <span class="pl-k">=</span> whitelist).is(respBody)
}</pre>
  </div> 
  <p>The body of step definition is just normal cornichon <code>Step</code>. if you would like to define several cornichon steps, just use <code>Attach</code> step:</p> 
  <div class="highlight highlight-source-scala">
   <pre>step<span class="pl-s"><span class="pl-pds">"</span>I get ${strArg.ph}<span class="pl-pds">"</span></span> { url <span class="pl-k">⇒</span>
  <span class="pl-en">Attach</span> {
    <span class="pl-en">When</span> <span class="pl-en">I</span> get(url.toString)
    <span class="pl-en">Then</span> assert status.is(<span class="pl-c1">200</span>)
  }
}</pre>
  </div> 
  <h3><a id="user-content-tags" class="anchor" href="https://github.com/olegilyenko/cornichon-gherkin#tags" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Tags</h3> 
  <p>Out-of-the-box supported tags:</p> 
  <ul> 
   <li><code>@ignore</code> - ignore <code>Scenario</code> or <code>Feature</code></li> 
   <li><code>@pending</code> - mark <code>Scenario</code> or <code>Feature</code> as pending (they would be ignored as well)</li> 
   <li><code>@focus</code> - only focused scenarios are executed. All other <code>Scenario</code>s without this tag would be ignored.</li> 
  </ul> 
  <p>You can define additional steps <code>Before</code>, <code>After</code> or <code>Around</code> scenarios annotated with particular tag. Here is an example:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-en">Steps</span> {
  <span class="pl-en">Before</span>(<span class="pl-s"><span class="pl-pds">"</span>@debug<span class="pl-pds">"</span></span>) {
    show_session
  }

  <span class="pl-en">After</span>(<span class="pl-s"><span class="pl-pds">"</span>@debug<span class="pl-pds">"</span></span>) {
    show_session
  }

  <span class="pl-en">Around</span>(<span class="pl-s"><span class="pl-pds">"</span>@moDebugging<span class="pl-pds">"</span></span>) { steps <span class="pl-k">⇒</span>
    <span class="pl-en">StepList</span> {
      <span class="pl-en">Then</span> <span class="pl-en">I</span> print_step(<span class="pl-s"><span class="pl-pds">"</span>Printing before<span class="pl-pds">"</span></span>)

      steps

      <span class="pl-en">Then</span> <span class="pl-en">I</span> print_step(<span class="pl-s"><span class="pl-pds">"</span>Printing after<span class="pl-pds">"</span></span>)
    }
  }
}</pre>
  </div> 
 </article>
</div>