<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-docker-it-scala" class="anchor" href="https://github.com/whisklabs/docker-it-scala#docker-it-scala" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>docker-it-scala</h1> 
  <p><a href="https://travis-ci.org/whisklabs/docker-it-scala" target="_blank"><img src="https://camo.githubusercontent.com/215f7263e8d495cbf02785688ac2e1340467b893/68747470733a2f2f7472617669732d63692e6f72672f776869736b6c6162732f646f636b65722d69742d7363616c612e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/whisklabs/docker-it-scala.svg?branch=master" style="max-width:100%;"></a> <a href="https://gitter.im/whisklabs/docker-it-scala?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Join the chat at https://gitter.im/whisklabs/docker-it-scala" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg" style="max-width:100%;"></a></p> 
  <p>Set of utility classes to make integration testing with dockerised services in Scala easy.</p> 
  <p>You can read about reasoning behind it at <a href="https://finelydistributed.io/integration-testing-with-docker-and-scala-85659d037740#.8mbrg311p" target="_blank">Finely Distributed</a>.</p> 
  <h2><a id="user-content-setup" class="anchor" href="https://github.com/whisklabs/docker-it-scala#setup" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Setup</h2> 
  <p>docker-it-scala can work with two underlying libraries to communicate to docker engine through <em>REST API</em> or <em>unix socket</em>.</p> 
  <ul> 
   <li><a href="https://github.com/spotify/docker-client" target="_blank">Spotify's docker-client</a> (used in Whisk)</li> 
   <li><a href="https://github.com/docker-java/docker-java" target="_blank">docker-java</a></li> 
  </ul> 
  <p><em>Note: there is no specific recommendation to use one of them, over the other, but we hear people using Spotify's one more often, so you might get better support for it</em>.</p> 
  <p>There are separate artifacts available for these libraries:</p> 
  <p><strong>Spotify's docker-client</strong></p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>com.whisk<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>docker-testkit-scalatest<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.9.0<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>com.whisk<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>docker-testkit-impl-spotify<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.9.0<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p><strong>docker-java</strong></p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>com.whisk<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>docker-testkit-scalatest<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.9.0<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>com.whisk<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>docker-testkit-impl-docker-java<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.9.0<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>You don't necessarily have to use <code>scalatest</code> dependency as demonstrated above. You can create your custom bindings into your test environment, whether you use different initialisation technique or different framework. Have a look at <a href="https://github.com/whisklabs/docker-it-scala/blob/master/scalatest/src/main/scala/com/whisk/docker/scalatest/DockerTestKit.scala" target="_blank">this specific trait</a></p> 
  <h3><a id="user-content-overriding-execution-environment" class="anchor" href="https://github.com/whisklabs/docker-it-scala#overriding-execution-environment" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Overriding execution environment</h3> 
  <p>If you need to have custom setup for you environment, you need to override <code>dockerFactory</code> field, providing <code>DockerClient</code> instance</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.spotify.docker.client.</span>{<span class="pl-v">DefaultDockerClient</span>, <span class="pl-v">DockerClient</span>}
<span class="pl-k">import</span> <span class="pl-v">com.whisk.docker.</span>{<span class="pl-v">DockerFactory</span>, <span class="pl-v">DockerKit</span>}

<span class="pl-k">trait</span> <span class="pl-en">MyCustomDockerKitSpotify</span> <span class="pl-k">extends</span> <span class="pl-e">DockerKit</span> {

  <span class="pl-k">private</span> <span class="pl-k">val</span> <span class="pl-en">client</span><span class="pl-k">:</span> <span class="pl-en">DockerClient</span> <span class="pl-k">=</span> <span class="pl-en">DefaultDockerClient</span>.fromEnv().build()

  <span class="pl-k">override</span> <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">dockerFactory</span><span class="pl-k">:</span> <span class="pl-en">DockerFactory</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SpotifyDockerFactory</span>(client)
}
</pre>
  </div> 
  <p>Check <a href="https://github.com/spotify/docker-client" target="_blank">docker-client</a> library project for configuration options.</p> 
  <h3><a id="user-content-configuration" class="anchor" href="https://github.com/whisklabs/docker-it-scala#configuration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Configuration</h3> 
  <p>You should be able to provide configuration purely through environment variables.</p> 
  <p>Examples:</p> 
  <pre><code>export DOCKER_HOST=tcp://127.0.0.1:2375
</code></pre> 
  <pre><code>export DOCKER_HOST=unix:///var/run/docker.sock
</code></pre> 
  <h1><a id="user-content-sample-services" class="anchor" href="https://github.com/whisklabs/docker-it-scala#sample-services" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Sample Services</h1> 
  <ul> 
   <li><a href="https://github.com/whisklabs/docker-it-scala/blob/master/samples/src/main/scala/com/whisk/docker/DockerCassandraService.scala" target="_blank">Cassandra</a></li> 
   <li><a href="https://github.com/whisklabs/docker-it-scala/blob/master/samples/src/main/scala/com/whisk/docker/DockerElasticsearchService.scala" target="_blank">Elasticsearch</a></li> 
   <li><a href="https://github.com/whisklabs/docker-it-scala/blob/master/samples/src/main/scala/com/whisk/docker/DockerKafkaService.scala" target="_blank">Kafka</a></li> 
   <li><a href="https://github.com/whisklabs/docker-it-scala/blob/master/samples/src/main/scala/com/whisk/docker/DockerMongodbService.scala" target="_blank">Mongodb</a></li> 
   <li><a href="https://github.com/whisklabs/docker-it-scala/blob/master/samples/src/main/scala/com/whisk/docker/DockerNeo4jService.scala" target="_blank">Neo4j</a></li> 
   <li><a href="https://github.com/whisklabs/docker-it-scala/blob/master/samples/src/main/scala/com/whisk/docker/DockerPostgresService.scala" target="_blank">Postgres</a></li> 
  </ul> 
  <h1><a id="user-content-defining-containers" class="anchor" href="https://github.com/whisklabs/docker-it-scala#defining-containers" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Defining Containers</h1> 
  <p>There are two ways to define a docker container.</p> 
  <p>Code based definitions and via <code>typesafe-config</code>.</p> 
  <h2><a id="user-content-code-based-definitions" class="anchor" href="https://github.com/whisklabs/docker-it-scala#code-based-definitions" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Code based definitions</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.whisk.docker.</span>{<span class="pl-v">DockerContainer</span>, <span class="pl-v">DockerKit</span>, <span class="pl-v">DockerReadyChecker</span>}

<span class="pl-k">trait</span> <span class="pl-en">DockerMongodbService</span> <span class="pl-k">extends</span> <span class="pl-e">DockerKit</span> {

  <span class="pl-k">val</span> <span class="pl-en">DefaultMongodbPort</span> <span class="pl-k">=</span> <span class="pl-c1">27017</span>

  <span class="pl-k">val</span> <span class="pl-en">mongodbContainer</span> <span class="pl-k">=</span> <span class="pl-en">DockerContainer</span>(<span class="pl-s"><span class="pl-pds">"</span>mongo:3.0.6<span class="pl-pds">"</span></span>)
    .withPorts(<span class="pl-en">DefaultMongodbPort</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">None</span>)
    .withReadyChecker(<span class="pl-en">DockerReadyChecker</span>.<span class="pl-en">LogLineContains</span>(<span class="pl-s"><span class="pl-pds">"</span>waiting for connections on port<span class="pl-pds">"</span></span>))
    .withCommand(<span class="pl-s"><span class="pl-pds">"</span>mongod<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>--nojournal<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>--smallfiles<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>--syncdelay<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span>)

  <span class="pl-k">abstract</span> <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">dockerContainers</span><span class="pl-k">:</span> <span class="pl-en">List</span>[<span class="pl-en">DockerContainer</span>] <span class="pl-k">=</span>
    mongodbContainer <span class="pl-k">::</span> <span class="pl-c1">super</span>.dockerContainers
}</pre>
  </div> 
  <p>You can check <a href="https://github.com/whisklabs/docker-it-scala/blob/master/scalatest/src/test/scala/com/whisk/docker/MongodbServiceSpec.scala" target="_blank">usage example</a></p> 
  <h2><a id="user-content-typesafe-configuration" class="anchor" href="https://github.com/whisklabs/docker-it-scala#typesafe-configuration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Typesafe Configuration</h2> 
  <p><code>docker-testkit-config</code> enables you to use a typesafe config to define your docker containers. Just put an <code>application.conf</code> file in your classpath.</p> 
  <p>The container definitions are nested in the structure of name <code>docker</code></p> 
  <pre lang="conf"><code>docker {
...
...
}
</code></pre> 
  <p>See <a href="https://github.com/whisklabs/docker-it-scala/blob/master/config/src/test/resources/application.conf" target="_blank">application.conf</a> for more examples.</p> 
  <p>Usage in code</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">trait</span> <span class="pl-en">DockerMongodbService</span> <span class="pl-k">extends</span> <span class="pl-e">DockerKitConfig</span> {

  <span class="pl-k">val</span> <span class="pl-en">mongodbContainer</span> <span class="pl-k">=</span> configureDockerContainer(<span class="pl-s"><span class="pl-pds">"</span>docker.mongodb<span class="pl-pds">"</span></span>)

  <span class="pl-k">abstract</span> <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">dockerContainers</span><span class="pl-k">:</span> <span class="pl-en">List</span>[<span class="pl-en">DockerContainer</span>] <span class="pl-k">=</span>
    mongodbContainer <span class="pl-k">::</span> <span class="pl-c1">super</span>.dockerContainers
}
</pre>
  </div> 
  <h3><a id="user-content-container-paths" class="anchor" href="https://github.com/whisklabs/docker-it-scala#container-paths" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Container Paths</h3> 
  <ul> 
   <li>Cassandra =&gt; <code>docker.cassandra</code></li> 
   <li>Elasticsearch =&gt; <code>docker.elasticsearch</code></li> 
   <li>Kafka =&gt; <code>docker.kafka</code></li> 
   <li>Mongodb =&gt; <code>docker.mongo</code></li> 
   <li>Neo4j =&gt; <code>docker.neo4j</code></li> 
   <li>Postgres =&gt; <code>docker.postgres</code></li> 
  </ul> 
  <h3><a id="user-content-fields" class="anchor" href="https://github.com/whisklabs/docker-it-scala#fields" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Fields</h3> 
  <ul> 
   <li><code>image-name</code> required (String)</li> 
   <li><code>environmental-variables</code> optional (Array of Strings)</li> 
   <li><code>ready-checker</code> optional structure 
    <ul> 
     <li><code>log-line</code> optional (String)</li> 
     <li><code>http-response-code</code> 
      <ul> 
       <li><code>port</code> required (Int)</li> 
       <li><code>path</code> optional (String - defaults to <code>/</code>)</li> 
       <li><code>within</code> optional (Int)</li> 
       <li><code>looped</code> optional structure 
        <ul> 
         <li><code>attempts</code> required (Int)</li> 
         <li><code>delay</code> required (Int)</li> 
        </ul></li> 
      </ul></li> 
    </ul></li> 
   <li><code>port-maps</code> optional structure (list of structures) 
    <ul> 
     <li><code>SOME_MAPPING_NAME</code> 
      <ul> 
       <li><code>internal</code> required (Int)</li> 
       <li><code>external</code> optional (Int)</li> 
      </ul></li> 
    </ul></li> 
   <li><code>volume-maps</code> optional structure (list of structures) 
    <ul> 
     <li><code>container</code> required (String)</li> 
     <li><code>host</code> required (String)</li> 
     <li><code>rw</code> optional (Boolean - default:false)</li> 
    </ul></li> 
  </ul> 
  <h1><a id="user-content-testkit" class="anchor" href="https://github.com/whisklabs/docker-it-scala#testkit" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Testkit</h1> 
  <p>There are two testkits available -- one for <code>scalatest</code> and one for <code>specs2</code>.</p> 
  <p>Both set up the necessary docker containers and check that they are ready <strong>BEFORE</strong> any test is run, and doesn't close the container until <strong>ALL</strong> the tests are run.</p> 
  <h2><a id="user-content-using-in-scalatest" class="anchor" href="https://github.com/whisklabs/docker-it-scala#using-in-scalatest" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Using in ScalaTest:</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">class</span> <span class="pl-en">MyMongoSpec</span> <span class="pl-k">extends</span> <span class="pl-e">FlatSpec</span> <span class="pl-k">with</span> <span class="pl-e">Matchers</span> <span class="pl-k">with</span> <span class="pl-e">DockerMongodbService</span> {
  ...
}</pre>
  </div> 
  <h3><a id="user-content-with-multiple-containers" class="anchor" href="https://github.com/whisklabs/docker-it-scala#with-multiple-containers" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>With Multiple containers:</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">class</span> <span class="pl-en">AllAtOnceSpec</span> <span class="pl-k">extends</span> <span class="pl-e">FlatSpec</span> <span class="pl-k">with</span> <span class="pl-e">Matchers</span> <span class="pl-k">with</span> <span class="pl-e">BeforeAndAfterAll</span> <span class="pl-k">with</span> <span class="pl-e">GivenWhenThen</span> <span class="pl-k">with</span> <span class="pl-e">ScalaFutures</span>
    <span class="pl-k">with</span> <span class="pl-e">DockerElasticsearchService</span> <span class="pl-k">with</span> <span class="pl-e">DockerCassandraService</span> <span class="pl-k">with</span> <span class="pl-e">DockerNeo4jService</span> <span class="pl-k">with</span> <span class="pl-e">DockerMongodbService</span> {

  <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">pc</span> <span class="pl-k">=</span> <span class="pl-en">PatienceConfig</span>(<span class="pl-en">Span</span>(<span class="pl-c1">20</span>, <span class="pl-en">Seconds</span>), <span class="pl-en">Span</span>(<span class="pl-c1">1</span>, <span class="pl-en">Second</span>))

  <span class="pl-s"><span class="pl-pds">"</span>all containers<span class="pl-pds">"</span></span> should <span class="pl-s"><span class="pl-pds">"</span>be ready at the same time<span class="pl-pds">"</span></span> in {
    dockerContainers.map(_.image).foreach(println)
    dockerContainers.forall(_.isReady().futureValue) shouldBe <span class="pl-c1">true</span>
  }
}</pre>
  </div> 
  <h2><a id="user-content-using-in-specs2" class="anchor" href="https://github.com/whisklabs/docker-it-scala#using-in-specs2" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Using in Specs2</h2> 
  <p>Examples can be found in <a href="https://github.com/whisklabs/docker-it-scala/tree/master/specs2/src/test/scala/com/whisk/docker" target="_blank">the specs2 module's tests</a></p> 
 </article>
</div>