<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-restli-sbt-plugin" class="anchor" href="https://github.com/linkedin/rest.li-sbt-plugin#restli-sbt-plugin" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>rest.li-sbt-plugin</h1> 
  <p>SBT plugin for <a href="https://github.com/linkedin/rest.li" target="_blank">rest.li</a>. This plugin provides full SBT integration for building rest.li applications. This includes <code>.pdsc</code> to data template code generation, rest client builder generation and interface definitions (idl) publishing and validation.</p> 
  <p>All features support SBT hot reload. To use with Play, simply define server projects as a <code>play.Project</code> (rather than just a <code>Project</code>) and put all source in the server project under an <code>app</code> directory instead of <code>src/main/scala</code>.</p> 
  <h2><a id="user-content-requirements" class="anchor" href="https://github.com/linkedin/rest.li-sbt-plugin#requirements" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Requirements</h2> 
  <ul> 
   <li>Java 1.6+</li> 
   <li>SBT 0.13+</li> 
  </ul> 
  <h2><a id="user-content-getting-started" class="anchor" href="https://github.com/linkedin/rest.li-sbt-plugin#getting-started" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Getting Started</h2> 
  <h3><a id="user-content-adding-the-plugin-dependency" class="anchor" href="https://github.com/linkedin/rest.li-sbt-plugin#adding-the-plugin-dependency" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Adding the plugin dependency</h3> 
  <p>In your project, create a file for plugin library dependencies <code>project/plugins.sbt</code> and add the following lines:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c">// add any resolvers required for the plugin library dependency here (see above if building from source)</span>

unmanagedJars in <span class="pl-en">Compile</span> <span class="pl-k">~</span><span class="pl-k">=</span> {uj <span class="pl-k">=&gt;</span>
  <span class="pl-en">Seq</span>(<span class="pl-en">Attributed</span>.blank(file(<span class="pl-en">System</span>.getProperty(<span class="pl-s"><span class="pl-pds">"</span>java.home<span class="pl-pds">"</span></span>).dropRight(<span class="pl-c1">3</span>)<span class="pl-k">+</span><span class="pl-s"><span class="pl-pds">"</span>lib/tools.jar<span class="pl-pds">"</span></span>))) <span class="pl-k">++</span> uj
}

libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.linkedin.pegasus<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>sbt-plugin<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.1.4<span class="pl-pds">"</span></span></pre>
  </div> 
  <h3><a id="user-content-importing-sbt-plugin-settings" class="anchor" href="https://github.com/linkedin/rest.li-sbt-plugin#importing-sbt-plugin-settings" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Importing sbt-plugin settings</h3> 
  <p>To actually "activate" the plugin, its settings need to be included in the build. The main steps are:</p> 
  <ul> 
   <li><code>import com.linkedin.sbt._</code></li> 
   <li>add the <code>restli.All</code> trait to your <code>Build</code></li> 
   <li>Use <code>.compilePegasus()</code> and <code>.compileRestspec()</code> in your projects</li> 
  </ul> 
  <h5><a id="user-content-projectbuildscala" class="anchor" href="https://github.com/linkedin/rest.li-sbt-plugin#projectbuildscala" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>project/Build.scala</h5> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.linkedin.sbt.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">sbt.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">Keys.</span><span class="pl-v">_</span>

<span class="pl-c">/**</span>
<span class="pl-c"> * This build includes the rest.All trait, enabling all pegasus project types.</span>
<span class="pl-c"> */</span>
<span class="pl-k">object</span> <span class="pl-en">Example</span> <span class="pl-k">extends</span> <span class="pl-e">Build</span> <span class="pl-k">with</span> <span class="pl-e">restli.All</span> {

  <span class="pl-k">val</span> <span class="pl-en">restliVersion</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>1.15.12<span class="pl-pds">"</span></span>

  <span class="pl-k">val</span> <span class="pl-en">baseSettings</span> <span class="pl-k">=</span> <span class="pl-en">Seq</span>(
    organization <span class="pl-k">:</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.linkedin.pegasus.example<span class="pl-pds">"</span></span>,
    version <span class="pl-k">:</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>0.0.1<span class="pl-pds">"</span></span>,
    resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Local Maven Repository<span class="pl-pds">"</span></span> at <span class="pl-s"><span class="pl-pds">"</span>file://<span class="pl-pds">"</span></span><span class="pl-k">+</span><span class="pl-en">Path</span>.userHome.absolutePath<span class="pl-k">+</span><span class="pl-s"><span class="pl-pds">"</span>/.m2/repository<span class="pl-pds">"</span></span>
  )

<span class="pl-c">  /**</span>
<span class="pl-c">   * This project is for hand written *.pdsc files.  It will generate "data template" class bindings into the</span>
<span class="pl-c">   * target/classes directory.</span>
<span class="pl-c">   */</span>
  <span class="pl-k">lazy</span> <span class="pl-k">val</span> <span class="pl-en">dataTemplate</span> <span class="pl-k">=</span> <span class="pl-en">Project</span>(<span class="pl-s"><span class="pl-pds">"</span>data-template<span class="pl-pds">"</span></span>, file(<span class="pl-s"><span class="pl-pds">"</span>data-template<span class="pl-pds">"</span></span>))
    .compilePegasus()
    .settings(libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.linkedin.pegasus<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>data<span class="pl-pds">"</span></span> <span class="pl-k">%</span> restliVersion)
    .settings(<span class="pl-v">baseSettings</span>: _<span class="pl-k">*</span>)
    <span class="pl-c">// add any dependencies other data template modules, to depend on their .pdscs, here.</span>
    <span class="pl-c">// e.g. .settings(libraryDependencies += "{group}" % "{name}" % "{version}" % "dataTemplate")</span>
    <span class="pl-c">// or,  .dependsOn(someOtherDataTemplateProject)</span>

<span class="pl-c">  /**</span>
<span class="pl-c">   * This project contains your handwritten Rest.li "resource" implementations.  See rest.li documentation for detail</span>
<span class="pl-c">   * on how to write resource classes.</span>
<span class="pl-c">   */</span>
  <span class="pl-k">lazy</span> <span class="pl-k">val</span> <span class="pl-en">sampleServer</span> <span class="pl-k">=</span> <span class="pl-en">Project</span>(<span class="pl-s"><span class="pl-pds">"</span>sample-server<span class="pl-pds">"</span></span>, file(<span class="pl-s"><span class="pl-pds">"</span>sample-server<span class="pl-pds">"</span></span>))
    .dependsOn(dataTemplate)
    .aggregate(dataTemplate, api)
    .settings(libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.linkedin.pegasus<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>restli-server<span class="pl-pds">"</span></span> <span class="pl-k">%</span> restliVersion)
    .settings(<span class="pl-v">baseSettings</span>: _<span class="pl-k">*</span>)
    .compileRestspec(
      apiName <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>sample<span class="pl-pds">"</span></span>,
      apiProject <span class="pl-k">=</span> api,
      resourcePackages <span class="pl-k">=</span> <span class="pl-en">List</span>(<span class="pl-s"><span class="pl-pds">"</span>com.linkedin.pegasus.example<span class="pl-pds">"</span></span>), <span class="pl-c">// change this to match the package name where your *Resource.scala files reside.</span>
      dataTemplateProject <span class="pl-k">=</span> dataTemplate,

      <span class="pl-c">// change to "backwards" to enable rest.li's backward compatibility checker.  May also</span>
      <span class="pl-c">// be set to "equivalent", which is useful in continuous integration machinery to validate</span>
      <span class="pl-c">// that the rest project is in exact sync with the server implementation code.</span>
      compatMode <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>ignore<span class="pl-pds">"</span></span>
    )

<span class="pl-c">  /**</span>
<span class="pl-c">   * This project contains your API contract and will generate "client binding" classes into the</span>
<span class="pl-c">   * target/classes directory.  Clients to your rest.li service should depend on this project</span>
<span class="pl-c">   * or it's published artifacts (depend on the "restClient" configuration).</span>
<span class="pl-c">   *</span>
<span class="pl-c">   * Files under the src/idl and src/snapshot directories must be checked in to source control.  They are the</span>
<span class="pl-c">   * API contract and are used to generate client bindings and perform compatibility checking.</span>
<span class="pl-c">   */</span>
  <span class="pl-k">lazy</span> <span class="pl-k">val</span> <span class="pl-en">api</span> <span class="pl-k">=</span> <span class="pl-en">Project</span>(<span class="pl-s"><span class="pl-pds">"</span>api<span class="pl-pds">"</span></span>, file(<span class="pl-s"><span class="pl-pds">"</span>api<span class="pl-pds">"</span></span>))
    .dependsOn(dataTemplate)
    .settings(baseSettings<span class="pl-k">:</span>_<span class="pl-k">*</span>)
    .settings(libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.linkedin.pegasus<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>restli-client<span class="pl-pds">"</span></span> <span class="pl-k">%</span> restliVersion)
    .generateRequestBuilders(
      dataTemplateProject <span class="pl-k">=</span> dataTemplate
    )

  <span class="pl-k">override</span> <span class="pl-k">lazy</span> <span class="pl-k">val</span> <span class="pl-en">rootProject</span> <span class="pl-k">=</span> <span class="pl-en">Option</span>(sampleServer)
}</pre>
  </div> 
  <h2><a id="user-content-avro-schema-generation" class="anchor" href="https://github.com/linkedin/rest.li-sbt-plugin#avro-schema-generation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Avro Schema Generation</h2> 
  <p>An avro schema (.avsc) can be generated from any .pdsc file. To enable this generation, add the <code>.generateAvroSchema()</code> to yoru dataTemplate project, e.g.:</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-k">lazy</span> <span class="pl-k">val</span> <span class="pl-en">dataTemplate</span> <span class="pl-k">=</span> <span class="pl-en">Project</span>(<span class="pl-s"><span class="pl-pds">"</span>data-template<span class="pl-pds">"</span></span>, file(<span class="pl-s"><span class="pl-pds">"</span>data-template<span class="pl-pds">"</span></span>))
    .generateAvroSchema()
    <span class="pl-c">// ...</span></pre>
  </div> 
  <h2><a id="user-content-building-from-source" class="anchor" href="https://github.com/linkedin/rest.li-sbt-plugin#building-from-source" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Building from Source</h2> 
  <ul> 
   <li>Java 1.6+</li> 
   <li>Gradle 1.8+ (optional)</li> 
  </ul> 
  <p>To build from source and install as a snapshot in your local maven repo, clone this repo and build it:</p> 
  <div class="highlight highlight-source-shell">
   <pre>./gradlew install</pre>
  </div> 
  <p>Maven artifacts will be written into <code>~/.m2/repository</code>.</p> 
  <p>Once built, you'll need to remember to add resolvers to these repositories when you use the plugin in your sbt projects When following the below "usage" directions, remember to put this in your project/Build.scala:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">baseSettings</span> <span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Local Maven Repository<span class="pl-pds">"</span></span> at <span class="pl-s"><span class="pl-pds">"</span>file://<span class="pl-pds">"</span></span><span class="pl-k">+</span><span class="pl-en">Path</span>.userHome.absolutePath<span class="pl-k">+</span><span class="pl-s"><span class="pl-pds">"</span>/.m2/repository<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <p>and this in your <code>project/plugins.scala</code>:</p> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Local Maven Repository<span class="pl-pds">"</span></span> at <span class="pl-s"><span class="pl-pds">"</span>file:///<span class="pl-pds">"</span></span><span class="pl-k">+</span><span class="pl-en">Path</span>.userHome<span class="pl-k">+</span><span class="pl-s"><span class="pl-pds">"</span>/.m2/repository<span class="pl-pds">"</span></span></pre>
  </div> 
 </article>
</div>