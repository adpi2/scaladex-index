<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <blockquote> 
   <p>EXPERIMENTAL / DRAFT</p> 
  </blockquote> 
  <h1><a id="user-content-jszipper--play2-json-advanced--monadic-manipulations" class="anchor" href="https://github.com/product-foundry/play-json-zipper#jszipper--play2-json-advanced--monadic-manipulations" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>JsZipper : Play2 Json advanced (&amp; monadic) manipulations</h1> 
  <blockquote> 
   <p><code>JsZipper</code> is a new tool allowing much more complex &amp; powerful manipulations of Json structures for Play2/Json API:</p> 
   <p><code>JsZipper</code> is inspired by the <a href="http://en.wikipedia.org/wiki/Zipper_(data_structure)" target="_blank">Zipper</a> concept introduced by <a href="http://en.wikipedia.org/wiki/G%C3%A9rard_Huet" target="_blank">Gerard Huet</a> in 1997. </p> 
   <p>The Zipper allows to update immutable traversable structures in an efficient way. Json is an immutable AST so it fits well. FYI, the Zipper behaves like a loupe that walks through each node of the AST (left/right/up/down) while keeping aware of the nodes on its left, its right and its upper. The interesting idea behind the loupe is that when it targets a node, it can modify and even delete the focused node. The analogy to the pants zipper is quite good too because when it goes down the tree, it behaves as if it was <i>opening</i> the tree to be able to drive the loupe through all nodes and when it goes up, it <i>closes</i> back the tree... I won't tell more here, it would be too long.</p> 
   <p><code>JsZipper</code> is a specific interpretation of Zipper concept for Play/Json API based on :</p> 
   <ul> 
    <li>Scala Streams to go through / update / construct Json AST in a lazy way</li> 
    <li>Monadic aspects to provide <em>funnier</em> ways of manipulating the Json AST (plz see below)</li> 
   </ul> 
  </blockquote> 
  <p><em>Please note, <code>JsZipper</code> is not an end in itself but a tool useful to provide new API to manipulate Json.</em></p> 
  <h2><a id="user-content-use-it-in-your-sbt-project" class="anchor" href="https://github.com/product-foundry/play-json-zipper#use-it-in-your-sbt-project" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Use it in your SBT project</h2> 
  <blockquote> 
   <p>I've just published v1.1 of JsZipper to Bintray instead of my fake maven repo in github. It's much more reliable.</p> 
  </blockquote> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>mandubian maven bintray<span class="pl-pds">"</span></span> at <span class="pl-s"><span class="pl-pds">"</span>http://dl.bintray.com/mandubian/maven<span class="pl-pds">"</span></span>

libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>com.mandubian<span class="pl-pds">"</span></span>     <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>play-json-zipper<span class="pl-pds">"</span></span>    <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.2<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <h2><a id="user-content-samples" class="anchor" href="https://github.com/product-foundry/play-json-zipper#samples" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Samples</h2> 
  <p>Let's go to samples.</p> 
  <p>We'll use following Json Object.</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">play.api.libs.json.</span><span class="pl-v">_</span>
scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">play.api.libs.json.monad.syntax.</span><span class="pl-v">_</span>
scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">play.api.libs.json.extensions.</span><span class="pl-v">_</span>
scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">js</span> <span class="pl-k">=</span> <span class="pl-en">Json</span>.obj(
  <span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Json</span>.obj(
    <span class="pl-s"><span class="pl-pds">"</span>key11<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>key12<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">123L</span>,
    <span class="pl-s"><span class="pl-pds">"</span>key13<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">JsNull</span>
  ),
  <span class="pl-s"><span class="pl-pds">"</span>key2<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">123</span>,
  <span class="pl-s"><span class="pl-pds">"</span>key3<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">true</span>,
  <span class="pl-s"><span class="pl-pds">"</span>key4<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Json</span>.arr(<span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>, <span class="pl-c1">345.6</span>, <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>, <span class="pl-en">Json</span>.obj(<span class="pl-s"><span class="pl-pds">"</span>key411<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Json</span>.obj(<span class="pl-s"><span class="pl-pds">"</span>key4111<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>)))
)
js<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsObject</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span><span class="pl-k">:</span>{<span class="pl-s"><span class="pl-pds">"</span>key11<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>key12<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">123</span>,<span class="pl-s"><span class="pl-pds">"</span>key13<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">null</span>},<span class="pl-s"><span class="pl-pds">"</span>key2<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">123</span>,<span class="pl-s"><span class="pl-pds">"</span>key3<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">true</span>,<span class="pl-s"><span class="pl-pds">"</span>key4<span class="pl-pds">"</span></span><span class="pl-k">:</span>[<span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>,<span class="pl-c1">345.6</span>,<span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>,{<span class="pl-s"><span class="pl-pds">"</span>key411<span class="pl-pds">"</span></span><span class="pl-k">:</span>{<span class="pl-s"><span class="pl-pds">"</span>key4111<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>}}]}</pre>
  </div> 
  <h1><a id="user-content-basic-manipulations" class="anchor" href="https://github.com/product-foundry/play-json-zipper#basic-manipulations" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Basic manipulations</h1> 
  <h2><a id="user-content-setting-multiple-pathsvalues" class="anchor" href="https://github.com/product-foundry/play-json-zipper#setting-multiple-pathsvalues" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Setting multiple paths/values</h2> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> js.set(
  (__ \ <span class="pl-s"><span class="pl-pds">"</span>key4<span class="pl-pds">"</span></span>)(<span class="pl-c1">2</span>) <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">JsNumber</span>(<span class="pl-c1">765.23</span>),
  (__ \ <span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span> \ <span class="pl-s"><span class="pl-pds">"</span>key12<span class="pl-pds">"</span></span>) <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">JsString</span>(<span class="pl-s"><span class="pl-pds">"</span>toto<span class="pl-pds">"</span></span>)
)
res1<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsValue</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span><span class="pl-k">:</span>{<span class="pl-s"><span class="pl-pds">"</span>key11<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>key12<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>toto<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>key13<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">null</span>},<span class="pl-s"><span class="pl-pds">"</span>key2<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">123</span>,<span class="pl-s"><span class="pl-pds">"</span>key3<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">true</span>,<span class="pl-s"><span class="pl-pds">"</span>key4<span class="pl-pds">"</span></span><span class="pl-k">:</span>[<span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>,<span class="pl-c1">345.6</span>,<span class="pl-c1">765.23</span>,{<span class="pl-s"><span class="pl-pds">"</span>key411<span class="pl-pds">"</span></span><span class="pl-k">:</span>{<span class="pl-s"><span class="pl-pds">"</span>key4111<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>}}]}</pre>
  </div> 
  <h2><a id="user-content-deleting-multiple-pathsvalues" class="anchor" href="https://github.com/product-foundry/play-json-zipper#deleting-multiple-pathsvalues" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Deleting multiple paths/values</h2> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> js.delete(
  (__ \ <span class="pl-s"><span class="pl-pds">"</span>key4<span class="pl-pds">"</span></span>)(<span class="pl-c1">2</span>),
  (__ \ <span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span> \ <span class="pl-s"><span class="pl-pds">"</span>key12<span class="pl-pds">"</span></span>),
  (__ \ <span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span> \ <span class="pl-s"><span class="pl-pds">"</span>key13<span class="pl-pds">"</span></span>)
)
res2<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsValue</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span><span class="pl-k">:</span>{<span class="pl-s"><span class="pl-pds">"</span>key11<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>},<span class="pl-s"><span class="pl-pds">"</span>key2<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">123</span>,<span class="pl-s"><span class="pl-pds">"</span>key3<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">true</span>,<span class="pl-s"><span class="pl-pds">"</span>key4<span class="pl-pds">"</span></span><span class="pl-k">:</span>[<span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>,<span class="pl-c1">345.6</span>,{<span class="pl-s"><span class="pl-pds">"</span>key411<span class="pl-pds">"</span></span><span class="pl-k">:</span>{<span class="pl-s"><span class="pl-pds">"</span>key4111<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>}}]}</pre>
  </div> 
  <h2><a id="user-content-finding-pathsvalues-according-to-a-filter" class="anchor" href="https://github.com/product-foundry/play-json-zipper#finding-pathsvalues-according-to-a-filter" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Finding paths/values according to a filter</h2> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> js.findAll( (_,v) <span class="pl-k">=&gt;</span> v <span class="pl-k">==</span> <span class="pl-en">JsString</span>(<span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>) ).toList
res5<span class="pl-k">:</span> <span class="pl-en">List</span>[(play.api.libs.json.<span class="pl-en">JsPath</span>, play.api.libs.json.<span class="pl-en">JsValue</span>)] <span class="pl-k">=</span> <span class="pl-en">List</span>(
  (<span class="pl-k">/</span>key1<span class="pl-k">/</span>key11,<span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>), 
  (<span class="pl-k">/</span>key4(<span class="pl-c1">0</span>),<span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>), 
  (<span class="pl-k">/</span>key4(<span class="pl-c1">3</span>)<span class="pl-k">/</span>key411<span class="pl-k">/</span>key4111,<span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>)
)</pre>
  </div> 
  <h2><a id="user-content-updating-values-according-to-a-filter-based-on-value" class="anchor" href="https://github.com/product-foundry/play-json-zipper#updating-values-according-to-a-filter-based-on-value" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Updating values according to a filter based on value</h2> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> js.updateAll( (_<span class="pl-k">:</span><span class="pl-en">JsValue</span>) <span class="pl-k">==</span> <span class="pl-en">JsString</span>(<span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>) ){ js <span class="pl-k">=&gt;</span>
  <span class="pl-k">val</span> <span class="pl-en">JsString</span>(str) <span class="pl-k">=</span> js
  <span class="pl-en">JsString</span>(str <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>)
}
res6<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsValue</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span><span class="pl-k">:</span>{<span class="pl-s"><span class="pl-pds">"</span>key11<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>TO_FIND2<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>key12<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">123</span>,<span class="pl-s"><span class="pl-pds">"</span>key13<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">null</span>},<span class="pl-s"><span class="pl-pds">"</span>key2<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">123</span>,<span class="pl-s"><span class="pl-pds">"</span>key3<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">true</span>,<span class="pl-s"><span class="pl-pds">"</span>key4<span class="pl-pds">"</span></span><span class="pl-k">:</span>[<span class="pl-s"><span class="pl-pds">"</span>TO_FIND2<span class="pl-pds">"</span></span>,<span class="pl-c1">345.6</span>,<span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>,{<span class="pl-s"><span class="pl-pds">"</span>key411<span class="pl-pds">"</span></span><span class="pl-k">:</span>{<span class="pl-s"><span class="pl-pds">"</span>key4111<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>TO_FIND2<span class="pl-pds">"</span></span>}}]}</pre>
  </div> 
  <h2><a id="user-content-updating-values-according-to-a-filter-based-on-pathvalue" class="anchor" href="https://github.com/product-foundry/play-json-zipper#updating-values-according-to-a-filter-based-on-pathvalue" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Updating values according to a filter based on path+value</h2> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> js.updateAll{ (path, js) <span class="pl-k">=&gt;</span>
  <span class="pl-en">JsPathExtension</span>.hasKey(path) <span class="pl-k">==</span> <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>key4111<span class="pl-pds">"</span></span>)
}{ (path, js) <span class="pl-k">=&gt;</span>
  <span class="pl-k">val</span> <span class="pl-en">JsString</span>(str) <span class="pl-k">=</span> js
  <span class="pl-en">JsString</span>(str <span class="pl-k">+</span> path.path.last)
}
res1<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsValue</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span><span class="pl-k">:</span>{<span class="pl-s"><span class="pl-pds">"</span>key11<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>key12<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">123</span>,<span class="pl-s"><span class="pl-pds">"</span>key13<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">null</span>},<span class="pl-s"><span class="pl-pds">"</span>key2<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">123</span>,<span class="pl-s"><span class="pl-pds">"</span>key3<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">true</span>,<span class="pl-s"><span class="pl-pds">"</span>key4<span class="pl-pds">"</span></span><span class="pl-k">:</span>[<span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>,<span class="pl-c1">345.6</span>,<span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>,{<span class="pl-s"><span class="pl-pds">"</span>key411<span class="pl-pds">"</span></span><span class="pl-k">:</span>{<span class="pl-s"><span class="pl-pds">"</span>key4111<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>TO_FIND/key4111<span class="pl-pds">"</span></span>}}]}</pre>
  </div> 
  <h2><a id="user-content-creating-an-object-from-scratch" class="anchor" href="https://github.com/product-foundry/play-json-zipper#creating-an-object-from-scratch" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Creating an object from scratch</h2> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">build</span> <span class="pl-k">=</span> <span class="pl-en">JsExtensions</span>.buildJsObject( 
  __ \ <span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span> \ <span class="pl-s"><span class="pl-pds">"</span>key11<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">JsString</span>(<span class="pl-s"><span class="pl-pds">"</span>toto<span class="pl-pds">"</span></span>),
  __ \ <span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span> \ <span class="pl-s"><span class="pl-pds">"</span>key12<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">JsNumber</span>(<span class="pl-c1">123L</span>),
  (__ \ <span class="pl-s"><span class="pl-pds">"</span>key2<span class="pl-pds">"</span></span>)(<span class="pl-c1">0</span>)      <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">JsBoolean</span>(<span class="pl-c1">true</span>),
  __ \ <span class="pl-s"><span class="pl-pds">"</span>key3<span class="pl-pds">"</span></span>           <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Json</span>.arr(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>)
)
build<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsValue</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span><span class="pl-k">:</span>{<span class="pl-s"><span class="pl-pds">"</span>key11<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>toto<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>key12<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">123</span>},<span class="pl-s"><span class="pl-pds">"</span>key3<span class="pl-pds">"</span></span><span class="pl-k">:</span>[<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>],<span class="pl-s"><span class="pl-pds">"</span>key2<span class="pl-pds">"</span></span><span class="pl-k">:</span>[<span class="pl-c1">true</span>]}</pre>
  </div> 
  <p><br></p> 
  <h1><a id="user-content-lets-be-funnier-with-monads-now" class="anchor" href="https://github.com/product-foundry/play-json-zipper#lets-be-funnier-with-monads-now" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Let's be funnier with Monads now</h1> 
  <blockquote> 
   <p>Let's use <code>Future</code> as our Monad because it's... coooool to do things in the future ;)</p> 
  </blockquote> 
  <p>Imagine you call several services returning <code>Future[JsValue]</code> and you want to build/update a <code>JsObject</code> from it. Until now, if you wanted to do that with Play2/Json, it was quite tricky and required some code.</p> 
  <p>Here is what you can do now.</p> 
  <h2><a id="user-content-updating-multiple-future-values-at-given-paths" class="anchor" href="https://github.com/product-foundry/play-json-zipper#updating-multiple-future-values-at-given-paths" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Updating multiple <em>FUTURE</em> values at given paths</h2> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">maybeJs</span> <span class="pl-k">=</span> js.setM[<span class="pl-en">Future</span>](
  (__ \ <span class="pl-s"><span class="pl-pds">"</span>key4<span class="pl-pds">"</span></span>)(<span class="pl-c1">2</span>)        <span class="pl-k">-</span><span class="pl-k">&gt;</span> future{ <span class="pl-en">JsNumber</span>(<span class="pl-c1">765.23</span>) },
  (__ \ <span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span> \ <span class="pl-s"><span class="pl-pds">"</span>key12<span class="pl-pds">"</span></span>) <span class="pl-k">-</span><span class="pl-k">&gt;</span> future{ <span class="pl-en">JsString</span>(<span class="pl-s"><span class="pl-pds">"</span>toto<span class="pl-pds">"</span></span>) }
)
maybeJs<span class="pl-k">:</span> scala.concurrent.<span class="pl-en">Future</span>[play.api.libs.json.<span class="pl-en">JsValue</span>] <span class="pl-k">=</span> scala.concurrent.impl.<span class="pl-en">Promise</span>$<span class="pl-en">DefaultPromise</span><span class="pl-k">@</span>6beb722d

scala<span class="pl-k">&gt;</span> <span class="pl-en">Await</span>.result(maybeJs, <span class="pl-en">Duration</span>(<span class="pl-s"><span class="pl-pds">"</span>2 seconds<span class="pl-pds">"</span></span>))
res4<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsValue</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span><span class="pl-k">:</span>{<span class="pl-s"><span class="pl-pds">"</span>key11<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>key12<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>toto<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>key13<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">null</span>},<span class="pl-s"><span class="pl-pds">"</span>key2<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">123</span>,<span class="pl-s"><span class="pl-pds">"</span>key3<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">true</span>,<span class="pl-s"><span class="pl-pds">"</span>key4<span class="pl-pds">"</span></span><span class="pl-k">:</span>[<span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>,<span class="pl-c1">345.6</span>,<span class="pl-c1">765.23</span>,{<span class="pl-s"><span class="pl-pds">"</span>key411<span class="pl-pds">"</span></span><span class="pl-k">:</span>{<span class="pl-s"><span class="pl-pds">"</span>key4111<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>}}]}</pre>
  </div> 
  <h2><a id="user-content-update-multiple-future-values-according-to-a-filter" class="anchor" href="https://github.com/product-foundry/play-json-zipper#update-multiple-future-values-according-to-a-filter" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Update multiple <em>FUTURE</em> values according to a filter</h2> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">maybeJs</span> <span class="pl-k">=</span> js.updateAllM[<span class="pl-en">Future</span>]( (_<span class="pl-k">:</span><span class="pl-en">JsValue</span>) <span class="pl-k">==</span> <span class="pl-en">JsString</span>(<span class="pl-s"><span class="pl-pds">"</span>TO_FIND<span class="pl-pds">"</span></span>) ){ js <span class="pl-k">=&gt;</span>
  future {
    <span class="pl-k">val</span> <span class="pl-en">JsString</span>(str) <span class="pl-k">=</span> js
    <span class="pl-en">JsString</span>(str <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>)
  }
}
maybeJs<span class="pl-k">:</span> scala.concurrent.<span class="pl-en">Future</span>[play.api.libs.json.<span class="pl-en">JsValue</span>] <span class="pl-k">=</span> scala.concurrent.impl.<span class="pl-en">Promise</span>$<span class="pl-en">DefaultPromise</span><span class="pl-k">@</span>35a4bb1a

scala<span class="pl-k">&gt;</span> <span class="pl-en">Await</span>.result(maybeJs, <span class="pl-en">Duration</span>(<span class="pl-s"><span class="pl-pds">"</span>2 seconds<span class="pl-pds">"</span></span>))
res6<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsValue</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span><span class="pl-k">:</span>{<span class="pl-s"><span class="pl-pds">"</span>key11<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>TO_FIND2<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>key12<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">123</span>,<span class="pl-s"><span class="pl-pds">"</span>key13<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">null</span>},<span class="pl-s"><span class="pl-pds">"</span>key2<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">123</span>,<span class="pl-s"><span class="pl-pds">"</span>key3<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">true</span>,<span class="pl-s"><span class="pl-pds">"</span>key4<span class="pl-pds">"</span></span><span class="pl-k">:</span>[<span class="pl-s"><span class="pl-pds">"</span>TO_FIND2<span class="pl-pds">"</span></span>,<span class="pl-c1">345.6</span>,<span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>,{<span class="pl-s"><span class="pl-pds">"</span>key411<span class="pl-pds">"</span></span><span class="pl-k">:</span>{<span class="pl-s"><span class="pl-pds">"</span>key4111<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>TO_FIND2<span class="pl-pds">"</span></span>}}]}</pre>
  </div> 
  <h2><a id="user-content-creating-a-future-jsarray-from-scratch" class="anchor" href="https://github.com/product-foundry/play-json-zipper#creating-a-future-jsarray-from-scratch" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Creating a <em>FUTURE</em> JsArray from scratch</h2> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">maybeArr</span> <span class="pl-k">=</span> <span class="pl-en">JsExtensions</span>.buildJsArrayM[<span class="pl-en">Future</span>](
  future { <span class="pl-en">JsNumber</span>(<span class="pl-c1">123.45</span>) },
  future { <span class="pl-en">JsString</span>(<span class="pl-s"><span class="pl-pds">"</span>toto<span class="pl-pds">"</span></span>) }
)
maybeArr<span class="pl-k">:</span> scala.concurrent.<span class="pl-en">Future</span>[play.api.libs.json.<span class="pl-en">JsValue</span>] <span class="pl-k">=</span> scala.concurrent.impl.<span class="pl-en">Promise</span>$<span class="pl-en">DefaultPromise</span><span class="pl-k">@</span>220d48e4

scala<span class="pl-k">&gt;</span> <span class="pl-en">Await</span>.result(maybeArr, <span class="pl-en">Duration</span>(<span class="pl-s"><span class="pl-pds">"</span>2 seconds<span class="pl-pds">"</span></span>))
res0<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsValue</span> <span class="pl-k">=</span> [<span class="pl-c1">123.45</span>,<span class="pl-s"><span class="pl-pds">"</span>toto<span class="pl-pds">"</span></span>]</pre>
  </div> 
  <p>Ok, much more can be done... Have fun!</p> 
 </article>
</div>