<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a href="https://github.com/monix/shade#shade---memcached-client-for-scala" aria-hidden="true" class="anchor" id="user-content-shade---memcached-client-for-scala" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Shade - Memcached Client for Scala</h1> 
  <p><a href="https://travis-ci.org/monix/shade" target="_blank"><img src="https://camo.githubusercontent.com/5d73c61e68c85e6cf75ab189e0de39e1a5a20831/68747470733a2f2f7472617669732d63692e6f72672f6d6f6e69782f73686164652e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/monix/shade.svg?branch=master" style="max-width:100%;"></a> <a href="https://gitter.im/monix/shade?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank"><img src="https://camo.githubusercontent.com/008a4653ad698b5455c20929b77b8a9dcec0e48d/68747470733a2f2f6261646765732e6769747465722e696d2f6d6f6e69782f73686164652e737667" alt="Join the chat at https://gitter.im/monix/shade" data-canonical-src="https://badges.gitter.im/monix/shade.svg" style="max-width:100%;"></a></p> 
  <h2><a href="https://github.com/monix/shade#overview" aria-hidden="true" class="anchor" id="user-content-overview" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Overview</h2> 
  <p>Shade is a Memcached client based on the de-facto Java library <a href="https://code.google.com/p/spymemcached/" target="_blank">SpyMemcached</a>.</p> 
  <p>The interface exposed is very Scala-ish, as you have a choice between making asynchronous calls, with results wrapped as Scala <a href="http://docs.scala-lang.org/sips/pending/futures-promises.html" target="_blank">Futures</a>, or blocking calls. The performance is stellar as it benefits from the <a href="https://code.google.com/p/spymemcached/wiki/Optimizations" target="_blank">optimizations that went into SpyMemcached</a> over the years. Shade also fixes some problems with SpyMemcached's architecture, choices that made sense in the context of Java, but don't make so much sense in the context of Scala (TODO: add details).</p> 
  <p>The client is production quality. Supported for Scala versions: 2.10, 2.11 and 2.12.</p> 
  <h2><a href="https://github.com/monix/shade#release-notes" aria-hidden="true" class="anchor" id="user-content-release-notes" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Release Notes</h2> 
  <ul> 
   <li><a href="https://github.com/monix/shade/blob/master/release-notes/1.10.md" target="_blank">Version 1.10.x</a></li> 
   <li><a href="https://github.com/monix/shade/blob/master/release-notes/1.9.md" target="_blank">Version 1.9.x</a></li> 
   <li><a href="https://github.com/monix/shade/blob/master/release-notes/1.8.md" target="_blank">Version 1.8.x</a></li> 
   <li><a href="https://github.com/monix/shade/blob/master/release-notes/1.7.md" target="_blank">Version 1.7.x</a></li> 
   <li><a href="https://github.com/monix/shade/blob/master/release-notes/1.6.0.md" target="_blank">Version 1.6.0</a></li> 
  </ul> 
  <h2><a href="https://github.com/monix/shade#maintainers" aria-hidden="true" class="anchor" id="user-content-maintainers" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Maintainers</h2> 
  <p>These are the people maintaining this project that you can annoy:</p> 
  <ul> 
   <li>Alex: @alexandru</li> 
   <li>Lloyd: @lloydmeta</li> 
  </ul> 
  <h2><a href="https://github.com/monix/shade#usage-from-sbt" aria-hidden="true" class="anchor" id="user-content-usage-from-sbt" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage From SBT</h2> 
  <div class="highlight highlight-source-scala">
   <pre>dependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>io.monix<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>shade<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.10.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <h3><a href="https://github.com/monix/shade#initializing-the-memcached-client" aria-hidden="true" class="anchor" id="user-content-initializing-the-memcached-client" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Initializing the Memcached Client</h3> 
  <p>To initialize a Memcached client, you need a configuration object. Checkout the <a href="https://github.com/monix/shade/blob/master/src/main/scala/shade/memcached/Configuration.scala" target="_blank">Configuration</a> case class.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">shade.memcached.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.ExecutionContext.Implicits.</span><span class="pl-v">global</span>

<span class="pl-k">val</span> <span class="pl-en">memcached</span> <span class="pl-k">=</span>
  <span class="pl-en">Memcached</span>(<span class="pl-en">Configuration</span>(<span class="pl-s"><span class="pl-pds">"</span>127.0.0.1:11211<span class="pl-pds">"</span></span>))</pre>
  </div> 
  <p>As you can see, you also need an <a href="http://www.scala-lang.org/api/current/#scala.concurrent.ExecutionContext" target="_blank">ExecutionContext</a> passed explicitly. As an implementation detail, the execution context represents the thread-pool in which requests get processed.</p> 
  <h3><a href="https://github.com/monix/shade#simple-non-blocking-requests" aria-hidden="true" class="anchor" id="user-content-simple-non-blocking-requests" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Simple non-blocking requests</h3> 
  <p>Useful imports:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">concurrent.duration.</span><span class="pl-v">_ </span><span class="pl-c"><span class="pl-c">//</span> for specifying timeouts</span>
<span class="pl-k">import</span> <span class="pl-v">concurrent.</span><span class="pl-v">Future</span></pre>
  </div> 
  <p>Setting a key:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">op</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-k">Unit</span>] <span class="pl-k">=</span> memcached.set(<span class="pl-s"><span class="pl-pds">"</span>username<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Alex<span class="pl-pds">"</span></span>, <span class="pl-c1">1.</span>minute)</pre>
  </div> 
  <p>Adding a key that will only set it if the key is missing (returns true if the key was added, or false if the key was already there):</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">op</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-k">Boolean</span>] <span class="pl-k">=</span> memcached.add(<span class="pl-s"><span class="pl-pds">"</span>username<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Alex<span class="pl-pds">"</span></span>, <span class="pl-c1">1.</span>minute)</pre>
  </div> 
  <p>Deleting a key (returns true if a key was deleted, or false if the key was missing):</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">op</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-k">Boolean</span>] <span class="pl-k">=</span> memcached.delete(<span class="pl-s"><span class="pl-pds">"</span>username<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>Fetching a key:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">result</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">Option</span>[<span class="pl-k">String</span>]] <span class="pl-k">=</span> memcached.get[<span class="pl-k">String</span>](<span class="pl-s"><span class="pl-pds">"</span>username<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>As you can see, for fetching a key the <code>get()</code> method needs an explicit type parameter, otherwise it doesn't know how to deserialize it. More on this below.</p> 
  <h3><a href="https://github.com/monix/shade#blocking-requests" aria-hidden="true" class="anchor" id="user-content-blocking-requests" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Blocking requests</h3> 
  <p>Sometimes working with Futures is painful for quick hacks, therefore <code>add()</code>, <code>set()</code>, <code>delete()</code> and <code>get()</code> have blocking versions in the form of <code>awaitXXX()</code>:</p> 
  <div class="highlight highlight-source-scala">
   <pre>memcached.awaitGet(<span class="pl-s"><span class="pl-pds">"</span>username<span class="pl-pds">"</span></span>) <span class="pl-k">match</span> {
  <span class="pl-k">case</span> <span class="pl-en">Some</span>(username) <span class="pl-k">=&gt;</span> println(s<span class="pl-s"><span class="pl-pds">"</span>Hello, $username<span class="pl-pds">"</span></span>)
  <span class="pl-k">case</span> <span class="pl-c1">None</span> <span class="pl-k">=&gt;</span>
    memcached.awaitSet(<span class="pl-s"><span class="pl-pds">"</span>username<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Alex<span class="pl-pds">"</span></span>, <span class="pl-c1">1.</span>minute)
}</pre>
  </div> 
  <h3><a href="https://github.com/monix/shade#compare-and-set" aria-hidden="true" class="anchor" id="user-content-compare-and-set" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Compare-and-set</h3> 
  <p>Sometimes you want to have some sort of synchronization for modifying values safely, like incrementing a counter. Memcached supports <a href="http://en.wikipedia.org/wiki/Compare-and-swap" target="_blank">Compare-And-Swap</a> atomic operations and so does this client.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">op</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-k">Boolean</span>] <span class="pl-k">=</span>
  memcached.compareAndSet(<span class="pl-s"><span class="pl-pds">"</span>username<span class="pl-pds">"</span></span>, <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>Alex<span class="pl-pds">"</span></span>), <span class="pl-s"><span class="pl-pds">"</span>Amalia<span class="pl-pds">"</span></span>, <span class="pl-c1">1.</span>minute)</pre>
  </div> 
  <p>This will return either true or false if the operation was a success or not. But working with <code>compareAndSet</code> is too low level, so the client also provides these helpers:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">def</span> <span class="pl-en">incrementCounter</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-k">Int</span>] <span class="pl-k">=</span>
  memcached.transformAndGet[<span class="pl-k">Int</span>](<span class="pl-s"><span class="pl-pds">"</span>counter<span class="pl-pds">"</span></span>, <span class="pl-c1">1.</span>minute) {
    <span class="pl-k">case</span> <span class="pl-en">Some</span>(existing) <span class="pl-k">=&gt;</span> existing <span class="pl-k">+</span> <span class="pl-c1">1</span>
    <span class="pl-k">case</span> <span class="pl-c1">None</span> <span class="pl-k">=&gt;</span> <span class="pl-c1">1</span>
  }</pre>
  </div> 
  <p>The above returns the new, incremented value. In case you want the old value to be returned, do this:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">def</span> <span class="pl-en">incrementCounter</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">Option</span>[<span class="pl-k">Int</span>]] <span class="pl-k">=</span>
  memcached.getAndTransform[<span class="pl-k">Int</span>](<span class="pl-s"><span class="pl-pds">"</span>counter<span class="pl-pds">"</span></span>, <span class="pl-c1">1.</span>minute) {
    <span class="pl-k">case</span> <span class="pl-en">Some</span>(existing) <span class="pl-k">=&gt;</span> existing <span class="pl-k">+</span> <span class="pl-c1">1</span>
    <span class="pl-k">case</span> <span class="pl-c1">None</span> <span class="pl-k">=&gt;</span> <span class="pl-c1">1</span>
  }</pre>
  </div> 
  <h3><a href="https://github.com/monix/shade#serializingdeserializing" aria-hidden="true" class="anchor" id="user-content-serializingdeserializing" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Serializing/Deserializing</h3> 
  <p>Storing values in Memcached and retrieving values involves serializing and deserializing those values into bytes. Methods such as <code>get()</code>, <code>set()</code>, <code>add()</code> take an implicit parameter of type <code>Codec[T]</code> which is a type-class that specifies how to serialize and deserialize values of type <code>T</code>.</p> 
  <p>By default, Shade provides default implementations of <code>Codec[T]</code> for primitives, such as Strings and numbers. Checkout <a href="https://github.com/monix/shade/blob/master/src/main/scala/shade/memcached/Codec.scala" target="_blank">Codec.scala</a> to see those defaults.</p> 
  <p>For more complex types, a default implementation based on Java's <a href="http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html" target="_blank">ObjectOutputStream</a> and <a href="http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInputStream.html" target="_blank">ObjectInputStream</a> exist (also in Codec.scala).</p> 
  <p>However, because serializing/deserializing values like this is problematic (you can end up with lots of errors related to the ClassLoader used), this codec is available as part of the <code>MemcachedCodecs</code> trait (also in <a href="https://github.com/monix/shade/blob/master/src/main/scala/shade/memcached/Codec.scala" target="_blank">Codec.scala</a>) and it either needs to be imported or mixed-in.</p> 
  <p>The import works like so:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">shade.memcached.MemcachedCodecs.</span><span class="pl-v">_</span></pre>
  </div> 
  <p>But this can land you in trouble because of the ClassLoader. For example in a Play 2.x application, in development mode the code is recompiled when changes happen and the whole environment gets restarted. If you do a plain import, you'll get <code>ClassCastException</code> or other weird errors. You can solve this by mixing-in <code>MemcachedCodecs</code> in whatever trait, class or object you want to do requests, as in:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">User</span>(<span class="pl-v">id</span>: <span class="pl-k">Int</span>, <span class="pl-v">name</span>: <span class="pl-k">String</span>, <span class="pl-v">age</span>: <span class="pl-k">Int</span>)

<span class="pl-k">trait</span> <span class="pl-en">HelloController</span> <span class="pl-k">extends</span> <span class="pl-e">Controller</span> <span class="pl-k">with</span> <span class="pl-e">MemcachedCodecs</span> {
   <span class="pl-k">def</span> <span class="pl-en">memcached</span><span class="pl-k">:</span> <span class="pl-en">Memcached</span> <span class="pl-c"><span class="pl-c">//</span> to be injected</span>

   <span class="pl-c"><span class="pl-c">//</span> a Play 2.2 standard controller action</span>
   <span class="pl-k">def</span> <span class="pl-en">userInfo</span>(<span class="pl-v">id</span>: <span class="pl-k">Int</span>) <span class="pl-k">=</span> <span class="pl-en">Action</span>.async {
     <span class="pl-k">for</span> (user <span class="pl-k">&lt;</span><span class="pl-k">-</span>  memcached.get[<span class="pl-en">User</span>](<span class="pl-s"><span class="pl-pds">"</span>user-<span class="pl-pds">"</span></span> <span class="pl-k">+</span> id)) <span class="pl-k">yield</span>
       <span class="pl-en">Ok</span>(views.showUserDetails(user))
   }

   <span class="pl-c"><span class="pl-c">//</span> ...</span>
}</pre>
  </div> 
  <p>Or, in case you want to optimize serialization/deserialization, you can always implement your own <code>Codec[T]</code>, like:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">//</span> hackish example</span>
<span class="pl-k">implicit</span> <span class="pl-k">object</span> <span class="pl-en">UserCodec</span> <span class="pl-k">extends</span> <span class="pl-e">Codec</span>[<span class="pl-en">User</span>] {
  <span class="pl-k">def</span> <span class="pl-en">serialize</span>(<span class="pl-v">user</span>: <span class="pl-en">User</span>)<span class="pl-k">:</span> <span class="pl-en">Array</span>[<span class="pl-k">Byte</span>] <span class="pl-k">=</span>
    s<span class="pl-s"><span class="pl-pds">"</span>${user.id}|${user.name}|${user.age}<span class="pl-pds">"</span></span>.getBytes(<span class="pl-s"><span class="pl-pds">"</span>utf-8<span class="pl-pds">"</span></span>)

  <span class="pl-k">def</span> <span class="pl-en">deserialize</span>(<span class="pl-v">data</span>: <span class="pl-en">Array</span>[<span class="pl-k">Byte</span>])<span class="pl-k">:</span> <span class="pl-en">User</span> <span class="pl-k">=</span> {
    <span class="pl-k">val</span> <span class="pl-en">str</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">String</span>(data, <span class="pl-s"><span class="pl-pds">"</span>utf-8<span class="pl-pds">"</span></span>)
    <span class="pl-k">val</span> <span class="pl-en">Array</span>(id, name, age) <span class="pl-k">=</span> str.split(<span class="pl-s"><span class="pl-pds">"</span>|<span class="pl-pds">"</span></span>)
    <span class="pl-en">User</span>(id.toInt, name, age.toInt)
  }
}</pre>
  </div> 
 </article>
</div>