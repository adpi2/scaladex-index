<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-rediscala----" class="anchor" href="https://github.com/barcahead/rediscala#rediscala----" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>rediscala <a href="https://travis-ci.org/etaty/rediscala" target="_blank"><img src="https://camo.githubusercontent.com/5316b69ad3888d735044203b5b63bc29a4f995ab/68747470733a2f2f7472617669732d63692e6f72672f65746174792f726564697363616c612e706e67" alt="Build Status" data-canonical-src="https://travis-ci.org/etaty/rediscala.png" style="max-width:100%;"></a> <a href="https://coveralls.io/r/etaty/rediscala?branch=master" target="_blank"><img src="https://camo.githubusercontent.com/f7699b789fd3f957d3f10ed7e5d709fe333b1409/68747470733a2f2f696d672e736869656c64732e696f2f636f766572616c6c732f65746174792f726564697363616c612e737667" alt="Coverage Status" data-canonical-src="https://img.shields.io/coveralls/etaty/rediscala.svg" style="max-width:100%;"></a><a href="https://bintray.com/etaty/maven/rediscala/_latestVersion" target="_blank"> <img src="https://camo.githubusercontent.com/fcaa81b34dd6decb7b0ca3cfc6db57d6df812fce/68747470733a2f2f6170692e62696e747261792e636f6d2f7061636b616765732f65746174792f6d6176656e2f726564697363616c612f696d616765732f646f776e6c6f61642e737667" alt="Download" data-canonical-src="https://api.bintray.com/packages/etaty/maven/rediscala/images/download.svg" style="max-width:100%;"> </a></h1> 
  <p>A <a href="http://redis.io/" target="_blank">Redis</a> client for Scala (2.10+) and (AKKA 2.2+) with non-blocking and asynchronous I/O operations.</p> 
  <ul> 
   <li> <p>Reactive : Redis requests/replies are wrapped in Futures.</p> </li> 
   <li> <p>Typesafe : Redis types are mapped to Scala types.</p> </li> 
   <li> <p>Fast : Rediscala uses redis pipelining. Blocking redis commands are moved into their own connection. A worker actor handles I/O operations (I/O bounds), another handles decoding of Redis replies (CPU bounds).</p> </li> 
  </ul> 
  <h3><a id="user-content-set-up-your-project-dependencies" class="anchor" href="https://github.com/barcahead/rediscala#set-up-your-project-dependencies" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Set up your project dependencies</h3> 
  <p>If you use SBT, you just have to edit <code>build.sbt</code> and add the following:</p> 
  <p>From version 1.3.1:</p> 
  <ul> 
   <li>use akka 2.3</li> 
   <li>released for scala 2.10 &amp; 2.11</li> 
   <li>use Bintray repo: <a href="https://bintray.com/etaty/maven/rediscala/view/general" target="_blank">https://bintray.com/etaty/maven/rediscala/view/general</a></li> 
  </ul> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>rediscala<span class="pl-pds">"</span></span> at <span class="pl-s"><span class="pl-pds">"</span>http://dl.bintray.com/etaty/maven<span class="pl-pds">"</span></span>

libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>com.etaty.rediscala<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>rediscala<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.4.0<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <p>For older rediscala versions (&lt;= 1.3):</p> 
  <ul> 
   <li>use akka 2.2</li> 
   <li>released for scala 2.10 only</li> 
   <li>use github "repo"</li> 
  </ul> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>rediscala<span class="pl-pds">"</span></span> at <span class="pl-s"><span class="pl-pds">"</span>https://raw.github.com/etaty/rediscala-mvn/master/releases/<span class="pl-pds">"</span></span>

libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>com.etaty.rediscala<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>rediscala<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.3<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <h3><a id="user-content-connect-to-the-database" class="anchor" href="https://github.com/barcahead/rediscala#connect-to-the-database" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Connect to the database</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">redis.</span><span class="pl-v">RedisClient</span>
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.</span><span class="pl-v">Await</span>
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.duration.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.ExecutionContext.Implicits.</span><span class="pl-v">global</span>

<span class="pl-k">object</span> <span class="pl-en">Main</span> <span class="pl-k">extends</span> <span class="pl-e">App</span> {
  <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">akkaSystem</span> <span class="pl-k">=</span> akka.actor.<span class="pl-en">ActorSystem</span>()

  <span class="pl-k">val</span> <span class="pl-en">redis</span> <span class="pl-k">=</span> <span class="pl-en">RedisClient</span>()

  <span class="pl-k">val</span> <span class="pl-en">futurePong</span> <span class="pl-k">=</span> redis.ping()
  println(<span class="pl-s"><span class="pl-pds">"</span>Ping sent!<span class="pl-pds">"</span></span>)
  futurePong.map(pong <span class="pl-k">=&gt;</span> {
    println(s<span class="pl-s"><span class="pl-pds">"</span>Redis replied with a $pong<span class="pl-pds">"</span></span>)
  })
  <span class="pl-en">Await</span>.result(futurePong, <span class="pl-c1">5</span> seconds)

  akkaSystem.shutdown()
}</pre>
  </div> 
  <h3><a id="user-content-basic-example" class="anchor" href="https://github.com/barcahead/rediscala#basic-example" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Basic Example</h3> 
  <p><a href="https://github.com/etaty/rediscala-demo" target="_blank">https://github.com/etaty/rediscala-demo</a></p> 
  <p>You can fork with : <code>git clone git@github.com:etaty/rediscala-demo.git</code> then run it, with <code>sbt run</code></p> 
  <h3><a id="user-content-redis-commands" class="anchor" href="https://github.com/barcahead/rediscala#redis-commands" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Redis Commands</h3> 
  <p>All commands are supported :</p> 
  <ul> 
   <li><a href="http://redis.io/commands#generic" target="_blank">Keys</a> (<a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.commands.Keys" target="_blank">scaladoc</a>)</li> 
   <li><a href="http://redis.io/commands#string" target="_blank">Strings</a> (<a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.commands.Strings" target="_blank">scaladoc</a>)</li> 
   <li><a href="http://redis.io/commands#hash" target="_blank">Hashes</a> (<a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.commands.Hashes" target="_blank">scaladoc</a>)</li> 
   <li><a href="http://redis.io/commands#list" target="_blank">Lists</a> 
    <ul> 
     <li>non-blocking (<a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.commands.Lists" target="_blank">scaladoc</a>)</li> 
     <li>blocking (<a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.commands.BLists" target="_blank">scaladoc</a>)</li> 
    </ul> </li> 
   <li><a href="http://redis.io/commands#set" target="_blank">Sets</a> (<a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.commands.Sets" target="_blank">scaladoc</a>)</li> 
   <li><a href="http://redis.io/commands#sorted_set" target="_blank">Sorted Sets</a> (<a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.commands.SortedSets" target="_blank">scaladoc</a>)</li> 
   <li><a href="http://redis.io/commands#pubsub" target="_blank">Pub/Sub</a> (<a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.commands.Publish" target="_blank">scaladoc</a>)</li> 
   <li><a href="http://redis.io/commands#transactions" target="_blank">Transactions</a> (<a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.commands.Transactions" target="_blank">scaladoc</a>)</li> 
   <li><a href="http://redis.io/commands#connection" target="_blank">Connection</a> (<a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.commands.Connection" target="_blank">scaladoc</a>)</li> 
   <li><a href="http://redis.io/commands#scripting" target="_blank">Scripting</a> (<a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.commands.Scripting" target="_blank">scaladoc</a>)</li> 
   <li><a href="http://redis.io/commands#server" target="_blank">Server</a> (<a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.commands.Server" target="_blank">scaladoc</a>)</li> 
  </ul> 
  <h3><a id="user-content-blocking-commands" class="anchor" href="https://github.com/barcahead/rediscala#blocking-commands" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Blocking commands</h3> 
  <p><a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.RedisBlockingClient" target="_blank">RedisBlockingClient</a> is the instance allowing access to blocking commands :</p> 
  <ul> 
   <li>blpop</li> 
   <li>brpop</li> 
   <li>brpopplush</li> 
  </ul> 
  <div class="highlight highlight-source-scala">
   <pre>  redisBlocking.blpop(<span class="pl-en">Seq</span>(<span class="pl-s"><span class="pl-pds">"</span>workList<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>otherKeyWithWork<span class="pl-pds">"</span></span>), <span class="pl-c1">5</span> seconds).map(result <span class="pl-k">=&gt;</span> {
    result.map({
      <span class="pl-k">case</span> (key, work) <span class="pl-k">=&gt;</span> println(s<span class="pl-s"><span class="pl-pds">"</span>list $key has work : ${work.utf8String}<span class="pl-pds">"</span></span>)
    })
  })</pre>
  </div> 
  <p>Full example: <a href="https://github.com/etaty/rediscala-demo/blob/master/src/main/scala/ExampleRediscalaBlocking.scala" target="_blank">ExampleRediscalaBlocking</a></p> 
  <p>You can fork with: <code>git clone git@github.com:etaty/rediscala-demo.git</code> then run it, with <code>sbt run</code></p> 
  <h3><a id="user-content-transactions" class="anchor" href="https://github.com/barcahead/rediscala#transactions" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Transactions</h3> 
  <p>The idea behind transactions in Rediscala is to start a transaction outside of a redis connection. We use the <a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.commands.TransactionBuilder" target="_blank">TransactionBuilder</a> to store call to redis commands (and for each command we give back a future). When <code>exec</code> is called, <code>TransactionBuilder</code> will build and send all the commands together to the server. Then the futures will be completed. By doing that we can use a normal connection with pipelining, and avoiding to trap a command from outside, in the transaction...</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-k">val</span> <span class="pl-en">redisTransaction</span> <span class="pl-k">=</span> redis.transaction() <span class="pl-c"><span class="pl-c">//</span> new TransactionBuilder</span>
  redisTransaction.watch(<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>)
  <span class="pl-k">val</span> <span class="pl-en">set</span> <span class="pl-k">=</span> redisTransaction.set(<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>abcValue<span class="pl-pds">"</span></span>)
  <span class="pl-k">val</span> <span class="pl-en">decr</span> <span class="pl-k">=</span> redisTransaction.decr(<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>)
  <span class="pl-k">val</span> <span class="pl-en">get</span> <span class="pl-k">=</span> redisTransaction.get(<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>)
  redisTransaction.exec()</pre>
  </div> 
  <p>Full example: <a href="https://github.com/etaty/rediscala-demo/blob/master/src/main/scala/ExampleTransaction.scala" target="_blank">ExampleTransaction</a></p> 
  <p>You can fork with : <code>git clone git@github.com:etaty/rediscala-demo.git</code> then run it, with <code>sbt run</code></p> 
  <p><a href="https://github.com/etaty/rediscala/blob/master/src/test/scala/redis/commands/TransactionsSpec.scala" target="_blank">TransactionsSpec</a> will reveal even more gems of the API.</p> 
  <h3><a id="user-content-pubsub" class="anchor" href="https://github.com/barcahead/rediscala#pubsub" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Pub/Sub</h3> 
  <p>You can use a case class with callbacks <a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.RedisPubSub" target="_blank">RedisPubSub</a> or extend the actor <a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.actors.RedisSubscriberActor" target="_blank">RedisSubscriberActor</a> as shown in the example below</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">object</span> <span class="pl-en">ExamplePubSub</span> <span class="pl-k">extends</span> <span class="pl-e">App</span> {
  <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">akkaSystem</span> <span class="pl-k">=</span> akka.actor.<span class="pl-en">ActorSystem</span>()

  <span class="pl-k">val</span> <span class="pl-en">redis</span> <span class="pl-k">=</span> <span class="pl-en">RedisClient</span>()

  <span class="pl-c"><span class="pl-c">//</span> publish after 2 seconds every 2 or 5 seconds</span>
  akkaSystem.scheduler.schedule(<span class="pl-c1">2</span> seconds, <span class="pl-c1">2</span> seconds)(redis.publish(<span class="pl-s"><span class="pl-pds">"</span>time<span class="pl-pds">"</span></span>, <span class="pl-en">System</span>.currentTimeMillis()))
  akkaSystem.scheduler.schedule(<span class="pl-c1">2</span> seconds, <span class="pl-c1">5</span> seconds)(redis.publish(<span class="pl-s"><span class="pl-pds">"</span>pattern.match<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>pattern value<span class="pl-pds">"</span></span>))
  <span class="pl-c"><span class="pl-c">//</span> shutdown Akka in 20 seconds</span>
  akkaSystem.scheduler.scheduleOnce(<span class="pl-c1">20</span> seconds)(akkaSystem.shutdown())

  <span class="pl-k">val</span> <span class="pl-en">channels</span> <span class="pl-k">=</span> <span class="pl-en">Seq</span>(<span class="pl-s"><span class="pl-pds">"</span>time<span class="pl-pds">"</span></span>)
  <span class="pl-k">val</span> <span class="pl-en">patterns</span> <span class="pl-k">=</span> <span class="pl-en">Seq</span>(<span class="pl-s"><span class="pl-pds">"</span>pattern.*<span class="pl-pds">"</span></span>)
  <span class="pl-c"><span class="pl-c">//</span> create SubscribeActor instance</span>
  akkaSystem.actorOf(<span class="pl-en">Props</span>(<span class="pl-c1">classOf</span>[<span class="pl-en">SubscribeActor</span>], channels, patterns).withDispatcher(<span class="pl-s"><span class="pl-pds">"</span>rediscala.rediscala-client-worker-dispatcher<span class="pl-pds">"</span></span>))

}

<span class="pl-k">class</span> <span class="pl-en">SubscribeActor</span>(<span class="pl-v">channels</span>: <span class="pl-en">Seq</span>[<span class="pl-k">String</span>] <span class="pl-k">=</span> <span class="pl-c1">Nil</span>, <span class="pl-v">patterns</span>: <span class="pl-en">Seq</span>[<span class="pl-k">String</span>] <span class="pl-k">=</span> <span class="pl-c1">Nil</span>) <span class="pl-k">extends</span> <span class="pl-e">RedisSubscriberActor</span>(channels, patterns) {
  <span class="pl-k">override</span> <span class="pl-k">val</span> <span class="pl-en">address</span><span class="pl-k">:</span> <span class="pl-en">InetSocketAddress</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">InetSocketAddress</span>(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, <span class="pl-c1">6379</span>)

  <span class="pl-k">def</span> <span class="pl-en">onMessage</span>(<span class="pl-v">message</span>: <span class="pl-en">Message</span>) {
    println(s<span class="pl-s"><span class="pl-pds">"</span>message received: $message<span class="pl-pds">"</span></span>)
  }

  <span class="pl-k">def</span> <span class="pl-en">onPMessage</span>(<span class="pl-v">pmessage</span>: <span class="pl-en">PMessage</span>) {
    println(s<span class="pl-s"><span class="pl-pds">"</span>pattern message received: $pmessage<span class="pl-pds">"</span></span>)
  }
}</pre>
  </div> 
  <p>Full example: <a href="https://github.com/etaty/rediscala-demo/blob/master/src/main/scala/ExamplePubSub.scala" target="_blank">ExamplePubSub</a></p> 
  <p>You can fork with : <code>git clone git@github.com:etaty/rediscala-demo.git</code> then run it, with <code>sbt run</code></p> 
  <p><a href="https://github.com/etaty/rediscala/blob/master/src/test/scala/redis/RedisPubSubSpec.scala.scala" target="_blank">RedisPubSubSpec</a> will reveal even more gems of the API.</p> 
  <h3><a id="user-content-scripting" class="anchor" href="https://github.com/barcahead/rediscala#scripting" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scripting</h3> 
  <p><code>RedisScript</code> is a helper, you can put your LUA script inside and it will compute the hash. You can use it with <code>evalshaOrEval</code> which run your script even if it wasn't already loaded.</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-k">val</span> <span class="pl-en">redis</span> <span class="pl-k">=</span> <span class="pl-en">RedisClient</span>()

  <span class="pl-k">val</span> <span class="pl-en">redisScript</span> <span class="pl-k">=</span> <span class="pl-en">RedisScript</span>(<span class="pl-s"><span class="pl-pds">"</span>return 'rediscala'<span class="pl-pds">"</span></span>)

  <span class="pl-k">val</span> <span class="pl-en">r</span> <span class="pl-k">=</span> redis.evalshaOrEval(redisScript).map({
    <span class="pl-k">case</span> <span class="pl-v">b</span>: <span class="pl-en">Bulk</span> <span class="pl-k">=&gt;</span> println(b.toString())
  })
  <span class="pl-en">Await</span>.result(r, <span class="pl-c1">5</span> seconds)</pre>
  </div> 
  <p>Full example: <a href="https://github.com/etaty/rediscala-demo/blob/master/src/main/scala/ExampleScripting.scala" target="_blank">ExampleScripting</a></p> 
  <h3><a id="user-content-redis-sentinel" class="anchor" href="https://github.com/barcahead/rediscala#redis-sentinel" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Redis Sentinel</h3> 
  <p><a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.SentinelClient" target="_blank">SentinelClient</a> connect to a redis sentinel server.</p> 
  <p><a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.SentinelMonitoredRedisClient" target="_blank">SentinelMonitoredRedisClient</a> connect to a sentinel server to find the master addresse then start a connection. In case the master change your RedisClient connection will automatically connect to the new master server. If you are using a blocking client, you can use <a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.SentinelMonitoredRedisBlockingClient" target="_blank">SentinelMonitoredRedisBlockingClient</a></p> 
  <h3><a id="user-content-pool" class="anchor" href="https://github.com/barcahead/rediscala#pool" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Pool</h3> 
  <p><a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.RedisClientPool" target="_blank">RedisClientPool</a> connect to a pool of redis servers. Redis commands are dispatched to redis connection in a round robin way.</p> 
  <h3><a id="user-content-master-slave" class="anchor" href="https://github.com/barcahead/rediscala#master-slave" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Master Slave</h3> 
  <p><a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.RedisClientMasterSlaves" target="_blank">RedisClientMasterSlaves</a> connect to a master and a pool of slaves. The <code>write</code> commands are sent to the master, while the read commands are sent to the slaves in the <a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.RedisClientPool" target="_blank">RedisClientPool</a></p> 
  <h3><a id="user-content-bytestringserializer-bytestringdeserializer-bytestringformatter" class="anchor" href="https://github.com/barcahead/rediscala#bytestringserializer-bytestringdeserializer-bytestringformatter" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>ByteStringSerializer ByteStringDeserializer ByteStringFormatter</h3> 
  <p><a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.ByteStringSerializer" target="_blank">ByteStringSerializer</a></p> 
  <p><a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.ByteStringDeserializer" target="_blank">ByteStringDeserializer</a></p> 
  <p><a href="http://etaty.github.io/rediscala/latest/api/index.html#redis.ByteStringFormatter" target="_blank">ByteStringFormatter</a></p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">DumbClass</span>(<span class="pl-v">s1</span>: <span class="pl-k">String</span>, <span class="pl-v">s2</span>: <span class="pl-k">String</span>)

<span class="pl-k">object</span> <span class="pl-en">DumbClass</span> {
  <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">byteStringFormatter</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">ByteStringFormatter</span>[<span class="pl-en">DumbClass</span>] {
    <span class="pl-k">def</span> <span class="pl-en">serialize</span>(<span class="pl-v">data</span>: <span class="pl-en">DumbClass</span>)<span class="pl-k">:</span> <span class="pl-en">ByteString</span> <span class="pl-k">=</span> {
      <span class="pl-c"><span class="pl-c">//</span>...</span>
    }

    <span class="pl-k">def</span> <span class="pl-en">deserialize</span>(<span class="pl-v">bs</span>: <span class="pl-en">ByteString</span>)<span class="pl-k">:</span> <span class="pl-en">DumbClass</span> <span class="pl-k">=</span> {
      <span class="pl-c"><span class="pl-c">//</span>...</span>
    }
  }
}
<span class="pl-c"><span class="pl-c">//</span>...</span>

  <span class="pl-k">val</span> <span class="pl-en">dumb</span> <span class="pl-k">=</span> <span class="pl-en">DumbClass</span>(<span class="pl-s"><span class="pl-pds">"</span>s1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>s2<span class="pl-pds">"</span></span>)

  <span class="pl-k">val</span> <span class="pl-en">r</span> <span class="pl-k">=</span> <span class="pl-k">for</span> {
    set <span class="pl-k">&lt;</span><span class="pl-k">-</span> redis.set(<span class="pl-s"><span class="pl-pds">"</span>dumbKey<span class="pl-pds">"</span></span>, dumb)
    getDumbOpt <span class="pl-k">&lt;</span><span class="pl-k">-</span> redis.get[<span class="pl-en">DumbClass</span>](<span class="pl-s"><span class="pl-pds">"</span>dumbKey<span class="pl-pds">"</span></span>)
  } <span class="pl-k">yield</span> {
    getDumbOpt.map(getDumb <span class="pl-k">=&gt;</span> {
      assert(getDumb <span class="pl-k">==</span> dumb)
      println(getDumb)
    })
  }</pre>
  </div> 
  <p>Full example: <a href="https://github.com/etaty/rediscala-demo/blob/master/src/main/scala/ExampleByteStringFormatter.scala" target="_blank">ExampleByteStringFormatter</a></p> 
  <h3><a id="user-content-scaladoc" class="anchor" href="https://github.com/barcahead/rediscala#scaladoc" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scaladoc</h3> 
  <p><a href="http://etaty.github.io/rediscala/latest/api/index.html#package" target="_blank">Rediscala scaladoc API (latest version 1.4)</a></p> 
  <p><a href="http://etaty.github.io/rediscala/1.3/api/index.html#package" target="_blank">Rediscala scaladoc API (version 1.3)</a></p> 
  <p><a href="http://etaty.github.io/rediscala/1.2/api/index.html#package" target="_blank">Rediscala scaladoc API (version 1.2)</a></p> 
  <p><a href="http://etaty.github.io/rediscala/1.1/api/index.html#package" target="_blank">Rediscala scaladoc API (version 1.1)</a></p> 
  <p><a href="http://etaty.github.io/rediscala/1.0/api/index.html#package" target="_blank">Rediscala scaladoc API (version 1.0)</a></p> 
  <h3><a id="user-content-performance" class="anchor" href="https://github.com/barcahead/rediscala#performance" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Performance</h3> 
  <p>More than 250 000 requests/second</p> 
  <ul> 
   <li><a href="http://bit.ly/rediscalabench-1-1" target="_blank">benchmark result from scalameter</a></li> 
   <li><a href="https://github.com/etaty/rediscala/tree/master/src/benchmark/scala/redis/bench" target="_blank">sources directory</a></li> 
  </ul> 
  <p>The hardware used is a macbook retina (Intel Core i7, 2.6 GHz, 4 cores, 8 threads, 8GB) running the sun/oracle jvm 1.6</p> 
  <p>You can run the bench with :</p> 
  <ol> 
   <li>clone the repo <code>git clone git@github.com:etaty/rediscala.git</code></li> 
   <li>run <code>sbt bench:test</code></li> 
   <li>open the bench report <code>rediscala/tmp/report/index.html</code></li> 
  </ol> 
 </article>
</div>