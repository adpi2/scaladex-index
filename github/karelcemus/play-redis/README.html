<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1 align="center"><a id="user-content-redis-cache-module-for-play-framework" class="anchor" href="https://github.com/karelcemus/play-redis#redis-cache-module-for-play-framework" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Redis Cache module for Play framework</h1> 
  <p align="center"><strong>Note: This version supports Play framework 2.5.x with JDK 8.<br>For previous versions see older releases.</strong></p> 
  <p align="center"> <a href="https://travis-ci.org/KarelCemus/play-redis" target="_blank"><img src="https://camo.githubusercontent.com/26a896fdf939394f04d10fee125b30416231053a/68747470733a2f2f7472617669732d63692e6f72672f4b6172656c43656d75732f706c61792d72656469732e7376673f6272616e63683d6d6173746572" data-canonical-src="https://travis-ci.org/KarelCemus/play-redis.svg?branch=master" style="max-width:100%;"></a> </p> 
  <p>By default, <a href="http://playframework.com/" target="_blank">Play framework 2</a> is delivered with EHCache module implementing <a href="https://www.playframework.com/documentation/2.5.x/api/scala/index.html#play.api.cache.CacheApi" target="_blank">CacheApi</a>. This module enables use of the <strong>redis-server</strong>, i.e., key/value cache, within the Play framework 2. Besides the backward compatibility with the <a href="https://www.playframework.com/documentation/2.5.x/api/scala/index.html#play.api.cache.CacheApi" target="_blank">CacheApi</a>, it introduces more evolved API providing various handful operations. Besides the basic methods such as <code>get</code>, <code>set</code> and <code>remove</code>, it provides more convenient methods such as <code>expire</code>, <code>exists</code>, <code>invalidate</code> and much more. As the cache implementation uses Akka actor system, it is <strong>completely non-blocking and asynchronous</strong>. Furthermore, we deliver the library with several configuration providers to let you easily use play-redis on Heroku as well as on your premise.</p> 
  <h2><a id="user-content-provided-apis" class="anchor" href="https://github.com/karelcemus/play-redis#provided-apis" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Provided APIs</h2> 
  <p>This library delivers a single module with following implementations of the API. While the core of the framework is fully non-blocking, most of provided facades are <em>blocking wrappers</em>.</p> 
  <ol> 
   <li><code>play.api.cache.redis.CacheApi</code> (<em>blocking</em> Scala implementation)</li> 
   <li><code>play.api.cache.redis.CacheAsyncApi</code> (non-blocking Scala implementation)</li> 
   <li><code>play.api.cache.CacheApi</code> (Play's <em>blocking</em> API for Scala)</li> 
   <li><code>play.cache.CacheApi</code> (Play's <em>blocking</em> API for Java)</li> 
  </ol> 
  <p>First, the <code>CacheApi</code> is extended <code>play.api.cache.CacheApi</code> and it implements the connection in the <strong>blocking</strong> manner. Second, the <code>CacheAsyncApi</code> enables <strong>non-blocking</strong> connection providing results through <code>scala.concurrent.Future</code>. Third, the synchronous implementation also implements standard <code>CacheApi</code> bundled within Play framework. Finally, the <code>play.cache.CacheApi</code> is implementation of standard <code>CacheApi</code> for Java.</p> 
  <h2><a id="user-content-how-to-add-the-module-into-the-project" class="anchor" href="https://github.com/karelcemus/play-redis#how-to-add-the-module-into-the-project" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>How to add the module into the project</h2> 
  <p><strong>Since 1.3.x version</strong> this module builds over <a href="https://github.com/scredis/scredis" target="_blank">Scredis connector</a> and is intended <strong>only for Scala version</strong> of the Play framework.</p> 
  <p>To your SBT <code>build.sbt</code> add the following lines:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">//</span> enable Play cache API (based on your Play version) and optionally exclude EhCache implementation</span>
libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> play.sbt.<span class="pl-en">PlayImport</span>.cache exclude(<span class="pl-s"><span class="pl-pds">"</span>net.sf.ehcache<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>ehcache-core<span class="pl-pds">"</span></span>)
<span class="pl-c"><span class="pl-c">//</span> include play-redis library</span>
libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.github.karelcemus<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>play-redis<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.3.0-M1<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>Now we <strong>must enable our redis</strong> cache module and <strong>disable default Play's EhCache</strong> module. Into <code>application.conf</code> and following two lines:</p> 
  <pre><code># disable default Play framework cache plugin
play.modules.disabled += "play.api.cache.EhCacheModule"

# enable redis cache module
play.modules.enabled += "play.api.cache.redis.RedisCacheModule"
</code></pre> 
  <h2><a id="user-content-how-to-use-this-module" class="anchor" href="https://github.com/karelcemus/play-redis#how-to-use-this-module" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>How to use this module</h2> 
  <p>When you have the library added to your project, you can safely inject the <code>play.api.cache.redis.CacheApi</code> trait for the synchronous cache. If you want the asynchronous implementation, then inject <code>play.api.cache.redis.CacheAsyncApi</code>. There might be some limitations with data types but it should not be anything major. (Note: it uses Akka serialization. Supported data types are primitives, objects serializable through the java serialization and collections.) If you encounter any issue, <strong>please feel free to report it</strong>.</p> 
  <p><strong>Example:</strong></p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">scala.concurrent.</span><span class="pl-v">Future</span>
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.duration.</span><span class="pl-v">_</span>

<span class="pl-k">import</span> <span class="pl-v">play.api.cache.redis.</span><span class="pl-v">CacheApi</span>

<span class="pl-k">class</span> <span class="pl-en">MyController</span> <span class="pl-k">@</span><span class="pl-en">Inject</span>() ( <span class="pl-v">cache</span>: <span class="pl-en">CacheApi</span> ) {

  cache.set( <span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span> )
  <span class="pl-c"><span class="pl-c">//</span> returns Option[ T ] where T stands for String in this example</span>
  cache.get[ <span class="pl-k">String</span> ]( <span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span> )
  cache.remove( <span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span> )

  cache.set( <span class="pl-s"><span class="pl-pds">"</span>object<span class="pl-pds">"</span></span>, <span class="pl-en">MyCaseClass</span>() )
  <span class="pl-c"><span class="pl-c">//</span> returns Option[ T ] where T stands for MyCaseClass</span>
  cache.get[ <span class="pl-en">MyCaseClass</span> ]( <span class="pl-s"><span class="pl-pds">"</span>object<span class="pl-pds">"</span></span> )

  <span class="pl-c"><span class="pl-c">//</span> returns Unit</span>
  cache.set( <span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>, <span class="pl-c1">1.23</span> )

  <span class="pl-c"><span class="pl-c">//</span> returns Option[ Double ]</span>
  cache.get[ <span class="pl-k">Double</span> ]( <span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span> )
  <span class="pl-c"><span class="pl-c">//</span> returns Option[ MyCaseClass ]</span>
  cache.get[ <span class="pl-en">MyCaseClass</span> ]( <span class="pl-s"><span class="pl-pds">"</span>object<span class="pl-pds">"</span></span> )

  <span class="pl-c"><span class="pl-c">//</span> returns T where T is Double. If the value is not in the cache</span>
  <span class="pl-c"><span class="pl-c">//</span> the computed result is saved</span>
  cache.getOrElse( <span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span> )( <span class="pl-c1">1.24</span> )

  <span class="pl-c"><span class="pl-c">//</span> same as getOrElse but works for Futures. It returns Future[ T ]</span>
  cache.getOrFuture( <span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span> )( <span class="pl-en">Future</span>( <span class="pl-c1">1.24</span> ) )

  <span class="pl-c"><span class="pl-c">//</span> returns Unit and removes a key/keys from the storage</span>
  cache.remove( <span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span> )
  cache.remove( <span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>key2<span class="pl-pds">"</span></span> )
  cache.remove( <span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>key2<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>key3<span class="pl-pds">"</span></span> )
  <span class="pl-c"><span class="pl-c">//</span> remove all expects a sequence of keys, it performs same be behavior</span>
  <span class="pl-c"><span class="pl-c">//</span> as remove methods, they are just syntax sugar</span>
  cache.removeAll( <span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>key2<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>key3<span class="pl-pds">"</span></span> )

  <span class="pl-c"><span class="pl-c">//</span> removes all keys in the redis database! Beware using it</span>
  cache.invalidate()

  <span class="pl-c"><span class="pl-c">//</span> refreshes expiration of the key if present</span>
  cache.expire( <span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>, <span class="pl-c1">1.</span>second )

  <span class="pl-c"><span class="pl-c">//</span> stores the value for infinite time if the key is not used</span>
  <span class="pl-c"><span class="pl-c">//</span> returns true when store performed successfully</span>
  <span class="pl-c"><span class="pl-c">//</span> returns false when some value was already defined</span>
  cache.setIfNotExists( <span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>, <span class="pl-c1">1.23</span> )
  <span class="pl-c"><span class="pl-c">//</span> stores the value for limited time if the key is not used</span>
  <span class="pl-c"><span class="pl-c">//</span> this is not atomic operation, redis does not provide direct support</span>
  cache.setIfNotExists( <span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>, <span class="pl-c1">1.23</span>, <span class="pl-c1">5.</span>seconds )

  <span class="pl-c"><span class="pl-c">//</span> returns true if the key is in the storage, false otherwise</span>
  cache.exists( <span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span> )

  <span class="pl-c"><span class="pl-c">//</span> returns all keys matching given pattern. Beware, complexity is O(n),</span>
  <span class="pl-c"><span class="pl-c">//</span> where n is the size of the database. It executes KEYS command.</span>
  cache.matching( <span class="pl-s"><span class="pl-pds">"</span>page/1/*<span class="pl-pds">"</span></span> )

  <span class="pl-c"><span class="pl-c">//</span> removes all keys matching given pattern. Beware, complexity is O(n),</span>
  <span class="pl-c"><span class="pl-c">//</span> where n is the size of the database. It internally uses method matching.</span>
  <span class="pl-c"><span class="pl-c">//</span> It executes KEYS and DEL commands in a transaction.</span>
  cache.removeMatching( <span class="pl-s"><span class="pl-pds">"</span>page/1/*<span class="pl-pds">"</span></span> )

  <span class="pl-c"><span class="pl-c">//</span> importing `play.api.cache.redis._` enables us</span>
  <span class="pl-c"><span class="pl-c">//</span> using both `java.util.Date` and `org.joda.time.DateTime` as expiration</span>
  <span class="pl-c"><span class="pl-c">//</span> dates instead of duration. These implicits are useful when</span>
  <span class="pl-c"><span class="pl-c">//</span> we know the data regularly changes, e.g., at midnight, at 3 AM, etc.</span>
  <span class="pl-c"><span class="pl-c">//</span> We do not have compute the duration ourselves, the library</span>
  <span class="pl-c"><span class="pl-c">//</span> can do it for us</span>
  <span class="pl-k">import</span> <span class="pl-v">play.api.cache.redis.</span><span class="pl-v">_</span>
  cache.set( <span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>, <span class="pl-en">DateTime</span>.parse( <span class="pl-s"><span class="pl-pds">"</span>2015-12-01T00:00<span class="pl-pds">"</span></span> ).asExpiration )

  <span class="pl-c"><span class="pl-c">//</span> atomically increments stored value by one</span>
  <span class="pl-c"><span class="pl-c">//</span> initializes with 0 if not exists</span>
  cache.increment( <span class="pl-s"><span class="pl-pds">"</span>integer<span class="pl-pds">"</span></span> ) <span class="pl-c"><span class="pl-c">//</span> returns 1</span>
  cache.increment( <span class="pl-s"><span class="pl-pds">"</span>integer<span class="pl-pds">"</span></span> ) <span class="pl-c"><span class="pl-c">//</span> returns 2</span>
  cache.increment( <span class="pl-s"><span class="pl-pds">"</span>integer<span class="pl-pds">"</span></span>, <span class="pl-c1">5</span> ) <span class="pl-c"><span class="pl-c">//</span> returns 7</span>

  <span class="pl-c"><span class="pl-c">//</span> atomically decrements stored value by one</span>
  <span class="pl-c"><span class="pl-c">//</span> initializes with 0 if not exists</span>
  cache.decrement( <span class="pl-s"><span class="pl-pds">"</span>integer<span class="pl-pds">"</span></span> ) <span class="pl-c"><span class="pl-c">//</span> returns -1</span>
  cache.decrement( <span class="pl-s"><span class="pl-pds">"</span>integer<span class="pl-pds">"</span></span> ) <span class="pl-c"><span class="pl-c">//</span> returns -2</span>
  cache.decrement( <span class="pl-s"><span class="pl-pds">"</span>integer<span class="pl-pds">"</span></span>, <span class="pl-c1">5</span> ) <span class="pl-c"><span class="pl-c">//</span> returns -7</span>
}</pre>
  </div> 
  <h2><a id="user-content-checking-operation-result" class="anchor" href="https://github.com/karelcemus/play-redis#checking-operation-result" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Checking operation result</h2> 
  <p>Regardless of current API, all operations throw an exception when fail. Consequently, successful invocations do not throw an exception. The only difference is in checking for errors. While synchronous APIs really throw an exception, asynchronous API returns a <code>Future</code> wrapping both the success and the exception, i.e., use <code>onFailure</code> or <code>onComplete</code> to check for errors.</p> 
  <h2><a id="user-content-configuration" class="anchor" href="https://github.com/karelcemus/play-redis#configuration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Configuration</h2> 
  <p>There is already default configuration but it can be overwritten in your <code>conf/application.conf</code> file.</p> 
  <table>
   <thead> 
    <tr> 
     <th>Key</th> 
     <th align="right">Type</th> 
     <th align="right">Default</th> 
     <th>Description</th> 
    </tr> 
   </thead>
   <tbody> 
    <tr> 
     <td>play.cache.redis.host</td> 
     <td align="right">String</td> 
     <td align="right"><code>localhost</code></td> 
     <td>redis-server address</td> 
    </tr> 
    <tr> 
     <td>play.cache.redis.port</td> 
     <td align="right">Int</td> 
     <td align="right"><code>6379</code></td> 
     <td>redis-server port</td> 
    </tr> 
    <tr> 
     <td>play.cache.redis.database</td> 
     <td align="right">Int</td> 
     <td align="right"><code>1</code></td> 
     <td>redis-server database, 1-15</td> 
    </tr> 
    <tr> 
     <td>play.cache.redis.timeout</td> 
     <td align="right">Duration</td> 
     <td align="right"><code>1s</code></td> 
     <td>connection timeout</td> 
    </tr> 
    <tr> 
     <td>play.cache.redis.dispatcher</td> 
     <td align="right">String</td> 
     <td align="right"><code>akka.actor.default-dispatcher</code></td> 
     <td>Akka actor</td> 
    </tr> 
    <tr> 
     <td>play.cache.redis.configuration</td> 
     <td align="right">String</td> 
     <td align="right"><code>static</code></td> 
     <td>Defines which configuration source enable. Accepted values are <code>static</code>, <code>env</code>, <code>custom</code></td> 
    </tr> 
    <tr> 
     <td>play.cache.redis.password</td> 
     <td align="right">String</td> 
     <td align="right"><code>null</code></td> 
     <td>When authentication is required, this is the password. Value is optional.</td> 
    </tr> 
    <tr> 
     <td>play.cache.redis.connection-string-variable</td> 
     <td align="right">String</td> 
     <td align="right"><code>REDIS_URL</code></td> 
     <td>Name of the environment variable with the connection string. This is used in combination with the <code>env</code> configuration. This allows customization of the variable name in PaaS environment. Value is optional.</td> 
    </tr> 
    <tr> 
     <td>play.cache.redis.recovery</td> 
     <td align="right">String</td> 
     <td align="right"><code>log-and-default</code></td> 
     <td>Defines behavior when command execution fails. Accepted values are <code>log-and-fail</code> to log the error and rethrow the exception, <code>log-and-default</code> to log the failure and return default value neutral to the operation, <code>log-condensed-and-default</code> <code>log-condensed-and-fail</code> produce shorter but less informative error logs, and <code>custom</code> indicates the user binds his own implementation of <code>RecoveryPolicy</code>.</td> 
    </tr> 
   </tbody>
  </table> 
  <h3><a id="user-content-recovery-policy" class="anchor" href="https://github.com/karelcemus/play-redis#recovery-policy" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Recovery policy</h3> 
  <p>The intention of cache is usually to optimize the application behavior, not to provide any business logic. In this case it makes sense the cache could be removed without any visible change except for possible performance loss. In consequence, we think that <strong>failed cache requests should not break the application flow</strong>, they should be logged and ignored. However, not always this is desired behavior. To resolve this ambiguity, we provide <code>RecoveryPolicy</code> trait implementing the behavior to be executed when the cache request fails. By default, we provide two implementations. They both log the failure at first and while one produces the exception and let the application to deal with it, the other returns some neutral value, which should result in behavior like there is no cache. However, besides these, it is possible, e.g., to also rerun a failed command. For more information see <code>RecoveryPolicy</code> trait.</p> 
  <h3><a id="user-content-connection-settings-on-different-platforms" class="anchor" href="https://github.com/karelcemus/play-redis#connection-settings-on-different-platforms" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Connection settings on different platforms</h3> 
  <p>In various environments there are various sources of the connection string defining how to connect to Redis instance. For example, at localhost we are interested in direct definition of host and port in the <code>application.conf</code> file. However, this approach does not fit all environments. For example, Heroku supplies <code>REDISCLOUD_URL</code> environment variable defining the connection string. To resolve this diversity, the library expects an implementation of the <code>Configuration</code> trait available through DI. By default, it enables <code>static</code> configuration source, i.e., it reads the settings from the static configuration file. Another supplied configuration reader is <code>env</code>, which reads the environment variable such as <code>REDIS_URL</code> but the variable name is configurable. To easy use on Heroku, we also provide <code>heroku</code> configuration profile expecting <code>REDISCLOUD_URL</code> variable. To disable built-in providers you are free to set <code>custom</code> and supply your own implementation of the <code>Configuration</code> trait.</p> 
  <h3><a id="user-content-running-on-heroku" class="anchor" href="https://github.com/karelcemus/play-redis#running-on-heroku" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Running on Heroku</h3> 
  <p>To enable redis cache on Heroku we have to do the following steps:</p> 
  <ol> 
   <li>add library into application dependencies</li> 
   <li>enable <code>RedisCacheModule</code></li> 
   <li>disable <code>EhCacheModule</code></li> 
   <li>set either <code>play.cache.redis.configuration: "heroku"</code> or <code>play.cache.redis.configuration: "heroku-cloud"</code> depending whether your Heroku addon provides <code>REDIS_URL</code> or <code>REDISCLOUD_URL</code> environment variable.<br></li> 
   <li>done, we can run it and use any of 3 provided interfaces</li> 
  </ol> 
  <h3><a id="user-content-custom-configuration-source" class="anchor" href="https://github.com/karelcemus/play-redis#custom-configuration-source" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Custom configuration source</h3> 
  <p>However, there are scenarios when we need to customize the configuration to better fit our needs. Usually, we might encounter this when we have a specific development flow or use a specific PaaS. To enable redis cache implementation with customized configuration we have to do the following steps:</p> 
  <ol> 
   <li>add library into application dependencies</li> 
   <li>enable <code>RedisCacheModule</code></li> 
   <li>disable <code>EhCacheModule</code></li> 
   <li>set <code>play.cache.redis.configuration: custom</code></li> 
   <li>Implement <code>play.api.cache.redis.Configuration</code> trait</li> 
   <li>Register the implementation into DI provider. This is specific for each provider. If you are using Guice, which is Play's default DI provider, then look <a href="https://playframework.com/documentation/2.5.x/ScalaDependencyInjection#Advanced:-Extending-the-GuiceApplicationLoader" target="_blank">here</a>. It gives you a hint how to register the implementation during application start.</li> 
   <li>done, we can run it and use any of 3 provided interfaces</li> 
  </ol> 
  <h2><a id="user-content-caveat" class="anchor" href="https://github.com/karelcemus/play-redis#caveat" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Caveat</h2> 
  <p>The library <strong>does not enable</strong> the redis module by default. It is to avoid conflict with Play's default EhCache. The Play discourages disabling modules within the library thus it leaves it up to developers to disable EhCache and enable Redis manually. This also allows you to use EhCache in your <em>dev</em> environment and redis in <em>production</em>. Nevertheless, this module <strong>replaces</strong> the EHCache and it is not intended to use both implementations along.</p> 
  <h2><a id="user-content-compatibility-matrix" class="anchor" href="https://github.com/karelcemus/play-redis#compatibility-matrix" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Compatibility matrix</h2> 
  <p></p>
  <p></p> 
  <table>
   <thead> 
    <tr> 
     <th>play framework</th> 
     <th align="right">play-redis</th> 
    </tr> 
   </thead>
   <tbody> 
    <tr> 
     <td>2.5.x</td> 
     <td align="right">1.3.0</td> 
    </tr> 
    <tr> 
     <td>2.4.x</td> 
     <td align="right">1.0.0</td> 
    </tr> 
    <tr> 
     <td>2.3.x</td> 
     <td align="right">0.2.1</td> 
    </tr> 
   </tbody>
  </table> 
  <p></p>
  <p></p> 
  <h2><a id="user-content-changelog" class="anchor" href="https://github.com/karelcemus/play-redis#changelog" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Changelog</h2> 
  <h3><a id="user-content-link-130-possibly-breaking" class="anchor" href="https://github.com/karelcemus/play-redis#link-130-possibly-breaking" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><a href="https://github.com/KarelCemus/play-redis/tree/1.3.0" target="_blank">
    <g-emoji alias="link" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f517.png" ios-version="6.0">
     🔗
    </g-emoji> 1.3.0</a> (Possibly breaking)</h3> 
  <p>Major internal code refactoring, library has been modularized into several packages. However, <strong>public API remained unchanged</strong>, although its implementation significantly changed.</p> 
  <p>Added <code>heroku</code> and <code>heroku-cloud</code> configuration profiles simplifying <a href="https://github.com/karelcemus/play-redis#running-on-heroku" target="_blank">running on Heroku</a>.</p> 
  <p>Introduced <a href="https://github.com/karelcemus/play-redis#recovery-policy" target="_blank"><code>RecoveryPolicy</code></a> defining behavior when execution fails. Default policy is <code>log-and-default</code>. To re-enable previous <em>fail-on-error</em> behavior, set <code>log-and-fail</code>. See the <a href="https://github.com/karelcemus/play-redis#recovery-policy" target="_blank"><code>RecoveryPolicy</code></a> for more details.</p> 
  <p><strong><a href="https://github.com/chrisdinn/brando" target="_blank">Brando</a> connector replaced by <a href="https://github.com/scredis/scredis" target="_blank">scredis</a> implementation</strong> due to Brando repository inactivity and major issues (<a href="https://github.com/KarelCemus/play-redis/issues/44" target="_blank">#44</a>). Scredis seems to be efficient, build over Akka and should not contain any major issues as they are not reported.</p> 
  <h3><a id="user-content-link-120" class="anchor" href="https://github.com/karelcemus/play-redis#link-120" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><a href="https://github.com/KarelCemus/play-redis/tree/1.2.0" target="_blank">
    <g-emoji alias="link" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f517.png" ios-version="6.0">
     🔗
    </g-emoji> 1.2.0</a></h3> 
  <p>Play-redis provides native serialization support to basic data types such as String, Int, etc. However, for other objects including collections, it used to use default <code>JavaSerializer</code> serializer. Since Akka 2.4.1, default <code>JavaSerializer</code> is <a href="https://github.com/akka/akka/pull/18552" target="_blank">officially considered inefficient for production use</a>. Nevertheless, to keep things simple, play-redis <strong>still uses this inefficient serializer NOT to enforce</strong> any serialization library to end users. Although, it recommends <a href="https://github.com/romix/akka-kryo-serialization" target="_blank">kryo serializer</a> claiming great performance and small output stream. Any serialization library can be smoothly connected through Akka configuration, see the <a href="http://doc.akka.io/docs/akka/current/scala/serialization.html" target="_blank">official Akka documentation</a>.</p> 
  <p>This release is focused on library refactoring. While <strong>public API remained unchanged</strong>, there are several significant changes to their implementations. Those are consequences of refactoring some functionality into self-standing units. For example, there has been extracted <code>RedisConnector</code> implementing the <a href="http://redis.io/commands" target="_blank">Redis protocol</a> and <code>RedisCache</code> implementing cache API over that. Before, it was tangled together. As consequence, the library has now layered architecture (facades -&gt; cache implementation -&gt; protocol implementation) with several public facades.</p> 
  <h3><a id="user-content-link-110" class="anchor" href="https://github.com/karelcemus/play-redis#link-110" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><a href="https://github.com/KarelCemus/play-redis/tree/1.1.0" target="_blank">
    <g-emoji alias="link" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f517.png" ios-version="6.0">
     🔗
    </g-emoji> 1.1.0</a></h3> 
  <p>Update to Play 2.5, no significant changes</p> 
  <h3><a id="user-content-link-100" class="anchor" href="https://github.com/karelcemus/play-redis#link-100" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><a href="https://github.com/KarelCemus/play-redis/tree/1.0.0" target="_blank">
    <g-emoji alias="link" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f517.png" ios-version="6.0">
     🔗
    </g-emoji> 1.0.0</a></h3> 
  <p>Redesigned the library from scratch to support Play 2.4.x API and use DI.</p> 
 </article>
</div>