<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1 align="center"><a id="user-content-context-aware-json-format-materialization-macrofor-play-framework" class="anchor" href="https://github.com/karelcemus/play-json#context-aware-json-format-materialization-macrofor-play-framework" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Context-aware JSON Format materialization macro<br>for Play framework</h1> 
  <p align="center"><strong>Note: This version supports Play framework 2.6.x with JDK 8.<br>For previous versions see older releases.</strong></p> 
  <p align="center"> <a href="https://travis-ci.org/KarelCemus/play-json" target="_blank"><img src="https://camo.githubusercontent.com/8a4351936541a810cf416468173ae771671bdd8a/68747470733a2f2f7472617669732d63692e6f72672f4b6172656c43656d75732f706c61792d6a736f6e2e7376673f6272616e63683d6d6173746572" data-canonical-src="https://travis-ci.org/KarelCemus/play-json.svg?branch=master" style="max-width:100%;"></a> </p> 
  <p>All frameworks including Play's macro inception consider only <strong>direct 1:1 mapping</strong> between classes and JSON. That means it accepts an instance and serializes it into JSON with all fields, with these names, in this format and type. However, there are many cases when we want some <strong>slight modification of the model</strong> before its serialization or after its reading. For example, we might want to <strong>rename a field</strong>, <strong>ignore a field</strong>, <strong>transform the value</strong>, e.g., a string to upper case or parse int to string, or consider the value <strong>only when a condition is satisfied</strong>. Furthermore, some of these, e.g., conditions, might depend on the current execution context including user's identity, application state, and the processed instance. For example, let's image that we write an instance of <code>User</code>. His password should be ignored, and his email should be always lower-cased and visible only to him or an administrator. Now imagine how would you do this with common tools and frameworks, which usually do not support such complex behavior. You would have to either write your own <code>Writes</code> instance or create alternatives of <code>User</code> fitting desired situations.</p> 
  <p>This library fills this gap. It provides set of annotations and two complex macros reading them and generating <strong>context-aware <code>Reads</code> and <code>Writes</code></strong> seamlessly working with the Play framework. You have plenty of options how to <strong>customize your data</strong> during reading and writing <strong>without</strong> writing <strong>any boilerplate code</strong>. This gives you real power as everything is done during compilation, keeps the JSON protocol up-to-date with your models, and gives you powerful customization tools into your toolkit.</p> 
  <h2><a id="user-content-what-is-context-aware-why-we-want-it" class="anchor" href="https://github.com/karelcemus/play-json#what-is-context-aware-why-we-want-it" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>What is context-aware, why we want it</h2> 
  <p>Both <code>Reads</code> and <code>Writes</code> instances provided by Play are <strong>stateless</strong>. They do not accept anything but the instance/JSON they process. Unfortunately, <strong>this is very limiting</strong> as sometimes we have to make a <strong>decision based on current context</strong>. For example, an <em>email</em> in <code>User</code>s instance is visible only to him or admins, but we are unable to implement such <code>Reads</code> or <code>Writes</code> as they do not consider the context. Furthermore, the context might contains other data such as current application state, user's preferences, geographical location, etc.</p> 
  <p>To overcome this gap the library silently brings <code>ContextualReads</code> and <code>ContextualWrites</code> <strong>accepting besides the instance/JSON also a <code>Context</code></strong>. The <code>Context</code> is an abstract type and it is up to you to implement it. That means <strong>it may contain anything you need</strong> available during processing. Having both <code>ContextualReads</code>/<code>ContextualWrites</code> and the <code>Context</code> instance, <strong>it provides one-time-use</strong> <code>Reads</code> and <code>Writes</code> instance <strong>matching the current context</strong>. The library simply makes instances of them using closures, there is not hidden magic. The significant <strong>benefit</strong> lies in silent <strong>introduction of a context</strong> and <strong>seamless cooperation with Play's</strong> API and inner implementation.</p> 
  <p>In conclusion, the library is context-aware as it considers current execution context and enables you to use it during your JSON reading/writing to modify the output.</p> 
  <h2><a id="user-content-macro-inception" class="anchor" href="https://github.com/karelcemus/play-json#macro-inception" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Macro inception</h2> 
  <p>Just as well as Play framework, this library uses <a href="https://playframework.com/documentation/2.4.x/ScalaJsonInception" target="_blank"><strong>macro inception</strong></a> instead of runtime inspection, reflection and complex output construction. Instead, it uses <strong>compile-time code generation</strong> (<a href="http://docs.scala-lang.org/overviews/macros/implicits.html#implicit-materializers" target="_blank">materialization macro</a>) and it is <strong>fully type-safe</strong>, as it produces regular Scala code. There is no bytecode enhancement.</p> 
  <h1><a id="user-content-how-to-add-the-module-into-the-project" class="anchor" href="https://github.com/karelcemus/play-json#how-to-add-the-module-into-the-project" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>How to add the module into the project</h1> 
  <p>Add the following lines into your SBT settings (<code>build.sbt</code>):</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">//</span> context-aware json materializers</span>
libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.github.karelcemus<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>play-json<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.1.0<span class="pl-pds">"</span></span>

<span class="pl-c"><span class="pl-c">//</span> macro annotations require macro paradise in both the library and the project using it</span>
addCompilerPlugin( <span class="pl-s"><span class="pl-pds">"</span>org.scalamacros<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>paradise<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>2.1.1<span class="pl-pds">"</span></span> cross <span class="pl-en">CrossVersion</span>.full )</pre>
  </div> 
  <h2><a id="user-content-requirements" class="anchor" href="https://github.com/karelcemus/play-json#requirements" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Requirements</h2> 
  <p>This library requires <strong>JDK 8 or newer</strong>, <strong>Scala 2.11 or newer</strong>, and is designed for Play 2.6. However, it should work also with older releases of the Play framework as the JSON <code>Reads</code> and <code>Writes</code> API has not changed for several releases. Furthermore, it uses advanced Scala macros, so it depends on <a href="http://docs.scala-lang.org/overviews/macros/paradise.html" target="_blank">Scala Macro Paradise</a>. Add it into your project.</p> 
  <h1><a id="user-content-how-to-use-this-module" class="anchor" href="https://github.com/karelcemus/play-json#how-to-use-this-module" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>How to use this module</h1> 
  <p>The module is automatically enabled by adding the macro paradise dependency into your project. The module is annotation-driven, i.e., to generate the <code>Reads</code>/<code>Writes</code> just annotate classes.</p> 
  <h2><a id="user-content-json-protocol-as-contextualjson" class="anchor" href="https://github.com/karelcemus/play-json#json-protocol-as-contextualjson" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>JSON Protocol as <code>ContextualJson</code></h2> 
  <p>Core object of the module is the <code>Protocol</code>. This object is <strong>implemented by the user</strong> as it declares type of <code>Context</code> and optionally adds additional configuration.</p> 
  <h3><a id="user-content-protocolin-protocolout-protocolio" class="anchor" href="https://github.com/karelcemus/play-json#protocolin-protocolout-protocolio" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>@protocol.in, @protocol.out, @protocol.io</h3> 
  <p>class, case class, materialization macro</p> 
  <h3><a id="user-content-protocolstrict" class="anchor" href="https://github.com/karelcemus/play-json#protocolstrict" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>@protocol.strict</h3> 
  <h3><a id="user-content-protocolremovenulls" class="anchor" href="https://github.com/karelcemus/play-json#protocolremovenulls" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>@protocol.removeNulls</h3> 
  <h2><a id="user-content-field-specific-settings" class="anchor" href="https://github.com/karelcemus/play-json#field-specific-settings" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Field-specific settings</h2> 
  <h3><a id="user-content-jsonin-jsonout-jsonio" class="anchor" href="https://github.com/karelcemus/play-json#jsonin-jsonout-jsonio" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>@json.in, @json.out, @json.io</h3> 
  <h3><a id="user-content-jsonwhen" class="anchor" href="https://github.com/karelcemus/play-json#jsonwhen" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>@json.when</h3> 
  <h3><a id="user-content-jsonname" class="anchor" href="https://github.com/karelcemus/play-json#jsonname" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>@json.name</h3> 
  <h3><a id="user-content-jsontransform" class="anchor" href="https://github.com/karelcemus/play-json#jsontransform" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>@json.transform</h3> 
  <h3><a id="user-content-jsondefault" class="anchor" href="https://github.com/karelcemus/play-json#jsondefault" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>@json.default</h3> 
 </article>
</div>