<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-rest-driver-scala" class="anchor" href="https://github.com/kelveden/rest-driver-scala#rest-driver-scala" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>rest-driver-scala</h1> 
  <p><a href="https://travis-ci.org/kelveden/rest-driver-scala" target="_blank"><img src="https://camo.githubusercontent.com/a69b22953d910ea798bf45ede932c5f731bf97c5/68747470733a2f2f7472617669732d63692e6f72672f6b656c766564656e2f726573742d6472697665722d7363616c612e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/kelveden/rest-driver-scala.png?branch=master" style="max-width:100%;"></a></p> 
  <p>Scala syntactic sugar and <a href="http://scalatest.org" target="_blank">ScalaTest</a> matchers for <a href="https://github.com/rest-driver/rest-driver" target="_blank">rest-driver</a>.</p> 
  <p>Note that you can use the core Java rest-driver library directly from Scala just fine - this library just provides a little syntactic sugar to streamline your tests.</p> 
  <h2><a id="user-content-usage" class="anchor" href="https://github.com/kelveden/rest-driver-scala#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <p><code>rest-driver-scala</code> does not bundle rest-driver or scalatest so you will need to depend on both <code>rest-driver-scala</code>, <code>rest-driver</code> and <code>scalatest</code>. In your sbt build include:</p> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-en">Resolver</span>.bintrayRepo(<span class="pl-s"><span class="pl-pds">"</span>kelveden<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>maven<span class="pl-pds">"</span></span>)

libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>com.kelveden<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>rest-driver-scala<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.0.1<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>com.github.rest-driver<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>rest-client-driver<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>2.0.0<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>com.github.rest-driver<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>rest-server-driver<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>2.0.0<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>org.scalatest<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>scalatest<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>3.0.1<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <p>Now in your scalatest spec:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">org.scalatest.</span>{<span class="pl-v">FunSpec</span>, <span class="pl-v">Matchers</span>}
<span class="pl-k">import</span> <span class="pl-v">com.github.restdriver.serverdriver.RestServerDriver.</span>

<span class="pl-k">class</span> <span class="pl-en">RestDrivenTest</span> <span class="pl-k">extends</span> <span class="pl-e">FunSpec</span> <span class="pl-k">with</span> <span class="pl-e">Matchers</span> <span class="pl-k">with</span> <span class="pl-e">RestDriven</span> <span class="pl-k">with</span> <span class="pl-e">RestDrivenMatchers</span> {
  <span class="pl-k">override</span> <span class="pl-k">val</span> <span class="pl-en">restDriverPort</span> <span class="pl-k">=</span> &lt;<span class="pl-ent">PORT</span> THAT RESTDRIVER WILL LISTEN ON&gt;
  <span class="pl-k">val</span> <span class="pl-en">servicePort</span> <span class="pl-k">=</span> &lt;<span class="pl-ent">PORT</span> YOUR SERVICE UNDER TEST LISTENS ON&gt;
  <span class="pl-k">val</span> <span class="pl-en">baseUrl</span> <span class="pl-k">=</span> s<span class="pl-s"><span class="pl-pds">"</span>http://localhost:$servicePort<span class="pl-pds">"</span></span>
      
  describe(<span class="pl-s"><span class="pl-pds">"</span>my service<span class="pl-pds">"</span></span>) {
    it(<span class="pl-s"><span class="pl-pds">"</span>calls my stubbed service<span class="pl-pds">"</span></span>) {
      expect(onGetTo(<span class="pl-s"><span class="pl-pds">"</span>/my/stubbed/service<span class="pl-pds">"</span></span>), respondWith(<span class="pl-c1">200</span>))

      <span class="pl-k">val</span> <span class="pl-en">response</span> <span class="pl-k">=</span> <span class="pl-en">RestServerDriver</span>.get(s<span class="pl-s"><span class="pl-pds">"</span>$baseUrl/my/service/under/test<span class="pl-pds">"</span></span>)

      response should haveStatus(<span class="pl-c1">200</span>)
    }
  }
}
</pre>
  </div> 
  <p>For more examples of usage see the <a href="https://github.com/kelveden/rest-driver-scala/blob/master/src/test/scala/com/kelveden/restdriverscala/RestDrivenTest.scala" target="_blank">unit tests</a>.</p> 
  <h2><a id="user-content-matchers" class="anchor" href="https://github.com/kelveden/rest-driver-scala#matchers" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Matchers</h2> 
  <p>A simple set of scalatest matchers are available to match against a rest-driver <code>Response</code> object. Just mix in the <code>RestDrivenMatchers</code> trait:</p> 
  <div class="highlight highlight-source-scala">
   <pre>haveBodyThat(<span class="pl-v">bodyMatcher</span>: <span class="pl-en">Matcher</span>[<span class="pl-k">String</span>])
haveBodyContent(<span class="pl-v">content</span>: <span class="pl-k">String</span>)
haveStatus(<span class="pl-v">status</span>: <span class="pl-k">Int</span>)
haveHeader(<span class="pl-v">name</span>: <span class="pl-k">String</span>)
haveHeader(<span class="pl-v">name</span>: <span class="pl-k">String</span>, <span class="pl-v">value</span>: <span class="pl-k">String</span>)</pre>
  </div> 
  <p>See the <a href="https://github.com/kelveden/rest-driver-scala/blob/master/src/test/scala/com/kelveden/restdriverscala/RestDrivenMatchersTest.scala" target="_blank">unit tests</a> for examples of usage.</p> 
  <h2><a id="user-content-logging" class="anchor" href="https://github.com/kelveden/rest-driver-scala#logging" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Logging</h2> 
  <p>rest-driver provides some useful logging at <code>INFO</code> level via <a href="https://www.slf4j.org/" target="_blank">SLF4J</a>. So, it's recommended that you provide some sort of SLF4J binding in your project for your tests.</p> 
  <p>You can see <a href="https://github.com/kelveden/rest-driver-scala/blob/master/src/test/resources/logback-test.xml" target="_blank">an example</a> of using <a href="http://logback.qos.ch/" target="_blank">Logback</a> to provide such a binding in this very library.</p> 
  <h2><a id="user-content-using-the-java-api" class="anchor" href="https://github.com/kelveden/rest-driver-scala#using-the-java-api" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Using the Java API</h2> 
  <p>As mentioned above, this library is simply syntactic sugar. So you can still leverage the core Java API as little or as much as you like.</p> 
  <p>In particular, the <code>onXXXTo</code> (<code>onGetTo</code> et al) and <code>respondWith</code> functions return a Java <code>ClientDriverRequest</code> and <code>ClientDriverResponse</code> object respectively that can be manipulated in the usual way. So, for example:</p> 
  <div class="highlight highlight-source-scala">
   <pre>expect(
  onGetTo(<span class="pl-s"><span class="pl-pds">"</span>/my/stubbed/service<span class="pl-pds">"</span></span>).withHeader(<span class="pl-s"><span class="pl-pds">"</span>myheader1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>myvalue1<span class="pl-pds">"</span></span>),
  respondWith(<span class="pl-c1">200</span>).withHeader(<span class="pl-s"><span class="pl-pds">"</span>myheader2<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>value2<span class="pl-pds">"</span></span>)
)</pre>
  </div> 
 </article>
</div>