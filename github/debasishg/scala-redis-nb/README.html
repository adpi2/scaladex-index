<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h2><a id="user-content-redisreact-" class="anchor" href="https://github.com/debasishg/scala-redis-nb#redisreact-" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>redisreact <a href="https://travis-ci.org/debasishg/scala-redis-nb" target="_blank"><img src="https://camo.githubusercontent.com/0679f554f9462f83a6f429c39253131032a08009/68747470733a2f2f7472617669732d63692e6f72672f6465626173697368672f7363616c612d72656469732d6e622e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/debasishg/scala-redis-nb.png?branch=master" style="max-width:100%;"></a></h2> 
  <p>A non blocking Redis client based on Akka I/O</p> 
  <h3><a id="user-content-key-features-of-the-library" class="anchor" href="https://github.com/debasishg/scala-redis-nb#key-features-of-the-library" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Key features of the library</h3> 
  <ul> 
   <li><a href="https://github.com/debasishg/scala-redis-nb#non-blocking-compositional-with-futures" target="_blank">Non blocking, compositional with Futures</a></li> 
   <li><a href="https://github.com/debasishg/scala-redis-nb#full-set-of-redis-commands" target="_blank">Full set of Redis commands</a></li> 
   <li><a href="https://github.com/debasishg/scala-redis-nb#scripting-support" target="_blank">Scripting support</a></li> 
   <li><a href="https://github.com/debasishg/scala-redis-nb#typeclass-based-transparent-serialization" target="_blank">Transparent typeclass based serialization</a></li> 
   <li><a href="https://github.com/debasishg/scala-redis-nb#integration-support-with-json-serializing-libraries" target="_blank">Out of the box integration support with Json serialization libraries</a></li> 
   <li><a href="https://github.com/debasishg/scala-redis-nb#transaction-support" target="_blank">Transaction Support</a></li> 
  </ul> 
  <h3><a id="user-content-project-dependencies" class="anchor" href="https://github.com/debasishg/scala-redis-nb#project-dependencies" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Project Dependencies</h3> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>net.debasishg<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>redisreact<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.8<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <h3><a id="user-content-coming-up" class="anchor" href="https://github.com/debasishg/scala-redis-nb#coming-up" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Coming up</h3> 
  <ul> 
   <li>Publish-Subscribe</li> 
   <li>Clustering</li> 
  </ul> 
  <h3><a id="user-content-sample-usage" class="anchor" href="https://github.com/debasishg/scala-redis-nb#sample-usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Sample usage</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c">// Akka setup</span>
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">system</span> <span class="pl-k">=</span> <span class="pl-en">ActorSystem</span>(<span class="pl-s"><span class="pl-pds">"</span>redis-client<span class="pl-pds">"</span></span>)
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">executionContext</span> <span class="pl-k">=</span> system.dispatcher
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">timeout</span> <span class="pl-k">=</span> <span class="pl-en">Timeout</span>(<span class="pl-c1">5</span> seconds)

<span class="pl-c">// Redis client setup</span>
<span class="pl-k">val</span> <span class="pl-en">client</span> <span class="pl-k">=</span> <span class="pl-en">RedisClient</span>(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, <span class="pl-c1">6379</span>)</pre>
  </div> 
  <p><strong>Note</strong></p> 
  <p>The below examples are taken from the test cases.</p> 
  <p>Every API call returns Scala <a href="http://www.scala-lang.org/api/current/index.html#scala.concurrent.Future" target="_blank"><code>Future</code></a> and <code>_.futureValue</code> is just a helper provided by <a href="http://scalatest.org" target="_blank">ScalaTest</a> for ease of test. You won't need this in most cases because it blocks current thread.</p> 
  <h4><a id="user-content-non-blocking-compositional-with-futures" class="anchor" href="https://github.com/debasishg/scala-redis-nb#non-blocking-compositional-with-futures" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Non Blocking, Compositional with Futures</h4> 
  <div class="highlight highlight-source-scala">
   <pre>describe(<span class="pl-s"><span class="pl-pds">"</span>set<span class="pl-pds">"</span></span>) {
  it(<span class="pl-s"><span class="pl-pds">"</span>should set values to keys<span class="pl-pds">"</span></span>) {
    <span class="pl-k">val</span> <span class="pl-en">numKeys</span> <span class="pl-k">=</span> <span class="pl-c1">3</span>
    <span class="pl-k">val</span> (keys, values) <span class="pl-k">=</span> (<span class="pl-c1">1</span> to numKeys map { num <span class="pl-k">=&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span> <span class="pl-k">+</span> num, <span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span> <span class="pl-k">+</span> num) }).unzip
    <span class="pl-k">val</span> <span class="pl-en">writes</span> <span class="pl-k">=</span> keys zip values map { <span class="pl-k">case</span> (key, value) <span class="pl-k">=&gt;</span> client.set(key, value) }

    <span class="pl-en">Future</span>.sequence(writes).futureValue should contain only (<span class="pl-c1">true</span>)
  }
}</pre>
  </div> 
  <div class="highlight highlight-source-scala">
   <pre>describe(<span class="pl-s"><span class="pl-pds">"</span>get<span class="pl-pds">"</span></span>) {
  it(<span class="pl-s"><span class="pl-pds">"</span>should get results for keys set earlier<span class="pl-pds">"</span></span>) {
    <span class="pl-k">val</span> <span class="pl-en">numKeys</span> <span class="pl-k">=</span> <span class="pl-c1">3</span>
    <span class="pl-k">val</span> (keys, values) <span class="pl-k">=</span> (<span class="pl-c1">1</span> to numKeys map { num <span class="pl-k">=&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>get<span class="pl-pds">"</span></span> <span class="pl-k">+</span> num, <span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span> <span class="pl-k">+</span> num) }).unzip
    <span class="pl-k">val</span> <span class="pl-en">writes</span> <span class="pl-k">=</span> keys zip values map { <span class="pl-k">case</span> (key, value) <span class="pl-k">=&gt;</span> client.set(key, value) }
    <span class="pl-k">val</span> <span class="pl-en">writeResults</span> <span class="pl-k">=</span> <span class="pl-en">Future</span>.sequence(writes).futureValue

    <span class="pl-k">val</span> <span class="pl-en">reads</span> <span class="pl-k">=</span> keys map { key <span class="pl-k">=&gt;</span> client.get(key) }
    <span class="pl-k">val</span> <span class="pl-en">readResults</span> <span class="pl-k">=</span> <span class="pl-en">Future</span>.sequence(reads).futureValue

    readResults zip values foreach { <span class="pl-k">case</span> (result, expectedValue) <span class="pl-k">=&gt;</span>
      result should equal (<span class="pl-en">Some</span>(expectedValue))
    }
    readResults should equal (<span class="pl-en">List</span>(<span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>value1<span class="pl-pds">"</span></span>), <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>value2<span class="pl-pds">"</span></span>), <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>value3<span class="pl-pds">"</span></span>)))
  }

  it(<span class="pl-s"><span class="pl-pds">"</span>should give none for unknown keys<span class="pl-pds">"</span></span>) {
    client.get(<span class="pl-s"><span class="pl-pds">"</span>get_unknown<span class="pl-pds">"</span></span>).futureValue should equal (<span class="pl-c1">None</span>)
  }
}</pre>
  </div> 
  <div class="highlight highlight-source-scala">
   <pre>describe(<span class="pl-s"><span class="pl-pds">"</span>non blocking apis using futures<span class="pl-pds">"</span></span>) {
  <span class="pl-c">// ...</span>

  it(<span class="pl-s"><span class="pl-pds">"</span>should compose with sequential combinator<span class="pl-pds">"</span></span>) {
    <span class="pl-k">val</span> <span class="pl-en">key</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>client_key_seq<span class="pl-pds">"</span></span>

    <span class="pl-k">val</span> <span class="pl-en">res</span> <span class="pl-k">=</span> <span class="pl-k">for</span> {
      p <span class="pl-k">&lt;</span><span class="pl-k">-</span> client.lpush(key, <span class="pl-c1">0</span> to <span class="pl-c1">100</span>)
      <span class="pl-k">if</span> p <span class="pl-k">&gt;</span> <span class="pl-c1">0</span>
      r <span class="pl-k">&lt;</span><span class="pl-k">-</span> client.lrange[<span class="pl-k">Long</span>](key, <span class="pl-c1">0</span>, <span class="pl-k">-</span><span class="pl-c1">1</span>)
    } <span class="pl-k">yield</span> (p, r)

    <span class="pl-k">val</span> (count, list) <span class="pl-k">=</span> res.futureValue
    count should equal (<span class="pl-c1">101</span>)
    list.reverse should equal (<span class="pl-c1">0</span> to <span class="pl-c1">100</span>)
  }
}

describe(<span class="pl-s"><span class="pl-pds">"</span>error handling using promise failure<span class="pl-pds">"</span></span>) {
  it(<span class="pl-s"><span class="pl-pds">"</span>should give error trying to lpush on a key that has a non list value<span class="pl-pds">"</span></span>) {
    <span class="pl-k">val</span> <span class="pl-en">key</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>client_err<span class="pl-pds">"</span></span>
    client.set(key, <span class="pl-s"><span class="pl-pds">"</span>value200<span class="pl-pds">"</span></span>).futureValue should be (<span class="pl-c1">true</span>)

    <span class="pl-k">val</span> <span class="pl-en">thrown</span> <span class="pl-k">=</span> evaluating {
      client.lpush(key, <span class="pl-c1">1200</span>).futureValue
    } should produce [<span class="pl-en">TestFailedException</span>]

    thrown.getCause.getMessage should equal (<span class="pl-s"><span class="pl-pds">"</span>ERR Operation against a key holding the wrong kind of value<span class="pl-pds">"</span></span>)
  }
}</pre>
  </div> 
  <h4><a id="user-content-full-set-of-redis-commands" class="anchor" href="https://github.com/debasishg/scala-redis-nb#full-set-of-redis-commands" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Full set of Redis commands</h4> 
  <h5><a id="user-content-list-operations" class="anchor" href="https://github.com/debasishg/scala-redis-nb#list-operations" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>List Operations</h5> 
  <div class="highlight highlight-source-scala">
   <pre>describe(<span class="pl-s"><span class="pl-pds">"</span>lpush<span class="pl-pds">"</span></span>) {
  it(<span class="pl-s"><span class="pl-pds">"</span>should do an lpush and retrieve the values using lrange<span class="pl-pds">"</span></span>) {
    <span class="pl-k">val</span> <span class="pl-en">forpush</span> <span class="pl-k">=</span> <span class="pl-en">List</span>.fill(<span class="pl-c1">10</span>)(<span class="pl-s"><span class="pl-pds">"</span>listk<span class="pl-pds">"</span></span>) zip (<span class="pl-c1">1</span> to <span class="pl-c1">10</span>).map(_.toString)
    <span class="pl-k">val</span> <span class="pl-en">writeList</span> <span class="pl-k">=</span> forpush map { <span class="pl-k">case</span> (key, value) <span class="pl-k">=&gt;</span> client.lpush(key, value) }
    <span class="pl-k">val</span> <span class="pl-en">writeListResults</span> <span class="pl-k">=</span> <span class="pl-en">Future</span>.sequence(writeList).futureValue

    writeListResults foreach {
      <span class="pl-k">case</span> <span class="pl-v">someLong</span>: <span class="pl-k">Long</span> <span class="pl-k">if</span> someLong <span class="pl-k">&gt;</span> <span class="pl-c1">0</span> <span class="pl-k">=&gt;</span>
        someLong should (be <span class="pl-k">&gt;</span> (<span class="pl-c1">0L</span>) and be <span class="pl-k">&lt;=</span> (<span class="pl-c1">10L</span>))
      <span class="pl-k">case</span> _ <span class="pl-k">=&gt;</span> fail(<span class="pl-s"><span class="pl-pds">"</span>lpush must return a positive number<span class="pl-pds">"</span></span>)
    }
    writeListResults should equal (<span class="pl-c1">1</span> to <span class="pl-c1">10</span>)

    <span class="pl-c">// do an lrange to check if they were inserted correctly &amp; in proper order</span>
    <span class="pl-k">val</span> <span class="pl-en">readList</span> <span class="pl-k">=</span> client.lrange[<span class="pl-k">String</span>](<span class="pl-s"><span class="pl-pds">"</span>listk<span class="pl-pds">"</span></span>, <span class="pl-c1">0</span>, <span class="pl-k">-</span><span class="pl-c1">1</span>)
    readList.futureValue should equal ((<span class="pl-c1">1</span> to <span class="pl-c1">10</span>).reverse.map(_.toString))
  }
}</pre>
  </div> 
  <h5><a id="user-content-other-data-structure-support-as-per-redis" class="anchor" href="https://github.com/debasishg/scala-redis-nb#other-data-structure-support-as-per-redis" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Other Data Structure support as per Redis</h5> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c">// Hash</span>
describe(<span class="pl-s"><span class="pl-pds">"</span>hmget<span class="pl-pds">"</span></span>) {
  it(<span class="pl-s"><span class="pl-pds">"</span>should set and get maps<span class="pl-pds">"</span></span>) {
    <span class="pl-k">val</span> <span class="pl-en">key</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>hmget1<span class="pl-pds">"</span></span>
    client.hmset(key, <span class="pl-en">Map</span>(<span class="pl-s"><span class="pl-pds">"</span>field1<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>val1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field2<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>val2<span class="pl-pds">"</span></span>))

    client
      .hmget(key, <span class="pl-s"><span class="pl-pds">"</span>field1<span class="pl-pds">"</span></span>)
      .futureValue should equal (<span class="pl-en">Map</span>(<span class="pl-s"><span class="pl-pds">"</span>field1<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>val1<span class="pl-pds">"</span></span>))

    client
      .hmget(key, <span class="pl-s"><span class="pl-pds">"</span>field1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field2<span class="pl-pds">"</span></span>)
      .futureValue should equal (<span class="pl-en">Map</span>(<span class="pl-s"><span class="pl-pds">"</span>field1<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>val1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field2<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>val2<span class="pl-pds">"</span></span>))

    client
      .hmget(key, <span class="pl-s"><span class="pl-pds">"</span>field1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field2<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field3<span class="pl-pds">"</span></span>)
      .futureValue should equal (<span class="pl-en">Map</span>(<span class="pl-s"><span class="pl-pds">"</span>field1<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>val1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field2<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>val2<span class="pl-pds">"</span></span>))
  }
}

<span class="pl-c">// Set</span>
describe(<span class="pl-s"><span class="pl-pds">"</span>spop<span class="pl-pds">"</span></span>) {
  it(<span class="pl-s"><span class="pl-pds">"</span>should pop a random element<span class="pl-pds">"</span></span>) {
    <span class="pl-k">val</span> <span class="pl-en">key</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>spop1<span class="pl-pds">"</span></span>
    client.sadd(key, <span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span>)
    client.sadd(key, <span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>)

    client
      .spop(key)
      .futureValue should (equal (<span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span>)) or equal (<span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>)))
  }

  it(<span class="pl-s"><span class="pl-pds">"</span>should return nil if the key does not exist<span class="pl-pds">"</span></span>) {
    <span class="pl-k">val</span> <span class="pl-en">key</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>spop2<span class="pl-pds">"</span></span>
    client.spop(key).futureValue should equal (<span class="pl-c1">None</span>)
  }
}

<span class="pl-c">// Sorted Set</span>
describe(<span class="pl-s"><span class="pl-pds">"</span>z(rev)rangeByScoreWithScore<span class="pl-pds">"</span></span>) {
  it (<span class="pl-s"><span class="pl-pds">"</span>should return the elements between min and max<span class="pl-pds">"</span></span>) {
    add

    client
      .zrangeByScoreWithScores(<span class="pl-s"><span class="pl-pds">"</span>hackers<span class="pl-pds">"</span></span>, <span class="pl-c1">1940</span>, <span class="pl-c1">true</span>, <span class="pl-c1">1969</span>, <span class="pl-c1">true</span>, <span class="pl-c1">None</span>)
      .futureValue should equal (<span class="pl-en">List</span>(
        (<span class="pl-s"><span class="pl-pds">"</span>alan kay<span class="pl-pds">"</span></span>, <span class="pl-c1">1940.0</span>), (<span class="pl-s"><span class="pl-pds">"</span>richard stallman<span class="pl-pds">"</span></span>, <span class="pl-c1">1953.0</span>),
        (<span class="pl-s"><span class="pl-pds">"</span>yukihiro matsumoto<span class="pl-pds">"</span></span>, <span class="pl-c1">1965.0</span>), (<span class="pl-s"><span class="pl-pds">"</span>linus torvalds<span class="pl-pds">"</span></span>, <span class="pl-c1">1969.0</span>)
      ))

    client
      .zrevrangeByScoreWithScores(<span class="pl-s"><span class="pl-pds">"</span>hackers<span class="pl-pds">"</span></span>, <span class="pl-c1">1940</span>, <span class="pl-c1">true</span>, <span class="pl-c1">1969</span>, <span class="pl-c1">true</span>, <span class="pl-c1">None</span>)
      .futureValue should equal (<span class="pl-en">List</span>(
        (<span class="pl-s"><span class="pl-pds">"</span>linus torvalds<span class="pl-pds">"</span></span>, <span class="pl-c1">1969.0</span>), (<span class="pl-s"><span class="pl-pds">"</span>yukihiro matsumoto<span class="pl-pds">"</span></span>, <span class="pl-c1">1965.0</span>),
        (<span class="pl-s"><span class="pl-pds">"</span>richard stallman<span class="pl-pds">"</span></span>, <span class="pl-c1">1953.0</span>),(<span class="pl-s"><span class="pl-pds">"</span>alan kay<span class="pl-pds">"</span></span>, <span class="pl-c1">1940.0</span>)
      ))

    client
      .zrangeByScoreWithScores(<span class="pl-s"><span class="pl-pds">"</span>hackers<span class="pl-pds">"</span></span>, <span class="pl-c1">1940</span>, <span class="pl-c1">true</span>, <span class="pl-c1">1969</span>, <span class="pl-c1">true</span>, <span class="pl-en">Some</span>(<span class="pl-c1">3</span>, <span class="pl-c1">1</span>))
      .futureValue should equal (<span class="pl-en">List</span>((<span class="pl-s"><span class="pl-pds">"</span>linus torvalds<span class="pl-pds">"</span></span>, <span class="pl-c1">1969.0</span>)))

    client
      .zrevrangeByScoreWithScores(<span class="pl-s"><span class="pl-pds">"</span>hackers<span class="pl-pds">"</span></span>, <span class="pl-c1">1940</span>, <span class="pl-c1">true</span>, <span class="pl-c1">1969</span>, <span class="pl-c1">true</span>, <span class="pl-en">Some</span>(<span class="pl-c1">3</span>, <span class="pl-c1">1</span>))
      .futureValue should equal (<span class="pl-en">List</span>((<span class="pl-s"><span class="pl-pds">"</span>alan kay<span class="pl-pds">"</span></span>, <span class="pl-c1">1940.0</span>)))
  }
}</pre>
  </div> 
  <h4><a id="user-content-scripting-support" class="anchor" href="https://github.com/debasishg/scala-redis-nb#scripting-support" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scripting support</h4> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.redis.serialization.DefaultFormats.</span><span class="pl-v">_</span>

describe(<span class="pl-s"><span class="pl-pds">"</span>eval<span class="pl-pds">"</span></span>) {
  it(<span class="pl-s"><span class="pl-pds">"</span>should eval lua code and get a string reply<span class="pl-pds">"</span></span>) {
    client
      .eval(<span class="pl-s"><span class="pl-pds">"</span>return 'val1';<span class="pl-pds">"</span></span>)
      .futureValue should equal (<span class="pl-en">List</span>(<span class="pl-s"><span class="pl-pds">"</span>val1<span class="pl-pds">"</span></span>))
  }

  it(<span class="pl-s"><span class="pl-pds">"</span>should eval lua code and get a string array reply<span class="pl-pds">"</span></span>) {
    client
      .eval(<span class="pl-s"><span class="pl-pds">"</span>return { 'val1','val2' };<span class="pl-pds">"</span></span>)
      .futureValue should equal (<span class="pl-en">List</span>(<span class="pl-s"><span class="pl-pds">"</span>val1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>val2<span class="pl-pds">"</span></span>))
  }

  it(<span class="pl-s"><span class="pl-pds">"</span>should eval lua code and get a string array reply from its arguments<span class="pl-pds">"</span></span>) {
    client
      .eval(<span class="pl-s"><span class="pl-pds">"</span>return { ARGV[1],ARGV[2] };<span class="pl-pds">"</span></span>, args <span class="pl-k">=</span> <span class="pl-en">List</span>(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>))
      .futureValue should equal (<span class="pl-en">List</span>(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>))
  }

  it(<span class="pl-s"><span class="pl-pds">"</span>should eval lua code and get a string array reply from its arguments &amp; keys<span class="pl-pds">"</span></span>) {
    client
      .eval(<span class="pl-s"><span class="pl-pds">"</span>return { KEYS[1],KEYS[2],ARGV[1],ARGV[2] };<span class="pl-pds">"</span></span>, <span class="pl-en">List</span>(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>), <span class="pl-en">List</span>(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>))
      .futureValue should equal (<span class="pl-en">List</span>(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>))
  }

  it(<span class="pl-s"><span class="pl-pds">"</span>should eval lua code and get a string reply when passing keys<span class="pl-pds">"</span></span>) {
    client.set(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>)

    client
      .eval(<span class="pl-s"><span class="pl-pds">"</span>return redis.call('get', KEYS[1]);<span class="pl-pds">"</span></span>, <span class="pl-en">List</span>(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>))
      .futureValue should equal (<span class="pl-en">List</span>(<span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>))
  }

  it(<span class="pl-s"><span class="pl-pds">"</span>should eval lua code and get a string array reply when passing keys<span class="pl-pds">"</span></span>) {
    client.lpush(<span class="pl-s"><span class="pl-pds">"</span>z<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>)
    client.lpush(<span class="pl-s"><span class="pl-pds">"</span>z<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>)

    client
      .eval(<span class="pl-s"><span class="pl-pds">"</span>return redis.call('lrange', KEYS[1], 0, 1);<span class="pl-pds">"</span></span>, keys <span class="pl-k">=</span> <span class="pl-en">List</span>(<span class="pl-s"><span class="pl-pds">"</span>z<span class="pl-pds">"</span></span>))
      .futureValue should equal (<span class="pl-en">List</span>(<span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>))
  }

  it(<span class="pl-s"><span class="pl-pds">"</span>should evalsha lua code hash and execute script when passing keys<span class="pl-pds">"</span></span>) {
    <span class="pl-k">val</span> <span class="pl-en">setname</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>records<span class="pl-pds">"</span></span>;

    <span class="pl-k">val</span> <span class="pl-en">luaCode</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">          local res = redis.call('ZRANGEBYSCORE', KEYS[1], 0, 100, 'WITHSCORES')</span>
<span class="pl-s">          return res</span>
<span class="pl-s">          <span class="pl-pds">"""</span></span>
    <span class="pl-k">val</span> <span class="pl-en">shahash</span> <span class="pl-k">=</span> client.script.load(luaCode).futureValue

    client.zadd(setname, <span class="pl-c1">10</span>, <span class="pl-s"><span class="pl-pds">"</span>mmd<span class="pl-pds">"</span></span>)
    client.zadd(setname, <span class="pl-c1">22</span>, <span class="pl-s"><span class="pl-pds">"</span>mmc<span class="pl-pds">"</span></span>)
    client.zadd(setname, <span class="pl-c1">12.5</span>, <span class="pl-s"><span class="pl-pds">"</span>mma<span class="pl-pds">"</span></span>)
    client.zadd(setname, <span class="pl-c1">14</span>, <span class="pl-s"><span class="pl-pds">"</span>mem<span class="pl-pds">"</span></span>)

    <span class="pl-k">val</span> <span class="pl-en">rs</span> <span class="pl-k">=</span> client.evalsha(shahash.get, <span class="pl-en">List</span>(<span class="pl-s"><span class="pl-pds">"</span>records<span class="pl-pds">"</span></span>)).futureValue
    rs should equal (<span class="pl-en">List</span>(<span class="pl-s"><span class="pl-pds">"</span>mmd<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>10<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>mma<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>12.5<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>mem<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>14<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>mmc<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>22<span class="pl-pds">"</span></span>))
  }

  it(<span class="pl-s"><span class="pl-pds">"</span>should check if script exists when passing its sha hash code<span class="pl-pds">"</span></span>) {
    <span class="pl-k">val</span> <span class="pl-en">luaCode</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">          local res = redis.call('ZRANGEBYSCORE', KEYS[1], 0, 100, 'WITHSCORES')</span>
<span class="pl-s">          return res</span>
<span class="pl-s">          <span class="pl-pds">"""</span></span>
    <span class="pl-k">val</span> <span class="pl-en">shahash</span> <span class="pl-k">=</span> client.script.load(luaCode).futureValue

    <span class="pl-k">val</span> <span class="pl-en">rs</span> <span class="pl-k">=</span> client.script.exists(shahash.get).futureValue
    rs should equal (<span class="pl-en">List</span>(<span class="pl-c1">1</span>))
  }

  it(<span class="pl-s"><span class="pl-pds">"</span>should remove script cache<span class="pl-pds">"</span></span>) {
    <span class="pl-k">val</span> <span class="pl-en">luaCode</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">          local res = redis.call('ZRANGEBYSCORE', KEYS[1], 0, 100, 'WITHSCORES')</span>
<span class="pl-s">          return res</span>
<span class="pl-s">          <span class="pl-pds">"""</span></span>
    <span class="pl-k">val</span> <span class="pl-en">shahash</span> <span class="pl-k">=</span> client.script.load(luaCode).futureValue

    client.script.flush.futureValue should be (<span class="pl-c1">true</span>)

    client.script.exists(shahash.get).futureValue should equal (<span class="pl-en">List</span>(<span class="pl-c1">0</span>))
  }
}</pre>
  </div> 
  <h4><a id="user-content-typeclass-based-transparent-serialization" class="anchor" href="https://github.com/debasishg/scala-redis-nb#typeclass-based-transparent-serialization" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Typeclass based transparent serialization</h4> 
  <h6><a id="user-content-using-built-in-format-typeclass-for-read-and-write" class="anchor" href="https://github.com/debasishg/scala-redis-nb#using-built-in-format-typeclass-for-read-and-write" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Using built in Format typeclass for read and write</h6> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">DefaultFormats.</span><span class="pl-v">_</span>

client
  .hmset(<span class="pl-s"><span class="pl-pds">"</span>hash<span class="pl-pds">"</span></span>, <span class="pl-en">Map</span>(<span class="pl-s"><span class="pl-pds">"</span>field1<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field2<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">2</span>))
  .futureValue should be (<span class="pl-c1">true</span>)

client
  .hmget[<span class="pl-k">String</span>](<span class="pl-s"><span class="pl-pds">"</span>hash<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field2<span class="pl-pds">"</span></span>)
  .futureValue should equal (<span class="pl-en">Map</span>(<span class="pl-s"><span class="pl-pds">"</span>field1<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field2<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>))

client
  .hmget[<span class="pl-k">Int</span>](<span class="pl-s"><span class="pl-pds">"</span>hash<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field2<span class="pl-pds">"</span></span>)
  .futureValue should equal (<span class="pl-en">Map</span>(<span class="pl-s"><span class="pl-pds">"</span>field1<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>field2<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">2</span>))

client
  .hmget[<span class="pl-k">Int</span>](<span class="pl-s"><span class="pl-pds">"</span>hash<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field2<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field3<span class="pl-pds">"</span></span>)
  .futureValue should equal (<span class="pl-en">Map</span>(<span class="pl-s"><span class="pl-pds">"</span>field1<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>field2<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">2</span>))</pre>
  </div> 
  <h6><a id="user-content-should-use-a-provided-implicit-format-typeclass" class="anchor" href="https://github.com/debasishg/scala-redis-nb#should-use-a-provided-implicit-format-typeclass" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Should use a provided implicit Format typeclass</h6> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">DefaultFormats.</span><span class="pl-v">_</span>

client.hmset(<span class="pl-s"><span class="pl-pds">"</span>hash<span class="pl-pds">"</span></span>, <span class="pl-en">Map</span>(<span class="pl-s"><span class="pl-pds">"</span>field1<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field2<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">2</span>))

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">intFormat</span> <span class="pl-k">=</span> <span class="pl-en">Format</span>[<span class="pl-k">Int</span>](java.lang.<span class="pl-en">Integer</span>.parseInt, _.toString)

client
  .hmget[<span class="pl-k">Int</span>](<span class="pl-s"><span class="pl-pds">"</span>hash<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field2<span class="pl-pds">"</span></span>)
  .futureValue should equal (<span class="pl-en">Map</span>(<span class="pl-s"><span class="pl-pds">"</span>field1<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>field2<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">2</span>))

client
  .hmget[<span class="pl-k">String</span>](<span class="pl-s"><span class="pl-pds">"</span>hash<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field2<span class="pl-pds">"</span></span>)
  .futureValue should be(<span class="pl-en">Map</span>(<span class="pl-s"><span class="pl-pds">"</span>field1<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>field2<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>))</pre>
  </div> 
  <h6><a id="user-content-easy-to-have-custom-format-for-case-classes" class="anchor" href="https://github.com/debasishg/scala-redis-nb#easy-to-have-custom-format-for-case-classes" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Easy to have custom Format for case classes</h6> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Person</span>(<span class="pl-v">id</span>: <span class="pl-k">Int</span>, <span class="pl-v">name</span>: <span class="pl-k">String</span>)

<span class="pl-k">val</span> <span class="pl-en">debasish</span> <span class="pl-k">=</span> <span class="pl-en">Person</span>(<span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>Debasish Gosh<span class="pl-pds">"</span></span>)
<span class="pl-k">val</span> <span class="pl-en">jisoo</span> <span class="pl-k">=</span> <span class="pl-en">Person</span>(<span class="pl-c1">2</span>, <span class="pl-s"><span class="pl-pds">"</span>Jisoo Park<span class="pl-pds">"</span></span>)

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">customPersonFormat</span> <span class="pl-k">=</span>
  <span class="pl-k">new</span> <span class="pl-en">Format</span>[<span class="pl-en">Person</span>] {
    <span class="pl-k">def</span> <span class="pl-en">read</span>(<span class="pl-v">str</span>: <span class="pl-k">String</span>) <span class="pl-k">=</span> {
      <span class="pl-k">val</span> <span class="pl-en">head</span> <span class="pl-k">::</span> rest <span class="pl-k">=</span> str.split(<span class="pl-c1">'|'</span>).toList
      <span class="pl-k">val</span> <span class="pl-en">id</span> <span class="pl-k">=</span> head.toInt
      <span class="pl-k">val</span> <span class="pl-en">name</span> <span class="pl-k">=</span> rest.mkString(<span class="pl-s"><span class="pl-pds">"</span>|<span class="pl-pds">"</span></span>)

      <span class="pl-en">Person</span>(id, name)
    }

    <span class="pl-k">def</span> <span class="pl-en">write</span>(<span class="pl-v">person</span>: <span class="pl-en">Person</span>) <span class="pl-k">=</span> {
      <span class="pl-k">import</span> <span class="pl-v">person.</span><span class="pl-v">_</span>
      s<span class="pl-s"><span class="pl-pds">"</span>$id|$name<span class="pl-pds">"</span></span>
    }
  }

client.set(<span class="pl-s"><span class="pl-pds">"</span>debasish<span class="pl-pds">"</span></span>, debasish)

client.get[<span class="pl-en">Person</span>](<span class="pl-s"><span class="pl-pds">"</span>debasish<span class="pl-pds">"</span></span>).futureValue should equal (<span class="pl-en">Some</span>(debasish))</pre>
  </div> 
  <h6><a id="user-content-integration-support-with-json-serializing-libraries" class="anchor" href="https://github.com/debasishg/scala-redis-nb#integration-support-with-json-serializing-libraries" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Integration support with Json Serializing libraries</h6> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">spray.json.DefaultJsonProtocol.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">com.redis.serialization.SprayJsonSupport.</span><span class="pl-v">_</span>

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">personFormat</span> <span class="pl-k">=</span> jsonFormat2(<span class="pl-en">Person</span>)

client.set(<span class="pl-s"><span class="pl-pds">"</span>debasish<span class="pl-pds">"</span></span>, debasish)
client.set(<span class="pl-s"><span class="pl-pds">"</span>people<span class="pl-pds">"</span></span>, <span class="pl-en">List</span>(debasish, jisoo))

client.get[<span class="pl-en">Person</span>](<span class="pl-s"><span class="pl-pds">"</span>debasish<span class="pl-pds">"</span></span>).futureValue should equal (<span class="pl-en">Some</span>(debasish))
client.get[<span class="pl-en">List</span>[<span class="pl-en">Person</span>]](<span class="pl-s"><span class="pl-pds">"</span>people<span class="pl-pds">"</span></span>).futureValue should equal (<span class="pl-en">Some</span>(<span class="pl-en">List</span>(debasish, jisoo)))</pre>
  </div> 
  <p>For more examples on serialization, have a look at the test cases.</p> 
  <p><em>Third-party libraries are not installed by default. You need to provide them by yourself.</em></p> 
  <h4><a id="user-content-transaction-support" class="anchor" href="https://github.com/debasishg/scala-redis-nb#transaction-support" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Transaction Support</h4> 
  <p>Implicit support of <code>MULTI</code>, <code>EXEC</code>, <code>DISCARD</code>, <code>WATCH</code> and <code>UNWATCH</code> provided through custom API. Here are some examples:</p> 
  <div class="highlight highlight-source-scala">
   <pre>describe(<span class="pl-s"><span class="pl-pds">"</span>transactions with API<span class="pl-pds">"</span></span>) {
  it(<span class="pl-s"><span class="pl-pds">"</span>should use API<span class="pl-pds">"</span></span>) {
    <span class="pl-k">val</span> <span class="pl-en">result</span> <span class="pl-k">=</span> client.withTransaction {c <span class="pl-k">=&gt;</span>
      c.set(<span class="pl-s"><span class="pl-pds">"</span>anshin-1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>debasish<span class="pl-pds">"</span></span>) 
      c.exists(<span class="pl-s"><span class="pl-pds">"</span>anshin-1<span class="pl-pds">"</span></span>)
      c.get(<span class="pl-s"><span class="pl-pds">"</span>anshin-1<span class="pl-pds">"</span></span>)
      c.set(<span class="pl-s"><span class="pl-pds">"</span>anshin-2<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>debasish<span class="pl-pds">"</span></span>)
      c.lpush(<span class="pl-s"><span class="pl-pds">"</span>anshin-3<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>debasish<span class="pl-pds">"</span></span>) 
      c.lpush(<span class="pl-s"><span class="pl-pds">"</span>anshin-3<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>maulindu<span class="pl-pds">"</span></span>) 
      c.lrange(<span class="pl-s"><span class="pl-pds">"</span>anshin-3<span class="pl-pds">"</span></span>, <span class="pl-c1">0</span>, <span class="pl-k">-</span><span class="pl-c1">1</span>)
    }
    result.futureValue should equal (<span class="pl-en">List</span>(<span class="pl-c1">true</span>, <span class="pl-c1">true</span>, <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>debasish<span class="pl-pds">"</span></span>), <span class="pl-c1">true</span>, <span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-en">List</span>(<span class="pl-s"><span class="pl-pds">"</span>maulindu<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>debasish<span class="pl-pds">"</span></span>)))
    client.get(<span class="pl-s"><span class="pl-pds">"</span>anshin-1<span class="pl-pds">"</span></span>).futureValue should equal(<span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>debasish<span class="pl-pds">"</span></span>))
  }

  it(<span class="pl-s"><span class="pl-pds">"</span>should execute partial set and report failure on exec<span class="pl-pds">"</span></span>) {
    <span class="pl-k">val</span> <span class="pl-en">result</span> <span class="pl-k">=</span> client.withTransaction {c <span class="pl-k">=&gt;</span>
      c.set(<span class="pl-s"><span class="pl-pds">"</span>anshin-1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>debasish<span class="pl-pds">"</span></span>) 
      c.exists(<span class="pl-s"><span class="pl-pds">"</span>anshin-1<span class="pl-pds">"</span></span>)
      c.get(<span class="pl-s"><span class="pl-pds">"</span>anshin-1<span class="pl-pds">"</span></span>)
      c.set(<span class="pl-s"><span class="pl-pds">"</span>anshin-2<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>debasish<span class="pl-pds">"</span></span>)
      c.lpush(<span class="pl-s"><span class="pl-pds">"</span>anshin-2<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>debasish<span class="pl-pds">"</span></span>) 
      c.lpush(<span class="pl-s"><span class="pl-pds">"</span>anshin-3<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>maulindu<span class="pl-pds">"</span></span>) 
      c.lrange(<span class="pl-s"><span class="pl-pds">"</span>anshin-3<span class="pl-pds">"</span></span>, <span class="pl-c1">0</span>, <span class="pl-k">-</span><span class="pl-c1">1</span>)
    }
    <span class="pl-k">val</span> <span class="pl-en">r</span> <span class="pl-k">=</span> result.futureValue.<span class="pl-c1">asInstanceOf</span>[<span class="pl-en">List</span>[_]].toVector
    r(<span class="pl-c1">0</span>) should equal(<span class="pl-c1">true</span>)
    r(<span class="pl-c1">1</span>) should equal(<span class="pl-c1">true</span>)
    r(<span class="pl-c1">2</span>) should equal(<span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>debasish<span class="pl-pds">"</span></span>))
    r(<span class="pl-c1">3</span>) should equal(<span class="pl-c1">true</span>)
    r(<span class="pl-c1">4</span>).<span class="pl-c1">asInstanceOf</span>[akka.actor.<span class="pl-en">Status</span>.<span class="pl-en">Failure</span>].cause.<span class="pl-c1">isInstanceOf</span>[<span class="pl-en">Throwable</span>] should equal(<span class="pl-c1">true</span>)
    r(<span class="pl-c1">5</span>) should equal(<span class="pl-c1">1</span>)
    r(<span class="pl-c1">6</span>) should equal(<span class="pl-en">List</span>(<span class="pl-s"><span class="pl-pds">"</span>maulindu<span class="pl-pds">"</span></span>))
    client.get(<span class="pl-s"><span class="pl-pds">"</span>anshin-1<span class="pl-pds">"</span></span>).futureValue should equal(<span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>debasish<span class="pl-pds">"</span></span>))
  }

  it(<span class="pl-s"><span class="pl-pds">"</span>should fail if key is changed outside transaction<span class="pl-pds">"</span></span>) {
    client.watch(<span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span>).futureValue should equal(<span class="pl-c1">true</span>)
    client.set(<span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span>, <span class="pl-c1">1</span>).futureValue should equal(<span class="pl-c1">true</span>)
    <span class="pl-k">val</span> <span class="pl-en">v</span> <span class="pl-k">=</span> client.get[<span class="pl-k">Long</span>](<span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span>).futureValue.get <span class="pl-k">+</span> <span class="pl-c1">20L</span>
    <span class="pl-k">val</span> <span class="pl-en">result</span> <span class="pl-k">=</span> client.withTransaction {c <span class="pl-k">=&gt;</span>
      c.set(<span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span>, <span class="pl-c1">100</span>)
      c.get[<span class="pl-k">Long</span>](<span class="pl-s"><span class="pl-pds">"</span>key1<span class="pl-pds">"</span></span>)
    }
    result onComplete {
      <span class="pl-k">case</span> util.<span class="pl-en">Success</span>(_) <span class="pl-k">=&gt;</span> 
      <span class="pl-k">case</span> util.<span class="pl-en">Failure</span>(th) <span class="pl-k">=&gt;</span> th should equal(<span class="pl-en">EmptyTxnResultException</span>)
    }
  }
}</pre>
  </div> 
  <h3><a id="user-content-license" class="anchor" href="https://github.com/debasishg/scala-redis-nb#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h3> 
  <p>This software is licensed under the Apache 2 license, quoted below.</p> 
  <p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p> 
  <pre><code>http://www.apache.org/licenses/LICENSE-2.0
</code></pre> 
  <p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p> 
 </article>
</div>