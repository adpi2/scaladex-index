<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a href="https://github.com/ovotech/comms-kafka-messages#comms-platform-kafka-messages" aria-hidden="true" class="anchor" id="user-content-comms-platform-kafka-messages" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Comms platform Kafka messages</h1> 
  <p><a href="https://circleci.com/gh/ovotech/comms-kafka-messages/tree/master" target="_blank"> <img src="https://camo.githubusercontent.com/154f3332d639dfacc6b35a8b7b756e58b92176af/68747470733a2f2f636972636c6563692e636f6d2f67682f6f766f746563682f636f6d6d732d6b61666b612d6d657373616765732f747265652f6d61737465722e7376673f7374796c653d737667" alt="CircleCI" data-canonical-src="https://circleci.com/gh/ovotech/comms-kafka-messages/tree/master.svg?style=svg" style="max-width:100%;"> </a></p> 
  <p><a href="https://bintray.com/ovotech/maven/comms-kafka-messages/_latestVersion" target="_blank"><img src="https://camo.githubusercontent.com/3c211d95f0db0a14fbc751d10940c7f110bf68ba/68747470733a2f2f6170692e62696e747261792e636f6d2f7061636b616765732f6f766f746563682f6d6176656e2f636f6d6d732d6b61666b612d6d657373616765732f696d616765732f646f776e6c6f61642e737667" alt="Download" data-canonical-src="https://api.bintray.com/packages/ovotech/maven/comms-kafka-messages/images/download.svg" style="max-width:100%;"></a></p> 
  <p>Scala classes representing the various Kakfa messages the platform sends and receives.</p> 
  <p>This project is in charge of:</p> 
  <ul> 
   <li>auto-generating Avro schemas from the classes using <a href="https://github.com/sksamuel/avro4s" target="_blank">avro4s</a></li> 
   <li>verifying that the schemas are compatible with the previous versions, using the schema registry</li> 
   <li>publishing the classes to Bintray</li> 
  </ul> 
  <h2><a href="https://github.com/ovotech/comms-kafka-messages#how-to-use-the-scala-classes" aria-hidden="true" class="anchor" id="user-content-how-to-use-the-scala-classes" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>How to use the Scala classes</h2> 
  <p>Add a resolver in sbt for the Maven repo on Bintray:</p> 
  <pre><code>resolvers += Resolver.bintrayRepo("ovotech", "maven")
</code></pre> 
  <p>Then add a dependency on the library:</p> 
  <pre><code>libraryDependencies += "com.ovoenergy" %% "comms-kafka-messages" % "version"
</code></pre> 
  <p>See the Bintray badge above for the latest version.</p> 
  <h2><a href="https://github.com/ovotech/comms-kafka-messages#how-to-release" aria-hidden="true" class="anchor" id="user-content-how-to-release" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>How to release</h2> 
  <p>Create and push a git tag called <code>circleci-release</code>. This will trigger CircleCI to release a new version of the library.</p> 
  <pre><code>$ git tag circleci-release
$ git push --tags
</code></pre> 
  <p>CircleCI will take care of deleting the tag so it can be re-used for the next release.</p> 
  <h3><a href="https://github.com/ovotech/comms-kafka-messages#manual-releases" aria-hidden="true" class="anchor" id="user-content-manual-releases" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Manual releases</h3> 
  <p>If you want to release a new version from your local machine for whatever reason, you will need to be a member of the <code>ovotech</code> organisation on Bintray.</p> 
  <pre><code>$ sbt release
</code></pre> 
  <p>will run the tests, bump the version, verify the schema compatibility, build all the artifacts and publish them to Bintray.</p> 
  <p>The first time you run it, you will need to configure sbt with your Bintray credentials beforehand: <code>$ sbt bintrayChangeCredentials</code></p> 
  <h2><a href="https://github.com/ovotech/comms-kafka-messages#schema-compatibility-checks" aria-hidden="true" class="anchor" id="user-content-schema-compatibility-checks" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Schema compatibility checks</h2> 
  <p>When CircleCI builds a PR, it generates the Avro schemas for all Kafka messages.</p> 
  <p>It then asks the schema registry to verify that each schema is compatible with its respective previous version (if a previous version exists).</p> 
  <p>If any schema change is incompatible, the build will fail.</p> 
  <p>As part of the release process, the latest version of all schemas will be registered with the schema registry.</p> 
 </article>
</div>