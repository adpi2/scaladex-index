<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-akka-jwt" class="anchor" href="https://github.com/innfactory/akka-jwt#akka-jwt" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>akka-jwt</h1> 
  <p><a href="https://travis-ci.org/innFactory/akka-jwt" target="_blank"><img src="https://camo.githubusercontent.com/807f93cf5d4f8575e9ca4fb6863648692d0360c3/68747470733a2f2f7472617669732d63692e6f72672f696e6e466163746f72792f616b6b612d6a77742e7376673f6272616e63683d6d6173746572" alt="travis-ci.org" data-canonical-src="https://travis-ci.org/innFactory/akka-jwt.svg?branch=master" style="max-width:100%;"></a> <a href="https://codecov.io/github/innFactory/akka-jwt" target="_blank"><img src="https://camo.githubusercontent.com/bf8521718aa2a520459815d23f4b1e95236c1de7/68747470733a2f2f696d672e736869656c64732e696f2f636f6465636f762f632f6769746875622f696e6e466163746f72792f616b6b612d6a77742f6d61737465722e7376673f7374796c653d666c6174" alt="codecov.io" data-canonical-src="https://img.shields.io/codecov/c/github/innFactory/akka-jwt/master.svg?style=flat" style="max-width:100%;"></a> <a href="http://www.apache.org/licenses/LICENSE-2.0.txt" target="_blank"><img src="https://camo.githubusercontent.com/289b8af90f2b7070cabfc544c73d20802e66b349/687474703a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d417061636865322d626c75652e737667" alt="shields.io" data-canonical-src="http://img.shields.io/badge/license-Apache2-blue.svg" style="max-width:100%;"></a> <a href="https://bintray.com/innfactory/sbt-plugins/akka-jwt/_latestVersion" target="_blank"> <img src="https://camo.githubusercontent.com/49e568a0304f3317e6a58f7026e7ab80c51ae92b/68747470733a2f2f6170692e62696e747261792e636f6d2f7061636b616765732f696e6e666163746f72792f7362742d706c7567696e732f616b6b612d6a77742f696d616765732f646f776e6c6f61642e737667" alt="Download" data-canonical-src="https://api.bintray.com/packages/innfactory/sbt-plugins/akka-jwt/images/download.svg" style="max-width:100%;"> </a></p> 
  <p>Library for jwt authentication with akka</p> 
  <h2><a id="user-content-information" class="anchor" href="https://github.com/innfactory/akka-jwt#information" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Information</h2> 
  <p>This library provides you an akka directive for your route to authenticate your user with jwt. the jwt implementation adapts nimbus JOSE + JWT.</p> 
  <h3><a id="user-content-setup" class="anchor" href="https://github.com/innfactory/akka-jwt#setup" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Setup</h3> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-en">Resolver</span>.bintrayRepo(<span class="pl-s"><span class="pl-pds">"</span>innfactory<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>sbt-plugins<span class="pl-pds">"</span></span>) <span class="pl-c"><span class="pl-c">//</span> or via maven central</span>
libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>de.innFactory<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>akka-jwt<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>x.x.x<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>After that you must extend your akka-http Route with <code>JwtAuthDirectives</code>. Then just override <code>protected val jwtValidator: JwtValidator</code></p> 
  <p>After that you can build your route like this:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">route</span><span class="pl-k">:</span> <span class="pl-en">Route</span> <span class="pl-k">=</span>
    (post &amp; path(<span class="pl-s"><span class="pl-pds">"</span>graphql<span class="pl-pds">"</span></span>)) {
      authenticate { credentials <span class="pl-k">=&gt;</span>
        entity(as[<span class="pl-en">JsValue</span>]) { requestJson <span class="pl-k">â‡’</span></pre>
  </div> 
  <p>you see, that you got a new authenticate directive for your route. It extracts the Authentication value from your header and checks it against your jwt validator.</p> 
  <h2><a id="user-content-validator-api" class="anchor" href="https://github.com/innfactory/akka-jwt#validator-api" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Validator API</h2> 
  <p>The Validator API has just one method <code>validate</code>, so you can implement your own Validators and use it for your akka Directive. AWS and the generic one were made by guizmaii. Thanks for that!</p> 
  <pre><code>final case class JwtToken(content: String) extends AnyVal

trait JwtValidator {
  def validate(jwtToken: JwtToken): Either[BadJWTException, (JwtToken, JWTClaimsSet)]
}
</code></pre> 
  <h3><a id="user-content-available-jwtvalidator-implementations" class="anchor" href="https://github.com/innfactory/akka-jwt#available-jwtvalidator-implementations" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Available <code>JwtValidator</code> implementations</h3> 
  <h4><a id="user-content-1-configurablejwtvalidator" class="anchor" href="https://github.com/innfactory/akka-jwt#1-configurablejwtvalidator" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>1. ConfigurableJwtValidator</h4> 
  <p>The more flexible implementation of the <code>JwtValidator</code> interface.</p> 
  <p>It only requires a <code>JWKSource</code> instance.<br> For more information on the different <code>JWKSource</code> implementations Nimbus provides, look at the classes in the <code>com.nimbusds.jose.jwk.source</code> package here: <a href="https://www.javadoc.io/doc/com.nimbusds/nimbus-jose-jwt" target="_blank">https://www.javadoc.io/doc/com.nimbusds/nimbus-jose-jwt</a></p> 
  <p>Example of use:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">token</span><span class="pl-k">:</span> <span class="pl-en">JwtToken</span> <span class="pl-k">=</span> <span class="pl-en">JwtToken</span>(content <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>...<span class="pl-pds">"</span></span>)

<span class="pl-k">val</span> <span class="pl-en">jwkSet</span><span class="pl-k">:</span> <span class="pl-en">JWKSource</span>[<span class="pl-en">SecurityContext</span>] <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">RemoteJWKSet</span>(<span class="pl-k">new</span> <span class="pl-en">URL</span>(s<span class="pl-s"><span class="pl-pds">"</span>https://your.jwks.prodvider.example.com/.well-known/jwks.json<span class="pl-pds">"</span></span>))
<span class="pl-k">val</span> <span class="pl-en">validator</span> <span class="pl-k">=</span>  <span class="pl-en">ConfigurableJwtValidator</span>(jwkSet)</pre>
  </div> 
  <p>For more information on JWKs, you could read:</p> 
  <ul> 
   <li>Auth0 doc: <a href="https://auth0.com/docs/jwks" target="_blank">https://auth0.com/docs/jwks</a></li> 
   <li>Nimbus doc: <a href="https://connect2id.com/products/server/docs/api/jwk-set" target="_blank">https://connect2id.com/products/server/docs/api/jwk-set</a></li> 
   <li>AWS Cognito doc: <a href="https://docs.aws.amazon.com/cognito/latest/developerguide/amazon-cognito-user-pools-using-tokens-with-identity-providers.html#amazon-cognito-identity-user-pools-using-id-and-access-tokens-in-web-api" target="_blank">https://docs.aws.amazon.com/cognito/latest/developerguide/amazon-cognito-user-pools-using-tokens-with-identity-providers.html#amazon-cognito-identity-user-pools-using-id-and-access-tokens-in-web-api</a></li> 
  </ul> 
  <p>Other constructor parameters are:</p> 
  <ul> 
   <li> <p><code>maybeCtx: Option[SecurityContext] = None</code><br> (Optional) Security context.<br> Default is <code>null</code> (no Security Context).</p> </li> 
   <li> <p><code>additionalChecks: List[(JWTClaimsSet, SecurityContext) =&gt; Option[BadJWTException]] = List.empty</code><br> (Optional) List of additional checks that will be executed on the JWT token passed.<br> Default is an empty List.</p> <p>Some "additional checks" are already implemented in the object <code>ProvidedAdditionalChelcks</code>.</p> </li> 
  </ul> 
  <h4><a id="user-content-2-awscognitojwtvalidator" class="anchor" href="https://github.com/innfactory/akka-jwt#2-awscognitojwtvalidator" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>2. AwsCognitoJwtValidator</h4> 
  <p>Example of use:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">awsRegion</span> <span class="pl-k">=</span> <span class="pl-en">AWSRegion</span>(<span class="pl-en">AWSRegions</span>.<span class="pl-en">Frankfurt</span>)
<span class="pl-k">val</span> <span class="pl-en">cognitoUserPoolId</span> <span class="pl-k">=</span> <span class="pl-en">CognitoUserPoolId</span>(value <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>...<span class="pl-pds">"</span></span>)

<span class="pl-k">val</span> <span class="pl-en">awsCognitoJwtValidator</span> <span class="pl-k">=</span> <span class="pl-en">AwsCognitoJwtValidator</span>(awsRegion, cognitoUserPoolId)</pre>
  </div> 
  <h2><a id="user-content-copyright--contributers" class="anchor" href="https://github.com/innfactory/akka-jwt#copyright--contributers" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Copyright &amp; Contributers</h2> 
  <p>Thanks to guizmaii's template for nimbus integration in scala. Tobias Jonas</p> 
  <p>Copyright (C) 2017 <a href="https://innFactory.de" target="_blank">innFactory Cloud- &amp; DataEngineering</a></p> 
  <p>Published under the Apache 2 License.</p> 
 </article>
</div>