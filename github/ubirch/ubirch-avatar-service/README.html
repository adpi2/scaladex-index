<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-ubirch-avatar-service" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#ubirch-avatar-service" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>ubirch-avatar-service</h1> 
  <p>ubirch device-configuration and -dataflow service</p> 
  <h2><a id="user-content-general-information" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#general-information" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>General Information</h2> 
  <p>ubirch Avatar Service is responsible for:</p> 
  <ul> 
   <li>offering ubirch IoT devices an endpoint to sync their state</li> 
   <li>processing incoming raw data from ubirch IoT devices ** validating signatures ** transforming raw data</li> 
   <li>offering CRUD API to manage ubirch IoT Devices</li> 
   <li>managing device states using Amazon AWS IoT</li> 
   <li>publishing processed data for further processing (AWS SQS)</li> 
  </ul> 
  <h2><a id="user-content-release-history" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#release-history" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Release History</h2> 
  <h3><a id="user-content-version-0323-2017-08-10" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#version-0323-2017-08-10" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version 0.3.23 (2017-08-10)</h3> 
  <ul> 
   <li>update to <code>com.ubirch.util:oidc-utils:0.4.11</code></li> 
   <li>update to <code>com.ubirch.user:client-rest:0.6.1</code></li> 
  </ul> 
  <h3><a id="user-content-version-0322-2017-07-31" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#version-0322-2017-07-31" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version 0.3.22 (2017-07-31)</h3> 
  <ul> 
   <li>revert to <code>com.ubirch.util:elasticsearch-client-binary:2.1.0</code></li> 
   <li>revert to `com.ubirch.util:elasticsearch-util:2.1.</li> 
  </ul> 
  <h3><a id="user-content-version-0321-2017-07-31" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#version-0321-2017-07-31" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version 0.3.21 (2017-07-31)</h3> 
  <ul> 
   <li>fixed broken logging (would lead to a Throwable not being logged)</li> 
   <li>update to <code>com.ubirch.util:elasticsearch-client-binary:2.1.0</code></li> 
   <li>update to <code>com.ubirch.util:elasticsearch-util:2.1.0</code></li> 
   <li>update to <code>com.ubirch.util:mongo-utils:0.3.6</code></li> 
   <li>update to <code>com.ubirch.util:mongo-test-utils:0.3.6</code></li> 
   <li>update to <code>com.ubirch.util:oidc-utils:0.4.10</code></li> 
   <li>update to <code>com.ubirch.user:client-rest:0.5.1</code></li> 
  </ul> 
  <h3><a id="user-content-version-0320-2017-07-28" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#version-0320-2017-07-28" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version 0.3.20 (2017-07-28)</h3> 
  <ul> 
   <li>improve endpoint documentation</li> 
   <li>update to <code>com.ubirch.key:client-rest:0.2.0</code></li> 
   <li>update to <code>com.ubirch.user:client-rest:0.5.0</code></li> 
   <li>deepCheck() includes the key-service deepCheck now</li> 
   <li>deepCheck() includes the user-service deepCheck now</li> 
   <li>deepCheck() includes a MongoDB connectivity check now</li> 
   <li>deepCheck() includes a Redis connectivity check now</li> 
  </ul> 
  <h3><a id="user-content-version-0319-2017-07-27" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#version-0319-2017-07-27" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version 0.3.19 (2017-07-27)</h3> 
  <ul> 
   <li>update to <code>com.ubirch.user:client-rest:0.4.19</code></li> 
   <li>update to <code>com.ubirch.key:client-rest:0.1.13</code></li> 
  </ul> 
  <h3><a id="user-content-version-0318-sbt" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#version-0318-sbt" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version 0.3.18 (sbt)</h3> 
  <ul> 
   <li>refactor where REST client connection timeouts are configured</li> 
   <li>less logging in <code>AvatarRestClient</code></li> 
   <li>add method <code>AvatarRestClient.deviceStubGET</code></li> 
   <li>update to <code>com.ubirch.util:json:0.4.3</code></li> 
   <li>update to <code>com.ubirch.util:oidc-utils:0.4.9</code></li> 
   <li>update to <code>com.ubirch.util:elasticsearch-client-binary:2.0.8</code></li> 
   <li>update to <code>com.ubirch.util:mongo-utils:0.3.5</code></li> 
   <li>update to <code>com.ubirch.util:mongo-test-utils:0.3.5</code></li> 
   <li>update to <code>com.ubirch.util:response-util:0.2.4</code></li> 
   <li>update to <code>com.ubirch.util:oidc-utils:0.4.9</code></li> 
  </ul> 
  <h3><a id="user-content-version-0317-2017-07-25" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#version-0317-2017-07-25" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version 0.3.17 (2017-07-25)</h3> 
  <ul> 
   <li>refactored <code>ImportTrackle</code> to work with remote environments, too (e.g. avatar-svc running in dev or demo environment)</li> 
   <li>add route <code>POST /api/avatarService/v1/device/update</code> (accepting JSON)</li> 
   <li>add route <code>POST /api/avatarService/v1/device/bulk</code> (accepting JSON)</li> 
  </ul> 
  <h3><a id="user-content-version-0316-2017-07-25" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#version-0316-2017-07-25" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version 0.3.16 (2017-07-25)</h3> 
  <ul> 
   <li>update Akka HTTP to 10.0.9</li> 
   <li>update to <code>com.ubirch.util:rest-akka-http(-test):0.3.8</code></li> 
   <li>update to <code>com.ubirch.util:response-util:0.2.3</code></li> 
   <li>update to <code>com.ubirch.util:oidc-utils_:0.4.8</code></li> 
   <li>update to <code>com.ubirch.util:mongo(-test)-utils:0.3.4</code></li> 
   <li>update to Akka 2.4.19</li> 
   <li>update to <code>com.ubirch.key:client-rest:0.1.12</code> (REST client based on Akka HTTP instead of PlayWS)</li> 
   <li>update to <code>com.ubirch.user:*:0.4.18</code> (REST client based on Akka HTTP instead of PlayWS)</li> 
  </ul> 
  <h3><a id="user-content-version-0315-2017-07-13" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#version-0315-2017-07-13" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version 0.3.15 (2017-07-13)</h3> 
  <ul> 
   <li>fixed problem with faulty log4j logging by adding the dependency <code>log4j-over-slf4j</code></li> 
   <li>add <code>MongoConstraints</code></li> 
   <li>introduced <code>MongoStorageCleanup</code></li> 
   <li>improved <code>MongoSpec</code></li> 
   <li>added clean up of MongoDD to <code>ClearDb</code></li> 
   <li>MongoDB constraints are now created during server start</li> 
   <li>update <em>com.ubirch.util:mongo(-test)-utils</em> to 0.3.3</li> 
   <li>update <em>com.ubirch.user:*</em> to 0.4.14</li> 
  </ul> 
  <h3><a id="user-content-version-0314-2017-07-11" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#version-0314-2017-07-11" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version 0.3.14 (2017-07-11)</h3> 
  <ul> 
   <li>bugfix: it was possible to create two devices with the same hwDeviceId</li> 
  </ul> 
  <h3><a id="user-content-version-0313-2017-06-29" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#version-0313-2017-06-29" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version 0.3.13 (2017-06-29)</h3> 
  <ul> 
   <li>add scripts <code>dev-scripts/resetDatabase.sh</code> and <code>dev-scripts/initData.sh</code></li> 
   <li>updated to <em>com.ubirch.util:json:0.4.2</em> and all ubirch util libs depending on it, too</li> 
   <li>update to <em>com.ubirch.user:client-rest:0.4.13</em></li> 
  </ul> 
  <h3><a id="user-content-version-0312-2017-06-22" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#version-0312-2017-06-22" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version 0.3.12 (2017-06-22)</h3> 
  <ul> 
   <li>AvatarState is no longer stored in AWS IoT but instead in a MongoDB</li> 
   <li>update to <em>json4s</em> 3.5.2</li> 
   <li>update <em>com.ubirch.util:json</em> to 0.4.1</li> 
   <li>update <em>com.ubirch.util:elasticsearch-client-binary</em> to 2.0.6</li> 
   <li>update <em>com.ubirch.util:mongo-test-utils</em> to 0.3.1</li> 
   <li>update <em>com.ubirch.util:mongo-utils</em> to 0.3.1</li> 
   <li>update <em>com.ubirch.util:oidc-utils</em> to 0.4.6</li> 
   <li>update <em>com.ubirch.util:response-util</em> to 0.2.1</li> 
   <li>update <em>com.ubirch.user:client-rest</em> to 0.4.10</li> 
   <li>bugfix (UBI-264): updates on Azure's CosmosDB show the behavior of an upsert()</li> 
  </ul> 
  <h3><a id="user-content-version-0311-2017-06-16" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#version-0311-2017-06-16" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version 0.3.11 (2017-06-16)</h3> 
  <ul> 
   <li>update to <em>json4s</em> 3.5.1</li> 
   <li>update to <em>de.heikoseeberger:akka-http-json4s</em> 1.14.0</li> 
   <li>update Akka HTTP to 10.0.6</li> 
   <li>update <em>com.ubirch.notary:notary-client</em> to 0.3.2</li> 
   <li>update <em>com.ubirch.util:elasticsearch-util</em> to 2.0.0</li> 
   <li>update to Elasticsearch 5.3</li> 
   <li>update mappings to Elasticsearch 5.3</li> 
   <li>rename module <em>model</em> to <em>model-rest</em> and introduce module <em>model-db</em></li> 
   <li>update <em>com.ubirch.util:rest-akka-http</em> to 0.3.7</li> 
   <li>update <em>com.ubirch.util:rest-akka-http-test</em> to 0.3.7</li> 
   <li>creating devices now stores groups as queried from user-service</li> 
   <li>update to Akka 2.4.18</li> 
   <li>update to Akka HTTP 10.0.6</li> 
   <li>creating a device remembers the user's groups (new field <em>Device.groups</em>)</li> 
   <li>change GO CI related environment variables to: <em>GO_PIPELINE_NAME_AVATAR</em>, <em>GO_PIPELINE_LABEL_AVATAR</em> and <em>GO_REVISION_AVATAR</em></li> 
   <li>introduce new endpoint: <code>/api/avatarService/v1/check</code></li> 
   <li>update <em>com.ubirch.util:json</em> to 0.4.0</li> 
   <li>introduce endpoint <code>/api/avatarService/v1/deepCheck</code></li> 
   <li>update <em>com.ubirch.util:elasticsearch-client-binary</em> to 2.0.5</li> 
   <li>update <em>com.ubirch.util:response-util</em> to 0.2.0</li> 
   <li>update <em>com.ubirch.util:oidc-utils</em> to 0.4.5</li> 
   <li>update <em>com.ubirch.user:client-rest</em> to 0.4.9</li> 
  </ul> 
  <h3><a id="user-content-version-0310-2017-03-01" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#version-0310-2017-03-01" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version 0.3.10 (2017-03-01)</h3> 
  <ul> 
   <li>add field <code>txHashLinkHtml</code> to <code>DeviceDataRaw</code></li> 
  </ul> 
  <h3><a id="user-content-version-039-2017-02-28" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#version-039-2017-02-28" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version 0.3.9 (2017-02-28)</h3> 
  <ul> 
   <li>update dependency <code>com.ubirch.notary:client:0.3.0</code> to 0.3.1</li> 
  </ul> 
  <h3><a id="user-content-version-038-2017-02-28" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#version-038-2017-02-28" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version 0.3.8 (2017-02-28)</h3> 
  <ul> 
   <li>update dependency <code>com.ubirch.notary:client:0.2.6</code> to 0.3.0</li> 
   <li>remember <code>txHashLink</code> when writing data to index <code>ubirch-device-raw-data-anchored</code></li> 
  </ul> 
  <h3><a id="user-content-version-037-2017-02-28" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#version-037-2017-02-28" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version 0.3.7 (2017-02-28)</h3> 
  <ul> 
   <li>upgrade lib: <code>Akka HTTP</code> from version 2.4.11 (experimental) to 10.0.3 (stable)</li> 
   <li>upgrade lib: <code>Akka</code> from version 2.4.11 to 2.4.17</li> 
   <li>upgrade rest-akka-http* modules to version 0.3.3 (add <code>Authorization</code> to CORS allow-headers)</li> 
   <li>new routes 
    <ul> 
     <li>/device/$DEVICE_ID/data/history/bydate/from/$FROM_DATE/to/$TO_DATE</li> 
     <li>/device/$DEVICE_ID/data/history/bydate/before/$DATE</li> 
     <li>/device/$DEVICE_ID/data/history/bydate/after/$DATE</li> 
     <li>/device/$DEVICE_ID/data/history/day/$DATE</li> 
    </ul> </li> 
   <li>save bitcoin tx hashes in a new index: "ubirch-device-raw-data-anchored" (only relevant for raw data with NotaryService being used)</li> 
   <li>update <code>scalatest</code> from 3.0.0 to 3.0.1</li> 
   <li>update to <code>elasticsearch-client-binary</code> version 0.5.2</li> 
   <li>bulk write of <code>DeviceDataRaw</code> and <code>DeviceDataProcessed</code></li> 
   <li>add AvatarStateManager</li> 
  </ul> 
  <h3><a id="user-content-version-036-2017-02-07" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#version-036-2017-02-07" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version 0.3.6 (2017-02-07)</h3> 
  <ul> 
   <li>update dependency "com.ubirch.notary:client:0.2.5" to 0.2.6 (getting rid of com.ubirch.util:json-auto-convert:0.1)</li> 
  </ul> 
  <h3><a id="user-content-version-035-2017-02-07" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#version-035-2017-02-07" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version 0.3.5 (2017-02-07)</h3> 
  <ul> 
   <li>minor refactorings</li> 
   <li>delete route: POST /device/&lt;DEVICE_ID&gt;</li> 
   <li>fix: read AWS from config instead of System.getenv()</li> 
   <li>fixed <code>ClearDb</code></li> 
   <li>updated some of the dependencies</li> 
   <li>added PTX temperature conversions</li> 
  </ul> 
  <h3><a id="user-content-version-034-2016-12-13" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#version-034-2016-12-13" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version 0.3.4 (2016-12-13)</h3> 
  <ul> 
   <li>added first version of raw data -&gt; history data transformation</li> 
   <li>extended DeviceType, which is contains now displayKeys: Array[String]</li> 
  </ul> 
  <h2><a id="user-content-scala-dependencies" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#scala-dependencies" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scala Dependencies</h2> 
  <h3><a id="user-content-aws" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#aws" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><code>aws</code></h3> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-en">Resolver</span>.sonatypeRepo(<span class="pl-s"><span class="pl-pds">"</span>releases<span class="pl-pds">"</span></span>)
)
libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>com.ubirch.avatar<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>aws<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.3.23<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <h3><a id="user-content-client" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#client" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><code>client</code></h3> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-en">Resolver</span>.sonatypeRepo(<span class="pl-s"><span class="pl-pds">"</span>releases<span class="pl-pds">"</span></span>),
  <span class="pl-en">Resolver</span>.bintrayRepo(<span class="pl-s"><span class="pl-pds">"</span>rick-beton<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>maven<span class="pl-pds">"</span></span>) <span class="pl-c"><span class="pl-c">//</span> BeeClient</span>
)
libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>com.ubirch.avatar<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>client<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.3.23<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <h4><a id="user-content-configuration" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#configuration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Configuration</h4> 
  <table> 
   <thead> 
    <tr> 
     <th align="left">Config Item</th> 
     <th align="left">Mandatory</th> 
     <th align="left">Description</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td align="left">ubirchAvatarService.client.rest.baseUrl</td> 
     <td align="left">no</td> 
     <td align="left">avatar-service base url (default = <a href="http://localhost:8080" target="_blank">http://localhost:8080</a>)</td> 
    </tr> 
    <tr> 
     <td align="left">ubirchAvatarService.client.rest.timeout.connect</td> 
     <td align="left">no</td> 
     <td align="left">timeout during connection creation in milliseconds (default = 15000 ms)</td> 
    </tr> 
    <tr> 
     <td align="left">ubirchAvatarService.client.rest.timeout.read</td> 
     <td align="left">no</td> 
     <td align="left">timeout when reading from server in milliseconds (default = 15000 ms)</td> 
    </tr>
   </tbody>
  </table> 
  <h4><a id="user-content-usage" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h4> 
  <p>See <code>com.ubirch.avatar.cmd.ImportTrackle</code> for an example usage.</p> 
  <h3><a id="user-content-cmdtools" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#cmdtools" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><code>cmdtools</code></h3> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-en">Resolver</span>.sonatypeRepo(<span class="pl-s"><span class="pl-pds">"</span>releases<span class="pl-pds">"</span></span>)
)
libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>com.ubirch.avatar<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>cmdtools<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.3.23<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <h3><a id="user-content-config" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#config" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><code>config</code></h3> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-en">Resolver</span>.sonatypeRepo(<span class="pl-s"><span class="pl-pds">"</span>releases<span class="pl-pds">"</span></span>)
)
libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>com.ubirch.avatar<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>config<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.3.23<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <h3><a id="user-content-core" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#core" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><code>core</code></h3> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-en">Resolver</span>.sonatypeRepo(<span class="pl-s"><span class="pl-pds">"</span>releases<span class="pl-pds">"</span></span>)
)
libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>com.ubirch.avatar<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>core<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.3.23<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <h3><a id="user-content-model-db" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#model-db" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><code>model-db</code></h3> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-en">Resolver</span>.sonatypeRepo(<span class="pl-s"><span class="pl-pds">"</span>releases<span class="pl-pds">"</span></span>)
)
libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>com.ubirch.avatar<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>model-db<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.3.23<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <h3><a id="user-content-model-rest" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#model-rest" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><code>model-rest</code></h3> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-en">Resolver</span>.sonatypeRepo(<span class="pl-s"><span class="pl-pds">"</span>releases<span class="pl-pds">"</span></span>)
)
libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>com.ubirch.avatar<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>model-rest<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.3.23<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <h3><a id="user-content-server" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#server" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><code>server</code></h3> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-en">Resolver</span>.sonatypeRepo(<span class="pl-s"><span class="pl-pds">"</span>releases<span class="pl-pds">"</span></span>),
  <span class="pl-en">Resolver</span>.bintrayRepo(<span class="pl-s"><span class="pl-pds">"</span>hseeberger<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>maven<span class="pl-pds">"</span></span>),
  <span class="pl-s"><span class="pl-pds">"</span>Typesafe Releases<span class="pl-pds">"</span></span> at <span class="pl-s"><span class="pl-pds">"</span>http://repo.typesafe.com/typesafe/releases/<span class="pl-pds">"</span></span>
)
libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>com.ubirch.avatar<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>server<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.3.23<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <h3><a id="user-content-test-base" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#test-base" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><code>test-base</code></h3> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-en">Resolver</span>.sonatypeRepo(<span class="pl-s"><span class="pl-pds">"</span>releases<span class="pl-pds">"</span></span>),
  <span class="pl-en">Resolver</span>.bintrayRepo(<span class="pl-s"><span class="pl-pds">"</span>hseeberger<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>maven<span class="pl-pds">"</span></span>),
  <span class="pl-en">Resolver</span>.bintrayRepo(<span class="pl-s"><span class="pl-pds">"</span>rick-beton<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>maven<span class="pl-pds">"</span></span>) <span class="pl-c"><span class="pl-c">//</span> BeeClient</span>
)
libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>com.ubirch.avatar<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>test-base<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.3.23<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <h3><a id="user-content-util" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#util" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><code>util</code></h3> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-en">Resolver</span>.sonatypeRepo(<span class="pl-s"><span class="pl-pds">"</span>releases<span class="pl-pds">"</span></span>)
)
libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>com.ubirch.avatar<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>util<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.3.23<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <h2><a id="user-content-rest-methods" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#rest-methods" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>REST Methods</h2> 
  <h3><a id="user-content-welcome--health--check" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#welcome--health--check" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Welcome / Health / Check</h3> 
  <pre><code>curl localhost:8080/
curl localhost:8080/api/avatarService/v1
curl localhost:8080/api/avatarService/v1/check
</code></pre> 
  <p>If server is healthy response is:</p> 
  <pre><code>200 {"version":"1.0","status":"OK","message":"Welcome to the ubirchAvatarService  ( $GO_PIPELINE_NAME / $GO_PIPELINE_LABEL / $GO_PIPELINE_REVISION )"}
</code></pre> 
  <h3><a id="user-content-deep-check--server-health" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#deep-check--server-health" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Deep Check / Server Health</h3> 
  <pre><code>curl localhost:8092/api/avatarService/v1/deepCheck
</code></pre> 
  <p>If healthy the response is:</p> 
  <pre><code>200 {"status":true,"messages":[]}
</code></pre> 
  <p>If not healthy the status is <code>false</code> and the <code>messages</code> array not empty:</p> 
  <pre><code>503 {"status":false,"messages":["unable to connect to the database"]}
</code></pre> 
  <h3><a id="user-content-device-crud" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#device-crud" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Device CRUD</h3> 
  <h4><a id="user-content-list-all-devices" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#list-all-devices" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>LIST all devices</h4> 
  <p>returns an array of all devices the authenticated user has connected</p> 
  <pre><code>curl -XGET localhost:8080/api/avatarService/v1/device -H "Authorization: Bearer token-12345678"
</code></pre> 
  <p>to list devices as short info objects use stub endpoint</p> 
  <pre><code>curl -XGET localhost:8080/api/avatarService/v1/device/stub -H "Authorization: Bearer token-12345678"
</code></pre> 
  <h4><a id="user-content-create-device" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#create-device" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>CREATE device</h4> 
  <p>creates a new device</p> 
  <pre><code>curl -XPOST localhost:8080/api/avatarService/v1/device -H "Content-Type: application/json" -H "Authorization: Bearer token-12345678" -d '{
    "deviceId":"5df0c9b7-564a-4b90-8f1b-998fbe1a1cbf",
    "hwDeviceId":"hdkljhdklghdfkjlghsdfkljghdfskl",
    "deviceName":"new device",
    "deviceTypeKey":"lightsLamp",
    "deviceProperties":{},
    "deviceConfig":{
        "i":900,
        "bf":0
    },
    "tags":[
        "ubirch#0",
        "actor","btcDemo"
    ]}'
</code></pre> 
  <h4><a id="user-content-read-edit-delete-device-with-id" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#read-edit-delete-device-with-id" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>READ, EDIT, DELETE device with ID</h4> 
  <p>READ device with given id</p> 
  <pre><code>curl -XGET localhost:8080/api/avatarService/v1/device/&lt;DEVICE_ID&gt; -H "Authorization: Bearer token-12345678"
</code></pre> 
  <p>UPDATE device with given id</p> 
  <pre><code>curl -XPUT localhost:8080/api/avatarService/v1/device/&lt;DEVICE_ID&gt; -H "Authorization: Bearer token-12345678" -H "Content-Type: application/json" -d '{
      "deviceId":"5df0c9b7-564a-4b90-8f1b-998fbe1a1cbf",
      "hwDeviceId":"hdkljhdklghdfkjlghsdfkljghdfskl",
      "deviceName":"new device",
      "deviceTypeKey":"lightsLamp",
      "deviceProperties":{},
      "deviceConfig":{
          "i":900,
          "bf":0
      },
      "tags":[
          "ubirch#0",
          "actor","btcDemo"
      ]}'
</code></pre> 
  <p>DELETE device with given id</p> 
  <pre><code>curl -XDELETE localhost:8080/api/avatarService/v1/device/&lt;DEVICE_ID&gt; -H "Authorization: Bearer token-12345678"
</code></pre> 
  <h4><a id="user-content-device-state" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#device-state" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Device State</h4> 
  <p>get state of device with given id</p> 
  <pre><code>curl -XGET localhost:8080/api/avatarService/v1/device/&lt;DEVICE_ID&gt;/state
</code></pre> 
  <h3><a id="user-content-device-data" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#device-data" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Device Data</h3> 
  <h4><a id="user-content-raw" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#raw" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Raw</h4> 
  <p>Raw data comes directly from devices and is not yet human readable.</p> 
  <pre><code>curl -XPOST localhost:8080/api/avatarService/v1/device/data/raw -H "Content-Type: application/json" -d '{
  "deviceId": "57a7892e-e707-4256-81e4-2e579213e6b8",
  "messageId": "8aa3d0ec-9ec8-4785-93e9-6fd1705dace6",
  "deviceType": "lightsLamp",
  "timestamp": "2016-06-30T11:39:51Z",
  "deviceTags": [
    "ubirch#0",
    "actor"
  ],
  "deviceMessage": {
    "foo": 23,
    "bar": "ubirch-sensor-data"
  }
}'
</code></pre> 
  <h4><a id="user-content-update" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#update" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Update</h4> 
  <p>TODO: add description</p> 
  <pre><code>curl -XPOST localhost:8080/api/avatarService/v1/device/update -H "Content-Type: application/json" -d '{
    "deviceId": "57a7892e-e707-4256-81e4-2e579213e6b8",
    "messageId": "8aa3d0ec-9ec8-4785-93e9-6fd1705dace6",
    "deviceType": "lightsLamp",
    "timestamp": "2016-06-30T11:39:51Z",
    "deviceTags": [
      "ubirch#0",
      "actor"
    ],
    "deviceMessage": {
      "foo": 23,
      "bar": "ubirch-sensor-data"
    }
}'
</code></pre> 
  <h4><a id="user-content-bulk" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#bulk" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Bulk</h4> 
  <p>TODO: add description</p> 
  <pre><code>curl -XPOST localhost:8080/api/avatarService/v1/device/bulk -H "Content-Type: application/json" -d '{
    "deviceId": "57a7892e-e707-4256-81e4-2e579213e6b8",
    "messageId": "8aa3d0ec-9ec8-4785-93e9-6fd1705dace6",
    "deviceType": "lightsLamp",
    "timestamp": "2016-06-30T11:39:51Z",
    "deviceTags": [
      "ubirch#0",
      "actor"
    ],
    "deviceMessage": {
      "foo": 23,
      "bar": "ubirch-sensor-data"
    }
}'
</code></pre> 
  <h4><a id="user-content-history-from-to" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#history-from-to" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>History (From-To)</h4> 
  <p>Historic data is generated by sending in raw data which is then transformed to "processed" data.</p> 
  <p>The main difference between raw and processed data is simple. Raw data has been generated by devices and is not human readable. Applying a device specific transformation to raw data we get processed data which is human readable.</p> 
  <p>Query historic device data (CAUTION: <code>from</code> and <code>page_size</code> may be zero or larger):</p> 
  <pre><code>curl -XGET localhost:8080/api/avatarService/v1/device/&lt;DEVICE_ID&gt;/data/history

curl -XGET localhost:8080/api/avatarService/v1/device/&lt;DEVICE_ID&gt;/data/history/&lt;FROM&gt;

curl -XGET localhost:8080/api/avatarService/v1/device/&lt;DEVICE_ID&gt;/data/history/&lt;FROM&gt;/&lt;PAGE_SIZE&gt;
</code></pre> 
  <h4><a id="user-content-history-by-date" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#history-by-date" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>History (By Date)</h4> 
  <p>Historic data is generated by sending in raw data which is then transformed to "processed" data.</p> 
  <p>The main difference between raw and processed data is simple. Raw data has been generated by devices and is not human readable. Applying a device specific transformation to raw data we get processed data which is human readable.</p> 
  <p>Query historic device data <strong>between</strong> a <code>from</code> and <code>to</code> (including both borders):</p> 
  <pre><code>curl -XGET localhost:8080/api/avatarService/v1/device/&lt;DEVICE_ID&gt;/data/history/byDate/from/$FROM_DATE/to/$TO_DATE
</code></pre> 
  <p>Query historic device data <em>before</em> a specific date:</p> 
  <pre><code>curl -XGET localhost:8080/api/avatarService/v1/device/&lt;DEVICE_ID&gt;/data/history/byDate/before/$DATE
</code></pre> 
  <p>Query historic device data <em>after</em> a specific date:</p> 
  <pre><code>curl -XGET localhost:8080/api/avatarService/v1/device/&lt;DEVICE_ID&gt;/data/history/byDate/after/$DATE
</code></pre> 
  <p>Query historic device data of a <em>whole</em> day:</p> 
  <pre><code>curl -XGET localhost:8080/api/avatarService/v1/device/&lt;DEVICE_ID&gt;/data/history/byDate/day/$DATE
</code></pre> 
  <h3><a id="user-content-device-types" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#device-types" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Device Types</h3> 
  <p>Devices have types and this set of methods allows us to manage them.</p> 
  <h4><a id="user-content-query-all-available-device-types" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#query-all-available-device-types" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Query all available device types</h4> 
  <pre><code>curl -XGET localhost:8080/api/avatarService/v1/device/deviceType
</code></pre> 
  <h4><a id="user-content-create-device-type" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#create-device-type" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Create device type</h4> 
  <pre><code>curl -XPOST localhost:8080/api/avatarService/v1/device/deviceType -H "Content-Type: application/json" -d '{
    "key": "trackle",
    "name": {
      "de": "Trackle",
      "en": "Trackle"
    },
    "icon": "trackle",
    "defaults": {
      "properties": {},
      "config": {
        "i": 60
      },
      "tags": [
        "ubirch#1",
        "actor",
        "trackle"
      ]
    }
  }'
</code></pre> 
  <h5><a id="user-content-response-success" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#response-success" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Response (Success)</h5> 
  <pre><code>HTTP/1.1 200 OK
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept, Accept-Encoding, Accept-Language, Host, Referer, User-Agent
Access-Control-Allow-Credentials: true
Server: ubirch-avatar-service
Date: Thu, 10 Nov 2016 16:30:51 GMT
Content-Type: application/json
Content-Length: 158

{"key":"trackle","name":{"de":"Trackle","en":"Trackle"},"icon":"trackle","defaults":{"properties":{},"config":{"i":60},"tags":["ubirch#1","actor","trackle"]}}
</code></pre> 
  <h5><a id="user-content-response-error" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#response-error" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Response (Error)</h5> 
  <pre><code>HTTP/1.1 400 Bad Request
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept, Accept-Encoding, Accept-Language, Host, Referer, User-Agent
Access-Control-Allow-Credentials: true
Server: ubirch-avatar-service
Date: Thu, 10 Nov 2016 16:35:40 GMT
Content-Type: application/json
Content-Length: 199

{
  "version" : "1.0",
  "status" : "NOK",
  "errorType" : "CreateError",
  "errorMessage": "another deviceType with key=trackle already exists or otherwise something else on the server went wrong"
}
</code></pre> 
  <h4><a id="user-content-update-device-type" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#update-device-type" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Update Device Type</h4> 
  <pre><code>curl -XPUT localhost:8080/api/avatarService/v1/device/deviceType -H "Content-Type: application/json" -d '{
    "key": "trackle",
    "name": {
      "de": "Trackle",
      "en": "Trackle"
    },
    "icon": "trackle",
    "defaults": {
      "properties": {},
      "config": {
        "i": 120
      },
      "tags": [
        "ubirch#0",
        "actor",
        "trackle"
      ]
    }
  }'
</code></pre> 
  <h5><a id="user-content-response-success-1" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#response-success-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Response (Success)</h5> 
  <pre><code>HTTP/1.1 200 OK
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept, Accept-Encoding, Accept-Language, Host, Referer, User-Agent
Access-Control-Allow-Credentials: true
Server: ubirch-avatar-service
Date: Thu, 10 Nov 2016 16:33:24 GMT
Content-Type: application/json
Content-Length: 159

{"key":"trackle","name":{"de":"Trackle","en":"Trackle"},"icon":"trackle","defaults":{"properties":{},"config":{"i":120},"tags":["ubirch#0","actor","trackle"]}}
</code></pre> 
  <h5><a id="user-content-response-error-1" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#response-error-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Response (Error)</h5> 
  <pre><code>HTTP/1.1 400 Bad Request
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept, Accept-Encoding, Accept-Language, Host, Referer, User-Agent
Access-Control-Allow-Credentials: true
Server: ubirch-avatar-service
Date: Thu, 10 Nov 2016 16:27:31 GMT
Content-Type: application/json
Content-Length: 186

{
  "version" : "1.0",
  "status" : "NOK",
  "errorType" : "UpdateError",
  "errorMessage": "no deviceType with key=trackle exists or otherwise something else on the server went wrong"
}
</code></pre> 
  <h4><a id="user-content-create-default-device-types-but-only-if-no-other-types-exist-in-the-database" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#create-default-device-types-but-only-if-no-other-types-exist-in-the-database" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Create default device types but only if no other types exist in the database:</h4> 
  <pre><code>curl -XGET localhost:8080/api/avatarService/v1/device/deviceType/init
</code></pre> 
  <h2><a id="user-content-configuration-1" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#configuration-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Configuration</h2> 
  <p>The ubirch avatar service has several external dependencies:</p> 
  <ul> 
   <li>AWS SQS</li> 
   <li>ElasticSearch</li> 
  </ul> 
  <p>Those are configured via environment variables.</p> 
  <h3><a id="user-content-aws-sqs" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#aws-sqs" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>AWS SQS</h3> 
  <p>In order to talk to AWS SQS the service needs two SQS targets:</p> 
  <pre><code>SQS_UBIRCH_TRANSFORMER_INBOX=&lt;string&gt;
SQS_UBIRCH_TRANSFORMER_OUTBOX=&lt;string&gt;
</code></pre> 
  <p>Those queues need authentication with AWS credentials. These are passed via</p> 
  <pre><code>AWS_ACCESS_KEY_ID=&lt;string&gt;
AWS_SECRET_ACCESS_KEY=&lt;string&gt;
</code></pre> 
  <h3><a id="user-content-elasticsearch" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#elasticsearch" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>ElasticSearch</h3> 
  <p>Avatar service is using ElasticSearch for logging and device management. It needs a specific ES version and access to Port 9200 (HTTP) and Port 93000 (TCP)</p> 
  <pre><code>	ES_HOST=elasticsearch
	ES_PORT_HTTP=9200
	ES_PORT_TCP=9300
</code></pre> 
  <h3><a id="user-content-debug-output" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#debug-output" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Debug Output</h3> 
  <p>Since ubirch avatar service is using ElastiSearch for logging it can be hard to figure out what's not working if the connection to ES can't be established. If you set</p> 
  <pre><code>	DEBUG=true
</code></pre> 
  <p>as environment variable then the logging is send to STDOUT.</p> 
  <h2><a id="user-content-aws-1" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#aws-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>AWS</h2> 
  <h3><a id="user-content-aws-console-account" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#aws-console-account" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>AWS Console Account</h3> 
  <p>Login on <a href="https://console.aws.amazon.com/console/home" target="_blank">https://console.aws.amazon.com/console/home</a> with your AWS account. Without an account or not having logged AWS connections might not work.</p> 
  <h3><a id="user-content-aws-cli" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#aws-cli" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>AWS CLI</h3> 
  <p>On MacOS you can install the aws-cli tool through brew:</p> 
  <pre><code>brew install awscli
</code></pre> 
  <p>To configure it then run:</p> 
  <pre><code>aws configure
</code></pre> 
  <p>The default region should be <code>us-east-1</code> while the output format can remain None since it's not relevant yet.</p> 
  <h3><a id="user-content-aws-configuration" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#aws-configuration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>AWS Configuration</h3> 
  <p>The AvatarService opens a connection to AWS which depends on the following environment variables:</p> 
  <pre><code>export AWS_ACCESS_KEY_ID=foo
export AWS_SECRET_ACCESS_KEY=bar
</code></pre> 
  <h2><a id="user-content-deployment-notes" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#deployment-notes" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Deployment Notes</h2> 
  <h3><a id="user-content-elasticsearch-1" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#elasticsearch-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Elasticsearch</h3> 
  <p>The service requires the mappings defined in <code>ElasticsearchMappings</code>. They are automatically created during server boot if they don't exist.</p> 
  <h2><a id="user-content-automated-tests" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#automated-tests" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Automated Tests</h2> 
  <p>TODO</p> 
  <h2><a id="user-content-local-setup" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#local-setup" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Local Setup</h2> 
  <p>This Repository contains a sample docker-compose.yaml file which will stand up a fully functional ubirch avatar service including it's dependencies. In order to use this you have to export your AWS Access credentials as environment variables as described above (AWS Configuration). Once those are available you can start the containers with ($PWD should be root of the working copy):</p> 
  <pre><code>	docker-compose up
</code></pre> 
  <p>This will start three container: ElasticSearch, Kibana, ubirch-avatar-service</p> 
  <p>If you haven not yet install docker-compose follow the instructions found here <a href="https://docs.docker.com/compose/install/" target="_blank">https://docs.docker.com/compose/install/</a>.</p> 
  <h2><a id="user-content-create-docker-image" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#create-docker-image" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Create Docker Image</h2> 
  <pre><code>./goBuild assembly &amp;&amp; ./goBuild containerbuild
</code></pre> 
  <h2><a id="user-content-generate-test-data" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#generate-test-data" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Generate Test Data</h2> 
  <p>Running this removes all your local ElasticSearch indexes and recreates them!!</p> 
  <ol> 
   <li> <p>start server, e.g. in a terminal</p> 
    <ol> 
     <li> <p>set AWS env vars:</p> <p>export AWS_ACCESS_KEY_ID={YOUR AWS ACCESS KEY}</p> <p>export AWS_SECRET_ACCESS_KEY={YOUR AWS SECRET KEY}</p> <p>export MQTT_USER={MQTT-User}</p> <p>export MQTT_PASSWORD={MQTT-Password}</p> </li> 
     <li> <p>if using a terminal, change inside the project folder and</p> <p>./sbt server/run</p> </li> 
    </ol> </li> 
   <li> <p>reset database</p> </li> 
  </ol> 
  <p><em>Running <code>dev-scripts/resetDatabase.sh</code> does everything in this step.</em></p> 
  <pre><code> ./sbt "cmdtools/runMain com.ubirch.avatar.cmd.ClearDb"
</code></pre> 
  <ol start="3"> 
   <li> <p>start test data tool</p> 
    <ol> 
     <li> <p>set AWS env vars:</p> 
      <div class="highlight highlight-source-shell">
       <pre><span class="pl-k">export</span> AWS_ACCESS_KEY_ID={YOUR AWS ACCESS KEY}
<span class="pl-k">export</span> AWS_SECRET_ACCESS_KEY={YOUR AWS SECRET KEY}
<span class="pl-k">export</span> MQTT_USER={MQTT-User}
<span class="pl-k">export</span> MQTT_PASSWORD={MQTT-Password}</pre>
      </div> </li> 
     <li> <p>if using a terminal, change inside the project folder and</p> </li> 
    </ol> </li> 
  </ol> 
  <p><em>Running <code>dev-scripts/initData.sh</code> does everything in this step.</em></p> 
  <pre><code>    ```bash
    ./sbt "cmdtools/runMain com.ubirch.avatar.cmd.InitData"
    ```
</code></pre> 
  <ol start="3"> 
   <li>now you should find one device "testHans001" and 50 data points</li> 
  </ol> 
  <h2><a id="user-content-import-trackle-data" class="anchor" href="https://github.com/ubirch/ubirch-avatar-service#import-trackle-data" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Import Trackle Data</h2> 
  <ol> 
   <li> <p>Prepare User</p> <p>The test data generation includes the generation of test data and a device. This means we still need a user which you'll have to create/register manually by logging in on the AdminUI of the remote environment. Please remember the token resulting from the registration or login.</p> </li> 
   <li> <p>Prepare Data Import</p> 
    <div class="highlight highlight-source-shell">
     <pre><span class="pl-c"><span class="pl-c">#</span> user token from registration or login</span>
<span class="pl-k">export</span> AVATAR_USER_TOKEN=token-12345678
<span class="pl-c"><span class="pl-c">#</span> (optional) base url of the remote environment's avatar-service (defaults to http://localhost:8080)</span>
<span class="pl-k">export</span> AVATAR_BASE_URL=https://avatar.myserver.com:8080</pre>
    </div> </li> 
   <li> <p>Run Data Import</p> </li> 
  </ol> 
  <p>You can also run <code>dev-scripts/importTrackle.sh $AVATAR_USER_TOKEN</code>.</p> 
  <pre><code>```bash
./sbt "cmdtools/runMain com.ubirch.avatar.cmd.ImportTrackle"
```
</code></pre> 
 </article>
</div>