<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <p><a href="https://travis-ci.org/joshlemer/MultiIndex" target="_blank"><img src="https://camo.githubusercontent.com/5ef98a59d3704475b0f4ed42c1869c014ce2b341/68747470733a2f2f7472617669732d63692e6f72672f6a6f73686c656d65722f4d756c7469496e6465782e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/joshlemer/MultiIndex.svg?branch=master" style="max-width:100%;"></a></p> 
  <h1><a href="https://github.com/joshlemer/multiindex#multiindex" aria-hidden="true" class="anchor" id="user-content-multiindex" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>MultiIndex</h1> 
  <p>This is a library to facilitate querying by multiple indexes on a collection in Scala.</p> 
  <h1><a href="https://github.com/joshlemer/multiindex#installation" aria-hidden="true" class="anchor" id="user-content-installation" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Installation</h1> 
  <h2><a href="https://github.com/joshlemer/multiindex#sbt" aria-hidden="true" class="anchor" id="user-content-sbt" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>SBT</h2> 
  <p>In build.sbt:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>com.github.joshlemer<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>multiindex<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.1.1<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <h2><a href="https://github.com/joshlemer/multiindex#maven" aria-hidden="true" class="anchor" id="user-content-maven" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Maven</h2> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">dependency</span>&gt;
    &lt;<span class="pl-ent">groupId</span>&gt;com.github.joshlemer&lt;/<span class="pl-ent">groupId</span>&gt;
    &lt;<span class="pl-ent">artifactId</span>&gt;multiindex_2.11&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;0.1.1&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre>
  </div> 
  <h1><a href="https://github.com/joshlemer/multiindex#motivation" aria-hidden="true" class="anchor" id="user-content-motivation" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Motivation</h1> 
  <p>It is a very common occurrence in programming to have a collection of elements, from which you want to find only the elements with some property.</p> 
  <p>For example, maybe you are writing forum software that deals with Comments:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Comment</span>(<span class="pl-v">userId</span>: <span class="pl-en">UserId</span>, <span class="pl-v">threadId</span>: <span class="pl-k">Int</span>, <span class="pl-v">createdAt</span>: <span class="pl-en">DateTime</span>, <span class="pl-v">body</span>: <span class="pl-k">String</span>)</pre>
  </div> 
  <p>So you have a <code>List[Comment]</code>, but want to quickly be able to retrieve all the comments for a particular user. To support this you might create a <code>Map[UserId, List[Comment]]</code> by calling <code>comments.groupBy(_.userId)</code>. Now you have fast lookup of comments by userId. This works well enough for this simple case, but now what happens when you want to access your data in more than one way? Maybe you also want to quickly find comments in a given thread. So you can again use <code>comments.groupBy(_.threadId)</code> to have fast lookups. But now you have to manually keep track of multiple different mappings, and it's not so easy to insert or remove comments.</p> 
  <p>Instead, you can use <code>MultiIndex</code> to easily index your collection on multiple indexes. The example above would simply be:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.joshlemer.multiindex.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">comments</span><span class="pl-k">:</span> <span class="pl-en">List</span>[<span class="pl-en">Comment</span>] <span class="pl-k">=</span> <span class="pl-k">???</span>

<span class="pl-k">val</span> <span class="pl-en">commentsByUserAndThread</span> <span class="pl-k">=</span> comments.indexBy(_.userId, _.threadId) <span class="pl-c"><span class="pl-c">//</span> MultiIndex2[User, UserId, Int]</span>

<span class="pl-k">def</span> <span class="pl-en">commentsByUser</span>(<span class="pl-v">userId</span>: <span class="pl-en">UserId</span>)<span class="pl-k">:</span> <span class="pl-en">List</span>[<span class="pl-en">Comment</span>] <span class="pl-k">=</span> comments.get1(userId)
<span class="pl-k">def</span> <span class="pl-en">commentsByThread</span>(<span class="pl-v">threadId</span>: <span class="pl-k">Int</span>)<span class="pl-k">:</span> <span class="pl-en">List</span>[<span class="pl-en">Comment</span>] <span class="pl-k">=</span> comments.get2(threadId)

<span class="pl-k">def</span> <span class="pl-en">postComment</span>(<span class="pl-v">comment</span>: <span class="pl-en">Comment</span>)<span class="pl-k">:</span> <span class="pl-en">MultiIndex2</span>[<span class="pl-en">User</span>, <span class="pl-en">UserId</span>, <span class="pl-k">Int</span>] <span class="pl-k">=</span> commentsByUserAndThread <span class="pl-k">+</span> comment
<span class="pl-k">def</span> <span class="pl-en">deleteComment</span>(<span class="pl-v">comment</span>: <span class="pl-en">Comment</span>)<span class="pl-k">:</span> <span class="pl-en">MultiIndex2</span>[<span class="pl-en">User</span>, <span class="pl-en">UserId</span>, <span class="pl-k">Int</span>] <span class="pl-k">=</span> commentsByUserAndThread <span class="pl-k">-</span> comment</pre>
  </div> 
  <p>I've tried to make the library simple to use, fast, light-weight, and dependency-free.</p> 
  <h1><a href="https://github.com/joshlemer/multiindex#usage-in-detail" aria-hidden="true" class="anchor" id="user-content-usage-in-detail" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage in detail</h1> 
  <h3><a href="https://github.com/joshlemer/multiindex#creating-a-multiindex" aria-hidden="true" class="anchor" id="user-content-creating-a-multiindex" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Creating a MultiIndex</h3> 
  <p>First way - convert any <code>Iterable</code> to a MultiIndex by importing an implicit class:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">multiindex.</span><span class="pl-v">_</span>
<span class="pl-k">val</span> <span class="pl-en">indexed</span><span class="pl-k">:</span> <span class="pl-en">MultiIndex1</span>[<span class="pl-k">Int</span>, <span class="pl-k">String</span>] <span class="pl-k">=</span> <span class="pl-en">List</span>(<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>).indexBy(_.toString)</pre>
  </div> 
  <p>Second way - convert any <code>Iterable</code> to a MultiIndex using the <code>MultiIndex</code> companion object</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">multiindex.</span><span class="pl-v">MultiIndex</span>
<span class="pl-k">val</span> <span class="pl-en">indexed</span><span class="pl-k">:</span> <span class="pl-en">MultiIndex1</span>[<span class="pl-k">Int</span>, <span class="pl-k">Int</span>, <span class="pl-k">Boolean</span>, <span class="pl-k">Boolean</span>] <span class="pl-k">=</span> 
  <span class="pl-en">MultiIndex</span>(<span class="pl-en">List</span>(<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>))(_ <span class="pl-k">+</span> <span class="pl-c1">1</span> <span class="pl-k">*</span> <span class="pl-c1">11</span> <span class="pl-k">/</span> <span class="pl-c1">2</span>, _ <span class="pl-k">&lt;</span> <span class="pl-c1">0</span>, _ <span class="pl-k">%</span> <span class="pl-c1">2</span> <span class="pl-k">==</span> <span class="pl-c1">0</span>)</pre>
  </div> 
  <p>Third way - create an empty <code>MultiIndex</code> and add your collection to it</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">multiindex.</span><span class="pl-v">MultiIndex</span>
<span class="pl-k">val</span> <span class="pl-en">indexed</span><span class="pl-k">:</span> <span class="pl-en">MultiIndex1</span>[<span class="pl-k">Int</span>, <span class="pl-k">Double</span>] <span class="pl-k">=</span> <span class="pl-en">MultiIndex</span>.empty[<span class="pl-k">Int</span>, <span class="pl-k">Double</span>](_.toDouble) <span class="pl-k">++</span> <span class="pl-en">List</span>(<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>)</pre>
  </div> 
  <p>Notice that there isn't just a single MultiIndex type, but rather a different type for each number of dimensions (number of indexing functions). So for example <code>MultiIndex1[A, B1]</code>, <code>MultiIndex2[A, B1, B2]</code>, <code>MultiIndex3[A, B1, B2, B3]</code>, <code>MultiIndex4[A, B1, B2, B3, B4]</code>. The type of MultiIndex you get when you create one is determined by the number of indexing functions you pass in to the indexBy method, or to the Factory constructor.</p> 
  <h3><a href="https://github.com/joshlemer/multiindex#lookups" aria-hidden="true" class="anchor" id="user-content-lookups" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Lookups</h3> 
  <p>To look up elements by an index, you can use the <code>getX</code> methods, where X is the index you want to query by. So for example</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">multiIndex</span> <span class="pl-k">=</span> <span class="pl-en">List</span>(<span class="pl-c1">1</span>,<span class="pl-c1">1</span>,<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>,<span class="pl-c1">4</span>,<span class="pl-c1">5</span>).indexBy(_.toString, _ <span class="pl-k">+</span> <span class="pl-c1">1</span>, _ <span class="pl-k">&gt;</span> <span class="pl-c1">3</span>)

multiIndex.get1(<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>) <span class="pl-c"><span class="pl-c">//</span> List(4)</span>
multiIndex.get1(<span class="pl-s"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>) <span class="pl-c"><span class="pl-c">//</span> List()</span>

multiIndex.get2(<span class="pl-c1">4</span>) <span class="pl-c"><span class="pl-c">//</span> List(3)</span>
multiIndex.get2(<span class="pl-c1">8</span>) <span class="pl-c"><span class="pl-c">//</span> List()</span>

multiIndex.get3(<span class="pl-c1">true</span>) <span class="pl-c"><span class="pl-c">//</span> List(4,5)</span>
multiIndex.get3(<span class="pl-c1">false</span>) <span class="pl-c"><span class="pl-c">//</span> List(1,1,1,2,3)</span></pre>
  </div> 
  <p>Also exposed are <code>getXMultiSet</code> methods, where <code>X</code> is the index to query on. These methods return a <code>MultiSet[A]</code> rather than a <code>List[A]</code>, which is just a more compact representation of data. It is a Set data structure that can store duplicates.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">//</span> maps elements to their multiplicity in the set</span>
multiindex.get3MultiSet(<span class="pl-c1">false</span>) <span class="pl-c"><span class="pl-c">//</span> MultiSet(1, 1, 1, 2, 3) </span></pre>
  </div> 
  <p><code>MultiSet</code>s have the nice property that their unions and intersections are very fast to compute, and this is what you can use to make queries on multiple indexes at once. For example:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">//</span> get elements matching on BOTH index 1 and index 3</span>
multiindex.get1MultiSet(<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>).intersect(multiindex.get3MultiSet(<span class="pl-c1">false</span>)) 
<span class="pl-c"><span class="pl-c">//</span> MultiSet(1, 1, 1)</span>

<span class="pl-c"><span class="pl-c">//</span> get elements matching on EITHER index 2 or index 3</span>
multiindex.get1MultiSet(<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>).union(multiindex.get3MultiSet(<span class="pl-c1">true</span>)) 
<span class="pl-c"><span class="pl-c">//</span> MultiSet(2, 2, 4, 5)</span></pre>
  </div> 
  <h3><a href="https://github.com/joshlemer/multiindex#adding-and-removing-elements" aria-hidden="true" class="anchor" id="user-content-adding-and-removing-elements" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Adding and removing elements</h3> 
  <p>Adding and removing elements is very straight forward</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">added</span> <span class="pl-k">=</span> multiIndex <span class="pl-k">+</span> <span class="pl-c1">9</span> <span class="pl-k">+</span> <span class="pl-c1">10</span> <span class="pl-k">+</span> <span class="pl-c1">11</span> <span class="pl-c"><span class="pl-c">//</span> adds 9, 10, 11 to the index</span>
added.get1(<span class="pl-s"><span class="pl-pds">"</span>10<span class="pl-pds">"</span></span>) <span class="pl-c"><span class="pl-c">//</span> List(10)</span>

<span class="pl-c"><span class="pl-c">//</span> each addition or removal only adds or removes 1 instance the element from the MultiIndex</span>
<span class="pl-k">val</span> <span class="pl-en">removed</span> <span class="pl-k">=</span> multiIndex <span class="pl-k">-</span> <span class="pl-c1">1</span> <span class="pl-k">-</span> <span class="pl-c1">1</span> <span class="pl-k">-</span> <span class="pl-c1">2</span>

<span class="pl-c"><span class="pl-c">//</span> or equivalently</span>
<span class="pl-k">val</span> <span class="pl-en">added</span> <span class="pl-k">=</span> multiIndex <span class="pl-k">++</span> <span class="pl-en">List</span>(<span class="pl-c1">9</span>, <span class="pl-c1">10</span>, <span class="pl-c1">11</span>)
<span class="pl-k">val</span> <span class="pl-en">removed</span> <span class="pl-k">=</span> multiIndex <span class="pl-k">--</span> <span class="pl-en">List</span>(<span class="pl-c1">1</span>, <span class="pl-c1">1</span>, <span class="pl-c1">2</span>)

<span class="pl-c"><span class="pl-c">//</span> It's also very vast to add MultSets to a MultiIndex</span>
<span class="pl-k">val</span> <span class="pl-en">ms</span><span class="pl-k">:</span> <span class="pl-en">MultiSet</span>[<span class="pl-k">Int</span>] <span class="pl-k">=</span> <span class="pl-k">???</span>
multiIndex <span class="pl-k">++</span> added</pre>
  </div> 
  <h2><a href="https://github.com/joshlemer/multiindex#multisets" aria-hidden="true" class="anchor" id="user-content-multisets" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>MultiSets</h2> 
  <p>A <a href="https://en.wikipedia.org/wiki/Multiset" target="_blank">MultiSet</a> is a data structure similar to a <code>Set</code>, except that it can contain duplicate elements. This library contains a simple purely-functional implementation of a this data structure, which is used by <code>MultiIndex</code>es. They are used in this libarary because they support effectively constant-time lookups, insertions and removals, and can be represented in a very compact form, basically as a <code>Map[A, Int]</code> from elements to their multiplicity in the MultiSet, at O(n), where n is the number of unique elements in the <code>MultiSet</code>. Because many users would prefer to use standard library collections when dealing with <code>MultiIndex</code>es, the api exposes <code>getX</code> methods which return <code>List</code>s, however using the <code>getXMultiSet</code> methods will be more performant, since they are already stored, unlike <code>List</code>s which need to be created from the <code>MultiSet.toList</code> method.</p> 
  <h3><a href="https://github.com/joshlemer/multiindex#creating-a-multiset" aria-hidden="true" class="anchor" id="user-content-creating-a-multiset" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Creating a MultiSet</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.joshlemer.multiset.</span><span class="pl-v">_</span>

<span class="pl-c"><span class="pl-c">//</span> Factory apply method</span>
<span class="pl-k">val</span> <span class="pl-en">multiSet</span><span class="pl-k">:</span> <span class="pl-en">MultiSet</span>[<span class="pl-k">Char</span>] <span class="pl-k">=</span> <span class="pl-en">MultiSet</span>(<span class="pl-c1">'a'</span>, <span class="pl-c1">'b'</span>, <span class="pl-c1">'b'</span>, <span class="pl-c1">'c'</span>, <span class="pl-c1">'c'</span>, <span class="pl-c1">'c'</span>)

<span class="pl-c"><span class="pl-c">//</span> Implicit class imported in com.joshlemer.multiSet</span>
<span class="pl-k">val</span> <span class="pl-en">multiSet</span><span class="pl-k">:</span> <span class="pl-en">MultiSet</span>[<span class="pl-k">Char</span>] <span class="pl-k">=</span> <span class="pl-en">List</span>(<span class="pl-c1">'a'</span>, <span class="pl-c1">'b'</span>, <span class="pl-c1">'b'</span>, <span class="pl-c1">'c'</span>, <span class="pl-c1">'c'</span>, <span class="pl-c1">'c'</span>).toMultiSet</pre>
  </div> 
  <h3><a href="https://github.com/joshlemer/multiindex#lookups-1" aria-hidden="true" class="anchor" id="user-content-lookups-1" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Lookups</h3> 
  <div class="highlight highlight-source-scala">
   <pre>multiSet(<span class="pl-c1">'a'</span>) <span class="pl-c"><span class="pl-c">//</span> 1 -- 'a' is in the MultiSet once</span>
multiSet(<span class="pl-c1">'b'</span>) <span class="pl-c"><span class="pl-c">//</span> 2</span>
multiSet(<span class="pl-c1">'c'</span>) <span class="pl-c"><span class="pl-c">//</span> 3</span>
multiSet(<span class="pl-c1">'d'</span>) <span class="pl-c"><span class="pl-c">//</span> 0 -- 'd' does not appear in the MultiSet</span>

multiSet.contains(<span class="pl-c1">'a'</span>) <span class="pl-c"><span class="pl-c">//</span> true</span>
multiSet.contains(<span class="pl-c1">'d'</span>) <span class="pl-c"><span class="pl-c">//</span> false</span></pre>
  </div> 
  <h3><a href="https://github.com/joshlemer/multiindex#insertions-and-removals" aria-hidden="true" class="anchor" id="user-content-insertions-and-removals" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Insertions and Removals</h3> 
  <div class="highlight highlight-source-scala">
   <pre>multiSet <span class="pl-k">+</span> <span class="pl-c1">'a'</span> <span class="pl-k">+</span> <span class="pl-c1">'b'</span> <span class="pl-k">+</span> <span class="pl-c1">'e'</span> <span class="pl-c"><span class="pl-c">//</span> returns a MultiSet with each Char added</span>
multiSet <span class="pl-k">-</span> <span class="pl-c1">'a'</span> <span class="pl-k">-</span> <span class="pl-c1">'b'</span> <span class="pl-k">-</span> <span class="pl-c1">'e'</span> <span class="pl-c"><span class="pl-c">//</span> returns a MultiSet with each Char removed</span>

<span class="pl-c"><span class="pl-c">//</span> equivalently</span>
multiSet <span class="pl-k">++</span> <span class="pl-en">List</span>(<span class="pl-c1">'a'</span>, <span class="pl-c1">'b'</span>, <span class="pl-c1">'c'</span>)
multiSet <span class="pl-k">--</span> <span class="pl-en">List</span>(<span class="pl-c1">'a'</span>, <span class="pl-c1">'b'</span>, <span class="pl-c1">'c'</span>)

<span class="pl-c"><span class="pl-c">//</span> and again</span>
multiSet <span class="pl-k">++</span> <span class="pl-en">MultiSet</span>(<span class="pl-c1">'a'</span>, <span class="pl-c1">'b'</span>, <span class="pl-c1">'c'</span>)
multiSet <span class="pl-k">--</span> <span class="pl-en">MultiSet</span>(<span class="pl-c1">'a'</span>, <span class="pl-c1">'b'</span>, <span class="pl-c1">'c'</span>)</pre>
  </div> 
  <h3><a href="https://github.com/joshlemer/multiindex#multiset-union-and-intersection" aria-hidden="true" class="anchor" id="user-content-multiset-union-and-intersection" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>MultiSet Union and Intersection</h3> 
  <p>It is very easy and fast to compute the intersection or union of two MultiSets</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-en">MultiSet</span>(<span class="pl-c1">1</span>,<span class="pl-c1">1</span>,<span class="pl-c1">1</span>,<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">2</span>).intersect(<span class="pl-en">MultiSet</span>(<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">2</span>,<span class="pl-c1">2</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>)) <span class="pl-c"><span class="pl-c">//</span> MultiSet(1, 2, 2)</span>

<span class="pl-en">MultiSet</span>(<span class="pl-c1">1</span>,<span class="pl-c1">1</span>,<span class="pl-c1">1</span>,<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">2</span>).union(<span class="pl-en">MultiSet</span>(<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">2</span>,<span class="pl-c1">2</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>)) <span class="pl-c"><span class="pl-c">//</span> MultiSet(1,1,1,1,2,2,2,2,3)</span></pre>
  </div> 
  <p>Note that taking a union does not simply add the two <code>MultiSet</code>s together, but takes the max multiplicity of each element from the two <code>MultiSet</code>s. For example:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-en">MultiSet</span>(<span class="pl-c1">1</span>) union <span class="pl-en">MultiSet</span>(<span class="pl-c1">1</span>,<span class="pl-c1">1</span>) <span class="pl-c"><span class="pl-c">//</span> MultiSet(1,1), NOT MultiSet(1,1,1)</span></pre>
  </div> 
 </article>
</div>