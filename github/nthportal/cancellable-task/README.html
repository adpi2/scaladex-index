<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-cancellable-task" class="anchor" href="https://github.com/nthportal/cancellable-task#cancellable-task" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>cancellable-task</h1> 
  <p>A cancellable task to be run asynchronously.</p> 
  <p><a href="https://travis-ci.org/NthPortal/cancellable-task" target="_blank"><img src="https://camo.githubusercontent.com/deec46cd1b94eb3e9e3f93e51957e06fe6c96b51/68747470733a2f2f7472617669732d63692e6f72672f4e7468506f7274616c2f63616e63656c6c61626c652d7461736b2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/NthPortal/cancellable-task.svg?branch=master" style="max-width:100%;"></a> <a href="https://coveralls.io/github/NthPortal/cancellable-task?branch=master" target="_blank"><img src="https://camo.githubusercontent.com/998c6feb95f1b4bea20e9b66df4e3ed84ffd0982/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f4e7468506f7274616c2f63616e63656c6c61626c652d7461736b2f62616467652e7376673f6272616e63683d6d6173746572" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/github/NthPortal/cancellable-task/badge.svg?branch=master" style="max-width:100%;"></a> <a href="https://mvnrepository.com/artifact/com.nthportal/cancellable-task_2.12" target="_blank"><img src="https://camo.githubusercontent.com/513e8304c7cd97b06f0b61e56ba3af014fbd2a87/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f636f6d2e6e7468706f7274616c2f63616e63656c6c61626c652d7461736b5f322e31322e737667" alt="Maven Central" data-canonical-src="https://img.shields.io/maven-central/v/com.nthportal/cancellable-task_2.12.svg" style="max-width:100%;"></a></p> 
  <h2><a id="user-content-add-as-a-dependency" class="anchor" href="https://github.com/nthportal/cancellable-task#add-as-a-dependency" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Add as a Dependency</h2> 
  <h3><a id="user-content-sbt-scala-211-and-212" class="anchor" href="https://github.com/nthportal/cancellable-task#sbt-scala-211-and-212" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>SBT (Scala 2.11 and 2.12)</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-s"><span class="pl-pds">"</span>com.nthportal<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>cancellable-task<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.0.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <h3><a id="user-content-maven" class="anchor" href="https://github.com/nthportal/cancellable-task#maven" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Maven</h3> 
  <p><strong>Scala 2.12</strong></p> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">dependency</span>&gt;
  &lt;<span class="pl-ent">groupId</span>&gt;com.nthportal&lt;/<span class="pl-ent">groupId</span>&gt;
  &lt;<span class="pl-ent">artifactId</span>&gt;cancellable-task_2.12&lt;/<span class="pl-ent">artifactId</span>&gt;
  &lt;<span class="pl-ent">version</span>&gt;1.0.0&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre>
  </div> 
  <p><strong>Scala 2.11</strong></p> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">dependency</span>&gt;
  &lt;<span class="pl-ent">groupId</span>&gt;com.nthportal&lt;/<span class="pl-ent">groupId</span>&gt;
  &lt;<span class="pl-ent">artifactId</span>&gt;cancellable-task_2.11&lt;/<span class="pl-ent">artifactId</span>&gt;
  &lt;<span class="pl-ent">version</span>&gt;1.0.0&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre>
  </div> 
  <h2><a id="user-content-examples" class="anchor" href="https://github.com/nthportal/cancellable-task#examples" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Examples</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">java.util.concurrent.</span><span class="pl-v">TimeUnit</span>

<span class="pl-k">import</span> <span class="pl-v">com.nthportal.concurrent.</span><span class="pl-v">CancellableTask</span>
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.ExecutionContext.Implicits.</span><span class="pl-v">global</span>

<span class="pl-c"><span class="pl-c">//</span> Create a task</span>
<span class="pl-k">val</span> <span class="pl-en">task</span> <span class="pl-k">=</span> <span class="pl-en">CancellableTask</span> {
  <span class="pl-en">TimeUnit</span>.<span class="pl-en">MINUTES</span>.sleep(<span class="pl-c1">5</span>) <span class="pl-c"><span class="pl-c">//</span> sleep thread for 5 minutes</span>
  println(<span class="pl-s"><span class="pl-pds">"</span>Done sleeping!<span class="pl-pds">"</span></span>)
  <span class="pl-s"><span class="pl-pds">"</span>the result of the task<span class="pl-pds">"</span></span>
}

<span class="pl-c"><span class="pl-c">//</span> Get a regular Scala Future with the result</span>
<span class="pl-k">val</span> <span class="pl-en">future</span> <span class="pl-k">=</span> task.future
future.onComplete(t <span class="pl-k">=&gt;</span> {<span class="pl-c"><span class="pl-c">/*</span> Do something with the Try <span class="pl-c">*/</span></span>})

<span class="pl-c"><span class="pl-c">//</span> Cancel the task, but do not interrupt if already started</span>
<span class="pl-k">val</span> <span class="pl-en">cancel1</span> <span class="pl-k">=</span> task.cancel(<span class="pl-c1">false</span>)
<span class="pl-k">val</span> <span class="pl-en">isCancelled1</span> <span class="pl-k">=</span> task.isCancelled
assert(cancel1 <span class="pl-k">==</span> isCancelled1)

<span class="pl-c"><span class="pl-c">//</span> Cancel the task, and try to interrupt</span>
<span class="pl-k">val</span> <span class="pl-en">cancel2</span> <span class="pl-k">=</span> task.cancel(<span class="pl-c1">true</span>)
<span class="pl-k">val</span> <span class="pl-en">isCancelled2</span> <span class="pl-k">=</span> task.isCancelled
assert(isCancelled2 <span class="pl-k">==</span> cancel1 <span class="pl-k">||</span> cancel2) <span class="pl-c"><span class="pl-c">//</span> was it cancelled one of the times?</span></pre>
  </div> 
  <h2><a id="user-content-authorship" class="anchor" href="https://github.com/nthportal/cancellable-task#authorship" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Authorship</h2> 
  <p>The core of this library was originally written by Stack Overflow user <a href="https://stackoverflow.com/users/1893995/pablo-francisco-p%C3%A9rez-hidalgo" target="_blank">Pablo Francisco PÃ©rez Hidalgo</a> (<a href="https://twitter.com/pfcoperez" target="_blank">Twitter</a>, <a href="https://github.com/pfcoperez" target="_blank">GitHub</a>). That implementation can be found on GitHub <a href="https://github.com/Stratio/common-utils/blob/b9195e3a2b206bb65bf61b412371cf07858d5450/src/main/scala/com/stratio/common/utils/concurrent/Cancellable.scala" target="_blank">here</a>, and in <a href="https://stackoverflow.com/a/35724035/5101123" target="_blank">this Stack Overflow answer</a>.</p> 
  <p>Stack Overflow user <a href="https://stackoverflow.com/users/133062/nightingale" target="_blank">nightingale</a> improved on the implementation by utilizing Java <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/FutureTask.html#done--" target="_blank"><code>FutureTask</code>'s <code>done()</code> method</a>; the improved implementation can be found in <a href="https://stackoverflow.com/a/39986418/5101123" target="_blank">this Stack Overflow answer</a>.</p> 
  <p>This author (<a href="https://github.com/NthPortal" target="_blank">NthPortal</a>) tweaked the implementation by unwrapping <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutionException.html" target="_blank"><code>ExecutionException</code>s</a> thrown by the <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/FutureTask.html" target="_blank"><code>FutureTask</code></a>, and forwarding the <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/FutureTask.html#cancel-boolean-" target="_blank"><code>cancel(boolean)</code></a> and <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/FutureTask.html#isCancelled--" target="_blank"><code>isCancelled()</code></a> methods from <code>FutureTask</code>.</p> 
 </article>
</div>