<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-scala-webscraper-041" class="anchor" href="https://github.com/rovak/scalawebscraper#scala-webscraper-041" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scala Webscraper 0.4.1</h1> 
  <p><a href="https://travis-ci.org/Rovak/ScalaWebscraper" target="_blank"><img src="https://camo.githubusercontent.com/6e60b1939fe5d5053ee08bf0bc10175f3851bbc1/68747470733a2f2f6170692e7472617669732d63692e6f72672f526f76616b2f5363616c61576562736372617065722e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://api.travis-ci.org/Rovak/ScalaWebscraper.png?branch=master" style="max-width:100%;"></a></p> 
  <h2><a id="user-content-getting-started" class="anchor" href="https://github.com/rovak/scalawebscraper#getting-started" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Getting started</h2> 
  <p>The project is build with Scala 2.10.2 and sbt 0.13.0, both can be installed using this <a href="https://gist.github.com/Rovak/4967148" target="_blank">install script</a></p> 
  <p>To try the example navigate to the project folder and run <code>sbt "project scraper-demo" run</code> which will start the example scraper</p> 
  <h2><a id="user-content-installation" class="anchor" href="https://github.com/rovak/scalawebscraper#installation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Installation</h2> 
  <p>If you use SBT, you just have to edit <code>build.sbt</code> and add the following:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>nl.razko<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>scraper<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.4.1<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>If you want to use bleeding edge versions using snapshots then add the Sonatype snapshots to the resolvers:</p> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Sonatype Snapshots<span class="pl-pds">"</span></span> at <span class="pl-s"><span class="pl-pds">"</span>http://oss.sonatype.org/content/repositories/snapshots/<span class="pl-pds">"</span></span>

libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>nl.razko<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>scraper<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.4.1-SNAPSHOT<span class="pl-pds">"</span></span></pre>
  </div> 
  <h2><a id="user-content-dsl" class="anchor" href="https://github.com/rovak/scalawebscraper#dsl" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>DSL</h2> 
  <p>The webscraper provides a simple DSL to write scrape rules</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">org.rovak.scraper.ScrapeManager.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">org.jsoup.nodes.</span><span class="pl-v">Element</span>

<span class="pl-k">object</span> <span class="pl-en">Google</span> {
  <span class="pl-k">val</span> <span class="pl-en">results</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>#res li.g h3.r a<span class="pl-pds">"</span></span>
  <span class="pl-k">def</span> <span class="pl-en">search</span>(<span class="pl-v">term</span>: <span class="pl-k">String</span>) <span class="pl-k">=</span> {
    <span class="pl-s"><span class="pl-pds">"</span>http://www.google.com/search?q=<span class="pl-pds">"</span></span> <span class="pl-k">+</span> term.replace(<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>+<span class="pl-pds">"</span></span>)
  }
}

<span class="pl-c">// Open the search results page for the query "php elephant"</span>
scrape from <span class="pl-en">Google</span>.search(<span class="pl-s"><span class="pl-pds">"</span>php elephant<span class="pl-pds">"</span></span>) open { <span class="pl-k">implicit</span> page <span class="pl-k">=&gt;</span>

  <span class="pl-c">// Iterate through every result link</span>
  <span class="pl-en">Google</span>.results each { <span class="pl-v">x</span>: <span class="pl-en">Element</span> <span class="pl-k">=&gt;</span>

    <span class="pl-k">val</span> <span class="pl-en">link</span> <span class="pl-k">=</span> x.select(<span class="pl-s"><span class="pl-pds">"</span>a[href]<span class="pl-pds">"</span></span>).attr(<span class="pl-s"><span class="pl-pds">"</span>abs:href<span class="pl-pds">"</span></span>).substring(<span class="pl-c1">28</span>)
    <span class="pl-k">if</span> (link.isValidURL) {

      <span class="pl-c">// Iterate through every found link in the found page</span>
      scrape from link each (x <span class="pl-k">=&gt;</span> println(<span class="pl-s"><span class="pl-pds">"</span>found: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> x))
    }
  }
}
</pre>
  </div> 
  <h2><a id="user-content-spiders" class="anchor" href="https://github.com/rovak/scalawebscraper#spiders" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Spiders</h2> 
  <p>A spider is a scraper which recursively loads a page and opens every link it finds. It will keep scraping until all pages within the allowed domains are visited once.</p> 
  <p>The following snippet demonstrates a basic spider which crawls a website and provides hooks to do something with the data</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">new</span> <span class="pl-en">Spider</span> {
  startUrls <span class="pl-k">::</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>http://events.stanford.edu/<span class="pl-pds">"</span></span>
  allowedDomains <span class="pl-k">::</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>events.stanford.edu<span class="pl-pds">"</span></span>

  onReceivedPage <span class="pl-k">::</span><span class="pl-k">=</span> { <span class="pl-v">page</span>: <span class="pl-en">WebPage</span> <span class="pl-k">=&gt;</span>
    <span class="pl-c">// Page received</span>
  }

  onLinkFound <span class="pl-k">::</span><span class="pl-k">=</span> { <span class="pl-v">link</span>: <span class="pl-en">Href</span> <span class="pl-k">=&gt;</span>
    println(s<span class="pl-s"><span class="pl-pds">"</span>Found link ${link.url} with name ${link.name}<span class="pl-pds">"</span></span>)
  }
}.start()</pre>
  </div> 
  <p>The spider can be extended by providing traits, if you want to scrape emails then add the EmailSpider trait which offers a new <code>onEmailFound</code> hook in which emails can be collected.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">new</span> <span class="pl-en">Spider</span> <span class="pl-k">with</span> <span class="pl-e">EmailSpider</span> {
  startUrls <span class="pl-k">::</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>http://events.stanford.edu/<span class="pl-pds">"</span></span>
  allowedDomains <span class="pl-k">::</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>events.stanford.edu<span class="pl-pds">"</span></span>

  onEmailFound <span class="pl-k">::</span><span class="pl-k">=</span> { <span class="pl-v">email</span>: <span class="pl-k">String</span> <span class="pl-k">=&gt;</span>
    <span class="pl-c">// Email found</span>
  }

  onReceivedPage <span class="pl-k">::</span><span class="pl-k">=</span> { <span class="pl-v">page</span>: <span class="pl-en">WebPage</span> <span class="pl-k">=&gt;</span>
    <span class="pl-c">// Page received</span>
  }

  onLinkFound <span class="pl-k">::</span><span class="pl-k">=</span> { <span class="pl-v">link</span>: <span class="pl-en">Href</span> <span class="pl-k">=&gt;</span>
    println(s<span class="pl-s"><span class="pl-pds">"</span>Found link ${link.url} with name ${link.name}<span class="pl-pds">"</span></span>)
  }
}.start()</pre>
  </div> 
  <p>Multiple spiders can be mixed together</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">new</span> <span class="pl-en">Spider</span> <span class="pl-k">with</span> <span class="pl-e">EmailSpider</span> <span class="pl-k">with</span> <span class="pl-e">SitemapSpider</span> {
  startUrls <span class="pl-k">::</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>http://events.stanford.edu/<span class="pl-pds">"</span></span>
  allowedDomains <span class="pl-k">::</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>events.stanford.edu<span class="pl-pds">"</span></span>
  sitemapUrls <span class="pl-k">::</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>http://events.stanford.edu/sitemap.xml<span class="pl-pds">"</span></span>

  onEmailFound <span class="pl-k">::</span><span class="pl-k">=</span> { <span class="pl-v">email</span>: <span class="pl-k">String</span> <span class="pl-k">=&gt;</span>
    println(<span class="pl-s"><span class="pl-pds">"</span>Found email: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> email)
  }

  onReceivedPage <span class="pl-k">::</span><span class="pl-k">=</span> { <span class="pl-v">page</span>: <span class="pl-en">WebPage</span> <span class="pl-k">=&gt;</span>
    <span class="pl-c">// Page received</span>
  }

  onLinkFound <span class="pl-k">::</span><span class="pl-k">=</span> { <span class="pl-v">link</span>: <span class="pl-en">Href</span> <span class="pl-k">=&gt;</span>
    println(s<span class="pl-s"><span class="pl-pds">"</span>Found link ${link.url} with name ${link.name}<span class="pl-pds">"</span></span>)
  }
}.start()</pre>
  </div> 
  <h2><a id="user-content-documentation" class="anchor" href="https://github.com/rovak/scalawebscraper#documentation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Documentation</h2> 
  <ul> 
   <li><a href="http://ci.razko.nl/job/WebsiteScraper/Documentation/index.html" target="_blank">API</a></li> 
  </ul> 
 </article>
</div>