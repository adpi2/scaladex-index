<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-calatrava-client-library" class="anchor" href="https://github.com/gilt/calatrava-client-library#calatrava-client-library" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>calatrava-client-library</h1> 
  <p>A library that allows consumption of events from a Calatrava stream.</p> 
  <h2><a id="user-content-contents-and-example-usage" class="anchor" href="https://github.com/gilt/calatrava-client-library#contents-and-example-usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Contents and Example Usage</h2> 
  <h3><a id="user-content-kinesisbridgeconfiguration" class="anchor" href="https://github.com/gilt/calatrava-client-library#kinesisbridgeconfiguration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>kinesis.BridgeConfiguration</h3> 
  <p>This class encapsulates configuration needed for the Worker. Some of it regards the Calatrava Bridge that we need to consume events for. The last part, if present, enables KCL metrics reporting into CloudWatch.</p> 
  <p>The following parameters must be provided:</p> 
  <ul> 
   <li><p><em>clientAppName</em>: mandatory String parameter to specify the name of this Kinesis client application. Must be unique for this Bridge.</p></li> 
   <li><p><em>streamName</em>: mandatory String parameter, specifies the name of the Kinesis stream associated with the Bridge.</p></li> 
   <li><p><em>bucketName</em>: mandatory String parameter, specifies the name of the S3 bucket associated with the Bridge.</p></li> 
   <li><p><em>iamRoleArnOpt</em>: optional String parameter, specifies an IAM role that this application must assume prior to making calls to Kinesis, or S3. If not specified, the application will use the default credentials provider chain. If specified, this role should have permissions to read from the Bridge (S3, Kinesis), and, if necessary, permissions to create metrics in CloudWatch (see below).</p></li> 
   <li><p><em>metricsConfigOpt</em>: optional <code>MetricsConfiguration</code> parameter, specifies CloudWatch metrics configuration parameters. If not provided, the Kinesis Client library will not send metrics to CloudWatch.</p></li> 
  </ul> 
  <h4><a id="user-content-kinesiscalatravaeventprocessor" class="anchor" href="https://github.com/gilt/calatrava-client-library#kinesiscalatravaeventprocessor" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>kinesis.CalatravaEventProcessor</h4> 
  <p>An implementation of this interface must be constructed and passed to the Worker factory, so that events are being sent here for processing. Has only one method, <code>processEvent</code>, which takes a parameter of type <code>ChangeEvent</code>, as defined in the <a href="https://github.com/gilt/calatrava/blob/master/api/api.json" target="_blank">Calatrava API</a>. It must return <code>true</code> if the event was successfully processed, <code>false</code> otherwise.</p> 
  <h3><a id="user-content-worker-factory" class="anchor" href="https://github.com/gilt/calatrava-client-library#worker-factory" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Worker Factory</h3> 
  <p>A singleton instance of this class should be created, and then used to produce KCL workers as needed.</p> 
  <p>Example:</p> 
  <pre><code>val factory = new BridgeWorkerFactory(eventProcessor, bridgeConfiguration)
val worker = factory.instance()
val workerThread = new Thread(worker)

def start(): Unit = {
  workerThread.start()
}

def shutdown(): Unit = {
  worker.shutdown()
  workerThread.join(WORKER_THREAD_TIMEOUT_MILLIS)
}
</code></pre> 
  <p>The BridgeWorkerFactory can be instantiated with Guice, and have its configuration and processor injected automatically.</p> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/gilt/calatrava-client-library#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p>Copyright 2015 Gilt Groupe, Inc.</p> 
  <p>Licensed under the Apache License, Version 2.0: <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">http://www.apache.org/licenses/LICENSE-2.0</a></p> 
 </article>
</div>