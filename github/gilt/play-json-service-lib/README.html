<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-play-json-service-lib" class="anchor" href="https://github.com/gilt/play-json-service-lib#play-json-service-lib" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>play-json-service-lib</h1> 
  <h2><a id="user-content-introduction" class="anchor" href="https://github.com/gilt/play-json-service-lib#introduction" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Introduction</h2> 
  <p><code>play-json-service-lib</code> is a library for Play Framework 2.2.3 and 2.3.0 that provides some helpers to make it easier to write services that provides RESTful JSON-based services using Play.</p> 
  <p>Play is slightly biased toward general purpose web development, and as a result there are some missing features that would simplify writing simple REST/JSON services.</p> 
  <p>This library collects a few useful tricks we’ve found helpful at Gilt, to make them easier to create RESTful JSON services. In particular,</p> 
  <ol> 
   <li>Returning objects to be serialized as JSON, without having to call Json.toJson everywhere.</li> 
   <li>Easier support for basic <a href="http://tools.ietf.org/html/rfc5988#section-5" target="_blank">Link header</a> support when paginating.</li> 
   <li>Support for returning a JSON document when an error occurs.</li> 
   <li>Support for automatically including a Location header when returning a <code>201 CREATED</code> HTTP response.</li> 
  </ol> 
  <h2><a id="user-content-installation--configuration" class="anchor" href="https://github.com/gilt/play-json-service-lib#installation--configuration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Installation &amp; Configuration</h2> 
  <h3><a id="user-content-play-22" class="anchor" href="https://github.com/gilt/play-json-service-lib#play-22" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Play 2.2</h3> 
  <p>To use the library with Play 2.2 (it’s specifically compiled against 2.2.3 at present), include this in your <code>libraryDependencies</code> in build.sbt:</p> 
  <pre><code>"com.gilt" %% "play-json-service-lib-2-2" % "1.1.0"
</code></pre> 
  <p>You also need to register json for templates, so that errors can return a json document instead of the standard html error page. To do this, add this line to <code>build.sbt</code>:</p> 
  <pre><code>templatesTypes += ("json" -&gt; "com.gilt.play.json.templates.JsonFormat")
</code></pre> 
  <p>(Be sure to add this after <code>play.Project.playScalaSettings</code>).</p> 
  <p>The library has a "provided" dependency on <code>com.typesafe.play:play:2.2.3</code> and <code>com.typesafe.play:play-json:2.2.3</code>, so you'll need to be sure your Play application depends on both these libraries.</p> 
  <h3><a id="user-content-play-23" class="anchor" href="https://github.com/gilt/play-json-service-lib#play-23" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Play 2.3</h3> 
  <p>To use it with Play 2.3 (it's compiled against 2.3.0 at present), include this in your <code>libraryDependencies</code>:</p> 
  <pre><code>"com.gilt" %% "play-json-service-lib-2-3" % "1.1.0"
</code></pre> 
  <p>You also need to register json for templates, so that errors can return a json document instead of the standard html error page. To do this, add this line to <code>build.sbt</code>:</p> 
  <pre><code>TwirlKeys.templateFormats += ("json" -&gt; "com.gilt.play.json.templates.JsonFormat")
</code></pre> 
  <p>You'll also need to make sure both the <code>PlayScala</code> and <code>SbtTwirl</code> plugins are enabled. For example, a simple build might look like:</p> 
  <pre><code>lazy val root = (project in file(".")). enablePlugins(PlayScala, SbtTwirl). settings(
  name := "play-2.3-example",
  scalaVersion := "2.11.1",
  libraryDependencies ++= Seq(
    "com.gilt" %% "play-json-service-lib-2-3" % "1.1.0"
  ),
  TwirlKeys.templateFormats += ("json" -&gt; "com.gilt.play.json.templates.JsonFormat")
)
</code></pre> 
  <p>The library has a "provided" dependency on <code>com.typesafe.play:play:2.3.0</code>, <code>com.typesafe.play:play-json:2.3.0</code>, and <code>com.typesafe.play:twirl-api:1.0.2</code>, so you'll need to be sure your Play application depends on these libraries.</p> 
  <h2><a id="user-content-usage" class="anchor" href="https://github.com/gilt/play-json-service-lib#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <p>To use these features, extend your Play controllers from <code>com.gilt.play.json.controllers.JsonController</code>, like this:</p> 
  <pre><code>object Teams extends JsonController {
</code></pre> 
  <p>You need to need to implement two abstract methods in JsonController, <code>errorView</code> and <code>https</code>. The first should be a twirl template that will be used to serve a JSON error document, and accepts a single argument of type <code>String*</code>. You override <code>https</code> to tell the URL synthesis whether to generate URLs with scheme <code>http</code> or <code>https</code>. (Note that we have a preference toward absolute URLs, and this library is implemented to return them in both <code>Location</code> and <code>Link</code> response headers.)</p> 
  <pre><code>override def errorView = views.json.error
override def https = false
</code></pre> 
  <p><code>JsonController</code> introduces overridden versions of <code>Ok</code>, <code>Created</code>, <code>NotFound</code> and <code>BadRequest</code>. <code>Ok</code> and <code>Created</code> take an object to be serialised as JSON, so you need to make sure there is an implicit <code>Writes</code> instance in scope for Play's JSON serialization to work. These objects also need an implicit <code>Request[_]</code> instance in scope.</p> 
  <p>For example, a simple example might be:</p> 
  <pre><code>def getByKey(key: String) = Action { implicit request =&gt;
  Ok(models.Teams.getByEmail(key))
}
</code></pre> 
  <p><code>NotFound</code> and <code>BadRequest</code> can be used to return a standard error JSON document that you create. For example, you might create a Play view like:</p> 
  <pre><code>@(messages: String*){
"messages": [
@for(message &lt;- messages) {    "@message"
}  ]
}
</code></pre> 
  <p>In this case you can pass a <code>String</code> (or multiple <code>String</code>s) to <code>NotFound</code> or <code>BadRequest</code>, like:</p> 
  <pre><code>def getByKey(key: String) = Action { implicit request =&gt;
  models.Teams.getByEmail(key).map(Ok(_)).getOrElse(NotFound(s"No team with key=[$key]"))
}
</code></pre> 
  <p>This common pattern where an <code>Option</code> is returned and generates either an <code>Ok</code> or <code>NotFound</code> can also use the <code>OkOption</code> method:</p> 
  <pre><code>def getByKey(key: String) = Action { implicit request =&gt;
  OkOption(models.Teams.getByEmail(key), s"No team with key=[$key]")
}
</code></pre> 
  <p>For use in <code>Action.async</code> controller methods, <code>OkFuture</code> and <code>OkFutureOption</code> lift these methods into the <code>Future</code> monad:</p> 
  <pre><code>def getByKey(key: String) = Action.async { implicit request =&gt;
  OkFutureOption(models.Teams.getByEmail(key), s"No team with key=[$key]")
}
</code></pre> 
  <h3><a id="user-content-location-headers" class="anchor" href="https://github.com/gilt/play-json-service-lib#location-headers" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Location headers</h3> 
  <p>The <code>Created</code> response makes it easy to generate a <code>Location:</code> header in a <code>201 CREATED</code> HTTP response, if you include an implicit <code>Call</code> instance in scope:</p> 
  <pre><code>def putByKey(key: String) = Action(parse.json) { implicit request =&gt;
  Json.fromJson[models.Team](request.body) match {
    case JsSuccess(team, _) =&gt;
      implicit val location = routes.Teams.getByKey(key)
      models.Teams.upsert(team).fold(Created(team))(team =&gt; Ok(team))
    case JsError(e) =&gt; BadRequest(s"Could not parse team from body: ${request.body}: $e")
  }
}
</code></pre> 
  <h3><a id="user-content-pagination" class="anchor" href="https://github.com/gilt/play-json-service-lib#pagination" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Pagination</h3> 
  <p>Requests that return large responses often need to <a href="http://tools.ietf.org/html/rfc5988#section-5" target="_blank">support pagination</a>; to do this, we assume HTTP requests that include some kind of <code>limit</code> and <code>offset</code> parameters. You can implement pagination using <code>Ok</code> by providing an implicit <code>Pagination</code> instance in scope</p> 
  <pre><code>def list(limit: Int = 50, offset: Int = 0) = Action { implicit request =&gt;
  val result = models.Teams.list().drop(offset).take(limit)
  implicit val pagination = paginate(result, limit, offset)(routes.Teams.list)
  Ok(result)
}
</code></pre> 
  <p>If you are using async actions, <code>OkFuture</code> expects an implicit <code>Future[Pagination]</code></p> 
  <h2><a id="user-content-examples" class="anchor" href="https://github.com/gilt/play-json-service-lib#examples" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Examples</h2> 
  <p>You can see a complete worked example for Play 2.2 <a href="https://github.com/gilt/play-json-service-lib/tree/master/play-2.2-example" target="_blank">here</a>.</p> 
  <p>You can see a complete worked example for Play 2.3 <a href="https://github.com/gilt/play-json-service-lib/tree/master/play-2.3-example" target="_blank">here</a>.</p> 
 </article>
</div>