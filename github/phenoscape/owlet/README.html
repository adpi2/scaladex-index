<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a href="https://github.com/phenoscape/owlet#owlet" aria-hidden="true" class="anchor" id="user-content-owlet" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>owlet</h1> 
  <p><a href="http://travis-ci.org/phenoscape/owlet" target="_blank"><img src="https://camo.githubusercontent.com/7b3a23681b04f84f090240125296051752da9316/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f7068656e6f73636170652f6f776c65742e706e67" alt="Build Status" data-canonical-src="https://secure.travis-ci.org/phenoscape/owlet.png" style="max-width:100%;"></a></p> 
  <p><strong>owlet</strong> is a query expansion preprocessor for SPARQL. It parses embedded OWL class expressions (in <a href="http://www.w3.org/TR/owl2-manchester-syntax/" target="_blank">Manchester Syntax</a>) and uses an OWL reasoner to replace them with FILTER statements containing the URIs of subclasses of the given class expression (or superclasses, equivalent classes, or instances).</p> 
  <p><strong>owlet</strong> is written in Scala but can be used in any Java application.</p> 
  <h2><a href="https://github.com/phenoscape/owlet#installation" aria-hidden="true" class="anchor" id="user-content-installation" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Installation</h2> 
  <p>owlet is not yet available from an online Maven repository. To use it in your project you will need to:</p> 
  <ol> 
   <li>Check out the code, e.g. run <code>git clone https://github.com/phenoscape/owlet.git</code> on the command line.</li> 
   <li>Run <code>mvn install</code> to build the jar and add to your local Maven repository.</li> 
   <li>Add the owlet dependency to your <code>pom.xml</code>:</li> 
  </ol> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">dependency</span>&gt;
  &lt;<span class="pl-ent">groupId</span>&gt;org.phenoscape&lt;/<span class="pl-ent">groupId</span>&gt;
  &lt;<span class="pl-ent">artifactId</span>&gt;owlet&lt;/<span class="pl-ent">artifactId</span>&gt;
  &lt;<span class="pl-ent">version</span>&gt;1.0-SNAPSHOT&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre>
  </div> 
  <h2><a href="https://github.com/phenoscape/owlet#how-does-it-work" aria-hidden="true" class="anchor" id="user-content-how-does-it-work" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>How does it work</h2> 
  <p>The OWL class expression to be expanded is a string literal at an appropriate location in a SPARQL query. The query expander recognizes the literal containing the class expression by its datatype, which must be <code>http://purl.org/owlet/#omn</code>. <a href="http://www.w3.org/TR/sparql11-query/#QSynLiterals" target="_blank">Datatypes of literals in SPARQL</a> are assigned using the <code>^^TypeURI</code> suffix notation (where <code>TypeURI</code> is the URI of the datatype; URI prefixes are allowed).</p> 
  <p>The literal containing the class expression must be in one of the following 3 triple patterns (with <code>rdf</code>, <code>rdfs</code>, <code>owl</code> declared <a href="http://prefix.cc/rdf,rdfs,owl" target="_blank">as in prefix.cc</a>, and <code>owlet</code> as <code>&lt;http://purl.org/phenoscape/owlet/syntax#&gt;</code>):</p> 
  <ol> 
   <li>Subclass triple: <code>?x rdfs:subClassOf "owl:Thing"^^owlet:omn</code></li> 
   <li>instance-of triple: <code>?x rdf:type "owl:Thing"^^owlet:omn</code></li> 
   <li>equivalent class triple: <code>?x owl:equivalentClass "owl:Thing"^^owlet:omn</code></li> 
  </ol> 
  <p>Each of these triples will be rewritten by the expander in the following pattern:</p> 
  <pre><code>FILTER(?x IN (&lt;URI1&gt;,&lt;URI2&gt;,&lt;URI3&gt;,...))
</code></pre> 
  <p>where <code>&lt;URI1&gt;,&lt;URI2&gt;,&lt;URI3&gt;,...</code> is the list of class or instance identifiers that satisfy the OWL class expression, as determined by the reasoner.</p> 
  <h2><a href="https://github.com/phenoscape/owlet#usage" aria-hidden="true" class="anchor" id="user-content-usage" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <p>Below is an example of loading an ontology from a file into an OWL reasoner, and then using the reasoner to expand a SPARQL query to a triple store. In this example, the triple store is in-memory and holds the same ontology as the reasoner, but you could replace that part with querying a remote SPARQL endpoint that, for example, contains data linked to the ontology. The owlet tests include executable versions in both <a href="https://github.com/phenoscape/owlet/blob/master/src/test/java/org/phenoscape/owlet/TestSPARQLQueryJava.java" target="_blank">Java</a> and <a href="http://github.com/phenoscape/owlet/blob/master/src/test/scala/org/phenoscape/owlet/TestSPARQLQuery.scala" target="_blank">Scala</a>.</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">import</span> <span class="pl-smi">java.io.IOException</span>;
<span class="pl-k">import</span> <span class="pl-smi">java.io.InputStream</span>;

<span class="pl-k">import</span> <span class="pl-smi">org.junit.Test</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.semanticweb.elk.owlapi.ElkReasonerFactory</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.semanticweb.owlapi.apibinding.OWLManager</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.semanticweb.owlapi.model.OWLOntology</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.semanticweb.owlapi.model.OWLOntologyCreationException</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.semanticweb.owlapi.model.OWLOntologyManager</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.semanticweb.owlapi.reasoner.InferenceType</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.semanticweb.owlapi.reasoner.OWLReasoner</span>;

<span class="pl-k">import</span> <span class="pl-smi">com.hp.hpl.jena.query.Query</span>;
<span class="pl-k">import</span> <span class="pl-smi">com.hp.hpl.jena.query.QueryExecutionFactory</span>;
<span class="pl-k">import</span> <span class="pl-smi">com.hp.hpl.jena.query.QueryFactory</span>;
<span class="pl-k">import</span> <span class="pl-smi">com.hp.hpl.jena.query.ResultSet</span>;
<span class="pl-k">import</span> <span class="pl-smi">com.hp.hpl.jena.rdf.model.Model</span>;
<span class="pl-k">import</span> <span class="pl-smi">com.hp.hpl.jena.rdf.model.ModelFactory</span>;

<span class="pl-k">import</span> <span class="pl-smi">org.phenoscape.owlet.QueryExpander</span>;

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">SPARQLQueryRunner</span> {

	<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">runSPARQLQuery</span>() <span class="pl-k">throws</span> <span class="pl-smi">OWLOntologyCreationException</span>, <span class="pl-smi">IOException</span> {
		<span class="pl-k">final</span> <span class="pl-smi">OWLOntologyManager</span> manager <span class="pl-k">=</span> <span class="pl-smi">OWLManager</span><span class="pl-k">.</span>createOWLOntologyManager();
		<span class="pl-k">final</span> <span class="pl-smi">OWLOntology</span> ontology <span class="pl-k">=</span> manager<span class="pl-k">.</span>loadOntologyFromOntologyDocument(<span class="pl-k">new</span> <span class="pl-smi">File</span>(<span class="pl-s"><span class="pl-pds">"</span>my_ontology.owl<span class="pl-pds">"</span></span>));
		<span class="pl-k">final</span> <span class="pl-smi">OWLReasoner</span> reasoner <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">ElkReasonerFactory</span>()<span class="pl-k">.</span>createReasoner(ontology);
		reasoner<span class="pl-k">.</span>precomputeInferences(<span class="pl-smi">InferenceType</span><span class="pl-c1"><span class="pl-k">.</span>CLASS_HIERARCHY</span>);
		<span class="pl-k">final</span> <span class="pl-smi">Model</span> rdfModel <span class="pl-k">=</span> <span class="pl-smi">ModelFactory</span><span class="pl-k">.</span>createDefaultModel();
		rdfModel<span class="pl-k">.</span>read(<span class="pl-s"><span class="pl-pds">"</span>my_ontology.owl<span class="pl-pds">"</span></span>);
		<span class="pl-k">final</span> <span class="pl-smi">String</span> queryText <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>
				<span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>PREFIX ow: &lt;http://purl.org/phenoscape/owlet/syntax#&gt;<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>
				<span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>PREFIX axial_skeleton: &lt;http://purl.obolibrary.org/obo/VSAO_0000056&gt;<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>
				<span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>PREFIX definition: &lt;http://purl.obolibrary.org/obo/IAO_0000115&gt;<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>
				<span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>PREFIX part_of: &lt;http://purl.obolibrary.org/obo/BFO_0000050&gt;<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>
				<span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>SELECT DISTINCT ?structure ?label ?definition<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>
				<span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>WHERE<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>
				<span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>{<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>
				<span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>?structure rdfs:label ?label .<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>
				<span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>?structure definition: ?definition .<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>
				<span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>?structure rdfs:subClassOf <span class="pl-cce">\"</span>part_of: some axial_skeleton:<span class="pl-cce">\"</span>^^ow:omn .<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>
				<span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>}<span class="pl-pds">"</span></span>;
		<span class="pl-k">final</span> <span class="pl-smi">QueryExpander</span> expander <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">QueryExpander</span>(reasoner);
		<span class="pl-k">final</span> <span class="pl-smi">Query</span> query <span class="pl-k">=</span> <span class="pl-smi">QueryFactory</span><span class="pl-k">.</span>create(queryText);
		<span class="pl-k">final</span> <span class="pl-smi">Query</span> expandedQuery <span class="pl-k">=</span> expander<span class="pl-k">.</span>expandQuery(query);
		<span class="pl-k">final</span> <span class="pl-smi">ResultSet</span> results <span class="pl-k">=</span> <span class="pl-smi">QueryExecutionFactory</span><span class="pl-k">.</span>create(expandedQuery, rdfModel)<span class="pl-k">.</span>execSelect();
	}

}</pre>
  </div> 
  <p>More documentation can be found on the <a href="https://github.com/phenoscape/owlet/wiki" target="_blank">owlet wiki</a>.</p> 
 </article>
</div>