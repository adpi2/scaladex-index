<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-json4s-ast" class="anchor" href="https://github.com/json4s/json4s-ast#json4s-ast" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>json4s AST</h1> 
  <p><a href="https://travis-ci.org/json4s/json4s-ast" target="_blank"><img src="https://camo.githubusercontent.com/62ab29b3c909035e5fc438ff54f9ba7b2dcb1552/68747470733a2f2f7472617669732d63692e6f72672f6a736f6e34732f6a736f6e34732d6173742e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/json4s/json4s-ast.svg?branch=master" style="max-width:100%;"></a></p> 
  <p>Two minimal implementations of a <a href="https://en.wikipedia.org/wiki/JSON" target="_blank">JSON</a> <code>AST</code>, one that is designed for performance and another that is designed for correctness/purity.</p> 
  <h1><a id="user-content-installation" class="anchor" href="https://github.com/json4s/json4s-ast#installation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Installation</h1> 
  <p>json4s-ast is currently published as a SNAPSHOT under sonatype with the following details</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-s"><span class="pl-pds">"</span>org.json4s<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>json4s-ast<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>4.0.0-M1<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>If you are using <code>Scala.js</code>, it's at</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-s"><span class="pl-pds">"</span>org.json4s<span class="pl-pds">"</span></span> <span class="pl-k">%%%</span> <span class="pl-s"><span class="pl-pds">"</span>json4s-ast<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>4.0.0-M1<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>Add this setting to your build to include the Sonatype snapshot repository:</p> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">+</span><span class="pl-k">=</span> { <span class="pl-en">Opts</span>.resolver.sonatypeSnapshots }</pre>
  </div> 
  <h2><a id="user-content-common-goals-between-both-asts" class="anchor" href="https://github.com/json4s/json4s-ast#common-goals-between-both-asts" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Common Goals between both AST's</h2> 
  <ul> 
   <li><a href="https://github.com/scala-js/scala-js" target="_blank">Scala.js</a> support, allowing the possibility of libraries to seamlessly work with <code>JValue</code> on <code>Javascript</code> clients as well as the <code>JVM</code></li> 
   <li>Strictly zero dependencies</li> 
   <li>Strictly one release per major <code>Scala</code>/<code>Scala.js</code> release. Ideally, <code>json4s-ast</code> should only update when a new major version for <code>Scala</code>/<code>Scala.js</code> is released. There may be exceptions to this (i.e. <code>Scala</code> has in the past accidentally brought in breaking changes in minor releases)</li> 
   <li>High emphasis on binary compatibility (use of <code>sealed abstract class</code> in top level <code>JValue</code>)</li> 
   <li>Support for <code>Scala</code> 2.10.x, <code>Scala</code> 2.11.x and <code>Scala.js</code> 0.6.x</li> 
  </ul> 
  <h2><a id="user-content-why" class="anchor" href="https://github.com/json4s/json4s-ast#why" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Why</h2> 
  <p>Scala is in a bit of an unfortunate position when it comes to <a href="https://en.wikipedia.org/wiki/JSON" target="_blank">JSON</a> libraries and compatibility. On last count, we have around 5 commonly used <code>AST</code>'s. A lot of web frameworks, such as <a href="http://spray.io/" target="_blank">Spray</a>, <a href="https://www.playframework.com/" target="_blank">Play</a> and <a href="http://liftweb.net/" target="_blank">Liftweb</a> provide their own <code>AST</code>'s, mainly due to address issues of the <a href="https://en.wikipedia.org/wiki/JSON" target="_blank">JSON</a> <code>AST</code>'s in the past.</p> 
  <p>A lot of previously mentioned <a href="https://en.wikipedia.org/wiki/JSON" target="_blank">JSON</a> library's also fall into weird middle ground position regarding performance versus correctness, in many cases either not satisfying either camps <strong>or</strong> forcing web frameworks to roll their own approaches (which end up being very similar).</p> 
  <p><code>json4s-ast</code> is an attempt to provide a stable pure correct implementation as well as a high performance implementation of a <a href="https://en.wikipedia.org/wiki/JSON" target="_blank">JSON</a> value, called a <code>JValue</code>. This means, that when a user works with a <code>JValue</code> (either the <code>org.json4s.ast.fast</code> or <code>org.json4s.ast.safe</code> version), they can be sure that they can freely pass it around, through various <code>Scala</code> <a href="https://en.wikipedia.org/wiki/JSON" target="_blank">JSON</a> parsers/serializers/libraries/frameworks without having to worry about compatibility issues.</p> 
  <p>If a user uses a <code>org.json4s.ast.fast.JValue</code> directly/indirectly, they will have a pretty good guarantee about performance (can't guarantee good performance for indirect use). If a user uses a <code>org.json4s.ast.safe.JValue</code> directly, they will have a guarantee that the <code>JValue</code> is a correct representation of <a href="https://en.wikipedia.org/wiki/JSON" target="_blank">JSON</a> standard.</p> 
  <h2><a id="user-content-json4s-fast-ast" class="anchor" href="https://github.com/json4s/json4s-ast#json4s-fast-ast" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>json4s Fast AST</h2> 
  <p>Implementation is in <code>org.json4s.ast.fast</code></p> 
  <h3><a id="user-content-goals" class="anchor" href="https://github.com/json4s/json4s-ast#goals" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Goals</h3> 
  <ul> 
   <li>Uses the best performing datastructure's for high performance in construction of a <code>JValue</code> 
    <ul> 
     <li><code>JArray</code> stored as an <code>Array</code></li> 
     <li><code>JObject</code> stored as an <code>Array</code></li> 
     <li><code>JNumber</code> stored as a <code>String</code></li> 
    </ul></li> 
   <li>Doesn't use <code>Scala</code>'s <code>stdlib</code> collection's library</li> 
   <li>Low memory allocation (due to usage of <code>Array</code>). When <code>Scala</code> provides better support for <code>Value</code> types, we will use those</li> 
  </ul> 
  <h2><a id="user-content-json4s-safe-ast" class="anchor" href="https://github.com/json4s/json4s-ast#json4s-safe-ast" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>json4s Safe AST</h2> 
  <p>Implementation is in <code>org.json4s.ast.safe</code></p> 
  <h3><a id="user-content-goals-1" class="anchor" href="https://github.com/json4s/json4s-ast#goals-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Goals</h3> 
  <ul> 
   <li>Fully immutable (all collections/types used are immutable)</li> 
   <li><code>constant</code>/<code>effective constant</code> lookup time for <code>JArray</code>/<code>JObject</code></li> 
   <li>Strict adherence to the <a href="https://en.wikipedia.org/wiki/JSON" target="_blank">JSON</a> standard. 
    <ul> 
     <li>Number representation for <code>JNumber</code> is a <code>BigDecimal</code> (<a href="http://stackoverflow.com/a/13502497/1519631" target="_blank">http://stackoverflow.com/a/13502497/1519631</a>)</li> 
     <li><code>JObject</code> is an actual <code>Map[String,JValue]</code></li> 
     <li><code>JArray</code> is an <code>Vector</code></li> 
    </ul></li> 
   <li>Strictly pure. Library has no side effects/throwing errors (even when constructing various <code>JValue</code>'s), and hence we can guarantee that a <code>JValue</code> will always contain a valid structure that can be serialized/rendered into <a href="https://en.wikipedia.org/wiki/JSON" target="_blank">JSON</a>. There is one exception, and that is for <code>org.json4s.ast.safe.JNumber</code> in <code>Scala.js</code> (see <code>Scala.js</code> section for more info)</li> 
  </ul> 
  <h2><a id="user-content-conversion-between-orgjson4sastsafe-and-orgjson4sastfast" class="anchor" href="https://github.com/json4s/json4s-ast#conversion-between-orgjson4sastsafe-and-orgjson4sastfast" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Conversion between org.json4s.ast.safe and org.json4s.ast.fast</h2> 
  <p>Any <code>org.json4s.ast.safe.JValue</code> implements a conversion to <code>org.json4s.ast.fast.JValue</code> with a <code>toFast</code> method, and vice versa with a <code>toSafe</code> method. These conversion methods have been written to be as fast as possible.</p> 
  <p>There are some peculiarities when converting between the two AST's. When converting a <code>org.json4s.ast.fast.JNumber</code> to a <code>org.json4s.ast.safe.JNumber</code>, it is possible for this to fail at runtime (since the internal representation of <code>org.json4s.ast.fast.JNumber</code> is a string). It is up to the caller on how to handle this error (and when), a runtime check is deliberately avoided on our end for performance reasons.</p> 
  <p>Converting from a <code>org.json4s.ast.safe.JObject</code> to a <code>org.json4s.ast.fast.JObject</code> will produce an <code>org.json4s.ast.fast.JObject</code> with an undefined ordering for its internal <code>Array</code>/<code>js.Array</code> representation. This is because a <code>Map</code> has no predefined ordering. If you wish to provide ordering, you will either need to write your own custom conversion to handle this case.</p> 
  <p>Do note that according to the JSON spec, ordering for JObject is not defined. Also note that <code>Map</code> disregards ordering for equality, however <code>Array</code>/<code>js.Array</code> equals obviously takes ordering into account.</p> 
  <h2><a id="user-content-tot-conversion" class="anchor" href="https://github.com/json4s/json4s-ast#tot-conversion" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>.to[T] Conversion</h2> 
  <p>Both <code>org.json4s.ast.safe.JValue</code> and <code>org.json4s.ast.fast.JValue</code> provide conversions using a <code>.to[T]</code> method. So far, these are only implemented for <code>JNumber</code>, and its to provide default fast implementations for converting between different number types (as well as stuff like bytes). You can provide your own implementations of a <code>.to[T]</code> conversion by creating an <code>val</code> that implements a JNumberConverter, i.e.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">myNumberConverter</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">JNumberConverter</span>[<span class="pl-en">SomeNumberType</span>]{
  <span class="pl-k">def</span> <span class="pl-en">apply</span>(<span class="pl-v">b</span>: <span class="pl-en">BigDecimal</span>)<span class="pl-k">:</span> <span class="pl-en">SomeNumberType</span> <span class="pl-k">=</span> <span class="pl-k">???</span>
}</pre>
  </div> 
  <p>Then you just need to provide this implementation in scope for usage</p> 
  <h2><a id="user-content-scalajs" class="anchor" href="https://github.com/json4s/json4s-ast#scalajs" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scala.js</h2> 
  <p><code>json4s-ast</code> also provides support for <a href="https://github.com/scala-js/scala-js" target="_blank">Scala.js</a>. There is even a separate <code>AST</code> implementation specifically for <code>Scala.js</code> with <code>@JSExport</code> for the various <code>JValue</code> types, which means you are able to construct a <code>JValue</code> in <code>Javascript</code>in the rare cases that you may need to do so. Hence there are added constructors for various <code>JValue</code> subtypes, i.e. you can pass in a <code>Javascript</code> <code>array</code> (i.e. <code>[]</code>) to construct a <code>JArray</code>, as well as a constructor for <code>JObject</code> that allows you to pass in a standard <code>Javascript</code> object with <code>JValue</code> as keys (i.e. <code>{}</code>).</p> 
  <p>Examples of constructing various <code>JValue</code>'s are given below.</p> 
  <div class="highlight highlight-source-js">
   <pre><span class="pl-k">var</span> jArray <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">org.json4s.ast.safe.JArray</span>([<span class="pl-k">new</span> <span class="pl-en">JString</span>(<span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>)]);

<span class="pl-k">var</span> jObject <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">org.json4s.ast.safe.JObject</span>({<span class="pl-s"><span class="pl-pds">"</span>someString<span class="pl-pds">"</span></span> <span class="pl-k">:</span> jArray});

<span class="pl-k">var</span> jObjectWithBool <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">org.json4s.ast.safe.JObject</span>({
    <span class="pl-s"><span class="pl-pds">"</span>someString<span class="pl-pds">"</span></span> <span class="pl-k">:</span> jArray,
    <span class="pl-s"><span class="pl-pds">"</span>someBool<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-smi">org</span>.<span class="pl-smi">json4s</span>.<span class="pl-smi">ast</span>.<span class="pl-smi">safe</span>.<span class="pl-en">JTrue</span>()
});

<span class="pl-k">var</span> jObjectWithBoolAndNumber <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">org.json4s.ast.safe.JObject</span>({
    <span class="pl-s"><span class="pl-pds">"</span>someString<span class="pl-pds">"</span></span> <span class="pl-k">:</span> jArray,
    <span class="pl-s"><span class="pl-pds">"</span>someBool<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-smi">org</span>.<span class="pl-smi">json4s</span>.<span class="pl-smi">ast</span>.<span class="pl-smi">safe</span>.<span class="pl-en">JTrue</span>(),
    <span class="pl-s"><span class="pl-pds">"</span>someNumber<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-k">new</span> <span class="pl-en">org.json4s.ast.safe.JNumber</span>(<span class="pl-c1">324324.324</span>)
});

<span class="pl-k">var</span> jObjectWithBoolAndNumberAndNull <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">org.json4s.ast.safe.JObject</span>({
    <span class="pl-s"><span class="pl-pds">"</span>someString<span class="pl-pds">"</span></span> <span class="pl-k">:</span> jArray,
    <span class="pl-s"><span class="pl-pds">"</span>someBool<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-smi">org</span>.<span class="pl-smi">json4s</span>.<span class="pl-smi">ast</span>.<span class="pl-smi">safe</span>.<span class="pl-en">JTrue</span>(),
    <span class="pl-s"><span class="pl-pds">"</span>someNumber<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-k">new</span> <span class="pl-en">org.json4s.ast.safe.JNumber</span>(<span class="pl-c1">324324.324</span>),
    <span class="pl-s"><span class="pl-pds">"</span>null<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-smi">org</span>.<span class="pl-smi">json4s</span>.<span class="pl-smi">ast</span>.<span class="pl-smi">safe</span>.<span class="pl-en">JNull</span>()
});</pre>
  </div> 
  <h3><a id="user-content-differences" class="anchor" href="https://github.com/json4s/json4s-ast#differences" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Differences</h3> 
  <p>There is one major difference that people need to be aware of when using <code>json4s-ast</code> with <code>Scala.js</code>, and that is an exception may be thrown when using the <code>JNumber</code> <code>String</code> constructor for the safe version of <code>json4s-ast</code> (<code>org.json4s.ast.safe</code>). Unfortunately there is no real way around this. <code>Javascript</code> doesn't have a standard <code>BigDecimal</code> (i.e. unbounded real number type), so the only way to construct a <code>JNumber</code> larger than specified in the IEEE 754 in <code>Javascript</code> is to use a <code>String</code> representation (<a href="https://en.wikipedia.org/wiki/JSON" target="_blank">JSON</a> <a href="http://stackoverflow.com/a/13502497/1519631" target="_blank">specification</a> is that the number can be of any size, unlike the <code>Javascript</code> <a href="http://stackoverflow.com/a/3605960/1519631" target="_blank">specification</a>). This means that if you don't put a valid number as a <code>String</code> when calling the <code>JNumber</code> constructor in <code>Javascript</code>/<code>Scala.js</code>, it will error out. As an example below</p> 
  <div class="highlight highlight-source-js">
   <pre><span class="pl-c">// How to construct a really large JNumber in Javascript</span>
<span class="pl-k">var</span> jNumber <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">org.json4s.ast.safe.JNumber</span>(<span class="pl-s"><span class="pl-pds">"</span>34235325322353257498327423.23532875932598234783252325<span class="pl-pds">"</span></span>);
<span class="pl-c">// Understandably, this will error</span>
<span class="pl-k">var</span> jNumber <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">org.json4s.ast.safe.JNumber</span>(<span class="pl-s"><span class="pl-pds">"</span>this will error<span class="pl-pds">"</span></span>);</pre>
  </div> 
  <p>Obviously in <code>Javascript</code>, this will always error out in runtime, but since the <code>String</code> constructor is exported for <code>Scala</code> as well (only in the <code>Scala.js</code> artifact, not the <code>Scala</code> <code>JVM</code> one), you can do this when writing <code>Scala</code> with <code>Scala.js</code></p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">jNumber</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">org.json4s.ast.safe.JNumber</span>(<span class="pl-s"><span class="pl-pds">"</span>this will error<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>This will error out with an exception at runtime. Note that the actual exception is not known (this depends on the <code>Scala.js</code> implementation of <code>BigDecimal</code> which may change) so you should <strong>NOT</strong> try and catch it.</p> 
  <p>You just need to be strict and not use the <code>JNumber</code> <code>String</code> constructor in <code>Scala.js</code> so that this error is never thrown.</p> 
  <p>When using <code>Scala</code> on the <code>JVM</code> there is no exported <code>String</code> method for <code>JNumber</code>. Also when using the <code>org.json4s.ast.fast</code> library, you can expect runtime errors for incorrect usage (however this is implied by design of the library).</p> 
  <p>For the <code>org.json4s.ast.fast</code>, the API is the same as <code>org.json4s.ast.safe</code>. One major difference is that while <code>org.json4s.ast.fast</code> uses <code>Array</code> on the JVM, on <code>Scala.js</code> it uses <code>js.Array</code>. This is because <code>org.json4s.ast.fast</code> is focused on performance, and <code>js.Array</code> is by far the best performing linear data structure for <code>Scala.js</code> on <code>Javascript</code>. If you have common code that uses <code>org.json4s.ast.fast</code> in both <code>Scala</code> <code>JVM</code> and <code>Scala.js</code> <strong>and</strong> you wish to retain performance (i.e. no usage of <code>toArray</code>/<code>toJSArray</code>), you need to refactor that common code so you can handle this.</p> 
  <p>As an added note, there is an extra constructor for a <code>Javascript</code> number type in <code>org.json4s.ast.fast</code> (i.e. you can do <code>var jNumber = new org.json4s.ast.fast.JNumber(3254);</code>)</p> 
 </article>
</div>