<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-akre" class="anchor" href="https://github.com/programmiersportgruppe/akre#akre" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Akre</h1> 
  <p>Akre is a Scala Redis client implemented using Akka, with command pipelining and convenient Actor and Future APIs.</p> 
  <h2><a id="user-content-status" class="anchor" href="https://github.com/programmiersportgruppe/akre#status" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Status</h2> 
  <p><a href="https://travis-ci.org/programmiersportgruppe/akre" target="_blank"><img src="https://camo.githubusercontent.com/ab1798e4ddbd360908a16e41e2c3686be56c0972/68747470733a2f2f7472617669732d63692e6f72672f70726f6772616d6d69657273706f72746772757070652f616b72652e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/programmiersportgruppe/akre.svg?branch=master" style="max-width:100%;"></a></p> 
  <p>Consider this beta software. Akre is being used in production, but currently only a handful of commands have strongly-typed representations, and the interface is subject to change.</p> 
  <h2><a id="user-content-getting-started" class="anchor" href="https://github.com/programmiersportgruppe/akre#getting-started" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Getting Started</h2> 
  <p>Include the following line in your <code>build.sbt</code> to get started:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>org.programmiersportgruppe.akre<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>akre-client<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.19.1<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>The easiest way to use Akre is through the <code>AkreClient</code> <code>Future</code>-based API described below. If you're interested in using Akre from other Akka actors, you can either directly use <code>RedisConnectionActor</code>, or use it through a <code>Resilient Pool</code> like <code>AkreClient</code> does.</p> 
  <h2><a id="user-content-using-the-akreclient-api-and-futures" class="anchor" href="https://github.com/programmiersportgruppe/akre#using-the-akreclient-api-and-futures" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Using the <code>AkreClient</code> API and Futures</h2> 
  <p>Futures offer an elegant way of dealing with asynchronous requests, and the future API is arguably the easiest way to use Akre.</p> 
  <p>First we create a client:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">client</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">RedisClient</span>(
    actorRefFactory     <span class="pl-k">=</span> actorSystem,
    serverAddress       <span class="pl-k">=</span> <span class="pl-en">InetSocketAddress</span>.createUnresolved(<span class="pl-s"><span class="pl-pds">"</span>127.0.0.1<span class="pl-pds">"</span></span>, <span class="pl-c1">6379</span>),
    connectTimeout      <span class="pl-k">=</span> <span class="pl-en">Timeout</span>(<span class="pl-c1">1000</span>, <span class="pl-en">MILLISECONDS</span>),
    requestTimeout      <span class="pl-k">=</span> <span class="pl-en">Timeout</span>(<span class="pl-c1">1000</span>, <span class="pl-en">MILLISECONDS</span>),
    numberOfConnections <span class="pl-k">=</span> <span class="pl-c1">1</span>
)</pre>
  </div> 
  <p>Then we wait for the client to be ready:</p> 
  <div class="highlight highlight-source-scala">
   <pre>client.waitUntilConnected(<span class="pl-c1">5.</span>seconds)</pre>
  </div> 
  <p>Now we can send commands using the execute method:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">response</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">RSuccessValue</span>] <span class="pl-k">=</span> client.execute(<span class="pl-en">SET</span>(<span class="pl-en">Key</span>(<span class="pl-s"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>), <span class="pl-s"><span class="pl-pds">"</span>cruel world<span class="pl-pds">"</span></span>))

println(<span class="pl-en">Await</span>.result(response, <span class="pl-c1">5.</span>seconds))</pre>
  </div> 
  <p>We can also call execute methods on the commands themselves, which help guide us to more specific, command-appropriate return types:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">value</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">Option</span>[<span class="pl-en">ByteString</span>]] <span class="pl-k">=</span> <span class="pl-en">GET</span>(<span class="pl-en">Key</span>(<span class="pl-s"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>)).executeByteString(client)

<span class="pl-k">val</span> <span class="pl-en">utf8Decoded</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">Option</span>[<span class="pl-k">String</span>]] <span class="pl-k">=</span> <span class="pl-en">GET</span>(<span class="pl-en">Key</span>(<span class="pl-s"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>)).executeString(client)</pre>
  </div> 
  <p>When you're done with client, don't forget to shut down the actor system if you're not using it for something else:</p> 
  <div class="highlight highlight-source-scala">
   <pre>actorSystem.shutdown()</pre>
  </div> 
  <h2><a id="user-content-akre-development" class="anchor" href="https://github.com/programmiersportgruppe/akre#akre-development" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Akre Development</h2> 
  <p>Pull requests are welcome.</p> 
  <p>You should run</p> 
  <div class="highlight highlight-source-shell">
   <pre>sbt +test +doc</pre>
  </div> 
  <p>prior to pushing to validate your changes.</p> 
  <p>The release process is documented in <a href="https://github.com/programmiersportgruppe/akre/blob/master/RELEASING.md" target="_blank">RELEASING.md</a>.</p> 
  <h2><a id="user-content-why" class="anchor" href="https://github.com/programmiersportgruppe/akre#why" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Why?</h2> 
  <p>A teammate of mine implemented a caching solution for our system, which is written in Scala. He was not satified with existing Scala clients for Redis, and ended up using Jedis. We then encountered stability problems on MacOS X with versions 7 and 8 of the JDK. A client based on Akka seamed like a reasonable thing to do. At some point, I'll look at the other Scala clients. Maybe I will abandon this client in favour of something more established, but at least this will have been a good learning experience for me.</p> 
 </article>
</div>