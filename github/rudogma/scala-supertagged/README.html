<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <p><a href="https://travis-ci.org/Rudogma/scala-supertagged" target="_blank"><img src="https://camo.githubusercontent.com/7f893990b09f8c1865bfe09ae4ba15f6da115a85/68747470733a2f2f696d672e736869656c64732e696f2f7472617669732f5275646f676d612f7363616c612d73757065727461676765642f6d61737465722e737667" alt="Build status" data-canonical-src="https://img.shields.io/travis/Rudogma/scala-supertagged/master.svg" style="max-width:100%;"></a> <a href="https://maven-badges.herokuapp.com/maven-central/org.rudogma/supertagged_2.12" target="_blank"><img src="https://camo.githubusercontent.com/af7464f404bacd90d0e57a2c3d357227dd8e6d69/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f6f72672e7275646f676d612f73757065727461676765645f322e31322e737667" alt="Maven Central" data-canonical-src="https://img.shields.io/maven-central/v/org.rudogma/supertagged_2.12.svg" style="max-width:100%;"></a></p> 
  <h1><a id="user-content-supertagged-for-scala" class="anchor" href="https://github.com/rudogma/scala-supertagged#supertagged-for-scala" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>supertagged for scala</h1> 
  <p>Better (multi-nested-)tagged types for Scala, Intellij Idea autocomplete features working pretty fine.</p> 
  <p>Zero-dependcy 1 file, tests included.</p> 
  <h2><a id="user-content-sbt" class="anchor" href="https://github.com/rudogma/scala-supertagged#sbt" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>sbt</h2> 
  <p>Scala: 2.11.11, 2.12.1, 2.12.2</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>org.rudogma<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>supertagged<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.2<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>ScalaJS (compiled with 0.6.17)</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>org.rudogma<span class="pl-pds">"</span></span> <span class="pl-k">%%%</span> <span class="pl-s"><span class="pl-pds">"</span>supertagged<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.2<span class="pl-pds">"</span></span></pre>
  </div> 
  <h1><a id="user-content-usage" class="anchor" href="https://github.com/rudogma/scala-supertagged#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h1> 
  <p>Check out tests for all examples</p> 
  <h2><a id="user-content-classic-way" class="anchor" href="https://github.com/rudogma/scala-supertagged#classic-way" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Classic way</h2> 
  <p>Original idea by <a href="https://gist.github.com/milessabin/89c9b47a91017973a35f" target="_blank">Miles Sabin</a>. Similar implementations are also available in <a href="https://github.com/milessabin/shapeless" target="_blank">Shapeless</a> and <a href="https://github.com/scalaz/scalaz" target="_blank">Scalaz</a>.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">supertagged.</span><span class="pl-v">@@</span>

<span class="pl-k">sealed</span> <span class="pl-k">trait</span> <span class="pl-en">Width</span>
<span class="pl-k">val</span> <span class="pl-en">value</span> <span class="pl-k">=</span> <span class="pl-k">@@</span>[<span class="pl-en">Width</span>](<span class="pl-c1">5</span>) <span class="pl-c"><span class="pl-c">//</span> value is `Int @@ Width`</span></pre>
  </div> 
  <h2><a id="user-content-new-way" class="anchor" href="https://github.com/rudogma/scala-supertagged#new-way" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>New way</h2> 
  <h3><a id="user-content-concepts-and-features" class="anchor" href="https://github.com/rudogma/scala-supertagged#concepts-and-features" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Concepts and Features</h3> 
  <p>Tagging Primitive, Class or any Trait types (and Multi Tagging). Original idea to use base trait + companion type is from <strong>Alexander Semenov</strong> <a href="https://github.com/Treev-io/tagged-types/" target="_blank">https://github.com/Treev-io/tagged-types/</a></p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">//</span></span>
<span class="pl-k">object</span> <span class="pl-en">Width</span> <span class="pl-k">extends</span> <span class="pl-e">TaggedType</span>[<span class="pl-k">Int</span>]
<span class="pl-k">type</span> <span class="pl-en">Width</span> <span class="pl-k">=</span> <span class="pl-en">Width</span>.<span class="pl-en">Type</span> </pre>
  </div> 
  <p>Overtagging. Original idea from Me. Heavily used in <strong>Scala Superquants</strong> <a href="https://github.com/Rudogma/scala-superquants" target="_blank">https://github.com/Rudogma/scala-superquants</a></p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">object</span> <span class="pl-en">Time</span> <span class="pl-k">extends</span> <span class="pl-e">TaggedType</span>[<span class="pl-k">Long</span>]
<span class="pl-k">type</span> <span class="pl-en">Time</span>[<span class="pl-en">T</span>] <span class="pl-k">=</span> (<span class="pl-k">Long</span> <span class="pl-k">with</span> <span class="pl-e">Tag</span>[<span class="pl-k">Long</span>, <span class="pl-en">Time</span>.<span class="pl-en">Tag</span>]) <span class="pl-k">@@</span> <span class="pl-en">T</span>

<span class="pl-k">object</span> <span class="pl-en">Seconds</span> <span class="pl-k">extends</span> <span class="pl-e">OverTagged</span>(<span class="pl-en">Time</span>)
<span class="pl-k">type</span> <span class="pl-en">Seconds</span> <span class="pl-k">=</span> <span class="pl-en">Seconds</span>.<span class="pl-en">Type</span></pre>
  </div> 
  <p><strong>Unified syntax</strong></p> 
  <p><strong><code>@@</code></strong> - Adds one more tag to existing tags (if no tags then adds one)</p> 
  <p><strong><code>!@@</code></strong> - Replaces all existing tags with 1 new (if no tags then adds one)</p> 
  <p><strong><code>untag</code></strong> - For removing concrete tag</p> 
  <p><strong>Auto tagging at any nested level</strong></p> 
  <p>No matter how many levels, it will stop automatically at appropriate (top level, middle or tail nested) (or fail if u used inappropriate types)</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-en">Widths</span> <span class="pl-k">@@</span> ( <span class="pl-en">Width</span> <span class="pl-k">@@</span> <span class="pl-en">Array</span>(<span class="pl-en">Array</span>(<span class="pl-en">Array</span>(<span class="pl-en">Array</span>(<span class="pl-en">Array</span>(<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>)))))) <span class="pl-c"><span class="pl-c">//</span> Result: `array_5lvl_OfWidth: Array[Array[Array[Array[Array[Int @@ Width] @@ Widths]]]]]`</span></pre>
  </div> 
  <h3><a id="user-content-tagging" class="anchor" href="https://github.com/rudogma/scala-supertagged#tagging" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Tagging</h3> 
  <p>FileWithModels.scala</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">supertagged.</span><span class="pl-v">TaggedType</span>

<span class="pl-k">object</span> <span class="pl-en">Width</span> <span class="pl-k">extends</span> <span class="pl-e">TaggedType</span>[<span class="pl-k">Int</span>]
<span class="pl-k">type</span> <span class="pl-en">Width</span> <span class="pl-k">=</span> <span class="pl-en">Width</span>.<span class="pl-en">Type</span>

<span class="pl-k">object</span> <span class="pl-en">Widths</span> <span class="pl-k">extends</span> <span class="pl-e">TaggedType</span>[<span class="pl-en">Array</span>[<span class="pl-en">Width</span>]]
<span class="pl-k">type</span> <span class="pl-en">Widths</span> <span class="pl-k">=</span> <span class="pl-en">Widths</span>.<span class="pl-en">Type</span>


<span class="pl-c"><span class="pl-c">//</span> bounded</span>
<span class="pl-k">def</span> <span class="pl-en">Widths</span>[<span class="pl-en">T</span>] <span class="pl-k">=</span> <span class="pl-en">TaggedTypeF</span>[<span class="pl-en">Array</span>[<span class="pl-en">T</span>]]
<span class="pl-k">type</span> <span class="pl-en">Widths</span>[<span class="pl-en">T</span>] <span class="pl-k">=</span> <span class="pl-en">TaggedTypeF</span>[<span class="pl-en">Array</span>[<span class="pl-en">T</span>]]#<span class="pl-en">Type</span>
</pre>
  </div> 
  <p>Program.scala</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">//</span> We don't need to import any from supertagged to use defined tags</span>
<span class="pl-k">import</span> <span class="pl-v">FileWithModels.</span><span class="pl-v">_</span>

<span class="pl-c"><span class="pl-c">//</span> U can use defined type `Width` without boilerplate `Int @@ Width`.</span>
<span class="pl-c"><span class="pl-c">//</span> Also all methods that waiting for raw Int are applicable for any tagged value based on Int,</span>
<span class="pl-c"><span class="pl-c">//</span> but method with `width:Width` will deny raw Int</span>
<span class="pl-k">def</span> <span class="pl-en">methodRaw</span>(width<span class="pl-k">:</span><span class="pl-k">Int</span>)<span class="pl-k">:</span><span class="pl-k">Unit</span> <span class="pl-k">=</span> {}
<span class="pl-k">def</span> <span class="pl-en">method</span>(width<span class="pl-k">:</span><span class="pl-en">Width</span>)<span class="pl-k">:</span><span class="pl-k">Unit</span> <span class="pl-k">=</span> {}


<span class="pl-k">val</span> <span class="pl-en">width</span> <span class="pl-k">=</span> <span class="pl-en">Width</span> <span class="pl-k">@@</span> <span class="pl-c1">5</span>  <span class="pl-c"><span class="pl-c">//</span> or Width(5). Result: `width:Int @@ Width`</span>

<span class="pl-c"><span class="pl-c">//</span>Tagged values do not loose their raw types</span>
methodRaw(width)
method(width)


<span class="pl-k">val</span> <span class="pl-en">arrayOfWidth</span> <span class="pl-k">=</span> <span class="pl-en">Width</span> <span class="pl-k">@@</span> <span class="pl-en">Array</span>(<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>) <span class="pl-c"><span class="pl-c">//</span> Result: `arrayOfWidth: Array[Int @@ Width]`</span>

<span class="pl-c"><span class="pl-c">//</span> No matter how many levels, it will stop automatically at appropriate (or fail if no)</span>
<span class="pl-k">val</span> <span class="pl-en">array_5lvl_OfWidth</span> <span class="pl-k">=</span> <span class="pl-en">Width</span> <span class="pl-k">@@</span> <span class="pl-en">Array</span>(<span class="pl-en">Array</span>(<span class="pl-en">Array</span>(<span class="pl-en">Array</span>(<span class="pl-en">Array</span>(<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>))))) <span class="pl-c"><span class="pl-c">//</span> Result: `array_5lvl_OfWidth: Array[Array[Array[Array[Array[Int @@ Width]`</span>

<span class="pl-c"><span class="pl-c">//</span> `Widths @@ Array(1,2,3)` - will fail to compile, because Widths is `TaggedType[Array[Width]]` and we try to tag `Array[Int]`</span>
<span class="pl-k">val</span> <span class="pl-en">widths</span> <span class="pl-k">=</span> <span class="pl-en">Widths</span> <span class="pl-k">@@</span> arrayOfWidth <span class="pl-c"><span class="pl-c">//</span> or Widths @@ (Width @@ Array(Array(Array(1,2,3))))  // Result: `widths: Array[Array[Array[Int @@ Width] @@ Widths]]`</span>

<span class="pl-c"><span class="pl-c">//</span> Any containers F[_]</span>
<span class="pl-k">val</span> <span class="pl-en">anyContainers</span> <span class="pl-k">=</span> <span class="pl-en">Width</span> <span class="pl-k">@@</span> <span class="pl-en">List</span>(<span class="pl-en">Array</span>(<span class="pl-en">List</span>(<span class="pl-en">Array</span>(<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>)))) <span class="pl-c"><span class="pl-c">//</span> Result: `anyContainers: List[Array[List[Array[Int @@ Width]]]]`</span>


<span class="pl-c"><span class="pl-c">//</span> Bounded &amp;&amp; plain. Combine them all</span>
<span class="pl-k">val</span> <span class="pl-en">offsetsInt</span> <span class="pl-k">=</span> <span class="pl-en">Offsets</span>[<span class="pl-en">Width</span>] <span class="pl-k">@@</span> (<span class="pl-en">Width</span> <span class="pl-k">@@</span> <span class="pl-en">Array</span>(<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>)) <span class="pl-c"><span class="pl-c">//</span> Result: `Array[Int @@ Width] @@ Offsets[Width]`</span>

<span class="pl-k">def</span> <span class="pl-en">testOffsets</span>(offsets<span class="pl-k">:</span><span class="pl-en">Offsets</span>[<span class="pl-en">Width</span>])<span class="pl-k">:</span><span class="pl-k">Unit</span> <span class="pl-k">=</span> {}
<span class="pl-c"><span class="pl-c">//</span>two methods with one name? Just add DummyImplicit(no imports required) and compiler will do the rest</span>
<span class="pl-k">def</span> <span class="pl-en">testOffsets</span>(offsets<span class="pl-k">:</span><span class="pl-en">Offsets</span>[<span class="pl-en">Height</span>])(<span class="pl-k">implicit</span> d<span class="pl-k">:</span><span class="pl-en">DummyImplicit</span>)<span class="pl-k">:</span><span class="pl-k">Unit</span> <span class="pl-k">=</span> {}
</pre>
  </div> 
  <h3><a id="user-content-multitagging" class="anchor" href="https://github.com/rudogma/scala-supertagged#multitagging" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>MultiTagging</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">value</span> <span class="pl-k">=</span> <span class="pl-en">Width</span> <span class="pl-k">@@</span> (<span class="pl-en">Height</span> <span class="pl-k">@@</span> <span class="pl-c1">5</span>)) <span class="pl-c"><span class="pl-c">//</span> Result: `Int @@ (Height with Width)`</span>

takeWidth(value)
takeHeight(value)

<span class="pl-k">def</span> <span class="pl-en">takeWidth</span>(width<span class="pl-k">:</span><span class="pl-en">Width</span>)<span class="pl-k">:</span><span class="pl-k">Unit</span> <span class="pl-k">=</span> {}
<span class="pl-k">def</span> <span class="pl-en">takeHeight</span>(height<span class="pl-k">:</span><span class="pl-en">Height</span>)<span class="pl-k">:</span><span class="pl-k">Unit</span> <span class="pl-k">=</span> {}

<span class="pl-k">val</span> <span class="pl-en">nested</span> <span class="pl-k">=</span> <span class="pl-en">Width</span> <span class="pl-k">@@</span> (<span class="pl-en">Height</span> <span class="pl-k">@@</span> <span class="pl-en">Array</span>(<span class="pl-en">Array</span>(<span class="pl-en">Array</span>(<span class="pl-c1">5</span>)))) <span class="pl-c"><span class="pl-c">//</span> Result: `Array[Array[Array[Int @@ (Height with Width)]]]`</span></pre>
  </div> 
  <h3><a id="user-content-postfix-syntax" class="anchor" href="https://github.com/rudogma/scala-supertagged#postfix-syntax" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Postfix syntax</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">//</span>required for postfix syntax!</span>
<span class="pl-k">import</span> <span class="pl-v">supertagged.</span><span class="pl-v">_</span>

value <span class="pl-k">@@</span> <span class="pl-en">Width</span>
value <span class="pl-k">!</span><span class="pl-k">@@</span> <span class="pl-en">Width</span>
value untag <span class="pl-en">Width</span></pre>
  </div> 
  <h3><a id="user-content-implicit-serializer-case" class="anchor" href="https://github.com/rudogma/scala-supertagged#implicit-serializer-case" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><code>implicit Serializer</code> case</h3> 
  <p>Preparing</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">trait</span> <span class="pl-en">Serializer</span>[<span class="pl-en">T</span>] {
    <span class="pl-k">def</span> <span class="pl-en">serialize</span>(<span class="pl-v">t</span>: <span class="pl-en">T</span>)<span class="pl-k">:</span> <span class="pl-k">String</span>
}

<span class="pl-k">def</span> <span class="pl-en">serialize</span>[<span class="pl-en">T</span>](<span class="pl-v">t</span>: <span class="pl-en">T</span>)(<span class="pl-k">implicit</span> <span class="pl-v">serializer</span>: <span class="pl-en">Serializer</span>[<span class="pl-en">T</span>])<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> serializer.serialize(t)


<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">longSerializer</span><span class="pl-k">:</span> <span class="pl-en">Serializer</span>[<span class="pl-k">Long</span>] <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Serializer</span>[<span class="pl-k">Long</span>] {
<span class="pl-k">def</span> <span class="pl-en">serialize</span>(<span class="pl-v">t</span>: <span class="pl-k">Long</span>)<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Long number: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> t
}


<span class="pl-k">trait</span> <span class="pl-en">UserId</span></pre>
  </div> 
  <p>Example 1:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">supertagged.</span><span class="pl-v">_</span>
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">lifter</span> <span class="pl-k">=</span> lifterF[<span class="pl-en">Serializer</span>] <span class="pl-c"><span class="pl-c">//</span> `import supertagged._` + `implicit val lifter` will auto lift all Serializer[T] to Serializer[T @@ WhatTagImplicitNeeds]</span>

<span class="pl-k">val</span> <span class="pl-en">longNumber</span> <span class="pl-k">=</span> <span class="pl-c1">30L</span>
<span class="pl-k">val</span> <span class="pl-en">id</span> <span class="pl-k">=</span> tag[<span class="pl-en">UserId</span>](longNumber)

serialize(id) <span class="pl-c"><span class="pl-c">//</span> `val longSerializer:Serializer[Long]` will be lifted to `Serializer[Long @@ UserId]`</span></pre>
  </div> 
  <p>Example 2:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">supertagged.</span><span class="pl-v">liftAnyF </span><span class="pl-c"><span class="pl-c">//</span> will lift any F[T] to F[T @@ WhatTagImplicitNeeds] when needed</span>

<span class="pl-k">val</span> <span class="pl-en">longNumber</span> <span class="pl-k">=</span> <span class="pl-c1">30L</span>
<span class="pl-k">val</span> <span class="pl-en">id</span> <span class="pl-k">=</span> tag[<span class="pl-en">UserId</span>](longNumber)

serialize(id)</pre>
  </div> 
  <h3><a id="user-content-ordering" class="anchor" href="https://github.com/rudogma/scala-supertagged#ordering" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Ordering</h3> 
  <p>Since <code>TaggedType[T]</code> already contains <code>implicit def ordering[U](implicit origin:Ordering[T]):Ordering[T @@ U] = cast(origin)</code>, there is no need to import anything. Implicit Ordering[Raw] will be used implicitly for sorting tagged <code>Raw @@ TaggedType[Raw].Tag</code>.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">models.</span><span class="pl-v">Counter</span>

<span class="pl-k">val</span> <span class="pl-en">arr</span> <span class="pl-k">=</span> <span class="pl-en">Counter</span> <span class="pl-k">@@</span> <span class="pl-en">Array</span>(<span class="pl-c1">3</span>,<span class="pl-c1">10</span>,<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">11</span>)
<span class="pl-k">val</span> <span class="pl-en">arrSorted</span> <span class="pl-k">=</span> arr.sorted

arrSorted.mkString(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>) shouldBe <span class="pl-s"><span class="pl-pds">"</span>1,2,3,10,11<span class="pl-pds">"</span></span> <span class="pl-c"><span class="pl-c">//</span> Ok</span>
</pre>
  </div> 
  <h3><a id="user-content-specific-scalac-bug" class="anchor" href="https://github.com/rudogma/scala-supertagged#specific-scalac-bug" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Specific Scalac BUG</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c">    <span class="pl-c">/**</span></span>
<span class="pl-c">      * Be very attentive</span>
<span class="pl-c">      <span class="pl-c">*/</span></span>

    {
      <span class="pl-c"><span class="pl-c">//</span>Scalac Bug is here. It doesn't compile - and it is bug</span>
      illTyped(<span class="pl-s"><span class="pl-pds">"""</span>test(Counter @@ Array(1,2,3))<span class="pl-pds">"""</span></span>,<span class="pl-s"><span class="pl-pds">"</span>polymorphic expression cannot be instantiated to expected type;.+<span class="pl-pds">"</span></span>)
      illTyped(<span class="pl-s"><span class="pl-pds">"""</span>test(Counters @@ (Counter @@ Array(1,2,3)))<span class="pl-pds">"""</span></span>,<span class="pl-s"><span class="pl-pds">"</span>polymorphic expression cannot be instantiated to expected type;.+<span class="pl-pds">"</span></span>)

    }

    {
      <span class="pl-c"><span class="pl-c">//</span>We can overcome with using outer variable</span>
      <span class="pl-k">val</span> <span class="pl-en">v</span> <span class="pl-k">=</span> <span class="pl-en">Counter</span> <span class="pl-k">@@</span> <span class="pl-en">Array</span>(<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>)
      test(v) shouldBe <span class="pl-c1">1</span>
    }

    {
      <span class="pl-c"><span class="pl-c">//</span>Or adding one more tag to parameter</span>
      test2(<span class="pl-en">Counters</span> <span class="pl-k">@@</span> (<span class="pl-en">Counter</span> <span class="pl-k">@@</span> <span class="pl-en">Array</span>(<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>))) shouldBe <span class="pl-c1">1</span>
    }

<span class="pl-c">    <span class="pl-c">/**</span></span>
<span class="pl-c">      * Note: if change to List or adding inline conversion, or tagging nested array(if outer collection is not array) - everything compiles ok.</span>
<span class="pl-c">      <span class="pl-c">*/</span></span>
    {

      testList(<span class="pl-en">Counter</span> <span class="pl-k">@@</span> <span class="pl-en">List</span>(<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>)) shouldBe <span class="pl-c1">1</span>
      test( (<span class="pl-en">Counter</span> <span class="pl-k">@@</span> <span class="pl-en">List</span>(<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>)).toArray ) shouldBe <span class="pl-c1">1</span>
      testNested( <span class="pl-en">Counter</span> <span class="pl-k">@@</span> <span class="pl-en">List</span>(<span class="pl-en">Array</span>(<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>))) shouldBe <span class="pl-c1">1</span>
    }

  }

  <span class="pl-k">object</span> <span class="pl-en">Counter</span> <span class="pl-k">extends</span> <span class="pl-e">TaggedType</span>[<span class="pl-k">Int</span>]
  <span class="pl-k">type</span> <span class="pl-en">Counter</span> <span class="pl-k">=</span> <span class="pl-en">Counter</span>.<span class="pl-en">Type</span>

  <span class="pl-k">object</span> <span class="pl-en">Counters</span> <span class="pl-k">extends</span> <span class="pl-e">TaggedType</span>[<span class="pl-en">Array</span>[<span class="pl-en">Counter</span>]]
  <span class="pl-k">type</span> <span class="pl-en">Counters</span> <span class="pl-k">=</span> <span class="pl-en">Counters</span>.<span class="pl-en">Type</span>

  <span class="pl-k">def</span> <span class="pl-en">test</span>(counters<span class="pl-k">:</span><span class="pl-en">Array</span>[<span class="pl-en">Counter</span>])<span class="pl-k">:</span><span class="pl-en">Counter</span> <span class="pl-k">=</span> counters.head

  <span class="pl-k">def</span> <span class="pl-en">test2</span>(counters<span class="pl-k">:</span><span class="pl-en">Counters</span>)<span class="pl-k">:</span><span class="pl-en">Counter</span> <span class="pl-k">=</span> counters.head
  <span class="pl-k">def</span> <span class="pl-en">testNested</span>(counters<span class="pl-k">:</span><span class="pl-en">List</span>[<span class="pl-en">Array</span>[<span class="pl-en">Counter</span>]])<span class="pl-k">:</span><span class="pl-en">Counter</span> <span class="pl-k">=</span> counters.head.head <span class="pl-c"><span class="pl-c">//</span>(0) //see 'jvm feature block'</span>

  <span class="pl-k">def</span> <span class="pl-en">testList</span>(counters<span class="pl-k">:</span><span class="pl-en">List</span>[<span class="pl-en">Counter</span>])<span class="pl-k">:</span><span class="pl-en">Counter</span> <span class="pl-k">=</span> counters.head</pre>
  </div> 
 </article>
</div>