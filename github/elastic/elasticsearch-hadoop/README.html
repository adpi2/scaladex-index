<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-elasticsearch-hadoop-" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#elasticsearch-hadoop-" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Elasticsearch Hadoop <a href="https://travis-ci.org/elastic/elasticsearch-hadoop" target="_blank"><img src="https://camo.githubusercontent.com/8ef4c2c1410c5f1d785e3e1c43759e92409dd47f/68747470733a2f2f7472617669732d63692e6f72672f656c61737469632f656c61737469637365617263682d6861646f6f702e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/elastic/elasticsearch-hadoop.svg?branch=master" style="max-width:100%;"></a></h1> 
  <p>Elasticsearch real-time search and analytics natively integrated with Hadoop.<br> Supports <a href="https://github.com/elastic/elasticsearch-hadoop#mapreduce" target="_blank">Map/Reduce</a>, <a href="https://github.com/elastic/elasticsearch-hadoop#cascading" target="_blank">Cascading</a>, <a href="https://github.com/elastic/elasticsearch-hadoop#apache-hive" target="_blank">Apache Hive</a>, <a href="https://github.com/elastic/elasticsearch-hadoop#apache-pig" target="_blank">Apache Pig</a>, <a href="https://github.com/elastic/elasticsearch-hadoop#apache-spark" target="_blank">Apache Spark</a> and <a href="https://github.com/elastic/elasticsearch-hadoop#apache-storm" target="_blank">Apache Storm</a>.</p> 
  <p>See <a href="http://www.elastic.co/products/hadoop/" target="_blank">project page</a> and <a href="http://www.elastic.co/guide/en/elasticsearch/hadoop/current/index.html" target="_blank">documentation</a> for detailed information.</p> 
  <h2><a id="user-content-requirements" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#requirements" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Requirements</h2> 
  <p>Elasticsearch (<strong>1.x</strong> or higher (2.x <em>highly</em> recommended)) cluster accessible through <a href="http://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html" target="_blank">REST</a>. That's it! Significant effort has been invested to create a small, dependency-free, self-contained jar that can be downloaded and put to use without any dependencies. Simply make it available to your job classpath and you're set. For a certain library, see the dedicated <a href="http://www.elastic.co/guide/en/elasticsearch/hadoop/current/requirements.html" target="_blank">chapter</a>.</p> 
  <p>ES-Hadoop 5.x and higher are compatible with Elasticsearch <strong>1.X</strong>, <strong>2.X</strong> and <strong>5.X</strong></p> 
  <p>ES-Hadoop 2.2.x and higher are compatible with Elasticsearch <strong>1.X</strong> and <strong>2.X</strong></p> 
  <p>ES-Hadoop 2.0.x and 2.1.x are compatible with Elasticsearch <strong>1.X</strong> <em>only</em></p> 
  <h2><a id="user-content-installation" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#installation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Installation</h2> 
  <h3><a id="user-content-stable-release-currently-500" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#stable-release-currently-500" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Stable Release (currently <code>5.0.0</code>)</h3> 
  <p>Available through any Maven-compatible tool:</p> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">dependency</span>&gt;
  &lt;<span class="pl-ent">groupId</span>&gt;org.elasticsearch&lt;/<span class="pl-ent">groupId</span>&gt;
  &lt;<span class="pl-ent">artifactId</span>&gt;elasticsearch-hadoop&lt;/<span class="pl-ent">artifactId</span>&gt;
  &lt;<span class="pl-ent">version</span>&gt;5.0.0&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre>
  </div> 
  <p>or as a stand-alone <a href="http://www.elastic.co/downloads/hadoop" target="_blank">ZIP</a>.</p> 
  <h3><a id="user-content-development-snapshot" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#development-snapshot" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Development Snapshot</h3> 
  <p>Grab the latest nightly build from the <a href="http://oss.sonatype.org/content/repositories/snapshots/org/elasticsearch/elasticsearch-hadoop/" target="_blank">repository</a> again through Maven:</p> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">dependency</span>&gt;
  &lt;<span class="pl-ent">groupId</span>&gt;org.elasticsearch&lt;/<span class="pl-ent">groupId</span>&gt;
  &lt;<span class="pl-ent">artifactId</span>&gt;elasticsearch-hadoop&lt;/<span class="pl-ent">artifactId</span>&gt;
  &lt;<span class="pl-ent">version</span>&gt;5.0.1.BUILD-SNAPSHOT&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre>
  </div> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">repositories</span>&gt;
  &lt;<span class="pl-ent">repository</span>&gt;
    &lt;<span class="pl-ent">id</span>&gt;sonatype-oss&lt;/<span class="pl-ent">id</span>&gt;
    &lt;<span class="pl-ent">url</span>&gt;http://oss.sonatype.org/content/repositories/snapshots&lt;/<span class="pl-ent">url</span>&gt;
    &lt;<span class="pl-ent">snapshots</span>&gt;&lt;<span class="pl-ent">enabled</span>&gt;true&lt;/<span class="pl-ent">enabled</span>&gt;&lt;/<span class="pl-ent">snapshots</span>&gt;
  &lt;/<span class="pl-ent">repository</span>&gt;
&lt;/<span class="pl-ent">repositories</span>&gt;</pre>
  </div> 
  <p>or <a href="https://github.com/elastic/elasticsearch-hadoop#building-the-source" target="_blank">build</a> the project yourself.</p> 
  <p>We do build and test the code on <em>each</em> commit.</p> 
  <h3><a id="user-content-hadoop-20yarn" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#hadoop-20yarn" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Hadoop 2.0/YARN</h3> 
  <p>Already supported - it does not matter if you are using Hadoop 1.x or 2.x, the same jar works across both Hadoop environments. More information in this <a href="http://www.elastic.co/guide/en/elasticsearch/hadoop/current/install.html" target="_blank">section</a>.</p> 
  <h2><a id="user-content-feedback--qa" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#feedback--qa" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Feedback / Q&amp;A</h2> 
  <p>We're interested in your feedback! You can find us on the User <a href="https://groups.google.com/forum/?fromgroups#!forum/elasticsearch" target="_blank">mailing list</a> - please append <code>[Hadoop]</code> to the post subject to filter it out. For more details, see the <a href="http://www.elastic.co/community" target="_blank">community</a> page.</p> 
  <h2><a id="user-content-online-documentation" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#online-documentation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Online Documentation</h2> 
  <p>The latest reference documentation is available online on the project <a href="http://www.elastic.co/guide/en/elasticsearch/hadoop/index.html" target="_blank">home page</a>. Below the README contains <em>basic</em> usage instructions at a glance.</p> 
  <h2><a id="user-content-usage" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <h3><a id="user-content-configuration-properties" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#configuration-properties" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Configuration Properties</h3> 
  <p>All configuration properties start with <code>es</code> prefix. Note that the <code>es.internal</code> namespace is reserved for the library internal use and should <em>not</em> be used by the user at any point. The properties are read mainly from the Hadoop configuration but the user can specify (some of) them directly depending on the library used.</p> 
  <h3><a id="user-content-required" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#required" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Required</h3> 
  <pre><code>es.resource=&lt;ES resource location, relative to the host/port specified above&gt;
</code></pre> 
  <h3><a id="user-content-essential" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#essential" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Essential</h3> 
  <pre><code>es.query=&lt;uri or query dsl query&gt;              # defaults to {"query":{"match_all":{}}}
es.nodes=&lt;ES host address&gt;                     # defaults to localhost
es.port=&lt;ES REST port&gt;                         # defaults to 9200
</code></pre> 
  <p>The full list is available <a href="http://www.elastic.co/guide/en/elasticsearch/hadoop/current/configuration.html" target="_blank">here</a></p> 
  <h2><a id="user-content-mapreduce" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#mapreduce" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><a href="http://hadoop.apache.org/docs/r1.2.1/mapred_tutorial.html" target="_blank">Map/Reduce</a></h2> 
  <p>For basic, low-level or performance-sensitive environments, ES-Hadoop provides dedicated <code>InputFormat</code> and <code>OutputFormat</code> that read and write data to Elasticsearch. To use them, add the <code>es-hadoop</code> jar to your job classpath (either by bundling the library along - it's ~300kB and there are no-dependencies), using the <a href="http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/filecache/DistributedCache.html" target="_blank">DistributedCache</a> or by provisioning the cluster manually. See the <a href="http://www.elastic.co/guide/en/elasticsearch/hadoop/current/index.html" target="_blank">documentation</a> for more information.</p> 
  <p>Note that es-hadoop supports both the so-called 'old' and the 'new' API through its <code>EsInputFormat</code> and <code>EsOutputFormat</code> classes.</p> 
  <h3><a id="user-content-old-orgapachehadoopmapred-api" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#old-orgapachehadoopmapred-api" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>'Old' (<code>org.apache.hadoop.mapred</code>) API</h3> 
  <h3><a id="user-content-reading" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#reading" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Reading</h3> 
  <p>To read data from ES, configure the <code>EsInputFormat</code> on your job configuration along with the relevant <a href="https://github.com/elastic/elasticsearch-hadoop#configuration-properties" target="_blank">properties</a>:</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-smi">JobConf</span> conf <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">JobConf</span>();
conf<span class="pl-k">.</span>setInputFormat(<span class="pl-smi">EsInputFormat</span><span class="pl-k">.</span>class);
conf<span class="pl-k">.</span>set(<span class="pl-s"><span class="pl-pds">"</span>es.resource<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>radio/artists<span class="pl-pds">"</span></span>); 
conf<span class="pl-k">.</span>set(<span class="pl-s"><span class="pl-pds">"</span>es.query<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>?q=me*<span class="pl-pds">"</span></span>);             <span class="pl-c"><span class="pl-c">//</span> replace this with the relevant query</span>
<span class="pl-c1">...</span>
<span class="pl-smi">JobClient</span><span class="pl-k">.</span>runJob(conf);</pre>
  </div> 
  <h3><a id="user-content-writing" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#writing" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Writing</h3> 
  <p>Same configuration template can be used for writing but using <code>EsOuputFormat</code>:</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-smi">JobConf</span> conf <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">JobConf</span>();
conf<span class="pl-k">.</span>setOutputFormat(<span class="pl-smi">EsOutputFormat</span><span class="pl-k">.</span>class);
conf<span class="pl-k">.</span>set(<span class="pl-s"><span class="pl-pds">"</span>es.resource<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>radio/artists<span class="pl-pds">"</span></span>); <span class="pl-c"><span class="pl-c">//</span> index or indices used for storing data</span>
<span class="pl-c1">...</span>
<span class="pl-smi">JobClient</span><span class="pl-k">.</span>runJob(conf);</pre>
  </div> 
  <h3><a id="user-content-new-orgapachehadoopmapreduce-api" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#new-orgapachehadoopmapreduce-api" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>'New' (<code>org.apache.hadoop.mapreduce</code>) API</h3> 
  <h3><a id="user-content-reading-1" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#reading-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Reading</h3> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-smi">Configuration</span> conf <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Configuration</span>();
conf<span class="pl-k">.</span>set(<span class="pl-s"><span class="pl-pds">"</span>es.resource<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>radio/artists<span class="pl-pds">"</span></span>); 
conf<span class="pl-k">.</span>set(<span class="pl-s"><span class="pl-pds">"</span>es.query<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>?q=me*<span class="pl-pds">"</span></span>);             <span class="pl-c"><span class="pl-c">//</span> replace this with the relevant query</span>
<span class="pl-smi">Job</span> job <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Job</span>(conf)
job<span class="pl-k">.</span>setInputFormatClass(<span class="pl-smi">EsInputFormat</span><span class="pl-k">.</span>class);
<span class="pl-c1">...</span>
job<span class="pl-k">.</span>waitForCompletion(<span class="pl-c1">true</span>);</pre>
  </div> 
  <h3><a id="user-content-writing-1" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#writing-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Writing</h3> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-smi">Configuration</span> conf <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Configuration</span>();
conf<span class="pl-k">.</span>set(<span class="pl-s"><span class="pl-pds">"</span>es.resource<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>radio/artists<span class="pl-pds">"</span></span>); <span class="pl-c"><span class="pl-c">//</span> index or indices used for storing data</span>
<span class="pl-smi">Job</span> job <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Job</span>(conf)
job<span class="pl-k">.</span>setOutputFormatClass(<span class="pl-smi">EsOutputFormat</span><span class="pl-k">.</span>class);
<span class="pl-c1">...</span>
job<span class="pl-k">.</span>waitForCompletion(<span class="pl-c1">true</span>);</pre>
  </div> 
  <h2><a id="user-content-apache-hive" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#apache-hive" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><a href="http://hive.apache.org" target="_blank">Apache Hive</a></h2> 
  <p>ES-Hadoop provides a Hive storage handler for Elasticsearch, meaning one can define an <a href="http://cwiki.apache.org/Hive/external-tables.html" target="_blank">external table</a> on top of ES.</p> 
  <p>Add es-hadoop-.jar to <code>hive.aux.jars.path</code> or register it manually in your Hive script (recommended):</p> 
  <pre><code>ADD JAR /path_to_jar/es-hadoop-&lt;version&gt;.jar;
</code></pre> 
  <h3><a id="user-content-reading-2" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#reading-2" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Reading</h3> 
  <p>To read data from ES, define a table backed by the desired index:</p> 
  <div class="highlight highlight-source-sql">
   <pre>CREATE EXTERNAL TABLE artists (
    id      <span class="pl-k">BIGINT</span>,
    name    STRING,
    links   STRUCT<span class="pl-k">&lt;</span>url:STRING, picture:STRING<span class="pl-k">&gt;</span>)
STORED BY <span class="pl-s"><span class="pl-pds">'</span>org.elasticsearch.hadoop.hive.EsStorageHandler<span class="pl-pds">'</span></span>
TBLPROPERTIES(<span class="pl-s"><span class="pl-pds">'</span>es.resource<span class="pl-pds">'</span></span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>radio/artists<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>es.query<span class="pl-pds">'</span></span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>?q=me*<span class="pl-pds">'</span></span>);</pre>
  </div> 
  <p>The fields defined in the table are mapped to the JSON when communicating with Elasticsearch. Notice the use of <code>TBLPROPERTIES</code> to define the location, that is the query used for reading from this table.</p> 
  <p>Once defined, the table can be used just like any other:</p> 
  <div class="highlight highlight-source-sql">
   <pre><span class="pl-k">SELECT</span> <span class="pl-k">*</span> <span class="pl-k">FROM</span> artists;</pre>
  </div> 
  <h3><a id="user-content-writing-2" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#writing-2" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Writing</h3> 
  <p>To write data, a similar definition is used but with a different <code>es.resource</code>:</p> 
  <div class="highlight highlight-source-sql">
   <pre>CREATE EXTERNAL TABLE artists (
    id      <span class="pl-k">BIGINT</span>,
    name    STRING,
    links   STRUCT<span class="pl-k">&lt;</span>url:STRING, picture:STRING<span class="pl-k">&gt;</span>)
STORED BY <span class="pl-s"><span class="pl-pds">'</span>org.elasticsearch.hadoop.hive.EsStorageHandler<span class="pl-pds">'</span></span>
TBLPROPERTIES(<span class="pl-s"><span class="pl-pds">'</span>es.resource<span class="pl-pds">'</span></span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>radio/artists<span class="pl-pds">'</span></span>);</pre>
  </div> 
  <p>Any data passed to the table is then passed down to Elasticsearch; for example considering a table <code>s</code>, mapped to a TSV/CSV file, one can index it to Elasticsearch like this:</p> 
  <div class="highlight highlight-source-sql">
   <pre>INSERT OVERWRITE TABLE artists 
    <span class="pl-k">SELECT</span> <span class="pl-k">NULL</span>, <span class="pl-c1">s</span>.<span class="pl-c1">name</span>, named_struct(<span class="pl-s"><span class="pl-pds">'</span>url<span class="pl-pds">'</span></span>, <span class="pl-c1">s</span>.<span class="pl-c1">url</span>, <span class="pl-s"><span class="pl-pds">'</span>picture<span class="pl-pds">'</span></span>, <span class="pl-c1">s</span>.<span class="pl-c1">picture</span>) <span class="pl-k">FROM</span> source s;</pre>
  </div> 
  <p>As one can note, currently the reading and writing are treated separately but we're working on unifying the two and automatically translating <a href="http://cwiki.apache.org/confluence/display/Hive/LanguageManual" target="_blank">HiveQL</a> to Elasticsearch queries.</p> 
  <h2><a id="user-content-apache-pig" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#apache-pig" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><a href="http://pig.apache.org" target="_blank">Apache Pig</a></h2> 
  <p>ES-Hadoop provides both read and write functions for Pig so you can access Elasticsearch from Pig scripts.</p> 
  <p>Register ES-Hadoop jar into your script or add it to your Pig classpath:</p> 
  <pre><code>REGISTER /path_to_jar/es-hadoop-&lt;version&gt;.jar;
</code></pre> 
  <p>Additionally one can define an alias to save some chars:</p> 
  <pre><code>%define ESSTORAGE org.elasticsearch.hadoop.pig.EsStorage()
</code></pre> 
  <p>and use <code>$ESSTORAGE</code> for storage definition.</p> 
  <h3><a id="user-content-reading-3" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#reading-3" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Reading</h3> 
  <p>To read data from ES, use <code>EsStorage</code> and specify the query through the <code>LOAD</code> function:</p> 
  <div class="highlight highlight-source-sql">
   <pre>A <span class="pl-k">=</span> LOAD <span class="pl-s"><span class="pl-pds">'</span>radio/artists<span class="pl-pds">'</span></span> USING <span class="pl-c1">org</span>.<span class="pl-c1">elasticsearch</span>.<span class="pl-c1">hadoop</span>.<span class="pl-c1">pig</span>.EsStorage(<span class="pl-s"><span class="pl-pds">'</span>es.query=?q=me*<span class="pl-pds">'</span></span>);
DUMP A;</pre>
  </div> 
  <h3><a id="user-content-writing-3" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#writing-3" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Writing</h3> 
  <p>Use the same <code>Storage</code> to write data to Elasticsearch:</p> 
  <div class="highlight highlight-source-sql">
   <pre>A <span class="pl-k">=</span> LOAD <span class="pl-s"><span class="pl-pds">'</span>src/artists.dat<span class="pl-pds">'</span></span> USING PigStorage() <span class="pl-k">AS</span> (id:long, name, url:chararray, picture: chararray);
B <span class="pl-k">=</span> FOREACH A GENERATE name, TOTUPLE(url, picture) <span class="pl-k">AS</span> links;
STORE B INTO <span class="pl-s"><span class="pl-pds">'</span>radio/artists<span class="pl-pds">'</span></span> USING <span class="pl-c1">org</span>.<span class="pl-c1">elasticsearch</span>.<span class="pl-c1">hadoop</span>.<span class="pl-c1">pig</span>.EsStorage();</pre>
  </div> 
  <h2><a id="user-content-apache-spark" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#apache-spark" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><a href="http://spark.apache.org" target="_blank">Apache Spark</a></h2> 
  <p>ES-Hadoop provides native (Java and Scala) integration with Spark: for reading a dedicated <code>RDD</code> and for writing, methods that work on any <code>RDD</code>. Spark SQL is also supported</p> 
  <h3><a id="user-content-scala" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#scala" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scala</h3> 
  <h3><a id="user-content-reading-4" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#reading-4" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Reading</h3> 
  <p>To read data from ES, create a dedicated <code>RDD</code> and specify the query as an argument:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">org.elasticsearch.spark.</span><span class="pl-v">_</span>

..
<span class="pl-k">val</span> <span class="pl-en">conf</span> <span class="pl-k">=</span> ...
<span class="pl-k">val</span> <span class="pl-en">sc</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SparkContext</span>(conf)
sc.esRDD(<span class="pl-s"><span class="pl-pds">"</span>radio/artists<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>?q=me*<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <h4><a id="user-content-spark-sql" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#spark-sql" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Spark SQL</h4> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">org.elasticsearch.spark.sql.</span><span class="pl-v">_</span>

<span class="pl-c"><span class="pl-c">//</span> DataFrame schema automatically inferred</span>
<span class="pl-k">val</span> <span class="pl-en">df</span> <span class="pl-k">=</span> sqlContext.read.format(<span class="pl-s"><span class="pl-pds">"</span>es<span class="pl-pds">"</span></span>).load(<span class="pl-s"><span class="pl-pds">"</span>buckethead/albums<span class="pl-pds">"</span></span>)

<span class="pl-c"><span class="pl-c">//</span> operations get pushed down and translated at runtime to Elasticsearch QueryDSL</span>
<span class="pl-k">val</span> <span class="pl-en">playlist</span> <span class="pl-k">=</span> df.filter(df(<span class="pl-s"><span class="pl-pds">"</span>category<span class="pl-pds">"</span></span>).equalTo(<span class="pl-s"><span class="pl-pds">"</span>pikes<span class="pl-pds">"</span></span>).and(df(<span class="pl-s"><span class="pl-pds">"</span>year<span class="pl-pds">"</span></span>).geq(<span class="pl-c1">2016</span>)))</pre>
  </div> 
  <h3><a id="user-content-writing-4" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#writing-4" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Writing</h3> 
  <p>Import the <code>org.elasticsearch.spark._</code> package to gain <code>savetoEs</code> methods on your <code>RDD</code>s:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">org.elasticsearch.spark.</span><span class="pl-v">_        </span>

<span class="pl-k">val</span> <span class="pl-en">conf</span> <span class="pl-k">=</span> ...
<span class="pl-k">val</span> <span class="pl-en">sc</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SparkContext</span>(conf)         

<span class="pl-k">val</span> <span class="pl-en">numbers</span> <span class="pl-k">=</span> <span class="pl-en">Map</span>(<span class="pl-s"><span class="pl-pds">"</span>one<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>two<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">2</span>, <span class="pl-s"><span class="pl-pds">"</span>three<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">3</span>)
<span class="pl-k">val</span> <span class="pl-en">airports</span> <span class="pl-k">=</span> <span class="pl-en">Map</span>(<span class="pl-s"><span class="pl-pds">"</span>OTP<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>Otopeni<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>SFO<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>San Fran<span class="pl-pds">"</span></span>)

sc.makeRDD(<span class="pl-en">Seq</span>(numbers, airports)).saveToEs(<span class="pl-s"><span class="pl-pds">"</span>spark/docs<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <h4><a id="user-content-spark-sql-1" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#spark-sql-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Spark SQL</h4> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">org.elasticsearch.spark.sql.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">df</span> <span class="pl-k">=</span> sqlContext.read.json(<span class="pl-s"><span class="pl-pds">"</span>examples/people.json<span class="pl-pds">"</span></span>)
df.saveToES(<span class="pl-s"><span class="pl-pds">"</span>spark/people<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <h3><a id="user-content-java" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#java" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Java</h3> 
  <p>In a Java environment, use the <code>org.elasticsearch.spark.rdd.java.api</code> package, in particular the <code>JavaEsSpark</code> class.</p> 
  <h3><a id="user-content-reading-5" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#reading-5" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Reading</h3> 
  <p>To read data from ES, create a dedicated <code>RDD</code> and specify the query as an argument.</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">import</span> <span class="pl-smi">org.apache.spark.api.java.JavaSparkContext</span>;   
<span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.spark.rdd.api.java.JavaEsSpark</span>; 

<span class="pl-smi">SparkConf</span> conf <span class="pl-k">=</span> <span class="pl-c1">...</span>
<span class="pl-smi">JavaSparkContext</span> jsc <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">JavaSparkContext</span>(conf);   

<span class="pl-k">JavaPairRDD&lt;<span class="pl-smi">String</span>, <span class="pl-k">Map&lt;<span class="pl-smi">String</span>, <span class="pl-smi">Object</span>&gt;</span>&gt;</span> esRDD <span class="pl-k">=</span> <span class="pl-smi">JavaEsSpark</span><span class="pl-k">.</span>esRDD(jsc, <span class="pl-s"><span class="pl-pds">"</span>radio/artists<span class="pl-pds">"</span></span>);</pre>
  </div> 
  <h4><a id="user-content-spark-sql-2" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#spark-sql-2" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Spark SQL</h4> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-smi">SQLContext</span> sql <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">SQLContext</span>(sc);
<span class="pl-smi">DataFrame</span> df <span class="pl-k">=</span> sql<span class="pl-k">.</span>read()<span class="pl-k">.</span>format(<span class="pl-s"><span class="pl-pds">"</span>es<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>load(<span class="pl-s"><span class="pl-pds">"</span>buckethead/albums<span class="pl-pds">"</span></span>);
<span class="pl-smi">DataFrame</span> playlist <span class="pl-k">=</span> df<span class="pl-k">.</span>filter(df<span class="pl-k">.</span>col(<span class="pl-s"><span class="pl-pds">"</span>category<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>equalTo(<span class="pl-s"><span class="pl-pds">"</span>pikes<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>and(df<span class="pl-k">.</span>col(<span class="pl-s"><span class="pl-pds">"</span>year<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>geq(<span class="pl-c1">2016</span>)))</pre>
  </div> 
  <h3><a id="user-content-writing-5" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#writing-5" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Writing</h3> 
  <p>Use <code>JavaEsSpark</code> to index any <code>RDD</code> to Elasticsearch:</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.spark.rdd.api.java.JavaEsSpark</span>; 

<span class="pl-smi">SparkConf</span> conf <span class="pl-k">=</span> <span class="pl-c1">...</span>
<span class="pl-smi">JavaSparkContext</span> jsc <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">JavaSparkContext</span>(conf); 

<span class="pl-k">Map&lt;<span class="pl-smi">String</span>, ?&gt;</span> numbers <span class="pl-k">=</span> <span class="pl-smi">ImmutableMap</span><span class="pl-k">.</span>of(<span class="pl-s"><span class="pl-pds">"</span>one<span class="pl-pds">"</span></span>, <span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>two<span class="pl-pds">"</span></span>, <span class="pl-c1">2</span>);     
<span class="pl-k">Map&lt;<span class="pl-smi">String</span>, ?&gt;</span> airports <span class="pl-k">=</span> <span class="pl-smi">ImmutableMap</span><span class="pl-k">.</span>of(<span class="pl-s"><span class="pl-pds">"</span>OTP<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Otopeni<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>SFO<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>San Fran<span class="pl-pds">"</span></span>);

<span class="pl-k">JavaRDD&lt;<span class="pl-k">Map&lt;<span class="pl-smi">String</span>, ?&gt;</span>&gt;</span> javaRDD <span class="pl-k">=</span> jsc<span class="pl-k">.</span>parallelize(<span class="pl-smi">ImmutableList</span><span class="pl-k">.</span>of(doc1, doc2)); 
<span class="pl-smi">JavaEsSpark</span><span class="pl-k">.</span>saveToEs(javaRDD, <span class="pl-s"><span class="pl-pds">"</span>spark/docs<span class="pl-pds">"</span></span>);</pre>
  </div> 
  <h4><a id="user-content-spark-sql-3" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#spark-sql-3" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Spark SQL</h4> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.spark.sql.api.java.JavaEsSparkSQL</span>;

<span class="pl-smi">DataFrame</span> df <span class="pl-k">=</span> sqlContext<span class="pl-k">.</span>read<span class="pl-k">.</span>json(<span class="pl-s"><span class="pl-pds">"</span>examples/people.json<span class="pl-pds">"</span></span>)
<span class="pl-smi">JavaEsSparkSQL</span><span class="pl-k">.</span>saveToES(df, <span class="pl-s"><span class="pl-pds">"</span>spark/docs<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <h2><a id="user-content-cascading" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#cascading" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><a href="http://www.cascading.org/" target="_blank">Cascading</a></h2> 
  <p>ES-Hadoop offers a dedicate Elasticsearch <a href="http://docs.cascading.org/cascading/2.1/userguide/html/ch03s05.html" target="_blank">Tap</a>, <code>EsTap</code> that can be used both as a sink or a source. Note that <code>EsTap</code> can be used in both local (<code>LocalFlowConnector</code>) and Hadoop (<code>HadoopFlowConnector</code>) flows:</p> 
  <h3><a id="user-content-reading-6" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#reading-6" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Reading</h3> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-smi">Tap</span> in <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">EsTap</span>(<span class="pl-s"><span class="pl-pds">"</span>radio/artists<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>?q=me*<span class="pl-pds">"</span></span>);
<span class="pl-smi">Tap</span> out <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">StdOut</span>(<span class="pl-k">new</span> <span class="pl-smi">TextLine</span>());
<span class="pl-k">new</span> <span class="pl-smi">LocalFlowConnector</span>()<span class="pl-k">.</span>connect(in, out, <span class="pl-k">new</span> <span class="pl-smi">Pipe</span>(<span class="pl-s"><span class="pl-pds">"</span>read-from-ES<span class="pl-pds">"</span></span>))<span class="pl-k">.</span>complete();</pre>
  </div> 
  <h3><a id="user-content-writing-6" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#writing-6" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Writing</h3> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-smi">Tap</span> in <span class="pl-k">=</span> Lfs(<span class="pl-k">new</span> <span class="pl-smi">TextDelimited</span>(<span class="pl-k">new</span> <span class="pl-smi">Fields</span>(<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>url<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>picture<span class="pl-pds">"</span></span>)), <span class="pl-s"><span class="pl-pds">"</span>src/test/resources/artists.dat<span class="pl-pds">"</span></span>);
<span class="pl-smi">Tap</span> out <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">EsTap</span>(<span class="pl-s"><span class="pl-pds">"</span>radio/artists<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">Fields</span>(<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>url<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>picture<span class="pl-pds">"</span></span>));
<span class="pl-k">new</span> <span class="pl-smi">HadoopFlowConnector</span>()<span class="pl-k">.</span>connect(in, out, <span class="pl-k">new</span> <span class="pl-smi">Pipe</span>(<span class="pl-s"><span class="pl-pds">"</span>write-to-ES<span class="pl-pds">"</span></span>))<span class="pl-k">.</span>complete();</pre>
  </div> 
  <h2><a id="user-content-apache-storm" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#apache-storm" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><a href="http://storm.apache.org" target="_blank">Apache Storm</a></h2> 
  <p>ES-Hadoop provides native integration with Storm: for reading a dedicated <code>Spout</code> and for writing a specialized <code>Bolt</code></p> 
  <h3><a id="user-content-reading-7" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#reading-7" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Reading</h3> 
  <p>To read data from ES, use <code>EsSpout</code>:</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.storm.EsSpout</span>; 

<span class="pl-smi">TopologyBuilder</span> builder <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">TopologyBuilder</span>();
builder<span class="pl-k">.</span>setSpout(<span class="pl-s"><span class="pl-pds">"</span>es-spout<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">EsSpout</span>(<span class="pl-s"><span class="pl-pds">"</span>storm/docs<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>?q=me*<span class="pl-pds">"</span></span>), <span class="pl-c1">5</span>);
builder<span class="pl-k">.</span>setBolt(<span class="pl-s"><span class="pl-pds">"</span>bolt<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">PrinterBolt</span>())<span class="pl-k">.</span>shuffleGrouping(<span class="pl-s"><span class="pl-pds">"</span>es-spout<span class="pl-pds">"</span></span>);</pre>
  </div> 
  <h3><a id="user-content-writing-7" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#writing-7" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Writing</h3> 
  <p>To index data to ES, use <code>EsBolt</code>:</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.storm.EsBolt</span>; 

<span class="pl-smi">TopologyBuilder</span> builder <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">TopologyBuilder</span>();
builder<span class="pl-k">.</span>setSpout(<span class="pl-s"><span class="pl-pds">"</span>spout<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">RandomSentenceSpout</span>(), <span class="pl-c1">10</span>);
builder<span class="pl-k">.</span>setBolt(<span class="pl-s"><span class="pl-pds">"</span>es-bolt<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">EsBolt</span>(<span class="pl-s"><span class="pl-pds">"</span>storm/docs<span class="pl-pds">"</span></span>), <span class="pl-c1">5</span>)<span class="pl-k">.</span>shuffleGrouping(<span class="pl-s"><span class="pl-pds">"</span>spout<span class="pl-pds">"</span></span>);</pre>
  </div> 
  <h2><a id="user-content-building-the-source" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#building-the-source" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Building the source</h2> 
  <p>Elasticsearch Hadoop uses <a href="http://www.gradle.org/" target="_blank">Gradle</a> for its build system and it is not required to have it installed on your machine. By default (<code>gradlew</code>), it automatically builds the package and runs the unit tests. For integration testing, use the <code>integrationTests</code> task. See <code>gradlew tasks</code> for more information.</p> 
  <p>To create a distributable zip, run <code>gradlew distZip</code> from the command line; once completed you will find the jar in <code>build/libs</code>.</p> 
  <p>To build the project, JVM 8 (Oracle one is recommended) or higher is required.</p> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/elastic/elasticsearch-hadoop#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p>This project is released under version 2.0 of the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License</a></p> 
  <pre><code>Licensed to Elasticsearch under one or more contributor
license agreements. See the NOTICE file distributed with
this work for additional information regarding copyright
ownership. Elasticsearch licenses this file to you under
the Apache License, Version 2.0 (the "License"); you may
not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
</code></pre> 
 </article>
</div>