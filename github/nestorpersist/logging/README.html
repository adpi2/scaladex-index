<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-scala-logging" class="anchor" href="https://github.com/nestorpersist/logging#scala-logging" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scala Logging</h1> 
  <p><a href="https://index.scala-lang.org/nestorpersist/logging/persist-logging" target="_blank"><img src="https://camo.githubusercontent.com/bfc38d8058e65b992fdf5f3895d025a9ea50b660/68747470733a2f2f696e6465782e7363616c612d6c616e672e6f72672f6e6573746f72706572736973742f6c6f6767696e672f706572736973742d6c6f6767696e672f6c61746573742e737667" alt="Latest version" data-canonical-src="https://index.scala-lang.org/nestorpersist/logging/persist-logging/latest.svg" style="max-width:100%;"></a> <a href="https://maven-badges.herokuapp.com/maven-central/com.persist/persist-logging_2.12" target="_blank"><img src="https://camo.githubusercontent.com/52e6147b417fadbc48b95bc538081d7d0c1b9d84/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f636f6d2e706572736973742f706572736973742d6c6f6767696e675f322e31322e737667" alt="Maven Central" data-canonical-src="https://img.shields.io/maven-central/v/com.persist/persist-logging_2.12.svg" style="max-width:100%;"></a> <a href="https://opensource.org/licenses/Apache-2.0" target="_blank"><img src="https://camo.githubusercontent.com/8051e9938a1ab39cf002818dfceb6b6092f34d68/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d417061636865253230322e302d626c75652e737667" alt="License" data-canonical-src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" style="max-width:100%;"></a></p> 
  <p>This library provides an advanced logging facility for Scala applications. It has the following features.</p> 
  <ul> 
   <li>All log messages are routed to a single Akka Actor.</li> 
   <li>It captures logging messages from its own advanced Scala API, Java Slf4j and Akka loggers and sends them to that actor.</li> 
   <li>All messages are logged by default as Json, but other formats can be defined.</li> 
   <li>In the Scala API messages can be maps rather then just strings.</li> 
   <li>The Scala API, supports logging exceptions and their stack trace as Json.</li> 
   <li>Logs can be sent to stdout, local log files or a user defined appender.</li> 
   <li>Stdout messages are logged with abbreviated info in a pretty format. Other logs log one message per line.</li> 
   <li>Log messages have a timestamp set at the time of the log call.</li> 
   <li>Logging within a Scala class logs the class name and line number.</li> 
   <li>Logging inside an Akka actor also logs the actor path.</li> 
   <li>The logging level can be set dynamically.</li> 
   <li>The logging level can be overriden on a per id basis.</li> 
   <li>There is an optional logger that will log garbage collection events.</li> 
   <li>There is an optional time logger that can be used to track subtimes of a complex operation. This can be used across futures and actor message sends.</li> 
   <li>There is an "alternative" logger that can be used to create custom logs.</li> 
   <li>A user defined filter can be used to control which messages are logged. This filter can be modified at run-time.</li> 
   <li>The Scala API supports request ids that can be used to track a single request across multiple services.</li> 
   <li>New log appenders can be defined and can be used in place of the built-in stdout and file appender. These appenders can write in any format (including non Json ones) and can send logs to other services (such as Kafka or Flume).</li> 
  </ul> 
  <h3><a id="user-content-documentation" class="anchor" href="https://github.com/nestorpersist/logging#documentation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Documentation</h3> 
  <p>There are several kinds of documentation.</p> 
  <ul> 
   <li><p>This readme contains an overview of all features.</p></li> 
   <li><p><a href="http://nestorpersist.github.io/logging/latest/api/com/persist/logging/index.html" target="_blank">ScalaDoc</a></p></li> 
   <li><p>The <a href="https://github.com/nestorpersist/logging/tree/master/demo/src/main/scala/demo/test" target="_blank">demo</a> subdirectory contains a project with sample uses of the logging api.</p></li> 
   <li>The <a href="https://github.com/nestorpersist/logging/blob/master/logger/src/main/resources/logging.conf" target="_blank">logging.conf</a> file documents all the configuration options and specifies their default values.</li> 
  </ul> 
  <h3><a id="user-content-quick-start-see-demo-simplescala" class="anchor" href="https://github.com/nestorpersist/logging#quick-start-see-demo-simplescala" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Quick Start (see demo <a href="https://github.com/nestorpersist/logging/blob/master/demo/src/main/scala/demo/test/Simple.scala" target="_blank">Simple.scala</a>)</h3> 
  <p>The Scala logger contains lots of advanced features, but this section introduces the simple core features that will get you up and going fast.</p> 
  <p>First you must include the logging jar</p> 
  <pre><code>"com.persist" % "persist-logging_2.12" % "1.3.1"

"com.persist" % "persist-logging_2.11" % "1.2.5"
</code></pre> 
  <p>Next add the following line to your <code>application.conf</code> file</p> 
  <pre><code>include "logging.conf"
</code></pre> 
  <p>In your Scala files that use logging add the following line</p> 
  <pre><code>import com.persist.logging._
</code></pre> 
  <p>At the beginning of your program, initialize the logging system as follows</p> 
  <pre><code>val system = ActorSystem("test")
val loggingSystem = LoggingSystem(system,"myproject", "1.0.2","myhost.com")
</code></pre> 
  <p>See the Simple demo code for a nice way to initialize these parameters using the sbt buildinfo plugin.</p> 
  <p>At the end of your program, shut down the logging and actor systems</p> 
  <pre><code>Await.result(loggingSystem.stop, 30 seconds)
Await.result(system.terminate(), 30 seconds)
</code></pre> 
  <p>Inherit trait <code>ClassLogging</code> in classes to define logging methods. Inside those classes you can then call</p> 
  <pre><code>log.error("Foo failed")
</code></pre> 
  <p>or you can use a map for the msg</p> 
  <pre><code>log.warn(Map("@msg"-&gt;"fail","value"-&gt;23))
</code></pre> 
  <p>By default, log messages will be written in a pretty Json form to stdout and in a compact (1 message per line) Json form in log files.</p> 
  <h3><a id="user-content-configuration" class="anchor" href="https://github.com/nestorpersist/logging#configuration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Configuration</h3> 
  <p>The default configuration is in the file</p> 
  <pre><code>src/main/resources/logging.conf
</code></pre> 
  <p>You should include this in your <code>application.conf</code> file.</p> 
  <pre><code>include "logging.conf"
</code></pre> 
  <p>This can then be followed by any of your overrides of the default configuration setting.</p> 
  <p>The demo directory contains a sample <code>application.conf</code> file.</p> 
  <h3><a id="user-content-basic-logging" class="anchor" href="https://github.com/nestorpersist/logging#basic-logging" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Basic Logging</h3> 
  <p>Logging is enabled by inheriting the trait <code>ClassLogging</code> (see demo <a href="https://github.com/nestorpersist/logging/blob/master/demo/src/main/scala/demo/test/Simple.scala" target="_blank">Simple.scala</a>). in classes and the trait <code>ActorLogging</code> in actors (see demo <a href="https://github.com/nestorpersist/logging/blob/master/demo/src/main/scala/demo/test/ActorDemo.scala" target="_blank">ActorDemo.scala</a>).</p> 
  <p>A typical log call takes the form</p> 
  <pre><code>log.warn(msg,ex=ex,id=id)
</code></pre> 
  <ul> 
   <li><strong>msg.</strong> The msg can be either a string or a map. Use the map form rather than string interpolation. When using the map form by convention use the field name <code>@msg</code> for the main error message. This ensures in sorted output it will appear first.</li> 
  </ul> 
  <pre><code>    log.warn(s"Size $size is too big")
    log.warn(Map("@msg"-&gt;"Size is too big","size"-&gt;size))
</code></pre> 
  <ul> 
   <li><strong>ex.</strong> Optional exception. A <code>RichException</code> allows its message to be either a string or a map. The logger can expand that map into the logged Json. Ordinary Scala/Java exceptions will, of course, also work just fine. </li> 
  </ul> 
  <pre><code>    try {
         ...
         throw RichException(Map("@msg"-&gt;"Size is too big", "size"-&gt;size))
         ...
    } catch {
         case ex =&gt; log.error("Body failed", ex)
    }
</code></pre> 
  <ul> 
   <li><strong>id.</strong> Optional id. See the section below on Request Ids.</li> 
  </ul> 
  <p>The full set of logging levels are trace, debug, info, warn, error and fatal.</p> 
  <h3><a id="user-content-alternative-logging-see-demo-alternativescala" class="anchor" href="https://github.com/nestorpersist/logging#alternative-logging-see-demo-alternativescala" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Alternative Logging (see demo <a href="https://github.com/nestorpersist/logging/blob/master/demo/src/main/scala/demo/test/Alternative.scala" target="_blank">Alternative.scala</a>)</h3> 
  <p>You can create your own log files.</p> 
  <pre><code>log.alternative("extra", Map("a"-&gt;"foo", "b"-&gt; 5.6))
</code></pre> 
  <p>This will log a message to the extra log. If no extra log previously exists it will be created. Alternative messages are by default not logged to stdout.</p> 
  <h3><a id="user-content-rich-messages" class="anchor" href="https://github.com/nestorpersist/logging#rich-messages" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Rich Messages</h3> 
  <p>The rich message in logging calls and in RichExceptions can be either a string or a map from strings to values.</p> 
  <p>But rich messages are even more general. A rich message can be</p> 
  <ul> 
   <li>String</li> 
   <li>Boolean</li> 
   <li>Long</li> 
   <li>Double</li> 
   <li>BigDecimal</li> 
   <li>null</li> 
   <li>Seq[RichMsg]</li> 
   <li>Map[String,RichMsg]</li> 
  </ul> 
  <h3><a id="user-content-standard-fields" class="anchor" href="https://github.com/nestorpersist/logging#standard-fields" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Standard Fields</h3> 
  <p>Logs can contain the following fields. These are listed in alphabetical order (this is the order displayed by the Json pretty printer).</p> 
  <ul> 
   <li><strong>@category.</strong> The kind of log file: common, gc, time, or alterative log name.</li> 
   <li><strong>@host.</strong> The local host name.</li> 
   <li><strong>@service.</strong> The name and version of the application being run.</li> 
   <li><strong>@severity.</strong> The message level: trace, debug, info, warn, error or fatal.</li> 
   <li><strong>@timestamp.</strong> The time the message was logged.</li> 
   <li><strong>@traceId.</strong> The request id, if specified. </li> 
   <li><strong>@version.</strong> The logging system version. Currently 1.</li> 
   <li><strong>actor.</strong> The path for an actor when using ActorLogging.</li> 
   <li><strong>class.</strong> The class for ClassLogging or ActorLogging.</li> 
   <li><strong>file.</strong> The file containing the log call.</li> 
   <li><strong>kind.</strong> Either slf4j or akka. Not present for logger API.</li> 
   <li><strong>line.</strong> The line where the message was logged.</li> 
   <li><strong>msg.</strong> The rich message.</li> 
   <li><strong>trace.</strong> Information for any exception specfied in the logging call.</li> 
  </ul> 
  <p>The fields @host, @service, and @version are the same for all messages from a single application and are only present in logs when the fullHeaders option is specified. This option is off by default for stdout and on by default for files. The @category option is also not present in stdout (because it contains only common messages).</p> 
  <h3><a id="user-content-appenders-see-demo-appenderscala" class="anchor" href="https://github.com/nestorpersist/logging#appenders-see-demo-appenderscala" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Appenders (see demo <a href="https://github.com/nestorpersist/logging/blob/master/demo/src/main/scala/demo/test/Appender.scala" target="_blank">Appender.scala</a>)</h3> 
  <p>Appenders output log messages. There are tow build-in appenders: stdout and file plus an optional Kafka appenders. Each of these has its own configuration options (see <code>logging.conf</code> for details). You can also define your own appenders.</p> 
  <p>The set of appenders to use is specified via the optional <code>appenderBuilders</code> parameter to the <code>LoggingSystem</code> constructor.</p> 
  <ul> 
   <li> <strong>stdout.</strong> Common log messages are written in Pretty Json form without standard headers. This appender is useful during development. It is usually disabled in production</li> 
   <li><strong>file.</strong> Log messages are written as Json, one per line. Ordinary log messages are written to the common log files. Alterative, garbage collection, and timing messages have their own log files. Each log file includes a day as part of its name. Each day a new file is created.</li> 
   <li><strong>Kafka.</strong> The kafka-appender directory contains a Kafka appender. See the README there for details on how to use.</li> 
   <li><strong>custom.</strong> Custom appenders implement the <code>LogAppender</code> and <code>LogAppenderBuilder</code> traits. Custom loggers could be build for Flume. Also note that custom loggers need not output Json but can instead have their own custom format.</li> 
  </ul> 
  <h3><a id="user-content-json-utilities" class="anchor" href="https://github.com/nestorpersist/logging#json-utilities" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Json Utilities</h3> 
  <p>Log files with one Json message per line can be hard to read. To make this easier, you can use the Json Pretty utility which you can get at &lt;<a href="https://github.com/nestorpersist/json-tools/commits?author=nestorpersist" target="_blank">https://github.com/nestorpersist/json-tools/commits?author=nestorpersist</a>&gt;</p> 
  <p>To view a log.</p> 
  <pre><code>cat common.2016-01-10.log | Pretty | less 
</code></pre> 
  <p>To convert a log file to a Pretty version of that file.</p> 
  <pre><code>Pretty &lt; common.2016-01-10.log &gt; common.2016-01-10.pretty
</code></pre> 
  <h3><a id="user-content-akka-logging-see-demo-otherapisscala" class="anchor" href="https://github.com/nestorpersist/logging#akka-logging-see-demo-otherapisscala" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Akka Logging (see demo <a href="https://github.com/nestorpersist/logging/blob/master/demo/src/main/scala/demo/test/OtherApis.scala" target="_blank">OtherApis.scala</a>)</h3> 
  <p>Akka includes its own logger which can be added to Actors with the trait <code>akka.actor.ActorLogging</code>. These messages will be send to the common log with kind set to "akka".</p> 
  <p>Akka logging has a minumum logging level with default <code>warning</code>. No messages with a level less than that mimimum level will ever be logged. You can change that minimum level by changing the value of the configuration value of <code>akka.loglevel</code>.</p> 
  <p>See the section below on logging levels on how to more dynamically set the akka logging level higher than the minimum. </p> 
  <h3><a id="user-content-java-logging-see-demo-otherapisscala" class="anchor" href="https://github.com/nestorpersist/logging#java-logging-see-demo-otherapisscala" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Java Logging (see demo <a href="https://github.com/nestorpersist/logging/blob/master/demo/src/main/scala/demo/test/OtherApis.scala" target="_blank">OtherApis.scala</a>)</h3> 
  <p>If you include Java, code in your application, you will often find it uses Slf4J to do its logging. Slf4J is routed to logback that in turn sends Slf4j messages to the common log with kind set to "slf4j".</p> 
  <p>Slf4J logging has a minimum logging level with the default <code>WARN</code>. No messages with a level less than that minimum level will ever be logged. You can change that minimum level by setting the following Java property when launching the JVM.</p> 
  <pre><code>-DSLF4J_LEVEL=INFO
</code></pre> 
  <p>If you are using other loggers such as log4j, you can route those to slf4j using a bridge. See <a href="http://www.slf4j.org/legacy.html" target="_blank">http://www.slf4j.org/legacy.html</a>.</p> 
  <p>See the section below on logging levels on how to more dynamically set the Slf4J logging level higher than the minimum. </p> 
  <h3><a id="user-content-log-levels" class="anchor" href="https://github.com/nestorpersist/logging#log-levels" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Log Levels</h3> 
  <p>There are separate log levels for the logging API, Akka logging, and Slf4J. The initial value of these is set in the configuration file. Default values appear in the <code>logging.conf</code> file and can be overriden in the <code>application.conf</code> file.</p> 
  <p>These values can be changed dynamically by calling methods on the <code>LoggingSystem</code> class.</p> 
  <p>The log level also be changed on individual requests (see the section below on request ids).</p> 
  <h3><a id="user-content-log-filters-see-demo-filterscala" class="anchor" href="https://github.com/nestorpersist/logging#log-filters-see-demo-filterscala" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Log Filters (see demo <a href="https://github.com/nestorpersist/logging/blob/master/demo/src/main/scala/demo/test/Filter.scala" target="_blank">Filter.scala</a>)</h3> 
  <p>Logging filters provide a very powerful way of filtering common log messages. When a filter is enabled, a user specified function can see all the fields of the message and decide if that message is to be logged or ignored.</p> 
  <p>A logging filter is enabled and disabled by call the <code>setFilter</code> method of <code>LoggingSytem</code>.</p> 
  <p>A logging filter by itself can only reduce the number of messages logged, but it can also be used as part of a pattern to increase the number of messages logged. Suppose that the current logging level is <code>info</code> but a you want to also log all <code>debug</code> messages for class <code>Foo</code>.</p> 
  <ol> 
   <li>Add a logging filter (by calling <code>logSystem.setFilter</code>) that permits all messages that are either 
    <ul> 
     <li>in class <code>Foo</code> with level at least <code>debug</code> or</li> 
     <li>have a logging level of at least <code>info</code>.</li> 
    </ul></li> 
   <li>Lower the logging level from <code>info</code> to <code>debug</code> by calling <code>logSystem.setLevel</code>.</li> 
  </ol> 
  <p>Note that logging filters are powerful, but do introduce additional processing overhead.</p> 
  <h3><a id="user-content-garbage-collection-logging" class="anchor" href="https://github.com/nestorpersist/logging#garbage-collection-logging" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Garbage Collection Logging</h3> 
  <p>Garbage collection events are logged to the gc log when enabled by the <code>gc</code> configuration option.</p> 
  <h3><a id="user-content-request-ids-see-demo-requestidsscala" class="anchor" href="https://github.com/nestorpersist/logging#request-ids-see-demo-requestidsscala" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Request Ids (see demo <a href="https://github.com/nestorpersist/logging/blob/master/demo/src/main/scala/demo/test/RequestIds.scala" target="_blank">RequestIds.scala</a>)</h3> 
  <p>Request Ids are based on the ideas from Google Dapper</p> 
  <p><a href="http://research.google.com/pubs/pub36356.html" target="_blank">http://research.google.com/pubs/pub36356.html</a></p> 
  <p>and Twitter Zipkin</p> 
  <p><a href="https://twitter.github.io/zipkin/" target="_blank">https://twitter.github.io/zipkin/</a>.</p> 
  <p>The basic idea is that individual requests into a distributed service-orriented architecture can be tracked within and across services. Information contained in the log files of the set of services is combined to yeild a complete picture of each individual request.</p> 
  <p>A request Id contains three parts:</p> 
  <ul> 
   <li><strong>trackingId.</strong> This value should be the same for all log calls across all services for a specific request. A guid is often used for this purpose.</li> 
   <li><strong>spanId.</strong> Suppose that for a given request to service A, it calls service B multiple times. The spanId should be different on each call to B.</li> 
   <li><strong>level</strong>. An optional field that can be used to change the log level of an individual request. A message is logged if its level is greater or equal to either the common log level or the level specified in the request id. This permits more detailed logging of single request without having to increase the log level for all requests.</li> 
  </ul> 
  <p>To implement full distributed tracing, in addition to the this logger, two other things are needed.</p> 
  <ul> 
   <li><p>Two log files (these can be created with <code>log.alternative</code>)</p> 
    <ul> 
     <li>A server log that logs the request ids of all incoming requests to a service.</li> 
     <li>a client log that logs the request ids of outgoing requests from a service to other services.</li> 
    </ul></li> 
   <li><p>An analysis program that can join information across logs and display them in a usable form.</p></li> 
  </ul> 
  <h3><a id="user-content-timing-logging-see-demo-timingscala" class="anchor" href="https://github.com/nestorpersist/logging#timing-logging-see-demo-timingscala" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Timing Logging (see demo <a href="https://github.com/nestorpersist/logging/blob/master/demo/src/main/scala/demo/test/Timing.scala" target="_blank">Timing.scala</a>)</h3> 
  <p>Time logging provides a simple way to get fine grain timing of dynamically nested blocks of code. Timing is only enabled when the configuation value <code>com.persist.logging.time</code> is set to true. Results are written to <code>time</code> log where times are reported in microseconds.</p> 
  <p>To add timing calls to you code, you must include trait <code>Timing</code>. Surround each block of code with a call to <code>Time</code>.</p> 
  <p>For cases, such as futures, where nesting is not possible instead call <code>time.start</code> and <code>time.end</code>.</p> 
  <h3><a id="user-content-persist-json" class="anchor" href="https://github.com/nestorpersist/logging#persist-json" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Persist Json</h3> 
  <p>Persist Json is a light-weight high-performance Scala Json library. It is used in the implementation of the logger.</p> 
  <p>The public logger APIs do not use Persist Json. So you are not required to use Persist Json in your code to use the logger.</p> 
  <p>Note however that Persist Json parse trees are rich messages. In particular, Persist Json parse trees consist only of build-in Scala types and do not define any new classes. Persist Json provides a extensive set of features beyond what the logger provides for working with rich messages.</p> 
  <h3><a id="user-content-acknowledgements" class="anchor" href="https://github.com/nestorpersist/logging#acknowledgements" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Acknowledgements</h3> 
  <p>An earlier version of this logger was produced by <a href="http://www.whitepages.com" target="_blank">Whitepages</a>. This earlier code can be found at <a href="https://github.com/whitepages/WP_Scala_Framework/tree/master/logging" target="_blank">Framework</a>. </p> 
  <p>Work improving this logger and making it suitable for general use was supported by <a href="http://www.47deg.com" target="_blank">47 Degrees</a>. </p> 
 </article>
</div>