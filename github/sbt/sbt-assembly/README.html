<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-sbt-assembly" class="anchor" href="https://github.com/sbt/sbt-assembly#sbt-assembly" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>sbt-assembly</h1> 
  <p><em>Deploy fat JARs. Restart processes.</em></p> 
  <p>sbt-assembly is a sbt plugin originally ported from codahale's assembly-sbt, which I'm guessing was inspired by Maven's assembly plugin. The goal is simple: Create a fat JAR of your project with all of its dependencies.</p> 
  <h2><a id="user-content-requirements" class="anchor" href="https://github.com/sbt/sbt-assembly#requirements" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Requirements</h2> 
  <ul> 
   <li>sbt</li> 
   <li>The burning desire to have a simple deploy procedure.</li> 
  </ul> 
  <h2><a id="user-content-reporting-issues--contributing" class="anchor" href="https://github.com/sbt/sbt-assembly#reporting-issues--contributing" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Reporting Issues &amp; Contributing</h2> 
  <p>Before you email me, please read <a href="https://github.com/sbt/sbt-assembly/blob/master/CONTRIBUTING.md" target="_blank">Issue Reporting Guideline</a> carefully. Twice. (Don't email me)</p> 
  <h2><a id="user-content-setup" class="anchor" href="https://github.com/sbt/sbt-assembly#setup" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Setup</h2> 
  <h3><a id="user-content-using-published-plugin" class="anchor" href="https://github.com/sbt/sbt-assembly#using-published-plugin" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Using Published Plugin</h3> 
  <p>For sbt 0.13.6+ add sbt-assembly as a dependency in <code>project/assembly.sbt</code>:</p> 
  <div class="highlight highlight-source-scala">
   <pre>addSbtPlugin(<span class="pl-s"><span class="pl-pds">"</span>com.eed3si9n<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>sbt-assembly<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.14.4<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>For older sbt 0.13.x, see <a href="https://github.com/sbt/sbt-assembly/tree/0.11.2" target="_blank">sbt-assembly 0.11.2</a>.</p> 
  <p>For sbt 0.12, see <a href="https://github.com/sbt/sbt-assembly/tree/0.9.2" target="_blank">sbt-assembly 0.9.2</a>.</p> 
  <p>(You may need to check this project's tags to see what the most recent release is.)</p> 
  <h2><a id="user-content-usage" class="anchor" href="https://github.com/sbt/sbt-assembly#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <p>Since sbt-assembly is now an auto plugin that's triggered for all projects with <code>JvmPlugin</code>, it shouldn't require extra setup to include <code>assembly</code> task into your project. See <a href="https://github.com/sbt/sbt-assembly/blob/master/Migration.md" target="_blank">migration guide</a> for details on how to upgrade from older sbt-assembly.</p> 
  <h3><a id="user-content-applying-the-plugin-to-multi-project-buildsbt" class="anchor" href="https://github.com/sbt/sbt-assembly#applying-the-plugin-to-multi-project-buildsbt" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Applying the plugin to multi-project build.sbt</h3> 
  <p>For example, here's a multi-project <code>build.sbt</code>:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">lazy</span> <span class="pl-k">val</span> <span class="pl-en">commonSettings</span> <span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  version <span class="pl-k">:</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>0.1-SNAPSHOT<span class="pl-pds">"</span></span>,
  organization <span class="pl-k">:</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.example<span class="pl-pds">"</span></span>,
  scalaVersion <span class="pl-k">:</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>2.10.1<span class="pl-pds">"</span></span>,
  test in assembly <span class="pl-k">:</span><span class="pl-k">=</span> {}
)

<span class="pl-k">lazy</span> <span class="pl-k">val</span> <span class="pl-en">app</span> <span class="pl-k">=</span> (project in file(<span class="pl-s"><span class="pl-pds">"</span>app<span class="pl-pds">"</span></span>)).
  settings(<span class="pl-v">commonSettings</span>: _<span class="pl-k">*</span>).
  settings(
    mainClass in assembly <span class="pl-k">:</span><span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>com.example.Main<span class="pl-pds">"</span></span>),
    <span class="pl-c"><span class="pl-c">//</span> more settings here ...</span>
  )

<span class="pl-k">lazy</span> <span class="pl-k">val</span> <span class="pl-en">utils</span> <span class="pl-k">=</span> (project in file(<span class="pl-s"><span class="pl-pds">"</span>utils<span class="pl-pds">"</span></span>)).
  settings(<span class="pl-v">commonSettings</span>: _<span class="pl-k">*</span>).
  settings(
    assemblyJarName in assembly <span class="pl-k">:</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>utils.jar<span class="pl-pds">"</span></span>,
    <span class="pl-c"><span class="pl-c">//</span> more settings here ...</span>
  )</pre>
  </div> 
  <p>In the above example, both the <code>app</code> project and the <code>utils</code> project do not run tests during assembly. The <code>app</code> project sets a main class whereas the <code>utils</code> project sets the name of its jar file.</p> 
  <h3><a id="user-content-assembly-task" class="anchor" href="https://github.com/sbt/sbt-assembly#assembly-task" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>assembly task</h3> 
  <p>Now you'll have an awesome new <code>assembly</code> task which will compile your project, run your tests, and then pack your class files and all your dependencies into a single JAR file: <code>target/scala_X.X.X/projectname-assembly-X.X.X.jar</code>.</p> 
  <pre><code>&gt; assembly
</code></pre> 
  <p>If you specify a <code>mainClass in assembly</code> in build.sbt (or just let it autodetect one) then you'll end up with a fully executable JAR, ready to rock.</p> 
  <p>Here is the list of the keys you can rewire for <code>assembly</code> task.</p> 
  <pre><code>assemblyJarName               test                          mainClass
assemblyOutputPath            assemblyMergeStrategy         assemblyOption
assemblyExcludedJars          assembledMappings
</code></pre> 
  <p>For example the name of the jar can be set as follows in build.sbt:</p> 
  <div class="highlight highlight-source-scala">
   <pre>assemblyJarName in assembly <span class="pl-k">:</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>something.jar<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>To skip the test during assembly,</p> 
  <div class="highlight highlight-source-scala">
   <pre>test in assembly <span class="pl-k">:</span><span class="pl-k">=</span> {}</pre>
  </div> 
  <p>To set an explicit main class,</p> 
  <div class="highlight highlight-source-scala">
   <pre>mainClass in assembly <span class="pl-k">:</span><span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>com.example.Main<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>Excluding an explicit main class from your assembly requires something a little bit different though</p> 
  <pre><code>packageOptions in assembly ~= { pos =&gt;
  pos.filterNot { po =&gt;
    po.isInstanceOf[Package.MainClass]
  }
}
</code></pre> 
  <h3><a id="user-content-merge-strategy" class="anchor" href="https://github.com/sbt/sbt-assembly#merge-strategy" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Merge Strategy</h3> 
  <p>If multiple files share the same relative path (e.g. a resource named <code>application.conf</code> in multiple dependency JARs), the default strategy is to verify that all candidates have the same contents and error out otherwise. This behavior can be configured on a per-path basis using either one of the following built-in strategies or writing a custom one:</p> 
  <ul> 
   <li><code>MergeStrategy.deduplicate</code> is the default described above</li> 
   <li><code>MergeStrategy.first</code> picks the first of the matching files in classpath order</li> 
   <li><code>MergeStrategy.last</code> picks the last one</li> 
   <li><code>MergeStrategy.singleOrError</code> bails out with an error message on conflict</li> 
   <li><code>MergeStrategy.concat</code> simply concatenates all matching files and includes the result</li> 
   <li><code>MergeStrategy.filterDistinctLines</code> also concatenates, but leaves out duplicates along the way</li> 
   <li><code>MergeStrategy.rename</code> renames the files originating from jar files</li> 
   <li><code>MergeStrategy.discard</code> simply discards matching files</li> 
  </ul> 
  <p>The mapping of path names to merge strategies is done via the setting <code>assemblyMergeStrategy</code> which can be augmented as follows:</p> 
  <div class="highlight highlight-source-scala">
   <pre>assemblyMergeStrategy in assembly <span class="pl-k">:</span><span class="pl-k">=</span> {
  <span class="pl-k">case</span> <span class="pl-en">PathList</span>(<span class="pl-s"><span class="pl-pds">"</span>javax<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>servlet<span class="pl-pds">"</span></span>, xs <span class="pl-k">@</span> _<span class="pl-k">*</span>)         <span class="pl-k">=&gt;</span> <span class="pl-en">MergeStrategy</span>.first
  <span class="pl-k">case</span> <span class="pl-en">PathList</span>(ps <span class="pl-k">@</span> _<span class="pl-k">*</span>) <span class="pl-k">if</span> ps.last endsWith <span class="pl-s"><span class="pl-pds">"</span>.html<span class="pl-pds">"</span></span> <span class="pl-k">=&gt;</span> <span class="pl-en">MergeStrategy</span>.first
  <span class="pl-k">case</span> <span class="pl-s"><span class="pl-pds">"</span>application.conf<span class="pl-pds">"</span></span>                            <span class="pl-k">=&gt;</span> <span class="pl-en">MergeStrategy</span>.concat
  <span class="pl-k">case</span> <span class="pl-s"><span class="pl-pds">"</span>unwanted.txt<span class="pl-pds">"</span></span>                                <span class="pl-k">=&gt;</span> <span class="pl-en">MergeStrategy</span>.discard
  <span class="pl-k">case</span> x <span class="pl-k">=&gt;</span>
    <span class="pl-k">val</span> <span class="pl-en">oldStrategy</span> <span class="pl-k">=</span> (assemblyMergeStrategy in assembly).value
    oldStrategy(x)
}</pre>
  </div> 
  <p><strong>NOTE</strong>:</p> 
  <ul> 
   <li><code>assemblyMergeStrategy in assembly</code> expects a function. You can't do <code>assemblyMergeStrategy in assembly := MergeStrategy.first</code>!</li> 
   <li>Some files must be discarded or renamed otherwise to avoid breaking the zip (due to duplicate file name) or the legal license. Delegate default handling to <code>(assemblyMergeStrategy in assembly)</code> as the above pattern matching example.</li> 
  </ul> 
  <p>By the way, the first case pattern in the above using <code>PathList(...)</code> is how you can pick <code>javax/servlet/*</code> from the first jar. If the default <code>MergeStrategy.deduplicate</code> is not working for you, that likely means you have multiple versions of some library pulled by your dependency graph. The real solution is to fix that dependency graph. You can work around it by <code>MergeStrategy.first</code> but don't be surprised when you see <code>ClassNotFoundException</code>.</p> 
  <p>Here is the default:</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-k">val</span> <span class="pl-en">defaultMergeStrategy</span><span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=&gt;</span> <span class="pl-en">MergeStrategy</span> <span class="pl-k">=</span> { 
    <span class="pl-k">case</span> x <span class="pl-k">if</span> <span class="pl-en">Assembly</span>.isConfigFile(x) <span class="pl-k">=&gt;</span>
      <span class="pl-en">MergeStrategy</span>.concat
    <span class="pl-k">case</span> <span class="pl-en">PathList</span>(ps <span class="pl-k">@</span> _<span class="pl-k">*</span>) <span class="pl-k">if</span> <span class="pl-en">Assembly</span>.isReadme(ps.last) <span class="pl-k">||</span> <span class="pl-en">Assembly</span>.isLicenseFile(ps.last) <span class="pl-k">=&gt;</span>
      <span class="pl-en">MergeStrategy</span>.rename
    <span class="pl-k">case</span> <span class="pl-en">PathList</span>(<span class="pl-s"><span class="pl-pds">"</span>META-INF<span class="pl-pds">"</span></span>, xs <span class="pl-k">@</span> _<span class="pl-k">*</span>) <span class="pl-k">=&gt;</span>
      (xs map {_.toLowerCase}) <span class="pl-k">match</span> {
        <span class="pl-k">case</span> (<span class="pl-s"><span class="pl-pds">"</span>manifest.mf<span class="pl-pds">"</span></span> <span class="pl-k">::</span> <span class="pl-c1">Nil</span>) <span class="pl-k">|</span> (<span class="pl-s"><span class="pl-pds">"</span>index.list<span class="pl-pds">"</span></span> <span class="pl-k">::</span> <span class="pl-c1">Nil</span>) <span class="pl-k">|</span> (<span class="pl-s"><span class="pl-pds">"</span>dependencies<span class="pl-pds">"</span></span> <span class="pl-k">::</span> <span class="pl-c1">Nil</span>) <span class="pl-k">=&gt;</span>
          <span class="pl-en">MergeStrategy</span>.discard
        <span class="pl-k">case</span> ps <span class="pl-k">@</span> (x <span class="pl-k">::</span> xs) <span class="pl-k">if</span> ps.last.endsWith(<span class="pl-s"><span class="pl-pds">"</span>.sf<span class="pl-pds">"</span></span>) <span class="pl-k">||</span> ps.last.endsWith(<span class="pl-s"><span class="pl-pds">"</span>.dsa<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span>
          <span class="pl-en">MergeStrategy</span>.discard
        <span class="pl-k">case</span> <span class="pl-s"><span class="pl-pds">"</span>plexus<span class="pl-pds">"</span></span> <span class="pl-k">::</span> xs <span class="pl-k">=&gt;</span>
          <span class="pl-en">MergeStrategy</span>.discard
        <span class="pl-k">case</span> <span class="pl-s"><span class="pl-pds">"</span>services<span class="pl-pds">"</span></span> <span class="pl-k">::</span> xs <span class="pl-k">=&gt;</span>
          <span class="pl-en">MergeStrategy</span>.filterDistinctLines
        <span class="pl-k">case</span> (<span class="pl-s"><span class="pl-pds">"</span>spring.schemas<span class="pl-pds">"</span></span> <span class="pl-k">::</span> <span class="pl-c1">Nil</span>) <span class="pl-k">|</span> (<span class="pl-s"><span class="pl-pds">"</span>spring.handlers<span class="pl-pds">"</span></span> <span class="pl-k">::</span> <span class="pl-c1">Nil</span>) <span class="pl-k">=&gt;</span>
          <span class="pl-en">MergeStrategy</span>.filterDistinctLines
        <span class="pl-k">case</span> _ <span class="pl-k">=&gt;</span> <span class="pl-en">MergeStrategy</span>.deduplicate
      }
    <span class="pl-k">case</span> _ <span class="pl-k">=&gt;</span> <span class="pl-en">MergeStrategy</span>.deduplicate
  }</pre>
  </div> 
  <p>Custom <code>MergeStrategy</code>s can find out where a particular file comes from using the <code>sourceOfFileForMerge</code> method on <code>sbtassembly.AssemblyUtils</code>, which takes the temporary directory and one of the files passed into the strategy as parameters.</p> 
  <h3><a id="user-content-shading" class="anchor" href="https://github.com/sbt/sbt-assembly#shading" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Shading</h3> 
  <p>sbt-assembly can shade classes from your projects or from the library dependencies. Backed by <a href="https://code.google.com/archive/p/jarjar/wikis/CommandLineDocs.wiki" target="_blank">Jar Jar Links</a>, bytecode transformation (via ASM) is used to change references to the renamed classes.</p> 
  <div class="highlight highlight-source-scala">
   <pre>    assemblyShadeRules in assembly <span class="pl-k">:</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
      <span class="pl-en">ShadeRule</span>.rename(<span class="pl-s"><span class="pl-pds">"</span>org.apache.commons.io.**<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>shadeio.@1<span class="pl-pds">"</span></span>).inAll
    )</pre>
  </div> 
  <p>Here are the shade rules:</p> 
  <ul> 
   <li><code>ShadeRule.rename("x.**" -&gt; "y.@1", ...).inAll</code> This is the main rule.</li> 
   <li><code>ShadeRule.zap("a.b.c").inAll</code></li> 
   <li><code>ShadeRule.keep("x.**").inAll</code></li> 
  </ul> 
  <p>The main <code>ShadeRule.rename</code> rule is used to rename classes. All references to the renamed classes will also be updated. If a class name is matched by more than one rule, only the first one will apply. The <code>rename</code> rules takes a vararg of String pairs in <code>&lt;pattern&gt; -&gt; &lt;result&gt;</code> format:</p> 
  <ul> 
   <li><code>&lt;pattern&gt;</code> is a class name with optional wildcards. <code>**</code> will match against any valid class name substring. To match a single package component (by excluding <code>.</code> from the match), a single <code>*</code> may be used instead.</li> 
   <li><code>&lt;result&gt;</code> is a class name which can optionally reference the substrings matched by the wildcards. A numbered reference is available for every <code>*</code> or <code>**</code> in the <code>&lt;pattern&gt;</code>, starting from left to right: <code>@1</code>, <code>@2</code>, etc. A special <code>@0</code> reference contains the entire matched class name.</li> 
  </ul> 
  <p>Instead of <code>.inAll</code>, call <code>.inProject</code> to match your project source, or call <code>.inLibrary("commons-io" % "commons-io" % "2.4", ...)</code> to match specific library dependencies. <code>inProject</code> and <code>inLibrary(...)</code> can be chained.</p> 
  <div class="highlight highlight-source-scala">
   <pre>    assemblyShadeRules in assembly <span class="pl-k">:</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
      <span class="pl-en">ShadeRule</span>.rename(<span class="pl-s"><span class="pl-pds">"</span>org.apache.commons.io.**<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>shadeio.@1<span class="pl-pds">"</span></span>).inLibrary(<span class="pl-s"><span class="pl-pds">"</span>commons-io<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>commons-io<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>2.4<span class="pl-pds">"</span></span>, ...).inProject
    )</pre>
  </div> 
  <p>The <code>ShadeRule.zap</code> rule causes any matched class to be removed from the resulting jar file. All zap rules are processed before renaming rules.</p> 
  <p>The <code>ShadeRule.keep</code> rule marks all matched classes as "roots". If any keep rules are defined all classes which are not reachable from the roots via dependency analysis are discarded when writing the output jar. This is the last step in the process, after renaming and zapping.</p> 
  <p>To see the verbose output for shading:</p> 
  <div class="highlight highlight-source-scala">
   <pre>    logLevel in assembly <span class="pl-k">:</span><span class="pl-k">=</span> <span class="pl-en">Level</span>.<span class="pl-en">Debug</span></pre>
  </div> 
  <h2><a id="user-content-excluding-jars-and-files" class="anchor" href="https://github.com/sbt/sbt-assembly#excluding-jars-and-files" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Excluding JARs and files</h2> 
  <p>If you need to tell sbt-assembly to ignore JARs, you're probably doing it wrong. assembly task grabs deps JARs from your project's classpath. Try fixing the classpath first.</p> 
  <h3><a id="user-content--provided-configuration" class="anchor" href="https://github.com/sbt/sbt-assembly#-provided-configuration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>% "provided" configuration</h3> 
  <p>If you're trying to exclude JAR files that are already part of the container (like Spark), consider scoping the dependent library to <code>"provided"</code> configuration:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>org.apache.spark<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>spark-core<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.8.0-incubating<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>provided<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>org.apache.hadoop<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>hadoop-client<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>2.0.0-cdh4.4.0<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>provided<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <p>Maven defines <a href="http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope" target="_blank">"provided"</a> as:</p> 
  <blockquote> 
   <p>This is much like <code>compile</code>, but indicates you expect the JDK or a container to provide the dependency at runtime. For example, when building a web application for the Java Enterprise Edition, you would set the dependency on the Servlet API and related Java EE APIs to scope <code>provided</code> because the web container provides those classes. This scope is only available on the compilation and test classpath, and is not transitive.</p> 
  </blockquote> 
  <p>The dependency will be part of compilation and test, but excluded from the runtime. If you Spark people want to include "provided" dependencies back to <code>run</code>, <a href="https://github.com/douglaz" target="_blank">@douglaz</a> has come up with a one-liner solution on StackOverflow <a href="http://stackoverflow.com/a/21803413/3827" target="_blank">sbt: how can I add "provided" dependencies back to run/test tasks' classpath?</a>:</p> 
  <div class="highlight highlight-source-scala">
   <pre>run in <span class="pl-en">Compile</span> <span class="pl-k">:</span><span class="pl-k">=</span> <span class="pl-en">Defaults</span>.runTask(fullClasspath in <span class="pl-en">Compile</span>, mainClass in (<span class="pl-en">Compile</span>, run), runner in (<span class="pl-en">Compile</span>, run)).evaluated</pre>
  </div> 
  <h3><a id="user-content-exclude-specific-transitive-deps" class="anchor" href="https://github.com/sbt/sbt-assembly#exclude-specific-transitive-deps" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Exclude specific transitive deps</h3> 
  <p>You might be thinking about exluding JAR files because of the merge conlifcts. Merge conflict of <code>*.class</code> files indicate pathological classpath, often due to non-modular bundle JAR files or <a href="http://www.slf4j.org/legacy.html" target="_blank">SLF4J</a>, not the problem with assembly. Here's what happens when you try to create a fat JAR with Spark included:</p> 
  <pre><code>[error] (*:assembly) deduplicate: different file contents found in the following:
[error] /Users/foo/.ivy2/cache/org.eclipse.jetty.orbit/javax.servlet/orbits/javax.servlet-2.5.0.v201103041518.jar:javax/servlet/SingleThreadModel.class
[error] /Users/foo/.ivy2/cache/org.mortbay.jetty/servlet-api/jars/servlet-api-2.5-20081211.jar:javax/servlet/SingleThreadModel.class
</code></pre> 
  <p>In the above case two separate JAR files <code>javax.servlet-2.5.0.v201103041518.jar</code> and <code>servlet-api-2.5-20081211.jar</code> are defining <code>javax/servlet/SingleThreadModel.class</code>! Similarly also conlifcts on <a href="http://commons.apache.org/proper/commons-beanutils/" target="_blank">common-beanutils</a> and <a href="https://github.com/EsotericSoftware/minlog" target="_blank">EsotericSoftware/minlog</a>. Here's how to evict specific transitive deps:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  (<span class="pl-s"><span class="pl-pds">"</span>org.apache.spark<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>spark-core<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.8.0-incubating<span class="pl-pds">"</span></span>).
    exclude(<span class="pl-s"><span class="pl-pds">"</span>org.mortbay.jetty<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>servlet-api<span class="pl-pds">"</span></span>).
    exclude(<span class="pl-s"><span class="pl-pds">"</span>commons-beanutils<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>commons-beanutils-core<span class="pl-pds">"</span></span>).
    exclude(<span class="pl-s"><span class="pl-pds">"</span>commons-collections<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>commons-collections<span class="pl-pds">"</span></span>).
    exclude(<span class="pl-s"><span class="pl-pds">"</span>commons-logging<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>commons-logging<span class="pl-pds">"</span></span>).
    exclude(<span class="pl-s"><span class="pl-pds">"</span>com.esotericsoftware.minlog<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>minlog<span class="pl-pds">"</span></span>)
)</pre>
  </div> 
  <p>See sbt's <a href="http://www.scala-sbt.org/release/docs/Detailed-Topics/Library-Management.html#exclude-transitive-dependencies" target="_blank">Exclude Transitive Dependencies</a> for more details.</p> 
  <p>Sometimes it takes a bit of detective work to figure out which transitive deps to exclude. Play! comes with <code>dist</code> task, so <code>assembly</code> is not needed, but suppose we wanted to run <code>assembly</code>. It brings in signpost-commonshttp4, which leads to commons-logging. This conflicts with jcl-over-slf4j, which re-implements the logging API. Since the deps are added via build.sbt and <code>playScalaSettings</code>, here's one way to work around it:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">~</span><span class="pl-k">=</span> { _ map {
  <span class="pl-k">case</span> m <span class="pl-k">if</span> m.organization <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">"</span>com.typesafe.play<span class="pl-pds">"</span></span> <span class="pl-k">=&gt;</span>
    m.exclude(<span class="pl-s"><span class="pl-pds">"</span>commons-logging<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>commons-logging<span class="pl-pds">"</span></span>).
      exclude(<span class="pl-s"><span class="pl-pds">"</span>com.typesafe.play<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>sbt-link<span class="pl-pds">"</span></span>)
  <span class="pl-k">case</span> m <span class="pl-k">=&gt;</span> m
}}</pre>
  </div> 
  <h3><a id="user-content-excluding-specific-files" class="anchor" href="https://github.com/sbt/sbt-assembly#excluding-specific-files" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Excluding specific files</h3> 
  <p>To exclude specific files, customize merge strategy:</p> 
  <div class="highlight highlight-source-scala">
   <pre>assemblyMergeStrategy in assembly <span class="pl-k">:</span><span class="pl-k">=</span> {
  <span class="pl-k">case</span> <span class="pl-en">PathList</span>(<span class="pl-s"><span class="pl-pds">"</span>about.html<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-en">MergeStrategy</span>.rename
  <span class="pl-k">case</span> x <span class="pl-k">=&gt;</span>
    <span class="pl-k">val</span> <span class="pl-en">oldStrategy</span> <span class="pl-k">=</span> (assemblyMergeStrategy in assembly).value
    oldStrategy(x)
}</pre>
  </div> 
  <h3><a id="user-content-splitting-your-project-and-deps-jars" class="anchor" href="https://github.com/sbt/sbt-assembly#splitting-your-project-and-deps-jars" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Splitting your project and deps JARs</h3> 
  <p>To make a JAR file containing only the external dependencies, type</p> 
  <pre><code>&gt; assemblyPackageDependency
</code></pre> 
  <p>This is intended to be used with a JAR that only contains your project</p> 
  <div class="highlight highlight-source-scala">
   <pre>assemblyOption in assembly <span class="pl-k">:</span><span class="pl-k">=</span> (assemblyOption in assembly).value.copy(includeScala <span class="pl-k">=</span> <span class="pl-c1">false</span>, includeDependency <span class="pl-k">=</span> <span class="pl-c1">false</span>)</pre>
  </div> 
  <p>NOTE: If you use <a href="http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/java.html#jar" target="_blank"><code>-jar</code> option for <code>java</code></a>, it will ignore <code>-cp</code>, so if you have multiple JAR files you have to use <code>-cp</code> and pass the main class: <code>java -cp "jar1.jar:jar2.jar" Main</code></p> 
  <h3><a id="user-content-excluding-scala-library-jars" class="anchor" href="https://github.com/sbt/sbt-assembly#excluding-scala-library-jars" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Excluding Scala library JARs</h3> 
  <p>To exclude Scala library (JARs that start with <code>scala-</code> and are included in the binary Scala distribution) to run with <code>scala</code> command,</p> 
  <div class="highlight highlight-source-scala">
   <pre>assemblyOption in assembly <span class="pl-k">:</span><span class="pl-k">=</span> (assemblyOption in assembly).value.copy(includeScala <span class="pl-k">=</span> <span class="pl-c1">false</span>)</pre>
  </div> 
  <h3><a id="user-content-assemblyexcludedjars" class="anchor" href="https://github.com/sbt/sbt-assembly#assemblyexcludedjars" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>assemblyExcludedJars</h3> 
  <p>If all efforts fail, here's a way to exclude JAR files:</p> 
  <div class="highlight highlight-source-scala">
   <pre>assemblyExcludedJars in assembly <span class="pl-k">:</span><span class="pl-k">=</span> { 
  <span class="pl-k">val</span> <span class="pl-en">cp</span> <span class="pl-k">=</span> (fullClasspath in assembly).value
  cp filter {_.data.getName <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">"</span>compile-0.1.0.jar<span class="pl-pds">"</span></span>}
}</pre>
  </div> 
  <h2><a id="user-content-other-things" class="anchor" href="https://github.com/sbt/sbt-assembly#other-things" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Other Things</h2> 
  <h3><a id="user-content-content-hash" class="anchor" href="https://github.com/sbt/sbt-assembly#content-hash" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Content hash</h3> 
  <p>You can also append SHA-1 fingerprint to the assembly file name, this may help you to determine whether it has changed and, for example, if it's necessary to deploy the dependencies,</p> 
  <div class="highlight highlight-source-scala">
   <pre>assemblyOption in assembly <span class="pl-k">:</span><span class="pl-k">=</span> (assemblyOption in assembly).value.copy(appendContentHash <span class="pl-k">=</span> <span class="pl-c1">true</span>)</pre>
  </div> 
  <h3><a id="user-content-caching" class="anchor" href="https://github.com/sbt/sbt-assembly#caching" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Caching</h3> 
  <p>By default for performance reasons, the result of unzipping any dependency JAR files to disk is cached from run-to-run. This feature can be disabled by setting:</p> 
  <div class="highlight highlight-source-scala">
   <pre>assemblyOption in assembly <span class="pl-k">:</span><span class="pl-k">=</span> (assemblyOption in assembly).value.copy(cacheUnzip <span class="pl-k">=</span> <span class="pl-c1">false</span>)</pre>
  </div> 
  <p>In addition the fat JAR is cached so its timestamp changes only when the input changes. This feature requires checking the SHA-1 hash of all *.class files, and the hash of all dependency *.jar files. If there are a large number of class files, this could take a long time, although with hashing of jar files, rather than their contents, the speed has recently been <a href="https://github.com/sbt/sbt-assembly/issues/68" target="_blank">improved</a>. This feature can be disabled by setting:</p> 
  <div class="highlight highlight-source-scala">
   <pre>assemblyOption in assembly <span class="pl-k">:</span><span class="pl-k">=</span> (assemblyOption in assembly).value.copy(cacheOutput <span class="pl-k">=</span> <span class="pl-c1">false</span>)</pre>
  </div> 
  <h3><a id="user-content-publishing-not-recommended" class="anchor" href="https://github.com/sbt/sbt-assembly#publishing-not-recommended" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Publishing (Not Recommended)</h3> 
  <p>Publishing fat JARs out to the world is discouraged because non-modular JARs cause much sadness. One might think non-modularity is convenience but it quickly turns into a headache the moment your users step outside of Hello World example code. If you still wish to publish your assembled artifact along with the <code>publish</code> task and all of the other artifacts, add an <code>assembly</code> classifier (or other):</p> 
  <div class="highlight highlight-source-scala">
   <pre>artifact in (<span class="pl-en">Compile</span>, assembly) <span class="pl-k">:</span><span class="pl-k">=</span> {
  <span class="pl-k">val</span> <span class="pl-en">art</span> <span class="pl-k">=</span> (artifact in (<span class="pl-en">Compile</span>, assembly)).value
  art.copy(`classifier` <span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>assembly<span class="pl-pds">"</span></span>))
}

addArtifact(artifact in (<span class="pl-en">Compile</span>, assembly), assembly)</pre>
  </div> 
  <h3><a id="user-content-prepending-shebang" class="anchor" href="https://github.com/sbt/sbt-assembly#prepending-shebang" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Prepending Shebang</h3> 
  <p>You can prepend shell script to the fat jar as follows:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">sbtassembly.AssemblyPlugin.</span><span class="pl-v">defaultShellScript</span>

assemblyOption in assembly <span class="pl-k">:</span><span class="pl-k">=</span> (assemblyOption in assembly).value.copy(prependShellScript <span class="pl-k">=</span> <span class="pl-en">Some</span>(defaultShellScript))

assemblyJarName in assembly <span class="pl-k">:</span><span class="pl-k">=</span> s<span class="pl-s"><span class="pl-pds">"</span>${name.value}-${version.value}<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>This will prepend the following shell script to the jar.</p> 
  <pre><code>#!/usr/bin/env sh
exec java -jar "$0" "$@"
</code></pre> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/sbt/sbt-assembly#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p>Copyright (c) 2010-2014 e.e d3si9n, Coda Hale</p> 
  <p>Published under The MIT License, see LICENSE</p> 
 </article>
</div>