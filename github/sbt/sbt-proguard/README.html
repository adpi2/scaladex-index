<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-sbt-proguard" class="anchor" href="https://github.com/sbt/sbt-proguard#sbt-proguard" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>sbt-proguard</h1> 
  <p><a href="https://github.com/sbt/sbt" target="_blank">sbt</a> plugin for running <a href="http://proguard.sourceforge.net/" target="_blank">ProGuard</a>. This plugin requires sbt 0.12 or 0.13.</p> 
  <p><a href="https://travis-ci.org/sbt/sbt-proguard" target="_blank"><img src="https://camo.githubusercontent.com/d8e945834b029807c7b0ff7b2670d629e15d24fe/68747470733a2f2f7472617669732d63692e6f72672f7362742f7362742d70726f67756172642e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/sbt/sbt-proguard.png?branch=master" style="max-width:100%;"></a></p> 
  <h2><a id="user-content-add-plugin" class="anchor" href="https://github.com/sbt/sbt-proguard#add-plugin" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Add plugin</h2> 
  <p>Add plugin to <code>project/plugins.sbt</code>. For example:</p> 
  <div class="highlight highlight-source-scala">
   <pre>addSbtPlugin(<span class="pl-s"><span class="pl-pds">"</span>com.typesafe.sbt<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>sbt-proguard<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.2.3<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <h2><a id="user-content-example" class="anchor" href="https://github.com/sbt/sbt-proguard#example" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Example</h2> 
  <p>A simple <code>build.sbt</code> with settings to configure sbt-proguard:</p> 
  <div class="highlight highlight-source-scala">
   <pre>proguardSettings

<span class="pl-en">ProguardKeys</span>.options in <span class="pl-en">Proguard</span> <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(<span class="pl-s"><span class="pl-pds">"</span>-dontnote<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>-dontwarn<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>-ignorewarnings<span class="pl-pds">"</span></span>)

<span class="pl-en">ProguardKeys</span>.options in <span class="pl-en">Proguard</span> <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-en">ProguardOptions</span>.keepMain(<span class="pl-s"><span class="pl-pds">"</span>some.MainClass<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>Run proguard at the sbt shell with:</p> 
  <div class="highlight highlight-source-shell">
   <pre>proguard:proguard</pre>
  </div> 
  <h2><a id="user-content-filters" class="anchor" href="https://github.com/sbt/sbt-proguard#filters" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Filters</h2> 
  <p>Proguard supports file filtering for inputs, libraries, and outputs. In sbt-proguard there are <code>File =&gt; Option[String]</code> settings for adding filters to files.</p> 
  <p>For example, to add a <code>!META-INF/**</code> filter to just the scala-library jar:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-en">ProguardKeys</span>.inputFilter in <span class="pl-en">Proguard</span> <span class="pl-k">:</span><span class="pl-k">=</span> { file <span class="pl-k">=&gt;</span>
  file.name <span class="pl-k">match</span> {
    <span class="pl-k">case</span> <span class="pl-s"><span class="pl-pds">"</span>scala-library.jar<span class="pl-pds">"</span></span> <span class="pl-k">=&gt;</span> <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>!META-INF/**<span class="pl-pds">"</span></span>)
    <span class="pl-k">case</span> _                   <span class="pl-k">=&gt;</span> <span class="pl-c1">None</span>
  }
}</pre>
  </div> 
  <p>which will create the following proguard configuration:</p> 
  <pre><code>-injars "/path/to/scala-library.jar"(!META-INF/**)
</code></pre> 
  <p>There are corresponding settings for libraries and outputs: <code>libraryFilter</code> and <code>outputFilter</code>.</p> 
  <p>For more advanced usage the <code>filteredInputs</code>, <code>filteredLibraries</code>, and <code>filteredOutputs</code> settings can be set directly.</p> 
  <h2><a id="user-content-merging" class="anchor" href="https://github.com/sbt/sbt-proguard#merging" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Merging</h2> 
  <p>If the same path exists in multiple inputs then proguard will throw an error. The conflicting paths can be resolved using file filters, as described above, but this is not always the most useful approach. For example, <code>reference.conf</code> files for the Typesafe Config library need to be retained and not discarded.</p> 
  <p>The sbt-proguard plugin supports pre-merging inputs, similar to creating an assembly jar first. To enable this merging use:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-en">ProguardKeys</span>.merge in <span class="pl-en">Proguard</span> <span class="pl-k">:</span><span class="pl-k">=</span> <span class="pl-c1">true</span></pre>
  </div> 
  <p>Conflicting paths that are not identical will now fail at the merge stage. These conflicting paths can have merge strategies applied, similar to the <a href="https://github.com/sbt/sbt-assembly" target="_blank">sbt-assembly</a> plugin.</p> 
  <p>Helper methods for creating common merges are available. These are:</p> 
  <ul> 
   <li><code>discard</code> -- discard all matching entries</li> 
   <li><code>first</code> -- only keep the first entry</li> 
   <li><code>last</code> -- only keep the last entry</li> 
   <li><code>rename</code> -- rename entries adding the name of the source</li> 
   <li><code>append</code> -- append entries together into one file</li> 
  </ul> 
  <p>The paths matched against in these helpers are normalised to be separated by <code>/</code> regardless of platform. Paths can be matched exactly with a string or with a regular expression.</p> 
  <p>The default strategy is to only discard <code>META-INF/MANIFEST.MF</code>. This same strategy could be added with:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-en">ProguardKeys</span>.mergeStrategies in <span class="pl-en">Proguard</span> <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-en">ProguardMerge</span>.discard(<span class="pl-s"><span class="pl-pds">"</span>META-INF/MANIFEST.MF<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>Or all <code>META-INF</code> contents could be discarded with a regular expression:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-en">ProguardKeys</span>.mergeStrategies in <span class="pl-en">Proguard</span> <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-en">ProguardMerge</span>.discard(<span class="pl-s"><span class="pl-pds">"</span>META-INF/.*<span class="pl-pds">"</span></span>.r)</pre>
  </div> 
  <p>To concatenate all <code>reference.conf</code> files together use:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-en">ProguardKeys</span>.mergeStrategies in <span class="pl-en">Proguard</span> <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-en">ProguardMerge</span>.append(<span class="pl-s"><span class="pl-pds">"</span>reference.conf<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>To discard all <code>.html</code> and <code>.txt</code> files you may use two strategies together:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-en">ProguardKeys</span>.mergeStrategies in <span class="pl-en">Proguard</span> <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-en">ProguardMerge</span>.discard(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\\</span>.html$<span class="pl-pds">"</span></span>.r),
  <span class="pl-en">ProguardMerge</span>.discard(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\\</span>.txt$<span class="pl-pds">"</span></span>.r) 
)</pre>
  </div> 
  <p>Completely custom merge strategies can also be created. See the plugin source code for how this could be done.</p> 
  <h2><a id="user-content-sample-projects" class="anchor" href="https://github.com/sbt/sbt-proguard#sample-projects" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Sample projects</h2> 
  <p>There are some <a href="https://github.com/sbt/sbt-proguard/tree/v0.2.3/src/sbt-test/proguard" target="_blank">runnable sample projects</a> included as sbt scripted tests.</p> 
  <h2><a id="user-content-contribution-policy" class="anchor" href="https://github.com/sbt/sbt-proguard#contribution-policy" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Contribution policy</h2> 
  <p>Contributions via GitHub pull requests are gladly accepted from their original author. Before we can accept pull requests, you will need to agree to the <a href="http://www.typesafe.com/contribute/cla" target="_blank">Typesafe Contributor License Agreement</a> online, using your GitHub account.</p> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/sbt/sbt-proguard#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p><a href="http://proguard.sourceforge.net/" target="_blank">ProGuard</a> is licensed under the <a href="http://www.gnu.org/licenses/gpl.html" target="_blank">GNU General Public License</a>. sbt and sbt scripts are included in a <a href="http://proguard.sourceforge.net/GPL_exception.html" target="_blank">special exception</a> to the GPL licensing.</p> 
  <p>The code for this sbt plugin is licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html" target="_blank">Apache 2.0 License</a>.</p> 
 </article>
</div>