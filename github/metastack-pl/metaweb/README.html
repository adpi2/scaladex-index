<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-metaweb" class="anchor" href="https://github.com/metastack-pl/metaweb#metaweb" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>MetaWeb</h1> 
  <p><a href="https://travis-ci.org/MetaStack-pl/MetaWeb" target="_blank"><img src="https://camo.githubusercontent.com/4a1d23f34876887a2164ed4c76ed06adef182b7c/68747470733a2f2f7472617669732d63692e6f72672f4d657461537461636b2d706c2f4d6574615765622e737667" alt="Build Status" data-canonical-src="https://travis-ci.org/MetaStack-pl/MetaWeb.svg" style="max-width:100%;"></a></p> 
  <p>MetaWeb is a functional low-level web framework for Scala and Scala.js.</p> 
  <p>It provides type-safe bindings for HTML5 generated from <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element" target="_blank">MDN</a>. MetaWeb implements an immutable document tree that can be materialised as DOM nodes or HTML. Trees can be created from statically or dynamically loaded HTML content.</p> 
  <p>MetaWeb advocates web development in an FP style and tries to reduce state and side-effects to a minimum. Pages are split into reusable components, called <em>views</em>. A view models changes of nodes in terms of <em>diffs</em> that are interpreted by a separate processing unit. This allows us to render a pre-populated version of the page (i.e. server-side rendering), such that upon browser load only the event handlers need to be attached and the diffs will get applied directly to the DOM.</p> 
  <p>Please refer to the <a href="https://github.com/MetaStack-pl/MetaWeb/tree/master/example" target="_blank">example application</a> for an introduction.</p> 
  <h2><a id="user-content-sbt" class="anchor" href="https://github.com/metastack-pl/metaweb#sbt" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>sbt</h2> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>pl.metastack<span class="pl-pds">"</span></span> <span class="pl-k">%%</span>  <span class="pl-s"><span class="pl-pds">"</span>metaweb<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.2.0<span class="pl-pds">"</span></span>  <span class="pl-c">// Scala</span>
libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>pl.metastack<span class="pl-pds">"</span></span> <span class="pl-k">%%%</span> <span class="pl-s"><span class="pl-pds">"</span>metaweb<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.2.0<span class="pl-pds">"</span></span>  <span class="pl-c">// Scala.js</span></pre>
  </div> 
  <h2><a id="user-content-example" class="anchor" href="https://github.com/metastack-pl/metaweb#example" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Example</h2> 
  <p>An excerpt from the example application:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">pl.metastack.metaweb.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">pl.metastack.metaweb.dsl.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">pl.metastack.metaweb.diff.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">pl.metastack.metaweb.macros.</span><span class="pl-v">Js</span>

<span class="pl-k">class</span> <span class="pl-en">ItemView</span>(<span class="pl-v">book</span>: <span class="pl-en">BookListItem</span>) <span class="pl-k">extends</span> <span class="pl-e">View</span> {
  <span class="pl-k">var</span> <span class="pl-en">hidden</span> <span class="pl-k">=</span> <span class="pl-c1">true</span>

  <span class="pl-k">override</span> <span class="pl-k">implicit</span> <span class="pl-k">def</span> <span class="pl-en">id</span> <span class="pl-k">=</span> <span class="pl-en">ViewId</span>(book.id.toString)

  <span class="pl-k">val</span> <span class="pl-en">root</span> <span class="pl-k">=</span> <span class="pl-en">NodeRef</span>[tag.<span class="pl-en">Li</span>](<span class="pl-s"><span class="pl-pds">"</span>book<span class="pl-pds">"</span></span>)
  <span class="pl-k">val</span> <span class="pl-en">title</span> <span class="pl-k">=</span> <span class="pl-en">NodeRef</span>[tag.<span class="pl-en">A</span>](<span class="pl-s"><span class="pl-pds">"</span>title<span class="pl-pds">"</span></span>)
  <span class="pl-k">val</span> <span class="pl-en">btnRemove</span> <span class="pl-k">=</span> <span class="pl-en">NodeRef</span>[tag.<span class="pl-en">Button</span>](<span class="pl-s"><span class="pl-pds">"</span>remove<span class="pl-pds">"</span></span>)
  <span class="pl-k">val</span> <span class="pl-en">btnRenameToggle</span> <span class="pl-k">=</span> <span class="pl-en">NodeRef</span>[tag.<span class="pl-en">Button</span>](<span class="pl-s"><span class="pl-pds">"</span>rename-toggle<span class="pl-pds">"</span></span>)
  <span class="pl-k">val</span> <span class="pl-en">divRenameBox</span> <span class="pl-k">=</span> <span class="pl-en">NodeRef</span>[tag.<span class="pl-en">Div</span>](<span class="pl-s"><span class="pl-pds">"</span>rename-box<span class="pl-pds">"</span></span>)
  <span class="pl-k">val</span> <span class="pl-en">txtRename</span> <span class="pl-k">=</span> <span class="pl-en">NodeRef</span>[tag.<span class="pl-en">Input</span>](<span class="pl-s"><span class="pl-pds">"</span>rename-text<span class="pl-pds">"</span></span>)
  <span class="pl-k">val</span> <span class="pl-en">btnRenameSave</span> <span class="pl-k">=</span> <span class="pl-en">NodeRef</span>[tag.<span class="pl-en">Button</span>](<span class="pl-s"><span class="pl-pds">"</span>rename-save<span class="pl-pds">"</span></span>)

  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">node</span>()<span class="pl-k">:</span> <span class="pl-en">Future</span>[tree.<span class="pl-en">Node</span>] <span class="pl-k">=</span>
    <span class="pl-en">Templates</span>.<span class="pl-en">Books</span>.map(_.byId[tree.<span class="pl-en">Tag</span>](<span class="pl-s"><span class="pl-pds">"</span>book<span class="pl-pds">"</span></span>))

  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">populate</span>()<span class="pl-k">:</span> <span class="pl-en">Diff</span> <span class="pl-k">=</span>
    <span class="pl-en">Diff</span>(
      title <span class="pl-k">:</span><span class="pl-k">=</span> book.title,
      title.href <span class="pl-k">:</span><span class="pl-k">=</span> s<span class="pl-s"><span class="pl-pds">"</span>/book/${book.id}<span class="pl-pds">"</span></span>,
      txtRename.value <span class="pl-k">:</span><span class="pl-k">=</span> book.title,
      divRenameBox.hide(hidden)
    )

  <span class="pl-k">@</span><span class="pl-en">Js</span> <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">register</span>()<span class="pl-k">:</span> <span class="pl-en">Diff</span> <span class="pl-k">=</span>
    btnRemove.click.subscribe(_ <span class="pl-k">=&gt;</span> destroy()) <span class="pl-k">:</span><span class="pl-k">+</span>
    btnRenameToggle.click.subscribe { _ <span class="pl-k">=&gt;</span>
      hidden <span class="pl-k">=</span> <span class="pl-k">!</span>hidden
      divRenameBox.hide(hidden) <span class="pl-k">:</span><span class="pl-k">+</span> <span class="pl-en">Diff</span>.<span class="pl-en">Effect</span> {
        <span class="pl-k">if</span> (<span class="pl-k">!</span>hidden) txtRename.dom.focus()
      }
    } <span class="pl-k">:</span><span class="pl-k">+</span>
    txtRename.onEnter(rename) <span class="pl-k">:</span><span class="pl-k">+</span>
    btnRenameSave.click.subscribe(_ <span class="pl-k">=&gt;</span> rename(txtRename.dom.value))

  <span class="pl-k">@</span><span class="pl-en">Js</span> <span class="pl-k">def</span> <span class="pl-en">rename</span>(<span class="pl-v">value</span>: <span class="pl-k">String</span>)<span class="pl-k">:</span> <span class="pl-en">Diff</span> <span class="pl-k">=</span> {
    hidden <span class="pl-k">=</span> <span class="pl-c1">true</span>
    <span class="pl-en">Diff</span>(
      title <span class="pl-k">:</span><span class="pl-k">=</span> value,
      divRenameBox.hide(hidden)
    )
  }
}</pre>
  </div> 
  <h2><a id="user-content-tree" class="anchor" href="https://github.com/metastack-pl/metaweb#tree" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Tree</h2> 
  <p>MetaWeb offers a tree allowing to create documents defined in terms of immutable objects:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">a</span> <span class="pl-k">=</span> tag.<span class="pl-en">A</span>()
  .href(<span class="pl-s"><span class="pl-pds">"</span>http://github.com/<span class="pl-pds">"</span></span>)
  .set(tree.<span class="pl-en">Text</span>(<span class="pl-s"><span class="pl-pds">"</span>GitHub<span class="pl-pds">"</span></span>))

a.toHtml  <span class="pl-c">// &lt;a href="http://github.com/"&gt;GitHub&lt;/a&gt;</span></pre>
  </div> 
  <p>The bindings are derived from the MDN documentation. For all attributes, we provide getters and setters. <code>set()</code> replaces the children of a node.</p> 
  <h2><a id="user-content-macros" class="anchor" href="https://github.com/metastack-pl/metaweb#macros" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Macros</h2> 
  <p>MetaWeb defines several compile-time macros for increased comfort or performance.</p> 
  <h3><a id="user-content-js" class="anchor" href="https://github.com/metastack-pl/metaweb#js" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Js</h3> 
  <p>The <code>@Js</code> annotation replaces the body of methods by a no-op diff when compiled for JVM. If applied to objects, classes, traits, the body will be removed. If applied to variables, the declaration will be removed entirely.</p> 
  <p>For example, <code>@Js</code> is used in the view for the <code>register()</code> method. If the method is overridden, it will invariably need JavaScript functionality which would not be available in the JVM.</p> 
  <p>This annotation effectively allows to define the logic of a view and its JavaScript side-effects within the same file without resorting to <a href="https://www.scala-js.org/doc/project/cross-build.html" target="_blank">Scala.js' cross-project structure</a>.</p> 
  <h3><a id="user-content-inline-html" class="anchor" href="https://github.com/metastack-pl/metaweb#inline-html" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Inline HTML</h3> 
  <p>Inline HTML can include placeholders referring to Scala values:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">url</span>   <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>http://github.com/<span class="pl-pds">"</span></span>
<span class="pl-k">val</span> <span class="pl-en">title</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>GitHub<span class="pl-pds">"</span></span>
<span class="pl-k">val</span> <span class="pl-en">root</span>  <span class="pl-k">=</span> html<span class="pl-s"><span class="pl-pds">"""</span>&lt;a href=$url&gt;$title&lt;/a&gt;<span class="pl-pds">"""</span></span>

root.toHtml  <span class="pl-c">// &lt;a href="http://github.com/"&gt;GitHub&lt;/a&gt;</span></pre>
  </div> 
  <p>A placeholder may also reference <code>Seq[Node]</code> values:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">spans</span> <span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  html<span class="pl-s"><span class="pl-pds">"</span>&lt;span&gt;test&lt;/span&gt;<span class="pl-pds">"</span></span>,
  html<span class="pl-s"><span class="pl-pds">"</span>&lt;span&gt;test2&lt;/span&gt;<span class="pl-pds">"</span></span>
)

<span class="pl-k">val</span> <span class="pl-en">div</span> <span class="pl-k">=</span> html<span class="pl-s"><span class="pl-pds">"</span>&lt;div&gt;$spans&lt;/div&gt;<span class="pl-pds">"</span></span>
div.toHtml  <span class="pl-c">// &lt;div&gt;&lt;span&gt;test&lt;/span&gt;&lt;span&gt;test2&lt;/span&gt;&lt;/div&gt;</span></pre>
  </div> 
  <h3><a id="user-content-external-html" class="anchor" href="https://github.com/metastack-pl/metaweb#external-html" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>External HTML</h3> 
  <p>For loading external HTML files during compile-time, a constant file name must be passed:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">tpl</span> <span class="pl-k">=</span> html(<span class="pl-s"><span class="pl-pds">"</span>test.html<span class="pl-pds">"</span></span>)
tpl.toHtml  <span class="pl-c">// &lt;html&gt;...&lt;/html&gt;</span></pre>
  </div> 
  <h2><a id="user-content-runtime-html-parser" class="anchor" href="https://github.com/metastack-pl/metaweb#runtime-html-parser" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Runtime HTML parser</h2> 
  <p>MetaWeb provides an HTML parser backed by the DOM in Scala.js, but uses its own parser for the JVM.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">html</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"""</span>&lt;div id="a"&gt;&lt;span&gt;42&lt;/span&gt;&lt;/div&gt;<span class="pl-pds">"""</span></span>
<span class="pl-k">val</span> <span class="pl-en">node</span> <span class="pl-k">=</span> <span class="pl-en">HtmlParser</span>.fromString(html)
node.toHtml <span class="pl-k">==</span> html  <span class="pl-c">// true</span></pre>
  </div> 
  <p>HTML code is parsed during compile-time and then translated to an immutable or stateful tree. This reduces any runtime overhead. HTML can be specified inline or loaded from external files.</p> 
  <h2><a id="user-content-diffs" class="anchor" href="https://github.com/metastack-pl/metaweb#diffs" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Diffs</h2> 
  <p>Diffs encapsulate changes and need to be returned from most <code>View</code> functions like <code>populate()</code> or <code>register()</code>. Diffs are rendered by an external processing unit. As diffs denote precise changes in the page tree, a virtual DOM is not required.</p> 
  <p>We define two types of diffs.</p> 
  <p><em>Execution flow:</em></p> 
  <ul> 
   <li><strong>Noop:</strong> Don't perform an action</li> 
   <li><strong>Sequence:</strong> Define a sequential execution of diffs</li> 
   <li><strong>Effect:</strong> Pass function that performs side-effects, used for JavaScript functionality</li> 
   <li><strong>Map:</strong> Perform action and continue with another diff</li> 
   <li><strong>Async:</strong> Perform action asynchronously</li> 
  </ul> 
  <p><em>Node updates:</em></p> 
  <ul> 
   <li><strong>SetAttribute:</strong> Set attribute on a node</li> 
   <li><strong>RemoveAttribute:</strong> Remove attribute from a node</li> 
   <li><strong>ReplaceChildren:</strong> Replace children of a node</li> 
   <li><strong>PrependChild:</strong> Prepends child to a node</li> 
   <li><strong>AppendChild:</strong> Appends child to a node</li> 
   <li><strong>RemoveChild:</strong> Removes a child</li> 
  </ul> 
  <h3><a id="user-content-examples" class="anchor" href="https://github.com/metastack-pl/metaweb#examples" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Examples</h3> 
  <ul> 
   <li><em>Replacing children</em></li> 
  </ul> 
  <div class="highlight highlight-source-scala">
   <pre>title <span class="pl-k">:</span><span class="pl-k">=</span> book.title</pre>
  </div> 
  <ul> 
   <li><em>Setting attributes</em></li> 
  </ul> 
  <div class="highlight highlight-source-scala">
   <pre>title.href <span class="pl-k">:</span><span class="pl-k">=</span> s<span class="pl-s"><span class="pl-pds">"</span>/book/${book.id}<span class="pl-pds">"</span></span></pre>
  </div> 
  <ul> 
   <li><em>Combining diffs:</em> There are two ways of creating a sequence of diffs. <code>Diff()</code> can take one or more diffs.</li> 
  </ul> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-en">Diff</span>(
  title <span class="pl-k">:</span><span class="pl-k">=</span> book.title,
  title.href <span class="pl-k">:</span><span class="pl-k">=</span> s<span class="pl-s"><span class="pl-pds">"</span>/book/${book.id}<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <ul> 
   <li><em>Combining diffs:</em> The <code>:+</code> operator may be more convenient than <code>Diff()</code> in some cases.</li> 
  </ul> 
  <div class="highlight highlight-source-scala">
   <pre>btnRemove.click.subscribe(_ <span class="pl-k">=&gt;</span> destroy()) <span class="pl-k">:</span><span class="pl-k">+</span>
btnRenameToggle.click.subscribe(_ <span class="pl-k">=&gt;</span> rename())</pre>
  </div> 
  <h2><a id="user-content-views" class="anchor" href="https://github.com/metastack-pl/metaweb#views" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Views</h2> 
  <p>A view is defined by this simplified trait:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">trait</span> <span class="pl-en">View</span> {
  <span class="pl-k">val</span> <span class="pl-en">root</span><span class="pl-k">:</span> <span class="pl-en">NodeRef</span>[tree.<span class="pl-en">Tag</span>]
  <span class="pl-k">implicit</span> <span class="pl-k">def</span> <span class="pl-en">id</span><span class="pl-k">:</span> <span class="pl-en">ViewId</span>

  <span class="pl-k">def</span> <span class="pl-en">node</span>()<span class="pl-k">:</span> <span class="pl-en">Future</span>[tree.<span class="pl-en">Node</span>]
  <span class="pl-k">def</span> <span class="pl-en">populate</span>()<span class="pl-k">:</span> <span class="pl-en">Diff</span>
  <span class="pl-k">def</span> <span class="pl-en">register</span>()<span class="pl-k">:</span> <span class="pl-en">Diff</span>
  <span class="pl-k">def</span> <span class="pl-en">destroy</span>()<span class="pl-k">:</span> <span class="pl-en">Diff</span>
}</pre>
  </div> 
  <p>Every view must must be identifiable such that we can remove it in <code>destroy()</code>. Therefore, <code>root</code> must reference the ID of the root node.</p> 
  <p>Furthermore, there may be several instances of a view. As elements have a global ID in the DOM, we need to give each view a unique name. This is done by overriding <code>id</code>, which will be used as the suffix for all ID attributes in the tree. The ID will also be used to re-identify elements on the client that have been rendered on the server.</p> 
  <h3><a id="user-content-noderef" class="anchor" href="https://github.com/metastack-pl/metaweb#noderef" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>NodeRef</h3> 
  <p>To access and modify a node, the <code>id</code> attribute must be set. Afterwards, it can be accessed in the view by defining a <code>NodeRef</code> instance:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">root</span> <span class="pl-k">=</span> <span class="pl-en">NodeRef</span>[tag.<span class="pl-en">Li</span>](<span class="pl-s"><span class="pl-pds">"</span>book<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>Each <code>NodeRef</code> instance provides a <code>dom</code> method that allows to access the underlying DOM node.</p> 
  <h3><a id="user-content-life-cycle" class="anchor" href="https://github.com/metastack-pl/metaweb#life-cycle" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Life cycle</h3> 
  <p>A view has the following life cycle:</p> 
  <ol> 
   <li><code>node()</code>: Creates an immutable tree node</li> 
   <li><code>populate()</code>: Populates the tree with content</li> 
   <li><code>register()</code>: Registers event handlers, only called in JavaScript</li> 
   <li><code>destroy()</code>: Removes node from the document tree</li> 
  </ol> 
  <h2><a id="user-content-dsl" class="anchor" href="https://github.com/metastack-pl/metaweb#dsl" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>DSL</h2> 
  <p>To facilitate interaction with nodes, MetaWeb provides helper methods in the <code>dsl</code> package object:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">pl.metastack.metaweb.dsl.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">div</span><span class="pl-k">:</span> <span class="pl-en">NodeRef</span>[tag.<span class="pl-en">Div</span>] <span class="pl-k">=</span>  ...
div.hide(<span class="pl-c1">true</span>)  <span class="pl-c">// Sets `style` attribute to hide the element in the browser</span></pre>
  </div> 
  <h2><a id="user-content-rendering" class="anchor" href="https://github.com/metastack-pl/metaweb#rendering" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Rendering</h2> 
  <h3><a id="user-content-nodes" class="anchor" href="https://github.com/metastack-pl/metaweb#nodes" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Nodes</h3> 
  <p>A node defines two rendering methods:</p> 
  <ul> 
   <li><strong>HTML:</strong> <code>toHtml</code> is defined on every node and will return the tree as a string</li> 
   <li><strong>DOM:</strong> <code>toDom</code> is only available in Scala.js; it renders a node in the browser DOM</li> 
  </ul> 
  <h3><a id="user-content-views-1" class="anchor" href="https://github.com/metastack-pl/metaweb#views-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Views</h3> 
  <p>A view defines the following rendering methods:</p> 
  <ul> 
   <li><code>toTree: Future[tree.Node]</code> Populates the view and returns its tree as a snapshot</li> 
   <li><code>toHtml: Future[String]</code> Same as <code>toTree</code>, but returns snapshot as HTML</li> 
   <li><code>toDom: Future[dom.Node]</code> Only available in Scala.js; populates the view and registers event handlers, returns a node that can be inserted into the body of the DOM</li> 
  </ul> 
  <h2><a id="user-content-intellij-support" class="anchor" href="https://github.com/metastack-pl/metaweb#intellij-support" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>IntelliJ support</h2> 
  <p>When loading the example project in IntelliJ, some references in the <code>shared</code> module may not be resolved properly. This happens because IntelliJ doesn't add a dependency from platform-specific modules (i.e. <code>jvm</code> and <code>js</code>) to the <code>shared</code> module.</p> 
  <p>To fix this, please go to <code>File -&gt; Project Structure... -&gt; Modules -&gt; example-Sources -&gt; Dependencies</code>. Then, add a module dependency to <code>exampleJVM</code> and <code>exampleJS</code>.</p> 
  <h2><a id="user-content-links" class="anchor" href="https://github.com/metastack-pl/metaweb#links" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Links</h2> 
  <ul> 
   <li><a href="https://www.javadoc.io/doc/pl.metastack/metaweb_2.11/" target="_blank">ScalaDoc</a></li> 
  </ul> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/metastack-pl/metaweb#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p>MetaWeb is licensed under the terms of the Apache v2.0 license.</p> 
  <h2><a id="user-content-authors" class="anchor" href="https://github.com/metastack-pl/metaweb#authors" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Authors</h2> 
  <ul> 
   <li>Tim Nieradzik</li> 
   <li>Matt Hicks</li> 
  </ul> 
 </article>
</div>