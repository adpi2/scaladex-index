<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-reactiveaerospike" class="anchor" href="https://github.com/tabmo/reactiveaerospike#reactiveaerospike" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>ReactiveAerospike</h1> 
  <p>ReactiveAerospike is a pure functional and type safe Scalawrapper for the <a href="https://github.com/aerospike/aerospike-client-java" target="_blank">Aerospike Java Client Library </a>.</p> 
  <p>This is a simplified and fuller version of <a href="https://github.com/unicredit/ReactiveAerospike" target="_blank">ReactiveAerospike</a> made by Andrea Ferretti and Gianluca Sabena.</p> 
  <p>It makes use of the <code>async</code> client and return values are wrapped into scala Futures.</p> 
  <h2><a id="user-content-installation" class="anchor" href="https://github.com/tabmo/reactiveaerospike#installation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Installation</h2> 
  <p>Add in your build.sbt</p> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Tabmo Bintray<span class="pl-pds">"</span></span> at <span class="pl-s"><span class="pl-pds">"</span>https://dl.bintray.com/tabmo/maven<span class="pl-pds">"</span></span>

libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>io.tabmo<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>reactive-aerospike<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.0.7<span class="pl-pds">"</span></span></pre>
  </div> 
  <h2><a id="user-content-usage" class="anchor" href="https://github.com/tabmo/reactiveaerospike#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <p>Usually you just need these imports:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">io.tabmo.aerospike.client.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">io.tabmo.aerospike.data.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">io.tabmo.aerospike.converter.key.</span><span class="pl-v">_</span></pre>
  </div> 
  <p>A client can be easily instantiated by proving host and port for your running server</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">io.tabmo.aerospike.client.</span><span class="pl-v">ReactiveAerospikeClient</span>

<span class="pl-c"><span class="pl-c">//</span> Connect to only one instance</span>
<span class="pl-k">val</span> <span class="pl-en">client</span> <span class="pl-k">=</span> <span class="pl-en">ReactiveAerospikeClient</span>.connect(<span class="pl-s"><span class="pl-pds">"</span>192.168.59.103<span class="pl-pds">"</span></span>, <span class="pl-c1">3000</span>)

<span class="pl-c"><span class="pl-c">//</span> Connect to many instances</span>
<span class="pl-k">val</span> <span class="pl-en">client</span> <span class="pl-k">=</span> <span class="pl-en">ReactiveAerospikeClient</span>(<span class="pl-s"><span class="pl-pds">"</span>server1:3000<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>server2:3000<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>server3:3000<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>Don't forget to close the connection when your app shutdown.</p> 
  <div class="highlight highlight-source-scala">
   <pre>client.close()</pre>
  </div> 
  <p>Direct API lets you use the usual basic <code>put</code>, <code>get</code>, <code>delete</code> commands to interact with Aerospike. You will always need to provide your <code>key</code> for any operation.</p> 
  <p>An <code>AerospikeKey</code> usually requires a <code>namespace</code>, the name of the <code>set</code> (Optional) and its <code>value</code>. A key can only be a Long or a String.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">key</span> <span class="pl-k">=</span> <span class="pl-en">AerospikeKey</span>(<span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>my-set<span class="pl-pds">"</span></span>,  <span class="pl-c1">42</span>)</pre>
  </div> 
  <p><strong>IMPORTANT note about Aerospike Keys</strong>: Internally Aerospikes only cares about its <a href="https://github.com/aerospike/aerospike-client-java/blob/master/client/src/com/aerospike/client/Key.java" target="_blank">keys</a> digests. By default the key value provided by the user is discarded. You're going to have to specifically define a <code>WritePolicy</code> with <code>sendKey = true</code> if you want Aerospike to store your key. You can go on using the key you have defined and pass it through your functions, but the original value would not be available, if you need it.</p> 
  <p>Also note that implicit conversions are used to support transformations from your types to Aerospike values.</p> 
  <p>If we now define some <code>bins</code>:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">binLong</span> <span class="pl-k">=</span> <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>x<span class="pl-pds">"</span></span>, <span class="pl-c1">1L</span>)
<span class="pl-k">val</span> <span class="pl-en">binString</span> <span class="pl-k">=</span> <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>z<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>)

<span class="pl-c"><span class="pl-c">//</span> By convenience, you can also define a bin with an Int, but it will be converted to a Long bin.</span>
<span class="pl-k">val</span> <span class="pl-en">binLongToo</span> <span class="pl-k">=</span> <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>y<span class="pl-pds">"</span></span>, <span class="pl-c1">2</span>) 
</pre>
  </div> 
  <p>We can then go on and persist them.</p> 
  <h4><a id="user-content-put" class="anchor" href="https://github.com/tabmo/reactiveaerospike#put" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>put</h4> 
  <p>A <code>put</code> operation for a given <code>key</code> and a list of <code>bins</code> looks like this:</p> 
  <div class="highlight highlight-source-scala">
   <pre>client.put(key, <span class="pl-en">Seq</span>(bin1, bin2, bin3))</pre>
  </div> 
  <p>Put operations always return a key wrapped in a future. In this specific case you would get a <code>Future[AerospikeKey[K]]</code>.</p> 
  <h4><a id="user-content-get" class="anchor" href="https://github.com/tabmo/reactiveaerospike#get" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>get</h4> 
  <p>A <code>get</code> operation for a given <code>key</code>. You can define the list of bins you want, or use <code>Seq.empty</code> to return them all.</p> 
  <div class="highlight highlight-source-scala">
   <pre>client.get(key, <span class="pl-en">Seq</span>(<span class="pl-s"><span class="pl-pds">"</span>bin1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>bin2<span class="pl-pds">"</span></span>)) <span class="pl-c"><span class="pl-c">//</span> Return only the bins bin1 and bin2</span>
client.get(key) <span class="pl-c"><span class="pl-c">//</span> Return all bins</span></pre>
  </div> 
  <p>In this case you would get a <code>Future[AerospikeRecord]</code>. An instance of <code>AerospikeRecord</code> will then contain your bins.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">for</span> {
  record <span class="pl-k">&lt;</span><span class="pl-k">-</span> client.get(key)
} <span class="pl-k">yield</span> {

  <span class="pl-c"><span class="pl-c">//</span> Underlying bins can only be a Long or a String</span>
  <span class="pl-k">val</span> <span class="pl-en">l</span><span class="pl-k">:</span> <span class="pl-k">Long</span> <span class="pl-k">=</span> record.getLong(<span class="pl-s"><span class="pl-pds">"</span>binLong<span class="pl-pds">"</span></span>)
  <span class="pl-k">val</span> <span class="pl-en">s</span><span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> record.getString(<span class="pl-s"><span class="pl-pds">"</span>binString<span class="pl-pds">"</span></span>)

  <span class="pl-c"><span class="pl-c">//</span> You can try to transform these values to another type, but it's an unsafe operation</span>
  <span class="pl-k">val</span> <span class="pl-en">i</span><span class="pl-k">:</span> <span class="pl-en">Option</span>[<span class="pl-k">Int</span>] <span class="pl-k">=</span> record.asInt(<span class="pl-s"><span class="pl-pds">"</span>binLong<span class="pl-pds">"</span></span>)
  <span class="pl-k">val</span> <span class="pl-en">d</span><span class="pl-k">:</span> <span class="pl-en">Option</span>[<span class="pl-k">Double</span>] <span class="pl-k">=</span> record.asDouble(<span class="pl-s"><span class="pl-pds">"</span>binString<span class="pl-pds">"</span></span>)

  <span class="pl-c"><span class="pl-c">//</span> You can also retrieve the expiration of the record (in s)</span>
  <span class="pl-k">val</span> <span class="pl-en">exp</span><span class="pl-k">:</span> <span class="pl-k">Long</span> <span class="pl-k">=</span> record.expiration

  <span class="pl-c"><span class="pl-c">//</span> You can check if a bin exists:</span>
  <span class="pl-k">val</span> <span class="pl-en">exists</span><span class="pl-k">:</span> <span class="pl-k">Boolean</span> <span class="pl-k">=</span> record.exists(<span class="pl-s"><span class="pl-pds">"</span>binName<span class="pl-pds">"</span></span>)

  <span class="pl-c"><span class="pl-c">//</span> You can get all bins</span>
  <span class="pl-k">val</span> <span class="pl-en">bins</span><span class="pl-k">:</span> <span class="pl-en">Map</span>[<span class="pl-k">String</span>, <span class="pl-en">AnyRef</span>] <span class="pl-k">=</span> record.bins

  <span class="pl-c"><span class="pl-c">//</span> You can get the number of bins defined</span>
  <span class="pl-k">val</span> <span class="pl-en">count</span><span class="pl-k">:</span> <span class="pl-k">Int</span> <span class="pl-k">=</span> record.sizes

}</pre>
  </div> 
  <p>See <a href="https://github.com/tabmo/ReactiveAerospike/blob/master/src/main/scala/io/tabmo/aerospike/data/AerospikeRecord.scala" target="_blank"><code>AerospikeRecord</code></a> to know safe and unsafe operations.</p> 
  <h3><a id="user-content-other-operations" class="anchor" href="https://github.com/tabmo/reactiveaerospike#other-operations" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Other operations</h3> 
  <p>You can use all operations available on the Java driver: <code>touch</code>, <code>header</code>, <code>add</code>, <code>prepend</code>, <code>append</code>, <code>exists</code>, <code>delete</code>.</p> 
  <p>See <a href="https://github.com/tabmo/ReactiveAerospike/blob/master/src/test/scala/BasicUsage.scala" target="_blank">BasicUsage</a> for sample code.</p> 
  <h2><a id="user-content-sample-usage" class="anchor" href="https://github.com/tabmo/reactiveaerospike#sample-usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Sample usage</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">writePolicyWithTTL</span> <span class="pl-k">=</span> {
  <span class="pl-k">val</span> <span class="pl-en">policy</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">WritePolicy</span>(aerospike.asyncClient.asyncWritePolicyDefault) <span class="pl-c"><span class="pl-c">//</span> clone default policy</span>
  policy.expiration <span class="pl-k">=</span> <span class="pl-c1">60</span> <span class="pl-k">*</span> <span class="pl-c1">60</span> <span class="pl-k">*</span> <span class="pl-c1">24</span> <span class="pl-k">*</span> <span class="pl-c1">30</span> <span class="pl-c"><span class="pl-c">//</span> 30 days</span>
  policy
}

<span class="pl-k">val</span> <span class="pl-en">key</span> <span class="pl-k">=</span> <span class="pl-en">AerospikeKey</span>(<span class="pl-s"><span class="pl-pds">"</span>myNS<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>mySet<span class="pl-pds">"</span></span>, <span class="pl-c1">123456</span>)
<span class="pl-k">val</span> <span class="pl-en">bins</span> <span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>julien<span class="pl-pds">"</span></span>),
  <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, <span class="pl-c1">123456L</span>),
  <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>counter<span class="pl-pds">"</span></span>, <span class="pl-c1">0</span>)
)

<span class="pl-k">val</span> <span class="pl-en">saveOperation</span> <span class="pl-k">=</span> aerospike.put(key, bins, <span class="pl-en">Some</span>(writePolicyWithTTL))
<span class="pl-k">val</span> <span class="pl-en">updateCounterOperation</span> <span class="pl-k">=</span> aeropsike.add(key, <span class="pl-en">Seq</span>(<span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>counter<span class="pl-pds">"</span></span>, <span class="pl-c1">1</span>)))
<span class="pl-k">val</span> <span class="pl-en">readCounterOperation</span> <span class="pl-k">=</span> aerospike.get(key, <span class="pl-en">Seq</span>(<span class="pl-s"><span class="pl-pds">"</span>counter<span class="pl-pds">"</span></span>))

<span class="pl-k">val</span> <span class="pl-en">result</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-k">Long</span>] <span class="pl-k">=</span> <span class="pl-k">for</span> {
  _ <span class="pl-k">&lt;</span><span class="pl-k">-</span> saveOperation
  _ <span class="pl-k">&lt;</span><span class="pl-k">-</span> updateCounterOperation
  record <span class="pl-k">&lt;</span><span class="pl-k">-</span> readCounterOperation
} <span class="pl-k">yield</span> {
  record.getLong(<span class="pl-s"><span class="pl-pds">"</span>counter<span class="pl-pds">"</span></span>)
}</pre>
  </div> 
  <h2><a id="user-content-advanced-usage" class="anchor" href="https://github.com/tabmo/reactiveaerospike#advanced-usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Advanced usage</h2> 
  <h3><a id="user-content-operate" class="anchor" href="https://github.com/tabmo/reactiveaerospike#operate" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Operate</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">result</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">AerospikeRecord</span>] <span class="pl-k">=</span> 
  client.operate(key,
    put(<span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>),
    put(<span class="pl-s"><span class="pl-pds">"</span>long<span class="pl-pds">"</span></span>, <span class="pl-c1">1000</span>),
    add(<span class="pl-s"><span class="pl-pds">"</span>v<span class="pl-pds">"</span></span>, <span class="pl-c1">1</span>),
    append(<span class="pl-s"><span class="pl-pds">"</span>string<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>world<span class="pl-pds">"</span></span>),
    getAll)()</pre>
  </div> 
  <p>See <a href="https://github.com/tabmo/ReactiveAerospike/blob/master/src/test/scala/OperateUsage.scala" target="_blank">OperateUsage</a> for sample code.</p> 
  <h3><a id="user-content-query" class="anchor" href="https://github.com/tabmo/reactiveaerospike#query" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Query</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">result</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">Map</span>[<span class="pl-en">AerospikeKey</span>[<span class="pl-k">Long</span>], <span class="pl-en">AerospikeRecord</span>]] <span class="pl-k">=</span> 
  client.queryEqual[<span class="pl-k">Long</span>, <span class="pl-k">String</span>](ns, set, <span class="pl-en">Seq</span>(<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>), <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>julien<span class="pl-pds">"</span></span>)

<span class="pl-k">val</span> <span class="pl-en">result</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">Map</span>[<span class="pl-en">AerospikeKey</span>[<span class="pl-k">Long</span>], <span class="pl-en">AerospikeRecord</span>]] <span class="pl-k">=</span> 
  client.queryEqual[<span class="pl-k">Long</span>, <span class="pl-k">Long</span>](ns, set, <span class="pl-en">Seq</span>(<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>), <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, <span class="pl-c1">1000</span>)

<span class="pl-k">val</span> <span class="pl-en">result</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">Map</span>[<span class="pl-en">AerospikeKey</span>[<span class="pl-k">Long</span>], <span class="pl-en">AerospikeRecord</span>]] <span class="pl-k">=</span> 
  client.queryRange[<span class="pl-k">Long</span>](ns, set, <span class="pl-en">Seq</span>(<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>), <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, <span class="pl-c1">1000</span>, <span class="pl-c1">2000</span>)</pre>
  </div> 
  <p>See <a href="https://github.com/tabmo/ReactiveAerospike/blob/master/src/test/scala/QueryUsage.scala" target="_blank">QueryUsage</a> for sample code.</p> 
  <h3><a id="user-content-udf" class="anchor" href="https://github.com/tabmo/reactiveaerospike#udf" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>UDF</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">io.tabmo.aerospike.converter.value.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">result</span><span class="pl-k">:</span> <span class="pl-en">Seq</span>[<span class="pl-en">AerospikeRecord</span>] <span class="pl-k">=</span> 
  client.queryEqualAggregate(ns, set,
  <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>thomas<span class="pl-pds">"</span></span>, <span class="pl-c"><span class="pl-c">//</span> On what the filter is made?</span>
  <span class="pl-c1">this</span>.getClass.getClassLoader, <span class="pl-s"><span class="pl-pds">"</span>persons.lua<span class="pl-pds">"</span></span>, <span class="pl-c"><span class="pl-c">//</span> where the UDF is</span>
  <span class="pl-s"><span class="pl-pds">"</span>persons<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>filterByAge<span class="pl-pds">"</span></span>, <span class="pl-en">Seq</span>(<span class="pl-c1">19</span>)) <span class="pl-c"><span class="pl-c">//</span> What method/args call on the UDF?</span></pre>
  </div> 
  <p>See <a href="https://github.com/tabmo/ReactiveAerospike/blob/master/src/test/scala/UdfUsage.scala" target="_blank">UdfUsage</a> for sample code.</p> 
  <h2><a id="user-content-authors" class="anchor" href="https://github.com/tabmo/reactiveaerospike#authors" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Authors</h2> 
  <ul> 
   <li>Julien Lafont: <a href="https://github.com/studiodev" target="_blank">https://github.com/studiodev</a></li> 
  </ul> 
  <h3><a id="user-content-original-version" class="anchor" href="https://github.com/tabmo/reactiveaerospike#original-version" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Original version</h3> 
  <ul> 
   <li>Andrea Peruffo: <a href="https://github.com/andreaTP" target="_blank">https://github.com/andreaTP</a></li> 
   <li>Marco Firrincieli: <a href="https://github.com/mfirry" target="_blank">https://github.com/mfirry</a></li> 
  </ul> 
  <p>Thanks for assistance and contributions:</p> 
  <ul> 
   <li>Andrea Ferretti <a href="http://github.com/andreaferretti" target="_blank">http://github.com/andreaferretti</a></li> 
   <li>Gianluca Sabena: <a href="http://github.com/gianluca-sabena" target="_blank">http://github.com/gianluca-sabena</a></li> 
  </ul> 
 </article>
</div>