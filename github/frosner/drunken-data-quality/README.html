<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-drunken-data-quality-ddq-" class="anchor" href="https://github.com/frosner/drunken-data-quality#drunken-data-quality-ddq-" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Drunken Data Quality (DDQ) <a href="https://raw.githubusercontent.com/FRosner/drunken-data-quality/master/logo/DDQ_small.png" target="_blank"><img src="https://raw.githubusercontent.com/FRosner/drunken-data-quality/master/logo/DDQ_small.png" alt="Logo" height="25" style="max-width:100%;"></a></h1> 
  <p><a href="https://gitter.im/FRosner/drunken-data-quality?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank"><img src="https://camo.githubusercontent.com/de500823e2040d30cebdee188746a9bc3ecfee3a/68747470733a2f2f6261646765732e6769747465722e696d2f46526f736e65722f6472756e6b656e2d646174612d7175616c6974792e737667" alt="Join the chat at https://gitter.im/FRosner/drunken-data-quality" data-canonical-src="https://badges.gitter.im/FRosner/drunken-data-quality.svg" style="max-width:100%;"></a> <a href="https://travis-ci.org/FRosner/drunken-data-quality" target="_blank"><img src="https://camo.githubusercontent.com/30a44b2e994357f0285d87f08e58e589ef872a23/68747470733a2f2f7472617669732d63692e6f72672f46526f736e65722f6472756e6b656e2d646174612d7175616c6974792e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/FRosner/drunken-data-quality.svg?branch=master" style="max-width:100%;"></a> <a href="https://www.codacy.com/app/frank_7/drunken-data-quality" target="_blank"><img src="https://camo.githubusercontent.com/97945a18c74fd74f45a96c7cacec62a77425ff4a/68747470733a2f2f6170692e636f646163792e636f6d2f70726f6a6563742f62616467652f67726164652f6237333837303062616430613462366461313465303663306464353038613231" alt="Codacy Badge" data-canonical-src="https://api.codacy.com/project/badge/grade/b738700bad0a4b6da14e06c0dd508a21" style="max-width:100%;"></a> <a href="https://codecov.io/github/FRosner/drunken-data-quality?branch=master" target="_blank"><img src="https://camo.githubusercontent.com/25833df0c3cac04048307cf0f45ab9fbc6d717b8/68747470733a2f2f636f6465636f762e696f2f6769746875622f46526f736e65722f6472756e6b656e2d646174612d7175616c6974792f636f7665726167652e7376673f6272616e63683d6d6173746572" alt="codecov.io" data-canonical-src="https://codecov.io/github/FRosner/drunken-data-quality/coverage.svg?branch=master" style="max-width:100%;"></a></p> 
  <h2><a id="user-content-description" class="anchor" href="https://github.com/frosner/drunken-data-quality#description" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Description</h2> 
  <p>DDQ is a small library for checking constraints on Spark data structures. It can be used to assure a certain data quality, especially when continuous imports happen.</p> 
  <h2><a id="user-content-getting-ddq" class="anchor" href="https://github.com/frosner/drunken-data-quality#getting-ddq" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Getting DDQ</h2> 
  <h3><a id="user-content-spark-package" class="anchor" href="https://github.com/frosner/drunken-data-quality#spark-package" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Spark Package</h3> 
  <p>DDQ is available as a <a href="http://spark-packages.org/package/FRosner/drunken-data-quality" target="_blank">spark package</a>. You can add it to your spark-shell, spark-submit or pyspark using the <code>--packages</code> command line option:</p> 
  <div class="highlight highlight-source-shell">
   <pre>spark-shell --packages FRosner:drunken-data-quality:4.1.0-s_2.11</pre>
  </div> 
  <h3><a id="user-content-python-api" class="anchor" href="https://github.com/frosner/drunken-data-quality#python-api" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Python API</h3> 
  <p>DDQ also comes with a Python API. It is available via the Python Package Index, so you have to install it once using <code>pip</code>:</p> 
  <pre><code>pip install pyddq==4.1.0
</code></pre> 
  <h3><a id="user-content-project-dependency-" class="anchor" href="https://github.com/frosner/drunken-data-quality#project-dependency-" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Project Dependency <a href="https://jitpack.io/#FRosner/drunken-data-quality" target="_blank"><img src="https://camo.githubusercontent.com/f34ff1970756a2537c742fa558bc73474720de81/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f7461672f46526f736e65722f6472756e6b656e2d646174612d7175616c6974792e7376673f6c6162656c3d4a69745061636b" alt="Latest Release" data-canonical-src="https://img.shields.io/github/tag/FRosner/drunken-data-quality.svg?label=JitPack" style="max-width:100%;"></a></h3> 
  <p>In order to use DDQ in your project, you can add it as a library dependency. This can be done through the <a href="https://github.com/databricks/sbt-spark-package" target="_blank">SBT spark package plugin</a>, or you can add it using <a href="https://jitpack.io/#FRosner/drunken-data-quality" target="_blank">JitPack.io</a>.</p> 
  <p>If neither of the above-mentioned ways work for you, feel free to download one of the compiled artifacts in the <a href="https://github.com/FRosner/drunken-data-quality/releases" target="_blank">release section</a>. Alternatively you may of course also build from source.</p> 
  <h2><a id="user-content-using-ddq" class="anchor" href="https://github.com/frosner/drunken-data-quality#using-ddq" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Using DDQ</h2> 
  <h3><a id="user-content-getting-started" class="anchor" href="https://github.com/frosner/drunken-data-quality#getting-started" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Getting Started</h3> 
  <p>Create two example tables to play with (or use your existing ones).</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Customer</span>(<span class="pl-v">id</span>: <span class="pl-k">Int</span>, <span class="pl-v">name</span>: <span class="pl-k">String</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Contract</span>(<span class="pl-v">id</span>: <span class="pl-k">Int</span>, <span class="pl-v">customerId</span>: <span class="pl-k">Int</span>, <span class="pl-v">duration</span>: <span class="pl-k">Int</span>)

<span class="pl-k">val</span> <span class="pl-en">customers</span> <span class="pl-k">=</span> spark.createDataFrame(<span class="pl-en">List</span>(
  <span class="pl-en">Customer</span>(<span class="pl-c1">0</span>, <span class="pl-s"><span class="pl-pds">"</span>Frank<span class="pl-pds">"</span></span>),
  <span class="pl-en">Customer</span>(<span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>Alex<span class="pl-pds">"</span></span>),
  <span class="pl-en">Customer</span>(<span class="pl-c1">2</span>, <span class="pl-s"><span class="pl-pds">"</span>Slavo<span class="pl-pds">"</span></span>)
))

<span class="pl-k">val</span> <span class="pl-en">contracts</span> <span class="pl-k">=</span> spark.createDataFrame(<span class="pl-en">List</span>(
  <span class="pl-en">Contract</span>(<span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">5</span>),
  <span class="pl-en">Contract</span>(<span class="pl-c1">1</span>, <span class="pl-c1">0</span>, <span class="pl-c1">10</span>),
  <span class="pl-en">Contract</span>(<span class="pl-c1">0</span>, <span class="pl-c1">1</span>, <span class="pl-c1">6</span>)
))</pre>
  </div> 
  <p>Run some checks and see the results on the console.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">de.frosner.ddq.core.</span><span class="pl-v">_</span>

<span class="pl-en">Check</span>(customers)
  .hasNumRows(_ <span class="pl-k">&gt;=</span> <span class="pl-c1">3</span>)
  .hasUniqueKey(<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>)
  .run()

<span class="pl-en">Check</span>(contracts)
  .hasNumRows(_ <span class="pl-k">&gt;</span> <span class="pl-c1">0</span>)
  .hasUniqueKey(<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>customerId<span class="pl-pds">"</span></span>)
  .satisfies(<span class="pl-s"><span class="pl-pds">"</span>duration &gt; 0<span class="pl-pds">"</span></span>)
  .hasForeignKey(customers, <span class="pl-s"><span class="pl-pds">"</span>customerId<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>)
  .run()</pre>
  </div> 
  <h3><a id="user-content-custom-reporters" class="anchor" href="https://github.com/frosner/drunken-data-quality#custom-reporters" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Custom Reporters</h3> 
  <p>By default the check result will be printed to stdout using ANSI escape codes to highlight the output. To have a report in another format, you can specify one or more <a href="https://github.com/FRosner/drunken-data-quality/wiki" target="_blank">custom reporters</a>.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">de.frosner.ddq.reporters.</span><span class="pl-v">MarkdownReporter</span>

<span class="pl-en">Check</span>(customers)
  .hasNumRows(_ <span class="pl-k">&gt;=</span> <span class="pl-c1">3</span>)
  .hasUniqueKey(<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>)
  .run(<span class="pl-en">MarkdownReporter</span>(<span class="pl-en">System</span>.err))</pre>
  </div> 
  <h3><a id="user-content-running-multiple-checks" class="anchor" href="https://github.com/frosner/drunken-data-quality#running-multiple-checks" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Running multiple checks</h3> 
  <p>You can use a runner to generate reports for multiple checks at once. It will execute all the checks and report the results to the specified reporters.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">de.frosner.ddq.reporters.</span><span class="pl-v">ConsoleReporter</span>
<span class="pl-k">import</span> <span class="pl-v">java.io.</span>{<span class="pl-v">PrintStream</span>, <span class="pl-v">File</span>}

<span class="pl-k">val</span> <span class="pl-en">check1</span> <span class="pl-k">=</span> <span class="pl-en">Check</span>(customers)
  .hasNumRows(_ <span class="pl-k">&gt;=</span> <span class="pl-c1">3</span>)
  .hasUniqueKey(<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>)

<span class="pl-k">val</span> <span class="pl-en">check2</span> <span class="pl-k">=</span> <span class="pl-en">Check</span>(contracts)
  .hasNumRows(_ <span class="pl-k">&gt;</span> <span class="pl-c1">0</span>)
  .hasUniqueKey(<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>customerId<span class="pl-pds">"</span></span>)
  .satisfies(<span class="pl-s"><span class="pl-pds">"</span>duration &gt; 0<span class="pl-pds">"</span></span>)
  .hasForeignKey(customers, <span class="pl-s"><span class="pl-pds">"</span>customerId<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>)

<span class="pl-k">val</span> <span class="pl-en">consoleReporter</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">ConsoleReporter</span>(<span class="pl-en">System</span>.out)
<span class="pl-k">val</span> <span class="pl-en">markdownMd</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">PrintStream</span>(<span class="pl-k">new</span> <span class="pl-en">File</span>(<span class="pl-s"><span class="pl-pds">"</span>report.md<span class="pl-pds">"</span></span>))
<span class="pl-k">val</span> <span class="pl-en">markdownReporter</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">MarkdownReporter</span>(markdownMd)

<span class="pl-en">Runner</span>.run(<span class="pl-en">Seq</span>(check1, check2), <span class="pl-en">Seq</span>(consoleReporter, markdownReporter))

markdownMd.close()</pre>
  </div> 
  <h3><a id="user-content-unit-tests" class="anchor" href="https://github.com/frosner/drunken-data-quality#unit-tests" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Unit Tests</h3> 
  <p>You can also use DDQ to write automated quality tests for your data. After running a check or a series of checks, you can inspect the results programmatically.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">def</span> <span class="pl-en">allConstraintsSatisfied</span>(<span class="pl-v">checkResult</span>: <span class="pl-en">CheckResult</span>)<span class="pl-k">:</span> <span class="pl-k">Boolean</span> <span class="pl-k">=</span>
  checkResult.constraintResults.map {
    <span class="pl-k">case</span> (constraint, <span class="pl-en">ConstraintSuccess</span>(_)) <span class="pl-k">=&gt;</span> <span class="pl-c1">true</span>
    <span class="pl-k">case</span> (constraint, <span class="pl-en">ConstraintFailure</span>(_)) <span class="pl-k">=&gt;</span> <span class="pl-c1">false</span>
  }.reduce(_ <span class="pl-k">&amp;&amp;</span> _)

<span class="pl-k">val</span> <span class="pl-en">results</span> <span class="pl-k">=</span> <span class="pl-en">Runner</span>.run(<span class="pl-en">Seq</span>(check1, check2), <span class="pl-en">Seq</span>.empty)
assert(allConstraintsSatisfied(results(check1)))
assert(allConstraintsSatisfied(results(check2)))</pre>
  </div> 
  <p>If you want to fail the data load if the number of rows and the unique key constraints are not satisfied, but the duration constraint can be violated, you can write individual assertions for each constraint result.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">numRowsConstraint</span> <span class="pl-k">=</span> <span class="pl-en">Check</span>.hasNumRows(_ <span class="pl-k">&gt;=</span> <span class="pl-c1">3</span>)
<span class="pl-k">val</span> <span class="pl-en">uniqueKeyConstraint</span> <span class="pl-k">=</span> <span class="pl-en">Check</span>.hasUniqueKey(<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>customerId<span class="pl-pds">"</span></span>)
<span class="pl-k">val</span> <span class="pl-en">durationConstraint</span> <span class="pl-k">=</span> <span class="pl-en">Check</span>.satisfies(<span class="pl-s"><span class="pl-pds">"</span>duration &gt; 0<span class="pl-pds">"</span></span>)

<span class="pl-k">val</span> <span class="pl-en">check</span> <span class="pl-k">=</span> <span class="pl-en">Check</span>(contracts)
  .addConstraint(numRowsConstraint)
  .addConstraint(uniqueKeyConstraint)
  .addConstraint(durationConstraint)

<span class="pl-k">val</span> <span class="pl-en">results</span> <span class="pl-k">=</span> <span class="pl-en">Runner</span>.run(<span class="pl-en">Seq</span>(check), <span class="pl-en">Seq</span>.empty)
<span class="pl-k">val</span> <span class="pl-en">constraintResults</span> <span class="pl-k">=</span> results(check).constraintResults
assert(constraintResults(numRowsConstraint).<span class="pl-c1">isInstanceOf</span>[<span class="pl-en">ConstraintSuccess</span>])
assert(constraintResults(uniqueKeyConstraint).<span class="pl-c1">isInstanceOf</span>[<span class="pl-en">ConstraintSuccess</span>])</pre>
  </div> 
  <h3><a id="user-content-python-api-1" class="anchor" href="https://github.com/frosner/drunken-data-quality#python-api-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Python API</h3> 
  <p>In order to use the Python API, you have to start PySpark with the DDQ jar added. Unfortunately, using the <code>--packages</code> way is <a href="https://issues.apache.org/jira/browse/SPARK-5185" target="_blank">not working in Spark &lt; 2.0</a>.</p> 
  <pre><code>pyspark --driver-class-path drunken-data-quality_2.11-x.y.z.jar
</code></pre> 
  <p>Then you can create a dummy dataframe and run a few checks.</p> 
  <div class="highlight highlight-source-python">
   <pre><span class="pl-k">from</span> pyddq.core <span class="pl-k">import</span> Check

df <span class="pl-k">=</span> spark.createDataFrame([(<span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>), (<span class="pl-c1">1</span>, <span class="pl-c1">None</span>), (<span class="pl-c1">3</span>, <span class="pl-s"><span class="pl-pds">"</span>c<span class="pl-pds">"</span></span>)])
check <span class="pl-k">=</span> Check(df)
check.hasUniqueKey(<span class="pl-s"><span class="pl-pds">"</span>_1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>_2<span class="pl-pds">"</span></span>).isNeverNull(<span class="pl-s"><span class="pl-pds">"</span>_1<span class="pl-pds">"</span></span>).run()</pre>
  </div> 
  <p>Just as the Scala version of DDQ, PyDDQ supports multiple reporters. In order to facilitate them, you can use <code>pyddq.streams</code>, which wraps the Java streams.</p> 
  <div class="highlight highlight-source-python">
   <pre><span class="pl-k">from</span> pyddq.reporters <span class="pl-k">import</span> MarkdownReporter, ConsoleReporter
<span class="pl-k">from</span> pyddq.streams <span class="pl-k">import</span> FileOutputStream, ByteArrayOutputStream
<span class="pl-k">import</span> sys

<span class="pl-c"><span class="pl-c">#</span> send the report in a console-friendly format the standard output</span>
<span class="pl-c"><span class="pl-c">#</span> and in markdown format to the bytearray</span>
stdout_stream <span class="pl-k">=</span> FileOutputStream(sys.stdout)
bytearray_stream <span class="pl-k">=</span> ByteArrayOutputStream()

Check(df)\
    .hasUniqueKey(<span class="pl-s"><span class="pl-pds">"</span>_1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>_2<span class="pl-pds">"</span></span>)\
    .isNeverNull(<span class="pl-s"><span class="pl-pds">"</span>_1<span class="pl-pds">"</span></span>)\
    .run([MarkdownReporter(bytearray_stream), ConsoleReporter(stdout_stream)])

<span class="pl-c"><span class="pl-c">#</span> print markdown report</span>
<span class="pl-c1">print</span> bytearray_stream.get_output()</pre>
  </div> 
  <h2><a id="user-content-spark-version-compatibility" class="anchor" href="https://github.com/frosner/drunken-data-quality#spark-version-compatibility" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Spark Version Compatibility</h2> 
  <p>Although we try to maintain as much compatibility between all available Spark versions we cannot guarantee that everything works smoothly for every possible combination of DDQ and Spark versions. The following matrix shows you what version of DDQ is built and tested against what version of Spark.</p> 
  <table>
   <thead> 
    <tr> 
     <th>DDQ Version</th> 
     <th>Spark Version</th> 
    </tr> 
   </thead>
   <tbody> 
    <tr> 
     <td>4.x</td> 
     <td>2.0.x</td> 
    </tr> 
    <tr> 
     <td>3.x</td> 
     <td>1.6.x</td> 
    </tr> 
    <tr> 
     <td>2.x</td> 
     <td>1.3.x</td> 
    </tr> 
    <tr> 
     <td>1.x</td> 
     <td>1.3.x</td> 
    </tr> 
   </tbody>
  </table> 
  <h2><a id="user-content-documentation" class="anchor" href="https://github.com/frosner/drunken-data-quality#documentation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Documentation</h2> 
  <p>For a comprehensive list of available constraints, please refer to the <a href="https://github.com/FRosner/drunken-data-quality/wiki" target="_blank">Wiki</a>.</p> 
  <h2><a id="user-content-authors" class="anchor" href="https://github.com/frosner/drunken-data-quality#authors" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Authors</h2> 
  <ul> 
   <li><a href="https://github.com/FRosner" target="_blank">Frank Rosner</a> (Core, Reporters, Scala API)</li> 
   <li><a href="https://github.com/Gerrrr" target="_blank">Aleksandr Sorokoumov</a> (Python API)</li> 
  </ul> 
  <p>Thanks also to everyone who submitted pull requests, bug reports and feature requests.</p> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/frosner/drunken-data-quality#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p>This project is licensed under the Apache License Version 2.0. For details please see the file called LICENSE.</p> 
 </article>
</div>