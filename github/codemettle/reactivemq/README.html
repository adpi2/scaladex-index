<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-reactivemq" class="anchor" href="https://github.com/codemettle/reactivemq#reactivemq" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>ReActiveMQ</h1> 
  <p>An <a href="http://activemq.apache.org" target="_blank">ActiveMQ</a> client built on <a href="http://akka.io" target="_blank">Akka</a> <a href="https://travis-ci.org/CodeMettle/reactivemq" target="_blank"><img src="https://camo.githubusercontent.com/82a113c6f90f5999c1f97417f765f4bd5061e1ea/68747470733a2f2f7472617669732d63692e6f72672f436f64654d6574746c652f72656163746976656d712e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/CodeMettle/reactivemq.svg?branch=master" style="max-width:100%;"></a></p> 
  <p>The goal of ReActiveMQ is to provide an interface to ActiveMQ messaging that will feel familiar to Akka developers. At this point it is a fairly low-level connection-oriented interface that can consume AMQ queues and topics, send messages to endpoints, and do request-reply messaging, Camel-style, using temporary queues. More features will be added as necessary / requested.</p> 
  <h4><a id="user-content-what-about-akka-camel" class="anchor" href="https://github.com/codemettle/reactivemq#what-about-akka-camel" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>What about <a href="http://doc.akka.io/docs/akka/snapshot/scala/camel.html" target="_blank">akka-camel</a>?</h4> 
  <p>Camel provides a plethora of components, and can be used with JMS/ActiveMQ, and if you need it then by all means use it. If, however, you're bringing in akka-camel, camel-core, and activemq-camel simply to do messaging, dealing with Camel's configuration (string arguments on endpoints, consumers, producers, etc), and adding another even-more blocking layer on top of ActiveMQ, then ReActiveMQ may be for you.</p> 
  <h4><a id="user-content-what-about-insert-jms-provider-here" class="anchor" href="https://github.com/codemettle/reactivemq#what-about-insert-jms-provider-here" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>What about (insert-jms-provider-here)?</h4> 
  <p>ReActiveMQ only uses JMS code, except to create the <code>ActiveMQConnectionFactory</code> and <code>ActiveMQMessage</code>s. If desired, ActiveMQ support can easily be moved into an optional library and other providers could be added. Make a feature request!</p> 
  <h2><a id="user-content-import" class="anchor" href="https://github.com/codemettle/reactivemq#import" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Import</h2> 
  <p>ReActiveMQ depends on akka-actor and activemq-client, but the dependencies are marked as <code>Provided</code>, so the end user must specify them as dependencies.</p> 
  <h4><a id="user-content-add-dependencies" class="anchor" href="https://github.com/codemettle/reactivemq#add-dependencies" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Add Dependencies:</h4> 
  <p>sbt:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
    <span class="pl-s"><span class="pl-pds">"</span>com.codemettle.reactivemq<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>reactivemq<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.5.0<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>org.apache.activemq<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>activemq-client<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>version<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>com.typesafe.akka<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>akka-actor<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>version<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <p>Maven:</p> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">dependency</span>&gt;
    &lt;<span class="pl-ent">groupId</span>&gt;com.codemettle.reactivemq&lt;/<span class="pl-ent">groupId</span>&gt;
    &lt;<span class="pl-ent">artifactId</span>&gt;reactivemq&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;0.5.0&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;
&lt;<span class="pl-ent">dependency</span>&gt;
    &lt;<span class="pl-ent">groupId</span>&gt;org.apache.activemq&lt;/<span class="pl-ent">groupId</span>&gt;
    &lt;<span class="pl-ent">artifactId</span>&gt;activemq-client&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;version&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;
&lt;<span class="pl-ent">dependency</span>&gt;
    &lt;<span class="pl-ent">groupId</span>&gt;com.typesafe.akka&lt;/<span class="pl-ent">groupId</span>&gt;
    &lt;<span class="pl-ent">artifactId</span>&gt;akka-actor&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;version&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre>
  </div> 
  <h2><a id="user-content-usage" class="anchor" href="https://github.com/codemettle/reactivemq#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <h5><a id="user-content-create-a-connection" class="anchor" href="https://github.com/codemettle/reactivemq#create-a-connection" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Create a connection:</h5> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.codemettle.reactivemq.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">com.codemettle.reactivemq.ReActiveMQMessages.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">com.codemettle.reactivemq.model.</span><span class="pl-v">_</span>

<span class="pl-en">ReActiveMQExtension</span>(system).manager <span class="pl-k">!</span> <span class="pl-en">GetConnection</span>(<span class="pl-s"><span class="pl-pds">"</span>nio://esb:61616<span class="pl-pds">"</span></span>)

<span class="pl-c"><span class="pl-c">//</span> connectionActor replies with ConnectionEstablished(request, connectionActor) or</span>
<span class="pl-c"><span class="pl-c">//</span>  ConnectionFailed(request, reason)</span></pre>
  </div> 
  <p>Connections can be named:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-en">ReActiveMQExtension</span>(system).manager <span class="pl-k">!</span> <span class="pl-en">GetConnection</span>(<span class="pl-s"><span class="pl-pds">"</span>nio://esb:61616<span class="pl-pds">"</span></span>, <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>myName<span class="pl-pds">"</span></span>))

<span class="pl-c"><span class="pl-c">/*</span> .... <span class="pl-c">*/</span></span>

<span class="pl-k">val</span> <span class="pl-en">connSel</span> <span class="pl-k">=</span> context.actorSelection(<span class="pl-s"><span class="pl-pds">"</span>/system/reActiveMQ/myName<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>Connections can be authenticated:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-en">ReActiveMQExtension</span>(system).manager <span class="pl-k">!</span> <span class="pl-en">GetAuthenticatedConnection</span>(<span class="pl-s"><span class="pl-pds">"</span>nio://esb:61616<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>pass<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <h5><a id="user-content-close-connections" class="anchor" href="https://github.com/codemettle/reactivemq#close-connections" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Close connections:</h5> 
  <div class="highlight highlight-source-scala">
   <pre>connectionActor <span class="pl-k">!</span> <span class="pl-en">CloseConnection</span></pre>
  </div> 
  <p>The <code>connectionActor</code> will stay alive and valid, maintaining established subscriptions, until <code>reactivemq.idle-connection-factory-shutdown</code> time has elapsed. A new <code>GetConnection</code> will re-use the <code>connectionActor</code> until the idle shutdown, after which a new connection will be created in response to a <code>GetConnection</code>. If a connection is reestablished before the timeout ends, then any actors that are still alive and had previously subscribed to connection status or consumed from queues/topics will be re-subscribed.</p> 
  <h5><a id="user-content-consume-from-amq" class="anchor" href="https://github.com/codemettle/reactivemq#consume-from-amq" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Consume from AMQ:</h5> 
  <div class="highlight highlight-source-scala">
   <pre>connectionActor <span class="pl-k">!</span> <span class="pl-en">ConsumeFromQueue</span>(<span class="pl-s"><span class="pl-pds">"</span>queueName<span class="pl-pds">"</span></span>) <span class="pl-c"><span class="pl-c">//</span> shared defaults to true, but can be overridden</span>
connectionActor <span class="pl-k">!</span> <span class="pl-en">ConsumeFromTopic</span>(<span class="pl-s"><span class="pl-pds">"</span>topicName<span class="pl-pds">"</span></span>) <span class="pl-c"><span class="pl-c">//</span> shared defaults to false, but can be overridden</span>
connectionActor <span class="pl-k">!</span> <span class="pl-en">Consume</span>(<span class="pl-en">Queue</span>(<span class="pl-s"><span class="pl-pds">"</span>queueName<span class="pl-pds">"</span></span>), sharedConsumer <span class="pl-k">=</span> <span class="pl-c1">false</span>)
connectionActor <span class="pl-k">!</span> <span class="pl-en">Consume</span>(<span class="pl-en">Topic</span>(<span class="pl-s"><span class="pl-pds">"</span>topicName<span class="pl-pds">"</span></span>), sharedConsumer <span class="pl-k">=</span> <span class="pl-c1">true</span>)

<span class="pl-c"><span class="pl-c">//</span> sender of the consume message receives AMQMessage(body, properties, headers) messages</span>
<span class="pl-c"><span class="pl-c">//</span> for non-shared, the sender additionally receives status messages (see below)</span></pre>
  </div> 
  <p>ReActiveMQ also has akka-camel-ish Consumer actors:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">//</span> it's important that connection and consumeFrom are defined as defs and not vals, unless in the constructor</span>

<span class="pl-k">class</span> <span class="pl-en">MyTopicConsumer</span>(<span class="pl-k">val</span> <span class="pl-en">connection</span><span class="pl-k">:</span> <span class="pl-en">ActorRef</span>) <span class="pl-k">extends</span> <span class="pl-e">TopicConsumer</span> {
    <span class="pl-k">def</span> <span class="pl-en">consumeFrom</span> <span class="pl-k">=</span> <span class="pl-en">Topic</span>(<span class="pl-s"><span class="pl-pds">"</span>mytopic<span class="pl-pds">"</span></span>)

    <span class="pl-k">def</span> <span class="pl-en">receive</span> <span class="pl-k">=</span> {
        <span class="pl-k">case</span> <span class="pl-v">msg</span>: <span class="pl-en">AMQMessage</span> <span class="pl-k">=&gt;</span>
    }
}

<span class="pl-k">class</span> <span class="pl-en">MyQueueConsumer</span>(<span class="pl-k">val</span> <span class="pl-en">consumeFrom</span><span class="pl-k">:</span> <span class="pl-en">Queue</span>) <span class="pl-k">extends</span> <span class="pl-e">QueueConsumer</span> {
    <span class="pl-k">def</span> <span class="pl-en">connection</span> <span class="pl-k">=</span> <span class="pl-en">ReActiveMQExtension</span>(context.system) autoConnects <span class="pl-s"><span class="pl-pds">"</span>myconn<span class="pl-pds">"</span></span>

    <span class="pl-k">def</span> <span class="pl-en">receive</span> <span class="pl-k">=</span> {
        <span class="pl-k">case</span> <span class="pl-v">msg</span>: <span class="pl-en">AMQMessage</span> <span class="pl-k">=&gt;</span>
    }
}</pre>
  </div> 
  <h6><a id="user-content-shared-consumers" class="anchor" href="https://github.com/codemettle/reactivemq#shared-consumers" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Shared consumers</h6> 
  <p>By default, consuming from topics opens up 1 consumer in ActiveMQ, and broadcasts all received messages to all subscribers, but consumers established with <code>sharedConsumer</code> set to false will open multiple subscribers in ActiveMQ.</p> 
  <p>By default, consuming from queues opens up 1 consumer per subscriber in ActiveMQ, but can be shared by setting <code>sharedConsumer</code> to <code>true</code> (which, of course, makes all consumers receive all messages instead of ActiveMQ's behavior of load balancing between multiple queue consumers).</p> 
  <h6><a id="user-content-dedicated-non-shared-consumers" class="anchor" href="https://github.com/codemettle/reactivemq#dedicated-non-shared-consumers" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Dedicated (non-shared) consumers</h6> 
  <p>Any consumer created as dedicated (<code>sharedConsumer = false</code>) gets status messages about the consumer state, and, additionally, is allowed to end its dedicated subscriptions without stopping (useful for cleanly shutting down).</p> 
  <p>Upon subscribing, the subscriber will receive a <code>ConsumeSuccess(Destination)</code> message, or a <code>ConsumeFailed(Destination, Throwable)</code> message. If auto-reconnect is enabled, and the connection is interrupted and reestablished, then ReActiveMQ will attempt to reestablish all consumers (shared and dedicated alike), and dedicated consumers will receive new <code>ConsumeSuccess</code>/<code>ConsumeFailed</code> messages.</p> 
  <p>To stop a dedicated consumer subscription, send an <code>EndConsumption(Destination)</code> message to the connection actor from the subscribing actor. When the consumer is closed, the subscriber will be sent a <code>ConsumptionEnded(Destination)</code> message.</p> 
  <h5><a id="user-content-send-messages" class="anchor" href="https://github.com/codemettle/reactivemq#send-messages" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Send messages:</h5> 
  <div class="highlight highlight-source-scala">
   <pre>connectionActor <span class="pl-k">!</span> <span class="pl-en">SendMessage</span>(<span class="pl-en">Queue</span>(<span class="pl-s"><span class="pl-pds">"</span>queueName<span class="pl-pds">"</span></span>), <span class="pl-en">AMQMessage</span>(body))

<span class="pl-c"><span class="pl-c">//</span> sender receives SendAck, or a Status.Failure(reason)</span></pre>
  </div> 
  <p>ReActiveMQ also has an akka-camel-ish Producer actor:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">class</span> <span class="pl-en">MyProducer</span>(<span class="pl-k">val</span> <span class="pl-en">destination</span><span class="pl-k">:</span> <span class="pl-en">Destination</span>) <span class="pl-k">extends</span> <span class="pl-e">Producer</span> <span class="pl-k">with</span> <span class="pl-e">Oneway</span>

<span class="pl-k">class</span> <span class="pl-en">My2ndProducer</span> <span class="pl-k">extends</span> <span class="pl-e">Producer</span> {
    <span class="pl-k">def</span> <span class="pl-en">destination</span> <span class="pl-k">=</span> <span class="pl-en">Topic</span>(<span class="pl-s"><span class="pl-pds">"</span>blah<span class="pl-pds">"</span></span>)

    <span class="pl-k">override</span> <span class="pl-k">protected</span> <span class="pl-k">def</span> <span class="pl-en">oneway</span> <span class="pl-k">=</span> <span class="pl-c1">true</span>
}

<span class="pl-k">class</span> <span class="pl-en">My3rdProducer</span> <span class="pl-k">extends</span> <span class="pl-e">Producer</span> <span class="pl-k">with</span> <span class="pl-e">Oneway</span> {
    <span class="pl-k">def</span> <span class="pl-en">destination</span> <span class="pl-k">=</span> <span class="pl-en">Queue</span>(<span class="pl-s"><span class="pl-pds">"</span>q<span class="pl-pds">"</span></span>)

    <span class="pl-k">override</span> <span class="pl-k">protected</span> <span class="pl-k">def</span> <span class="pl-en">transformOutgoingMessage</span>(<span class="pl-v">msg</span>: <span class="pl-en">Any</span>) <span class="pl-k">=</span> msg <span class="pl-k">match</span> {
        <span class="pl-k">case</span> <span class="pl-v">str</span>: <span class="pl-k">String</span> <span class="pl-k">=&gt;</span> str.reverse
        <span class="pl-k">case</span> _ <span class="pl-k">=&gt;</span> msg
    }
}</pre>
  </div> 
  <h5><a id="user-content-request-reply" class="anchor" href="https://github.com/codemettle/reactivemq#request-reply" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Request reply:</h5> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">//</span> or use ask/? to get a future of the response</span>
connectionActor <span class="pl-k">!</span> <span class="pl-en">RequestMessage</span>(<span class="pl-en">Queue</span>(<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>), <span class="pl-en">AMQMessage</span>(body))

<span class="pl-c"><span class="pl-c">//</span> sender receives the response, or a Status.Failure(reason)</span>

<span class="pl-c"><span class="pl-c">//</span> ReActiveMQ also has an akka-camel-ish Producer actor</span>

<span class="pl-k">class</span> <span class="pl-en">MyProducer</span> <span class="pl-k">extends</span> <span class="pl-e">Producer</span> {
    <span class="pl-k">def</span> <span class="pl-en">destination</span> <span class="pl-k">=</span> <span class="pl-en">Queue</span>(<span class="pl-s"><span class="pl-pds">"</span>aQueue<span class="pl-pds">"</span></span>)
}

<span class="pl-k">val</span> <span class="pl-en">prod</span> <span class="pl-k">=</span> context.actorOf(<span class="pl-en">Props</span>[<span class="pl-en">MyProducer</span>])

(prod <span class="pl-k">?</span> <span class="pl-s"><span class="pl-pds">"</span>respond to this<span class="pl-pds">"</span></span>).mapTo[<span class="pl-en">AMQMessage</span>]
(prod <span class="pl-k">?</span> <span class="pl-en">AMQMessage</span>(<span class="pl-s"><span class="pl-pds">"</span>body<span class="pl-pds">"</span></span>, <span class="pl-en">JMSMessageProperties</span>().copy(`type` <span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>myJmsType<span class="pl-pds">"</span></span>)))).mapTo[<span class="pl-en">AMQMessage</span>]</pre>
  </div> 
  <h5><a id="user-content-connection-status-notifications" class="anchor" href="https://github.com/codemettle/reactivemq#connection-status-notifications" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Connection status notifications:</h5> 
  <div class="highlight highlight-source-scala">
   <pre>connectionActor <span class="pl-k">!</span> <span class="pl-en">SubscribeToConnectionStatus</span>

<span class="pl-k">def</span> <span class="pl-en">receive</span> <span class="pl-k">=</span> {
    <span class="pl-k">case</span> <span class="pl-en">ConnectionInterrupted</span>(<span class="pl-v">connectionActor</span>: <span class="pl-en">ActorRef</span>) <span class="pl-k">=&gt;</span>

    <span class="pl-k">case</span> <span class="pl-en">ConnectionReestablished</span>(<span class="pl-v">connectionActor</span>: <span class="pl-en">ActorRef</span>) <span class="pl-k">=&gt;</span>
}

<span class="pl-c"><span class="pl-c">//</span> ConnectionReestablished messages will also be sent from standard connections newly</span>
<span class="pl-c"><span class="pl-c">//</span>  established with GetConnection that had previously been closed, but not closed</span>
<span class="pl-c"><span class="pl-c">//</span>  long enough for connection cleanup</span></pre>
  </div> 
  <h5><a id="user-content-auto-connect" class="anchor" href="https://github.com/codemettle/reactivemq#auto-connect" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Auto-connect:</h5> 
  <p>Configure autoconnects in <code>application.conf</code>:</p> 
  <pre><code>reactivemq {
  autoconnect {
    myConn.address = "nio://blah:61616"
    secondConn {
      address = "vm://localhost"
      username = user
      password = pass
    }
  }
}
</code></pre> 
  <p>And then connections are available on the extension:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">connectionActor</span> <span class="pl-k">=</span> <span class="pl-en">ReActiveMQExtension</span>(system) autoConnects <span class="pl-s"><span class="pl-pds">"</span>myConn<span class="pl-pds">"</span></span>

<span class="pl-c"><span class="pl-c">//</span> or perhaps</span>

context.actorSelection(<span class="pl-s"><span class="pl-pds">"</span>/system/reActiveMQ/secondConn<span class="pl-pds">"</span></span>) <span class="pl-k">!</span> <span class="pl-en">Identify</span>(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>)
<span class="pl-c"><span class="pl-c">//</span> standard ActorIdentity response with the connectionActor</span></pre>
  </div> 
  <h2><a id="user-content-plans" class="anchor" href="https://github.com/codemettle/reactivemq#plans" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Plans</h2> 
  <ul> 
   <li>More examples for using the library; more information in README</li> 
   <li>Async sending</li> 
   <li>Needs unit tests</li> 
   <li>Support akka-streams, consume queues/topics as Sources, and send messages as Sinks</li> 
   <li>Easier actor traits, like akka-camel, to create Consumers</li> 
   <li>???</li> 
  </ul> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/codemettle/reactivemq#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p><a href="http://www.apache.org/licenses/LICENSE-2.0.html" target="_blank">Apache License, 2.0</a></p> 
  <h2><a id="user-content-changelog" class="anchor" href="https://github.com/codemettle/reactivemq#changelog" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Changelog</h2> 
  <ul> 
   <li><strong>0.5.5</strong> 
    <ul> 
     <li>Oops - request/reply <code>Producer</code> wasn't honoring the <code>requestTimeout</code> parameter</li> 
    </ul> </li> 
   <li><strong>0.5.4</strong> 
    <ul> 
     <li>Oops - was treating empty/null credentials as valid and passing them on to AMQ</li> 
    </ul> </li> 
   <li><strong>0.5.3</strong> 
    <ul> 
     <li>Allow automatic connections to be authenticated; the format in application.conf has changed but old configurations are still loaded correctly</li> 
    </ul> </li> 
   <li><strong>0.5.2</strong> 
    <ul> 
     <li>Load ReActiveMQ as a system actor</li> 
     <li>Fix issue in Request-Reply wrt accessing actor state from a future leading to NPEs</li> 
    </ul> </li> 
   <li><strong>0.5.1</strong> 
    <ul> 
     <li>SendMessage messages are now replied to with a SendAck case object instead of Unit</li> 
     <li>AMQMessage.bodyAs method (like CamelMessage.bodyAs except no conversion tried, just a ClassCastException if the type is wrong)</li> 
     <li>Support jms.Message (no body, AMQMessage's body field will be null)</li> 
     <li>QueueConsumer can be in consume-only mode, saves an actor creation for each message, but replying to sender() goes to deadLetters</li> 
     <li>AMQMessage.camelHeaders - yields a map with any headers on the message, plus all the JMSMessageProperty properties in the map with "JMS" prefix (allows easier transition from Camel)</li> 
     <li>Producer.transformResponse can be overridden like akka-camel's Producer, may get changed in a future release to return an Option[(Any) =&gt; Any] so subclasses can return None and save an actor creation.</li> 
     <li>Use the request message's MessageID as the response's CorrelationID if the request had no CorrelationID in request/reply mode</li> 
    </ul> </li> 
   <li><strong>0.5.0</strong> 
    <ul> 
     <li>Initial Release</li> 
     <li>Support for major JMS operations in an actor+message passing interface</li> 
     <li>Support for akka-camel-ish Consumer and Producer actors</li> 
     <li>Support for building immutable objects that represent JMS messages in a Scala-ish manner</li> 
     <li>Specify connections to initiate at Extension load time statically in application.conf</li> 
    </ul> </li> 
  </ul> 
  <h2><a id="user-content-credits" class="anchor" href="https://github.com/codemettle/reactivemq#credits" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Credits</h2> 
  <ul> 
   <li>Authored by <a href="https://github.com/codingismy11to7" target="_blank">@codingismy11to7</a> for <a href="https://github.com/CodeMettle" target="_blank">@CodeMettle</a></li> 
  </ul> 
 </article>
</div>