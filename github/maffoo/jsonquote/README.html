<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a href="https://github.com/maffoo/jsonquote#jsonquote" aria-hidden="true" class="anchor" id="user-content-jsonquote" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>jsonquote</h1> 
  <p><a href="http://travis-ci.org/maffoo/jsonquote" target="_blank"><img src="https://camo.githubusercontent.com/498010617238334de93d7140dfddcb5612d2ab0e/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f6d6166666f6f2f6a736f6e71756f74652e706e67" alt="Build Status" data-canonical-src="https://secure.travis-ci.org/maffoo/jsonquote.png" style="max-width:100%;"></a></p> 
  <p>jsonquote is a little library that lets you build JSON in Scala using string interpolation. It uses macros to parse and validate your json at compile time, and to ensure that the values you are trying to interpolate are of the appropriate types for the places in the json where they are to be interpolated. jsonquote supports play-json, spray-json, and lift-json.</p> 
  <h2><a href="https://github.com/maffoo/jsonquote#using-jsonquote" aria-hidden="true" class="anchor" id="user-content-using-jsonquote" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Using jsonquote</h2> 
  <p>jsonquote is built for scala 2.10 and 2.11, and published on bintray. To include it in your project, simply add the desired artifact as a maven dependency for the json library you would like to use:</p> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-en">Resolver</span>.jcenterRepo

<span class="pl-c"><span class="pl-c">//</span> use the basic 'literal' json support built in to jsonquote</span>
libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>net.maffoo<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>jsonquote-core<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.4.0<span class="pl-pds">"</span></span>

<span class="pl-c"><span class="pl-c">//</span> use one of the supported third-party json libraries</span>
libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>net.maffoo<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>jsonquote-lift<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.4.0<span class="pl-pds">"</span></span>

<span class="pl-c"><span class="pl-c">//</span> note that for Scala 2.11 version 0.4.0 and above depends on play-json 2.5.X</span>
<span class="pl-c"><span class="pl-c">//</span> older versions, as well as the artifacts published for Scala 2.10, depend on 2.4.X</span>
libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>net.maffoo<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>jsonquote-play<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.4.0<span class="pl-pds">"</span></span>

libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>net.maffoo<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>jsonquote-spray<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.4.0<span class="pl-pds">"</span></span>
</pre>
  </div> 
  <h2><a href="https://github.com/maffoo/jsonquote#examples" aria-hidden="true" class="anchor" id="user-content-examples" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Examples</h2> 
  <p>Here are some examples of how the interpolation works. First, import everything:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">net.maffoo.jsonquote.play.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">net.maffoo.jsonquote.play.</span><span class="pl-v">_</span>

scala<span class="pl-k">&gt;</span> <span class="pl-k">import</span> <span class="pl-v">play.api.libs.json.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">play.api.libs.json.</span><span class="pl-v">_</span></pre>
  </div> 
  <p>Now, we can interpolate single values:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">hi</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Hello, world!<span class="pl-pds">"</span></span>
hi<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> <span class="pl-en">Hello</span>, world<span class="pl-k">!</span>

scala<span class="pl-k">&gt;</span> json<span class="pl-s"><span class="pl-pds">"</span>$hi<span class="pl-pds">"</span></span>
res0<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsValue</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Hello, world!<span class="pl-pds">"</span></span>

scala<span class="pl-k">&gt;</span> json<span class="pl-s"><span class="pl-pds">"</span>[$hi, $hi]<span class="pl-pds">"</span></span>
res1<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsValue</span> <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">"</span>Hello, world!<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>Hello, world!<span class="pl-pds">"</span></span>]

scala<span class="pl-k">&gt;</span> json<span class="pl-s"><span class="pl-pds">"</span>{greeting: $hi}<span class="pl-pds">"</span></span>
res2<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsValue</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>greeting<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>Hello, world!<span class="pl-pds">"</span></span>}</pre>
  </div> 
  <p>field names:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">foo</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>
foo<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> bar

scala<span class="pl-k">&gt;</span> json<span class="pl-s"><span class="pl-pds">"</span>{$foo: 123}<span class="pl-pds">"</span></span>
res3<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsValue</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">123</span>}</pre>
  </div> 
  <p>key-value pairs in objects:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">item</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>msg<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>yippee!<span class="pl-pds">"</span></span>
item<span class="pl-k">:</span> (<span class="pl-k">String</span>, <span class="pl-k">String</span>) <span class="pl-k">=</span> (msg,yippee<span class="pl-k">!</span>)

scala<span class="pl-k">&gt;</span> json<span class="pl-s"><span class="pl-pds">"</span>{$item}<span class="pl-pds">"</span></span>
res4<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsValue</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>msg<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>yippee!<span class="pl-pds">"</span></span>}</pre>
  </div> 
  <p>We can also interpolate multiple values or fields from Iterable or Option all at once (the .. syntax here was chosen to mirror that used in quasiquotes for scala macros):</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">numbers</span> <span class="pl-k">=</span> <span class="pl-en">List</span>(<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>,<span class="pl-c1">4</span>,<span class="pl-c1">5</span>)
numbers<span class="pl-k">:</span> <span class="pl-en">List</span>[<span class="pl-k">Int</span>] <span class="pl-k">=</span> <span class="pl-en">List</span>(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">4</span>, <span class="pl-c1">5</span>)

scala<span class="pl-k">&gt;</span> json<span class="pl-s"><span class="pl-pds">"</span>[..$numbers]<span class="pl-pds">"</span></span>
res5<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsValue</span> <span class="pl-k">=</span> [<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>,<span class="pl-c1">4</span>,<span class="pl-c1">5</span>]

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> (a, b) <span class="pl-k">=</span> (<span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>here<span class="pl-pds">"</span></span>), <span class="pl-c1">None</span>)
a<span class="pl-k">:</span> <span class="pl-en">Some</span>[(<span class="pl-k">String</span>, <span class="pl-k">String</span>)] <span class="pl-k">=</span> <span class="pl-en">Some</span>((a,here))
b<span class="pl-k">:</span> <span class="pl-c1">None</span>.type <span class="pl-k">=</span> <span class="pl-c1">None</span>

scala<span class="pl-k">&gt;</span> json<span class="pl-s"><span class="pl-pds">"</span>{..$a, ..$b}<span class="pl-pds">"</span></span>
res6<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsValue</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>here<span class="pl-pds">"</span></span>}</pre>
  </div> 
  <p>Note that when interpolating multiple values, you may see type errors if you try to map over collections. This is due to interactions between scala's type inference on collection builders, macro defs, and the StringContext method call into which the compiler transforms the interpolated string. This requires giving the compiler a hint about what concrete collection type you want:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">xs</span> <span class="pl-k">=</span> <span class="pl-en">Seq</span>(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">2</span>)
xs<span class="pl-k">:</span> <span class="pl-en">Seq</span>[(<span class="pl-k">String</span>, <span class="pl-k">Int</span>)] <span class="pl-k">=</span> <span class="pl-en">List</span>((a,<span class="pl-c1">1</span>), (b,<span class="pl-c1">2</span>))

scala<span class="pl-k">&gt;</span> json<span class="pl-s"><span class="pl-pds">"</span>[..${xs.map(_._1)}]<span class="pl-pds">"</span></span>
&lt;<span class="pl-ent">console</span>&gt;<span class="pl-k">:</span><span class="pl-c1">15</span><span class="pl-k">:</span> <span class="pl-v">error</span>: required <span class="pl-en">Iterable</span>[_] but got <span class="pl-en">Any</span>
              json<span class="pl-s"><span class="pl-pds">"</span>[..${xs.map(_._1)}]<span class="pl-pds">"</span></span>
                              ^

scala<span class="pl-k">&gt;</span> json<span class="pl-s"><span class="pl-pds">"</span>[..${xs.map(_._1).toSeq}]<span class="pl-pds">"</span></span>
res1<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsArray</span> <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>]</pre>
  </div> 
  <p>Alternately, we can define optional fields with a name but optional value that will be dropped from the final result if the value is None:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> (some, none) <span class="pl-k">=</span> (<span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>hello!<span class="pl-pds">"</span></span>), <span class="pl-c1">None</span>)
some<span class="pl-k">:</span> <span class="pl-en">Some</span>[<span class="pl-k">String</span>] <span class="pl-k">=</span> <span class="pl-en">Some</span>(hello<span class="pl-k">!</span>)
none<span class="pl-k">:</span> <span class="pl-c1">None</span>.type <span class="pl-k">=</span> <span class="pl-c1">None</span>

scala<span class="pl-k">&gt;</span> json<span class="pl-s"><span class="pl-pds">"</span>{msg:? $some, msg2:? $none}<span class="pl-pds">"</span></span>
res7<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsObject</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>msg<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>hello!<span class="pl-pds">"</span></span>}</pre>
  </div> 
  <p>Variables of type JsValue are interpolated as-is:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">list</span> <span class="pl-k">=</span> json<span class="pl-s"><span class="pl-pds">"</span>[1,2,3,4]<span class="pl-pds">"</span></span>
list<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsValue</span> <span class="pl-k">=</span> [<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>,<span class="pl-c1">4</span>]

scala<span class="pl-k">&gt;</span> json<span class="pl-s"><span class="pl-pds">"</span>{list: $list}<span class="pl-pds">"</span></span>
res8<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsValue</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>list<span class="pl-pds">"</span></span><span class="pl-k">:</span>[<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>,<span class="pl-c1">4</span>]}</pre>
  </div> 
  <p>Other variables are implicitly converted to JsValue and the compiler will complain if there is no implicit conversion in scope:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Foo</span>(<span class="pl-v">a</span>: <span class="pl-k">String</span>, <span class="pl-v">b</span>: <span class="pl-k">Int</span>)
defined <span class="pl-k">class</span> <span class="pl-en">Foo</span>

scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">foo</span> <span class="pl-k">=</span> <span class="pl-en">Foo</span>(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>, <span class="pl-c1">1</span>)
foo<span class="pl-k">:</span> <span class="pl-en">Foo</span> <span class="pl-k">=</span> <span class="pl-en">Foo</span>(a,<span class="pl-c1">1</span>)

scala<span class="pl-k">&gt;</span> json<span class="pl-s"><span class="pl-pds">"</span>{foo: $foo}<span class="pl-pds">"</span></span>
&lt;<span class="pl-ent">console</span>&gt;<span class="pl-k">:</span><span class="pl-c1">17</span><span class="pl-k">:</span> <span class="pl-v">error</span>: could not find <span class="pl-k">implicit</span> value of <span class="pl-k">type</span> <span class="pl-en">Writes</span>[<span class="pl-en">Foo</span>]
              json<span class="pl-s"><span class="pl-pds">"</span>{foo: $foo}<span class="pl-pds">"</span></span>
                          ^

scala<span class="pl-k">&gt;</span> <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">fooFormat</span> <span class="pl-k">=</span> <span class="pl-en">Json</span>.writes[<span class="pl-en">Foo</span>]
fooFormat<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">OWrites</span>[<span class="pl-en">Foo</span>] <span class="pl-k">=</span> play.api.libs.json.<span class="pl-en">OWrites</span>$$anon$<span class="pl-c1">2</span><span class="pl-k">@</span>2f2b6ef9

scala<span class="pl-k">&gt;</span> json<span class="pl-s"><span class="pl-pds">"</span>{foo: $foo}<span class="pl-pds">"</span></span>
res9<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsValue</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span><span class="pl-k">:</span>{<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">1</span>}}</pre>
  </div> 
  <p>Even without any interpolation, we get compile-time checking of our json literals, with some syntactic niceties like the ability to omit quotes around field names, and inline comments in your json literals:</p> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">list</span> <span class="pl-k">=</span> json<span class="pl-s"><span class="pl-pds">"</span>[1, 2, 3<span class="pl-pds">"</span></span>
error<span class="pl-k">:</span> exception during macro <span class="pl-v">expansion</span>: 
java.lang.<span class="pl-en">IllegalArgumentException</span><span class="pl-k">:</span> requirement <span class="pl-v">failed</span>: expected <span class="pl-c1">','</span> but got <span class="pl-en">EOF</span>

scala<span class="pl-k">&gt;</span> json<span class="pl-s"><span class="pl-pds">"</span>{ a: 1, b: 2 }<span class="pl-pds">"</span></span>
res18<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsValue</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">1</span>,<span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">2</span>}

scala<span class="pl-k">&gt;</span> json<span class="pl-s"><span class="pl-pds">"</span>{ a: 1 /* this is awesome */, b: 2 /* this is, too */ } // that was great<span class="pl-pds">"</span></span>
res19<span class="pl-k">:</span> play.api.libs.json.<span class="pl-en">JsValue</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">1</span>,<span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">2</span>}</pre>
  </div> 
 </article>
</div>