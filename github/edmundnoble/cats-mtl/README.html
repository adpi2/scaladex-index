<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h2><a href="https://github.com/edmundnoble/cats-mtl#cats-mtl" aria-hidden="true" class="anchor" id="user-content-cats-mtl" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>cats-mtl</h2> 
  <p><a href="https://travis-ci.org/edmundnoble/cats-mtl" target="_blank"><img src="https://camo.githubusercontent.com/7d637bd7ad93dc89a5240a91fa3478a4fbc13de0/68747470733a2f2f6170692e7472617669732d63692e6f72672f747970656c6576656c2f636174732d6d746c2e737667" alt="Build Status" data-canonical-src="https://api.travis-ci.org/typelevel/cats-mtl.svg" style="max-width:100%;"></a> <a href="http://codecov.io/github/edmundnoble/cats-mtl?branch=master" target="_blank"><img src="https://camo.githubusercontent.com/0acc21437d5127af1a9cc673dac1b98c1bbbfc9a/687474703a2f2f636f6465636f762e696f2f6769746875622f747970656c6576656c2f636174732d6d746c2f636f7665726167652e7376673f6272616e63683d6d6173746572" alt="codecov.io" data-canonical-src="http://codecov.io/github/typelevel/cats-mtl/coverage.svg?branch=master" style="max-width:100%;"></a></p> 
  <p>Transformer typeclasses for cats.</p> 
  <p>Provides transformer typeclasses for cats' Monads, Applicatives and Functors.</p> 
  <p>As well, there are some abstractions thrown in that allow you to generically lift MTL typeclasses through transformers.</p> 
  <p>You can have multiple cats-mtl transformer typeclasses in scope at once without implicit ambiguity, unlike in pre-1.0.0 cats or Scalaz 7.</p> 
  <h2><a href="https://github.com/edmundnoble/cats-mtl#sbt" aria-hidden="true" class="anchor" id="user-content-sbt" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>SBT</h2> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>org.typelevel<span class="pl-pds">"</span></span> <span class="pl-k">%%%</span> <span class="pl-s"><span class="pl-pds">"</span>cats-mtl-core<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.0.2<span class="pl-pds">"</span></span></pre>
  </div> 
  <h2><a href="https://github.com/edmundnoble/cats-mtl#typeclasses" aria-hidden="true" class="anchor" id="user-content-typeclasses" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Typeclasses</h2> 
  <h4><a href="https://github.com/edmundnoble/cats-mtl#migration-guide" aria-hidden="true" class="anchor" id="user-content-migration-guide" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Migration guide</h4> 
  <p>Here's a map from cats typeclasses to cats-mtl typeclasses:</p> 
  <ul> 
   <li><code>MonadReader --&gt; ApplicativeLocal</code></li> 
   <li><code>MonadWriter --&gt; FunctorListen</code></li> 
   <li><code>MonadState --&gt; MonadState</code></li> 
   <li><code>FunctorFilter --&gt; FunctorEmpty</code></li> 
   <li><code>TraverseFilter --&gt; TraverseEmpty</code></li> 
  </ul> 
  <p>cats typeclass parameters and context bounds have to be rewritten, to include base classes. For example:</p> 
  <ul> 
   <li><code>[F[_]: FunctorFilter]</code> will have to be adjusted to <code>[F[_]: Functor: FunctorEmpty]</code>,</li> 
   <li><code>[F[_]: MonadReader[?[_], E]]</code> will have to be adjusted to <code>F[_]: Monad: ApplicativeLocal[?[_], E]</code></li> 
  </ul> 
  <p>The root cause for this is addressed in the motivation section.</p> 
  <h4><a href="https://github.com/edmundnoble/cats-mtl#mtl-classes" aria-hidden="true" class="anchor" id="user-content-mtl-classes" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>MTL classes</h4> 
  <p>cats-mtl provides the following "MTL classes":</p> 
  <ul> 
   <li><code>ApplicativeAsk</code></li> 
   <li><code>ApplicativeLocal</code></li> 
   <li><code>FunctorEmpty</code></li> 
   <li><code>FunctorListen</code></li> 
   <li><code>FunctorRaise</code></li> 
   <li><code>FunctorTell</code></li> 
   <li><code>MonadState</code></li> 
  </ul> 
  <p>All of these are typeclasses built on top of other "base" typeclasses to provide extra laws. Because they are commonly combined, the base typeclasses are ambiguous in implicit scope using the typical cats subclass encoding via subtyping. Thus in cats-mtl, the ambiguity is avoided by using an implicit scope with a different priority to house each conversion <code>Subclass =&gt; Base</code>.</p> 
  <p>Compared to cats and Haskell's mtl library, cats-mtl's typeclasses have the smallest superclass dependencies practically possible and in some cases smaller sets of operations so that they can be lifted over more transformers.</p> 
  <h4><a href="https://github.com/edmundnoble/cats-mtl#lifting-classes" aria-hidden="true" class="anchor" id="user-content-lifting-classes" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Lifting classes</h4> 
  <p>Several other typeclasses are provided to lift typeclasses through transformer data types, like <code>OptionT</code>.</p> 
  <p>They form a hierarchy:</p> 
  <pre><code>MonadLayerControl
    \
    ||
    ||
    ||
    ||
    ||
    MonadLayerFunctor &lt;----------- ApplicativeLayerFunctor &lt;----------------- FunctorLayerFunctor
           \                                  \                                          \
           ||                                 ||                                         ||
           ||                                 ||                                         ||
           ||                                 ||                                         ||
           ||                                 ||                                         ||
           ||                                 ||                                         ||
           ||                                 ||                                         ||
           ||                                 ||                                         ||
           || MonadLayer &lt;----------------    || ApplicativeLayer &lt;-------------------   || FunctorLayer
           |\______________                    \______________                            \______________
</code></pre> 
  <p><code>&lt;X&gt;Layer[M, Inner]</code> is three things:</p> 
  <ul> 
   <li>an instance of <code>&lt;X&gt;[Inner]</code> and an instance of <code>&lt;X&gt;[M]</code></li> 
   <li>a <code>FunctionK[Inner, M]</code> which respects the <code>&lt;X&gt;[Inner]</code> and <code>&lt;X&gt;[M]</code> instances</li> 
   <li>a higher-kinded variant of <code>cats.Invariant</code>, which maps <code>&lt;X&gt;</code>-isomorphisms in <code>Inner</code> (<code>(Inner ~&gt; Inner, Inner ~&gt; Inner)</code>) to <code>&lt;X&gt;</code>-homomorphisms in <code>M</code> (<code>M ~&gt; M</code>)</li> 
  </ul> 
  <p>It lets you lift monadic values into other monads which are "larger" than them, for example monads that are being used inside monad transformers. For example, <code>ApplicativeLocal</code> requires <code>MonadLayer</code> to lift through a transformer, because all of its operations are invertible.</p> 
  <p><code>&lt;X&gt;LayerFunctor</code> is a <code>&lt;X&gt;Layer</code> but instead a variant of <code>cats.Functor</code>, which maps <code>&lt;X&gt;</code>-homomorphisms in <code>Inner</code> (<code>Inner ~&gt; Inner</code>) to <code>&lt;X&gt;</code>-homomorphisms in <code>M</code> (<code>M ~&gt; M</code>).</p> 
  <p>Mapping natural transformations over the inner <code>Inner</code> inside <code>M</code>.</p> 
  <p><code>MonadLayerControl</code> allows you to lift operations that <em>consume</em> <code>M</code> using the <code>layerControl</code> method, which allows one the ability to "unravel" an <code>M[A]</code> to an <code>Inner[State[A]]</code> temporarily, as long as the value produced with it is already in the <code>M[_]</code> context. For example, <code>FunctorListen</code> requires this typeclass to lift through a transformer.</p> 
  <h4><a href="https://github.com/edmundnoble/cats-mtl#why-not-monadtrans-etc" aria-hidden="true" class="anchor" id="user-content-why-not-monadtrans-etc" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Why not MonadTrans, etc?</h4> 
  <p><code>MonadTrans</code> forces the shape <code>T[_[_], _]</code> on anything which can "contain" another monad, but newtyping around an instantiated transformer eliminates that shape. I don't see usecases in the wild which lift transformations <code>M ~&gt; N</code> inside a transformer to implement any MTL class, so the extra power was removed.</p> 
  <h4><a href="https://github.com/edmundnoble/cats-mtl#typeclass-summaries" aria-hidden="true" class="anchor" id="user-content-typeclass-summaries" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Typeclass summaries</h4> 
  <p>From the scaladoc:</p> 
  <p><code>ApplicativeAsk[F, E]</code> lets you access an <code>E</code> value in the <code>F[_]</code> context. Intuitively, this means that an <code>E</code> value is required as an input to get "out" of the <code>F[_]</code> context.</p> 
  <p><code>ApplicativeLocal[F, E]</code> lets you substitute all of the <code>ask</code> occurrences in an <code>F[A]</code> value with <code>ask.map(f)</code>, for some <code>f: E =&gt; E</code> which produces a modified <code>E</code> input.</p> 
  <p><code>FunctorEmpty[F]</code> allows you to <code>map</code> and filter out elements simultaneously.</p> 
  <p><code>FunctorListen[F, L]</code> is a function <code>F[A] =&gt; F[(A, L)]</code> which exposes some state that is contained in all <code>F[A]</code> values, and can be modified using <code>tell</code>.</p> 
  <p><code>FunctorRaise[F, E]</code> expresses the ability to raise errors of type <code>E</code> in a functorial <code>F[_]</code> context. This means that a value of type <code>F[A]</code> may contain no <code>A</code> values but instead an <code>E</code> error value, and further <code>map</code> calls will not have any values to execute the passed function on.</p> 
  <p><code>FunctorTell[F, L]</code> is the ability to "log" values <code>L</code> inside a context <code>F[_]</code>, as an effect.</p> 
  <p><code>MonadState[F, S]</code> is the capability to access and modify a state value from inside the <code>F[_]</code> context, using <code>set(s: S): F[Unit]</code> and <code>get: F[S]</code>.</p> 
  <h2><a href="https://github.com/edmundnoble/cats-mtl#motivation" aria-hidden="true" class="anchor" id="user-content-motivation" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Motivation</h2> 
  <p>The motivation for cats-mtl's existence can be summed up in a few points:</p> 
  <ul> 
   <li>using subtyping to express typeclass subclassing results in implicit ambiguities, and doing it another way would result in a massive inconsistency inside cats if only done for MTL classes. for a detailed explanation, see Adelbert Chang's article <a href="http://typelevel.org/blog/2016/09/30/subtype-typeclasses.html" target="_blank">here</a>.</li> 
   <li>most MTL classes do not actually require <code>Monad</code> as a constraint for their laws. cats-mtl weakens this constraint to <code>Functor</code> or <code>Applicative</code> whenever possible, with the result that there's now a notion of a <code>Functor</code> transformer stack and <code>Applicative</code> transformer stack in addition to that of a <code>Monad</code> transformer stack.</li> 
   <li>the most used operations on <code>MonadWriter</code> and <code>MonadReader</code> are <code>tell</code> and <code>ask</code>, and the other operations severely restrict the space of implementations despite being used much less. To fix this <code>FunctorListen</code> and <code>ApplicativeLocal</code> are subclasses of <code>FunctorTell</code> and <code>ApplicativeAsk</code>, which have only the essentials.</li> 
  </ul> 
  <p>The first point there means that it's impossible for cats-mtl type classes to expose their base class instances implicitly; for example <code>F[_]: FunctorEmpty</code> isn't enough for a <code>Functor[F]</code> to be visible in implicit scope, despite <code>FunctorEmpty</code> containing a <code>Functor</code> instance as a member. The root cause here is that prioritizing implicit conversions with subtyping explicitly can't work with cats and cats-mtl separate, as the <code>Functor[F]</code> instance for the type from cats will always conflict with a derived instance.</p> 
  <p>Thus <code>F[_]: FunctorFilter</code>, translated, becomes <code>F[_]: Functor: FunctorEmpty</code>.</p> 
  <p>For some historical info on the origins of cats-mtl, see:</p> 
  <p><a href="https://github.com/typelevel/cats/issues/1210" target="_blank">https://github.com/typelevel/cats/issues/1210</a></p> 
  <p><a href="https://github.com/typelevel/cats/pull/1379" target="_blank">https://github.com/typelevel/cats/pull/1379</a></p> 
  <p><a href="https://github.com/typelevel/cats/pull/1751" target="_blank">https://github.com/typelevel/cats/pull/1751</a></p> 
  <h2><a href="https://github.com/edmundnoble/cats-mtl#laws" aria-hidden="true" class="anchor" id="user-content-laws" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Laws</h2> 
  <p>Type class laws come in a few varieties in cats-mtl: internal, external, and free.</p> 
  <p>Internal laws dictate how multiple operations inter-relate. One side of the equation can always be reduced to a single function application of an operation. These express "default" implementations that should be indistinguishable in result from the actual implementation.</p> 
  <p>External laws are laws that still need to be tested but don't fall into the internal laws.</p> 
  <p>Free laws are (in theory) unnecessary to test, because they are implied by other laws and the types of the operations in question. There will usually be rudimentary proofs or some justification attached to make sure these aren't just made up.</p> 
  <h3><a href="https://github.com/edmundnoble/cats-mtl#community" aria-hidden="true" class="anchor" id="user-content-community" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Community</h3> 
  <p>People are expected to follow the <a href="http://typelevel.org/conduct.html" target="_blank">Typelevel Code of Conduct</a> when discussing cats-mtl on the Github page, Gitter channel, or other venues.</p> 
  <p>We hope that our community will be respectful, helpful, and kind. If you find yourself embroiled in a situation that becomes heated, or that fails to live up to our expectations, you should disengage and contact one of the <a href="https://github.com/edmundnoble/cats-mtl#maintainers" target="_blank">project maintainers</a> in private. We hope to avoid letting minor aggressions and misunderstandings escalate into larger problems.</p> 
 </article>
</div>