<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-akka-zk" class="anchor" href="https://github.com/appministry/akka-zk#akka-zk" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>akka-zk</h1> 
  <p>Reactive akka ZooKeeper client.</p> 
  <p>What's in it:</p> 
  <ul> 
   <li>all the features of the ZooKeeper client 3.4.9 (ACL, authentication, whatnot...)</li> 
   <li>persistent watches</li> 
   <li>watches emitted with <a href="https://github.com/reactive-streams/reactive-streams-jvm" target="_blank">Reactive Streams</a>, can be consumed with <code>akka-stream</code></li> 
   <li>fully async (<em>almost, heh: with an exception of recursive delete children collection</em>)</li> 
   <li>metrics</li> 
   <li>plenty of unit tests</li> 
  </ul> 
  <h2><a id="user-content-build-status" class="anchor" href="https://github.com/appministry/akka-zk#build-status" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Build status</h2> 
  <p><a href="https://travis-ci.org/AppMinistry/akka-zk" target="_blank"><img src="https://camo.githubusercontent.com/e13d8c51ae2b17b9cd75e993cbe9492945ef30dc/68747470733a2f2f7472617669732d63692e6f72672f4170704d696e69737472792f616b6b612d7a6b2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/AppMinistry/akka-zk.svg?branch=master" style="max-width:100%;"></a></p> 
  <h2><a id="user-content-usage" class="anchor" href="https://github.com/appministry/akka-zk#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <h3><a id="user-content-dependencies" class="anchor" href="https://github.com/appministry/akka-zk#dependencies" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Dependencies</h3> 
  <pre><code>libraryDependencies ++= Seq(
  "uk.co.appministry" %% "akka-zk" % "0.1.0"
)
</code></pre> 
  <h2><a id="user-content-examples" class="anchor" href="https://github.com/appministry/akka-zk#examples" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Examples</h2> 
  <h3><a id="user-content-creating-the-client" class="anchor" href="https://github.com/appministry/akka-zk#creating-the-client" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Creating the client</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">actorSystem</span> <span class="pl-k">=</span> <span class="pl-en">ActorSystem</span>(<span class="pl-s"><span class="pl-pds">"</span>examples<span class="pl-pds">"</span></span>)
<span class="pl-k">val</span> <span class="pl-en">zkClient</span> <span class="pl-k">=</span> system.actorOf(<span class="pl-en">Props</span>(<span class="pl-k">new</span> <span class="pl-en">ZkClientActor))</span></pre>
  </div> 
  <h3><a id="user-content-client-configuration" class="anchor" href="https://github.com/appministry/akka-zk#client-configuration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Client configuration</h3> 
  <p>The client does not have any special configuration needs. All configuration is passed with <code>ZkRequestProtocol.Connect</code> message.</p> 
  <h3><a id="user-content-connecting" class="anchor" href="https://github.com/appministry/akka-zk#connecting" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Connecting</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">system</span> <span class="pl-k">=</span> <span class="pl-en">ActorSystem</span>(<span class="pl-s"><span class="pl-pds">"</span>examples<span class="pl-pds">"</span></span>)
 
<span class="pl-k">val</span> <span class="pl-en">runner</span> <span class="pl-k">=</span> system.actorOf(<span class="pl-en">Props</span>(<span class="pl-k">new</span> <span class="pl-en">Actor</span> {
  
  <span class="pl-k">val</span> <span class="pl-en">zkClient</span> <span class="pl-k">=</span> context.system.actorOf(<span class="pl-en">Props</span>(<span class="pl-k">new</span> <span class="pl-en">ZkClientActor))</span>
  context.watch(zkClient)
  
  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">supervisorStrategy</span> <span class="pl-k">=</span> <span class="pl-en">OneForOneStrategy</span>() {
    <span class="pl-k">case</span> <span class="pl-v">_</span>: <span class="pl-en">ZkClientConnectionFailedException</span> <span class="pl-k">=&gt;</span>
      <span class="pl-c"><span class="pl-c">//</span> ZooKeeper client was unable to connect to the server for `connectionAttempts` times.</span>
      <span class="pl-c"><span class="pl-c">//</span> The client is stopped and a new actor has to be created.</span>
      <span class="pl-en">Escalate</span>
  }
  
  <span class="pl-k">def</span> <span class="pl-en">receive</span> <span class="pl-k">=</span> {
    <span class="pl-k">case</span> <span class="pl-s"><span class="pl-pds">"</span>connect<span class="pl-pds">"</span></span> <span class="pl-k">=&gt;</span>
      zkClient <span class="pl-k">!</span> <span class="pl-en">ZkRequestProtocol</span>.<span class="pl-en">Connect</span>(connectionString <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>10.100.0.21:2181<span class="pl-pds">"</span></span>,
                                           connectionAttempts <span class="pl-k">=</span> <span class="pl-c1">5</span>,
                                           sessionTimeout <span class="pl-k">=</span> <span class="pl-c1">30</span> seconds)
    <span class="pl-k">case</span> <span class="pl-en">ZkResponseProtocol</span>.<span class="pl-en">Connected</span>(request, reactiveStreamsPublisher) <span class="pl-k">=&gt;</span>
      <span class="pl-c"><span class="pl-c">//</span> zkClient is now ready for work</span>
  }
  
}))
runner <span class="pl-k">!</span> <span class="pl-s"><span class="pl-pds">"</span>connect<span class="pl-pds">"</span></span></pre>
  </div> 
  <h3><a id="user-content-subscribing-to-and-unsubscribing-from-data--children-changes" class="anchor" href="https://github.com/appministry/akka-zk#subscribing-to-and-unsubscribing-from-data--children-changes" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Subscribing to and unsubscribing from data / children changes</h3> 
  <p>The <code>akka-zk</code> ZooKeeper client uses <a href="https://github.com/reactive-streams/reactive-streams-jvm" target="_blank">reactive streams</a> for delivering watch notifications.</p> 
  <p>ZooKeeper client emits three types of events related to ZooKeeper state changes:</p> 
  <ul> 
   <li><code>ZkClientStreamingResponse.StateChange(event: WatchedEventMeta)</code>: this is a client connection state change event</li> 
   <li><code>ZkClientStreamingResponse.ChildChange(event: WatchedEventMeta)</code>: this is a znode children change event</li> 
   <li><code>ZkClientStreamingResponse.DataChange(event: WatchedEventMeta)</code>: this is a znode data change event</li> 
  </ul> 
  <p>The <code>StateChange</code> events are automatically delivered, there is no subscription required. However, the <code>ChildChange</code> and <code>DataChange</code> events are per <code>path</code> thus requiring an explicit subscription. To initialize a subscription:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">system</span> <span class="pl-k">=</span> <span class="pl-en">ActorSystem</span>(<span class="pl-s"><span class="pl-pds">"</span>examples<span class="pl-pds">"</span></span>)
 
<span class="pl-k">val</span> <span class="pl-en">runner</span> <span class="pl-k">=</span> system.actorOf(<span class="pl-en">Props</span>(<span class="pl-k">new</span> <span class="pl-en">Actor</span> {
  
  <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">materializer</span> <span class="pl-k">=</span> <span class="pl-en">ActorMaterializer</span>(
    <span class="pl-en">ActorMaterializerSettings</span>(system).withInputBuffer(
      initialSize <span class="pl-k">=</span> <span class="pl-c1">10</span>,
      maxSize <span class="pl-k">=</span> <span class="pl-c1">64</span>))
  
  <span class="pl-k">val</span> <span class="pl-en">zkClient</span> <span class="pl-k">=</span> context.system.actorOf(<span class="pl-en">Props</span>(<span class="pl-k">new</span> <span class="pl-en">ZkClientActor))</span>
  
  <span class="pl-k">def</span> <span class="pl-en">receive</span> <span class="pl-k">=</span> {
    <span class="pl-k">case</span> <span class="pl-s"><span class="pl-pds">"</span>connect<span class="pl-pds">"</span></span> <span class="pl-k">=&gt;</span>
      zkClient <span class="pl-k">!</span> <span class="pl-en">ZkRequestProtocol</span>.<span class="pl-en">Connect</span>(connectionString <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>10.100.0.21:2181<span class="pl-pds">"</span></span>,
                                           connectionAttempts <span class="pl-k">=</span> <span class="pl-c1">5</span>,
                                           sessionTimeout <span class="pl-k">=</span> <span class="pl-c1">30</span> seconds)
    <span class="pl-k">case</span> <span class="pl-en">ZkResponseProtocol</span>.<span class="pl-en">Connected</span>(request, publisher) <span class="pl-k">=&gt;</span>
      
      <span class="pl-c"><span class="pl-c">//</span> a very simple example:</span>
      <span class="pl-en">Source</span>.fromPublisher[<span class="pl-en">ZkClientStreamProtocol</span>.<span class="pl-en">StreamResponse</span>](publisher).map { message <span class="pl-k">=&gt;</span>
        message <span class="pl-k">match</span> {
          <span class="pl-k">case</span> <span class="pl-v">m</span>: <span class="pl-en">ZkClientStreamProtocol</span>.<span class="pl-en">ChildChange</span> <span class="pl-k">=&gt;</span> <span class="pl-c"><span class="pl-c">//</span> children change event</span>
          <span class="pl-k">case</span> <span class="pl-v">m</span>: <span class="pl-en">ZkClientStreamProtocol</span>.<span class="pl-en">DataChange</span>  <span class="pl-k">=&gt;</span> <span class="pl-c"><span class="pl-c">//</span> data change event</span>
          <span class="pl-k">case</span> <span class="pl-v">m</span>: <span class="pl-en">ZkClientStreamProtocol</span>.<span class="pl-en">StateChange</span> <span class="pl-k">=&gt;</span> <span class="pl-c"><span class="pl-c">//</span> state change event</span>
        }
      }.runWith(<span class="pl-en">Sink</span>.ignore)
      
      <span class="pl-c1">self</span> <span class="pl-k">!</span> <span class="pl-s"><span class="pl-pds">"</span>subscribe<span class="pl-pds">"</span></span>
      
    <span class="pl-k">case</span> <span class="pl-s"><span class="pl-pds">"</span>subscribe<span class="pl-pds">"</span></span> <span class="pl-k">=&gt;</span>
      zkClient <span class="pl-k">!</span> <span class="pl-en">ZkRequestProtocol</span>.<span class="pl-en">SubscribeChildChanges</span>(<span class="pl-s"><span class="pl-pds">"</span>/some/zookeeper/path<span class="pl-pds">"</span></span>)
      zkClient <span class="pl-k">!</span> <span class="pl-en">ZkRequestProtocol</span>.<span class="pl-en">SubscribeDataChanges</span>(<span class="pl-s"><span class="pl-pds">"</span>/some/other/zookeeper/path<span class="pl-pds">"</span></span>)
    <span class="pl-k">case</span> <span class="pl-en">ZkResponseProtocol</span>.<span class="pl-en">SubscriptionSuccess</span>(request) <span class="pl-k">=&gt;</span>
      request <span class="pl-k">match</span> {
        <span class="pl-k">case</span> <span class="pl-v">_</span>: <span class="pl-en">ZkRequestProtocol</span>.<span class="pl-en">SubscribeChildChanges</span> <span class="pl-k">=&gt;</span>
          <span class="pl-c"><span class="pl-c">//</span> from now on, the child changes for the requested path will be streaming via the Source</span>
        <span class="pl-k">case</span> <span class="pl-v">_</span>: <span class="pl-en">ZkRequestProtocol</span>.<span class="pl-en">SubscribeDataChanges</span> <span class="pl-k">=&gt;</span>
          <span class="pl-c"><span class="pl-c">//</span> from now on, the data changes for the requested path will be streaming via the Source</span>
      }
    <span class="pl-k">case</span> <span class="pl-s"><span class="pl-pds">"</span>unsubscribe<span class="pl-pds">"</span></span> <span class="pl-k">=&gt;</span>
      zkClient <span class="pl-k">!</span> <span class="pl-en">ZkRequestProtocol</span>.<span class="pl-en">UnsubscribeChildChanges</span>(<span class="pl-s"><span class="pl-pds">"</span>/some/zookeeper/path<span class="pl-pds">"</span></span>)
      zkClient <span class="pl-k">!</span> <span class="pl-en">ZkRequestProtocol</span>.<span class="pl-en">UnsubscribeDataChanges</span>(<span class="pl-s"><span class="pl-pds">"</span>/some/other/zookeeper/path<span class="pl-pds">"</span></span>)
    <span class="pl-k">case</span> <span class="pl-en">ZkResponseProtocol</span>.<span class="pl-en">UnsubscriptionSuccess</span>(request) <span class="pl-k">=&gt;</span>
      request <span class="pl-k">match</span> {
        <span class="pl-k">case</span> <span class="pl-v">_</span>: <span class="pl-en">ZkRequestProtocol</span>.<span class="pl-en">UnsubscribeChildChanges</span> <span class="pl-k">=&gt;</span>
          <span class="pl-c"><span class="pl-c">//</span> child change for the requested path will stop streaming via the Flow</span>
        <span class="pl-k">case</span> <span class="pl-v">_</span>: <span class="pl-en">ZkRequestProtocol</span>.<span class="pl-en">UnsubscribeDataChanges</span> <span class="pl-k">=&gt;</span>
          <span class="pl-c"><span class="pl-c">//</span> data change for the requested path will stop streaming via the Flow</span>
      }
  }
}))

runner <span class="pl-k">!</span> <span class="pl-s"><span class="pl-pds">"</span>connect<span class="pl-pds">"</span></span></pre>
  </div> 
  <h3><a id="user-content-handling-underlying-zookeeper-errors" class="anchor" href="https://github.com/appministry/akka-zk#handling-underlying-zookeeper-errors" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Handling underlying ZooKeeper errors</h3> 
  <p>Any operation that failed will be wrapped in and returned as <code>ZkResponseProtocol.OperationError(originalRequest, cause)</code>. An example:</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-k">def</span> <span class="pl-en">receive</span> <span class="pl-k">=</span> {
    <span class="pl-k">case</span> <span class="pl-s"><span class="pl-pds">"</span>create-node<span class="pl-pds">"</span></span> <span class="pl-k">=&gt;</span>
      zkClient <span class="pl-k">!</span> <span class="pl-en">ZkRequestProtocol</span>.<span class="pl-en">CreatePersistent</span>(<span class="pl-s"><span class="pl-pds">"</span>/some/zookeeper/path/for/which/the/parent/does/not/exist<span class="pl-pds">"</span></span>)
    <span class="pl-k">case</span> <span class="pl-en">ZkResponseProtocol</span>.<span class="pl-en">OperationError</span>(request, cause) <span class="pl-k">=&gt;</span>
      request <span class="pl-k">match</span> {
        <span class="pl-k">case</span> <span class="pl-v">r</span>: <span class="pl-en">ZkRequestProtocol</span>.<span class="pl-en">CreatePersistent</span> <span class="pl-k">=&gt;</span>
          log.error(s<span class="pl-s"><span class="pl-pds">"</span>Failed to create znode: ${r.path}. Reason: $cause.<span class="pl-pds">"</span></span>)
        <span class="pl-k">case</span> _ <span class="pl-k">=&gt;</span>
      }
  }</pre>
  </div> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/appministry/akka-zk#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p>Author: Rad Gruchalski (<a href="mailto:radek@gruchalski.com" target="_blank">radek@gruchalski.com</a>)</p> 
  <p>This work will be available under Apache License, Version 2.0.</p> 
  <p>Copyright 2017 Rad Gruchalski (<a href="mailto:radek@gruchalski.com" target="_blank">radek@gruchalski.com</a>)</p> 
  <p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p> 
  <p><a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">http://www.apache.org/licenses/LICENSE-2.0</a></p> 
  <p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p> 
 </article>
</div>