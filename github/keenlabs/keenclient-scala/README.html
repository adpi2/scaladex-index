<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a href="https://github.com/keenlabs/keenclient-scala#keenclient-scala" aria-hidden="true" class="anchor" id="user-content-keenclient-scala" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>KeenClient-Scala</h1> 
  <p><a href="https://travis-ci.org/keenlabs/KeenClient-Scala" target="_blank"><img src="https://camo.githubusercontent.com/1d748c21ffebfeee0d36d196790bd3966b0799b3/68747470733a2f2f7472617669732d63692e6f72672f6b65656e6c6162732f4b65656e436c69656e742d5363616c612e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/keenlabs/KeenClient-Scala.svg?branch=master" style="max-width:100%;"></a> <a href="https://coveralls.io/github/keenlabs/KeenClient-Scala?branch=master" target="_blank"><img src="https://camo.githubusercontent.com/64d7fe3992ab58ad3a0c2dceb2b4eb8d0d6e51ef/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f6b65656e6c6162732f4b65656e436c69656e742d5363616c612f62616467652e7376673f6272616e63683d6d6173746572" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/github/keenlabs/KeenClient-Scala/badge.svg?branch=master" style="max-width:100%;"></a> <a href="https://maven-badges.herokuapp.com/maven-central/io.keen/keenclient-scala_2.11" target="_blank"><img src="https://camo.githubusercontent.com/caea7ab9785f30b6bb00e32b78cb9c453ad01182/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f696f2e6b65656e2f6b65656e636c69656e742d7363616c615f322e31312f62616467652e737667" alt="Maven Central Badge" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/io.keen/keenclient-scala_2.11/badge.svg" style="max-width:100%;"></a> <a href="https://keenlabs.github.io/KeenClient-Scala/" target="_blank"><img src="https://camo.githubusercontent.com/b4a941318728984691978d446271b479832d17b3/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f7363616c61646f632d6c61746573742d6c69676874677265792e737667" alt="Scaladoc Badge" data-canonical-src="https://img.shields.io/badge/scaladoc-latest-lightgrey.svg" style="max-width:100%;"></a></p> 
  <hr> 
  <p>The official asynchronous Scala client for the <a href="http://keen.io/" target="_blank">Keen IO</a> API.</p> 
  <p><strong>Note</strong>: This library is in early development and does not implement all of the features of the Keen API. It is pre-1.0 in the <a href="http://semver.org/" target="_blank">Semantic Versioning</a> sense: public interfaces may change without backwards compatibility. We will try to minimize breaking changes, but please consult <a href="https://github.com/keenlabs/KeenClient-Scala/blob/master/CHANGELOG.md" target="_blank">the changelog</a> when updating to a new release version.</p> 
  <p>Additional API features will be added over time. Contributions are welcome!</p> 
  <hr> 
  <ul> 
   <li><a href="https://github.com/keenlabs/keenclient-scala#get-it" target="_blank">Get It</a></li> 
   <li><a href="https://github.com/keenlabs/keenclient-scala#configuration" target="_blank">Configuration</a> 
    <ul> 
     <li><a href="https://github.com/keenlabs/keenclient-scala#settings" target="_blank">Settings</a></li> 
    </ul> </li> 
   <li><a href="https://github.com/keenlabs/keenclient-scala#use-it---a-quick-taste" target="_blank">Use It</a> 
    <ul> 
     <li><a href="https://github.com/keenlabs/keenclient-scala#batching-write-requests" target="_blank">Batching Write Requests</a></li> 
    </ul> </li> 
   <li><a href="https://github.com/keenlabs/keenclient-scala#dependencies" target="_blank">Dependencies</a> 
    <ul> 
     <li><a href="https://github.com/keenlabs/keenclient-scala#using-the-dispatch-adapter" target="_blank">Using the Dispatch adapter</a></li> 
     <li><a href="https://github.com/keenlabs/keenclient-scala#json" target="_blank">JSON</a></li> 
    </ul> </li> 
   <li><a href="https://github.com/keenlabs/keenclient-scala#hack-on-it" target="_blank">Hack On It</a></li> 
  </ul> 
  <h2><a href="https://github.com/keenlabs/keenclient-scala#get-it" aria-hidden="true" class="anchor" id="user-content-get-it" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Get It</h2> 
  <p>Artifacts for keen-client-scala are <a href="http://search.maven.org/#search%7Cga%7C1%7Ckeenclient-scala" target="_blank">hosted on Maven Central</a>. You can use them in your project with SBT thusly:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>io.keen<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>keenclient-scala<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.7.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>Note that we publish artifacts for Scala 2.10 and 2.11, so you can either use <code>%%</code> to automatically pick the correct version or specify them explicitly with something like:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>io.keen<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>keenclient-scala_2.10<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.7.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <h2><a href="https://github.com/keenlabs/keenclient-scala#configuration" aria-hidden="true" class="anchor" id="user-content-configuration" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Configuration</h2> 
  <p>The client has a notion of access levels that reflect <a href="https://keen.io/docs/security/" target="_blank">the Keen IO API key security model</a>. These are represented by Scala traits called <code>Reader</code>, <code>Writer</code>, and <code>Master</code>. According to the level of access that your application requires, you must mix the appropriate trait(s) into your client instance when creating it, and configure your corresponding API keys. This is demonstrated in the examples.</p> 
  <p>Configuration is supported by the <a href="https://github.com/typesafehub/config" target="_blank">Typesafe config</a> library, offering all the flexibility you could wish to provide settings through a file, environment variables, or programmatically. We recommend environment variables for your API keys at very least, to avoid storing credentials in source control. To that end, the following will be honored by default if set:</p> 
  <ul> 
   <li><code>KEEN_PROJECT_ID</code></li> 
   <li><code>KEEN_READ_KEY</code></li> 
   <li><code>KEEN_WRITE_KEY</code></li> 
   <li><code>KEEN_MASTER_KEY</code></li> 
  </ul> 
  <p>To configure with a file, it must be on the classpath, customarily called <code>application.conf</code> though you may use others--see the Typesafe config documentation for all the options and details of the file format. <a href="https://github.com/keenlabs/KeenClient-Scala/tree/master/src/main/resources/reference.conf" target="_blank">Our <code>reference.conf</code></a> reflects all of the settings you can configure and their default values.</p> 
  <p>For advanced needs, you may provide your own custom <a href="http://typesafehub.github.io/config/latest/api/com/typesafe/config/Config.html" target="_blank"><code>Config</code></a> object by simply passing it to the client constructor:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">io.keen.client.scala.</span><span class="pl-v">Client</span>

<span class="pl-k">val</span> <span class="pl-en">keen</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Client</span>(config <span class="pl-k">=</span> myCustomConfigObject)</pre>
  </div> 
  <p>When using environment variables, you might like <a href="https://github.com/mefellows/sbt-dotenv" target="_blank">sbt-dotenv</a> in your development setup (install it as a <a href="http://www.scala-sbt.org/0.13/docs/Global-Settings.html" target="_blank">global plugin</a>, and <code>chmod 600</code> your <code>.env</code> files that contain credentials!). In production, a <a href="http://smarden.org/runit/" target="_blank">good service manager</a> can set env vars for app processes with ease. On Heroku you'll be right at home.</p> 
  <h3><a href="https://github.com/keenlabs/keenclient-scala#settings" aria-hidden="true" class="anchor" id="user-content-settings" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Settings</h3> 
  <ul> 
   <li><code>keen.project-id</code>: Your project ID.</li> 
   <li><code>keen.optional.read-key</code>: Your project read key.</li> 
   <li><code>keen.optional.write-key</code>: Your project write key.</li> 
   <li><code>keen.optional.master-key</code>: Your project master key.</li> 
   <li><code>keen.queue.batch.size</code>: Number of events to include in each batch sent by <code>sendQueuedEvents()</code>. Default is <code>500</code>.</li> 
   <li><code>keen.queue.batch.timeout</code>: Duration that each batch sent by <code>sendQueuedEvents()</code> should wait before the request times out. Default is 5 seconds.</li> 
   <li><code>keen.queue.max-events-per-collection</code>: Maximum number of events to store for each collection. Old events are purged from the queue to make room for new events when the size of the queue exceeds this number. Default is <code>10000</code>.</li> 
   <li><code>keen.queue.send-interval.events</code>: Automatically send all queued events every time the queue reaches this number. Minimum is <code>100</code>, maximum is <code>10000</code>, and default is <code>0</code>.</li> 
   <li><code>keen.queue.send-interval.duration</code>: Automatically send all queued events at a specified interval. Minimum is 60 seconds, maximum is 3600, and default is 0.</li> 
   <li><code>keen.queue.shutdown-delay</code>: Duration before client stops attempting to send events scheduled to be sent at a specific interval. Default is 30 seconds.</li> 
  </ul> 
  <h2><a href="https://github.com/keenlabs/keenclient-scala#use-it---a-quick-taste" aria-hidden="true" class="anchor" id="user-content-use-it---a-quick-taste" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Use It - A Quick Taste</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">io.keen.client.scala.</span>{ <span class="pl-v">Client</span>, <span class="pl-v">Writer</span> }

<span class="pl-c"><span class="pl-c">//</span> Assumes you've configured a write key as explained in Configuration above</span>
<span class="pl-k">val</span> <span class="pl-en">keen</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Client</span> <span class="pl-k">with</span> <span class="pl-e">Writer</span>

<span class="pl-c"><span class="pl-c">//</span> Publish an event!</span>
keen.addEvent(
  collection <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>collectionNameHere<span class="pl-pds">"</span></span>,
  event <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"""</span>{"foo": "bar"}<span class="pl-pds">"""</span></span>
)

<span class="pl-c"><span class="pl-c">//</span> Publish lots of events!</span>
keen.addEvents(someEvents)

<span class="pl-c"><span class="pl-c">//</span> Responses are Futures - handle errors!</span>
<span class="pl-k">val</span> <span class="pl-en">resp</span> <span class="pl-k">=</span> keen.addEvent(
  collection <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>collectionNameHere<span class="pl-pds">"</span></span>,
  event <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"""</span>{"foo": "bar"}<span class="pl-pds">"""</span></span>
)

resp onComplete {
  <span class="pl-k">case</span> <span class="pl-en">Success</span>(r) <span class="pl-k">=&gt;</span> println(resp.statusCode)
  <span class="pl-k">case</span> <span class="pl-en">Failure</span>(t) <span class="pl-k">=&gt;</span> println(t.getMessage) <span class="pl-c"><span class="pl-c">//</span> A Throwable</span>
}

<span class="pl-c"><span class="pl-c">//</span> Or using map</span>
resp map { println(<span class="pl-s"><span class="pl-pds">"</span>I succeeded!<span class="pl-pds">"</span></span>) } getOrElse { println(<span class="pl-s"><span class="pl-pds">"</span>I failed :(<span class="pl-pds">"</span></span>) }</pre>
  </div> 
  <h3><a href="https://github.com/keenlabs/keenclient-scala#batching-write-requests" aria-hidden="true" class="anchor" id="user-content-batching-write-requests" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Batching Write Requests</h3> 
  <p>The standard client is asynchronous, but it does make a discrete API call for each individual (<code>addEvent</code>) or bulk (<code>addEvents</code>) event write. Depending on your usage patterns, batching events to make fewer HTTP requests to Keen IO may be a significant optimization.</p> 
  <p>Though you can certainly implement your own queueing and batching via <code>addEvents</code>, the library includes automated batching support sufficient for many use cases. This is available in the <code>BatchWriterClient</code>, shown below.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">io.keen.client.scala.</span><span class="pl-v">BatchWriterClient</span>

<span class="pl-k">val</span> <span class="pl-en">keen</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">BatchWriterClient</span>

<span class="pl-c"><span class="pl-c">//</span> Queue an event</span>
keen.queueEvent(<span class="pl-s"><span class="pl-pds">"</span>collectionNameHere<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"""</span>{"foo": "bar"}<span class="pl-pds">"""</span></span>)</pre>
  </div> 
  <p>Queuing is handled via an in-memory queue that lives as long as the <code>Client</code> does. The behavior of the queue and automated sending of events is configurable in <code>conf/application.conf</code> as outlined below.</p> 
  <p><strong>Sending queued events manually</strong></p> 
  <div class="highlight highlight-source-scala">
   <pre>keen.sendQueuedEvents()</pre>
  </div> 
  <p><strong>Sending queued events every time the queue reaches 100 events</strong></p> 
  <p>Set <code>keen.queue.send-interval.events</code> equal to <code>100</code> in <code>conf/application.conf</code>.</p> 
  <p><strong>Sending queued events every 5 minutes</strong></p> 
  <p>Set <code>keen.queue.send-interval.duration</code> equal to <code>5 minutes</code> in <code>conf/application.conf</code>.</p> 
  <p>Note that <code>send-interval.events</code> takes precedence when both <code>send-interval.events</code> and <code>send-interval.duration</code> contain values greater than zero.</p> 
  <p><strong>Using batch sizes</strong></p> 
  <p>Setting a specific batch size will help optimize your experience when sending events. It's recommended that you set <code>keen.queue.batch.size</code> to something that makes sense for your application (default is <code>500</code>). Note that a batch size of <code>5000</code> is the upper bound of what you should shoot for. Anything higher and your request has a good chance of being rejected due to payload size limitations.</p> 
  <p><strong>Failed events</strong></p> 
  <p>Events that fail to be sent for whatever reason (payload rejection, network issue, etc.) are <strong>not</strong> removed from the queue. They will remain in the queue until they are either manually removed or the client shuts down.</p> 
  <p><strong>Shutdown</strong></p> 
  <p><code>BatchWriterClient</code> will attempt one last time to send all queued events when <code>shutdown()</code> is called just in case you forget to send the events yourself. Make sure you call <code>shutdown()</code> before you exit otherwise all events that remain in the queue upon termination will be lost.</p> 
  <h4><a href="https://github.com/keenlabs/keenclient-scala#caveats-and-tradeoffs" aria-hidden="true" class="anchor" id="user-content-caveats-and-tradeoffs" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Caveats and Tradeoffs</h4> 
  <p>Bear in mind that <code>BatchWriterClient</code> uses an in-memory event queue implementation by default and has an API that favors fire-and-forget usage; it is difficult to handle errors in a granular fashion and ensure that writes are never lost if queue bounds are exceeded, etc. If you're recording something like internal metrics, the possibility of occasional missing data points may be an acceptable tradeoff for the optimization of batching.</p> 
  <p>If it is business-critical that some of your writes are never lost, you may wish to use the discrete API so that you can handle the <code>Future</code> result of each call with exacting care. Or if you require batching, you can implement a custom persistent <code>EventStore</code> queue for control over retries, and/or your own batching <code>Client</code> subclass tailored to your needs.</p> 
  <p><code>BatchWriterClient</code> is a <code>Client with Writer</code>, so you can call the discrete <code>addEvent</code>/<code>addEvents</code> methods on an instance and as usual these send immediately without queueing. Thus you can selectively use batching for some types of writes and make discrete calls for more critical ones.</p> 
  <h2><a href="https://github.com/keenlabs/keenclient-scala#dependencies" aria-hidden="true" class="anchor" id="user-content-dependencies" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Dependencies</h2> 
  <p>The client's default HTTP adapter is built on the <a href="http://spray.io" target="_blank">spray HTTP toolkit</a>, which is <a href="http://akka.io" target="_blank">Akka</a>-based and asynchronous. A <a href="http://dispatch.databinder.net/" target="_blank">Dispatch</a>-based adapter is also available. At this time spray (and thus Akka) is a hard dependency, but if there is demand we may consider designating it as "provided" so that you may opt for the Dispatch adapter (or a custom one for your preferred HTTP client) and avoid pulling in Akka dependencies if you wish, or to avoid version conflicts. Please share your feedback if you find the spray deps burdensome.</p> 
  <p>With either adapter, API calls will return a uniform <code>Future[Response]</code> type, where <code>Response</code> is an <code>io.keen.client.scala.Response</code>. Instances have <code>statusCode</code> and <code>body</code> attributes that you may inspect to act on errors. An example of choosing the Dispatch adapter is shown below.</p> 
  <p>The client also depends on <a href="http://software.clapper.org/grizzled-slf4j/" target="_blank">grizzled-slf4j</a> for logging.</p> 
  <p>It is cross-compiled for 2.10 and 2.11 Scala versions. If you are interested in support for other versions or discover any binary compatibility problems, please share your feedback.</p> 
  <h3><a href="https://github.com/keenlabs/keenclient-scala#using-the-dispatch-adapter" aria-hidden="true" class="anchor" id="user-content-using-the-dispatch-adapter" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Using the Dispatch adapter</h3> 
  <p>To use the Dispatch HTTP adapter instead of the Spray default, specify the following override when instantiating a <code>Client</code> instance:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">io.keen.client.scala.</span>{ <span class="pl-v">Client</span>, <span class="pl-v">HttpAdapterDispatch</span> }

<span class="pl-k">val</span> <span class="pl-en">keen</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Client</span> {
  <span class="pl-k">override</span> <span class="pl-k">val</span> <span class="pl-en">httpAdapter</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">HttpAdapterDispatch</span>
}</pre>
  </div> 
  <p><code>BatchWriterClient</code> works the same way.</p> 
  <h3><a href="https://github.com/keenlabs/keenclient-scala#json" aria-hidden="true" class="anchor" id="user-content-json" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>JSON</h3> 
  <p>Presently this library does <strong>not</strong> do any JSON parsing. It works with strings only. It is assumed that you will parse the JSON returned and pass stringified JSON into any methods that require it. Feedback is welcome!</p> 
  <p>We understand that Scala users value the language's strong type system. Again, we wish to avoid unwanted dependencies given that there are so many JSON parsing libraries out there. We'd eventually like to offer rich types through JSON adapters with optional deps.</p> 
  <h2><a href="https://github.com/keenlabs/keenclient-scala#hack-on-it" aria-hidden="true" class="anchor" id="user-content-hack-on-it" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Hack On It</h2> 
  <p>Unit tests can be run with the standard SBT commands <code>test</code>, <code>testQuick</code>, etc.</p> 
  <p>The test suite includes integration tests which require keys and access to Keen IO's API. If you have set keys through environment variables or configuration as described above, you may run these with:</p> 
  <pre><code>$ sbt it:test
</code></pre> 
  <p><strong>Only use a dedicated dummy account for this purpose, data could be destroyed that you didn't expect!</strong></p> 
 </article>
</div>