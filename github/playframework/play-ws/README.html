<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <p><a href="https://travis-ci.org/playframework/play-ws" target="_blank"><img src="https://camo.githubusercontent.com/0eed0767352f3df029f7c9034c156a0959df90bd/68747470733a2f2f696d672e736869656c64732e696f2f7472617669732f706c61796672616d65776f726b2f706c61792d77732e737667" data-canonical-src="https://img.shields.io/travis/playframework/play-ws.svg" style="max-width:100%;"></a> <a href="http://mvnrepository.com/artifact/com.typesafe.play/play-ws-standalone_2.12" target="_blank"><img src="https://camo.githubusercontent.com/40ba59d440e8d09a509ea4385b4ed233fbeb7224/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f636f6d2e74797065736166652e706c61792f706c61792d77732d7374616e64616c6f6e655f322e31322e737667" alt="Maven" data-canonical-src="https://img.shields.io/maven-central/v/com.typesafe.play/play-ws-standalone_2.12.svg" style="max-width:100%;"></a> <a href="https://javadoc.io/doc/com.typesafe.play/play-ws-standalone_2.12" target="_blank"><img src="https://camo.githubusercontent.com/c6cf3ebbb8d2f251f9e733da984eda0c07fd4209/68747470733a2f2f6a617661646f632e696f2f62616467652f636f6d2e74797065736166652e706c61792f706c61792d77732d7374616e64616c6f6e655f322e31322e737667" alt="Javadocs" data-canonical-src="https://javadoc.io/badge/com.typesafe.play/play-ws-standalone_2.12.svg" style="max-width:100%;"></a></p> 
  <h1><a href="https://github.com/playframework/play-ws#play-ws-standalone" aria-hidden="true" class="anchor" id="user-content-play-ws-standalone" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Play WS Standalone</h1> 
  <p>Play WS is a powerful HTTP Client library, originally developed by the Play team for use with Play Framework. It uses AsyncHttpClient for HTTP client functionality and has no Play dependencies.</p> 
  <p>We've provided some documentation here on how to use Play WS in your app (without Play). For more information on how to use Play WS in Play, please refer to the Play documentation.</p> 
  <h2><a href="https://github.com/playframework/play-ws#getting-started" aria-hidden="true" class="anchor" id="user-content-getting-started" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Getting Started</h2> 
  <p>To get started, you can add <code>play-ahc-ws-standalone</code> as a dependency in SBT:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.typesafe.play<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>play-ahc-ws-standalone<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>LATEST_VERSION<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>Where you replace <code>LATEST_VERSION</code> with the version shown in this image: <a href="http://mvnrepository.com/artifact/com.typesafe.play/play-ws-standalone_2.12" target="_blank"><img src="https://camo.githubusercontent.com/40ba59d440e8d09a509ea4385b4ed233fbeb7224/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f636f6d2e74797065736166652e706c61792f706c61792d77732d7374616e64616c6f6e655f322e31322e737667" alt="Latest released version" data-canonical-src="https://img.shields.io/maven-central/v/com.typesafe.play/play-ws-standalone_2.12.svg" style="max-width:100%;"></a>.</p> 
  <p>This adds the standalone version of Play WS, backed by <a href="https://github.com/AsyncHttpClient/async-http-client" target="_blank">AsyncHttpClient</a>. This library contains both the Scala and Java APIs, under <code>play.api.libs.ws</code> and <code>play.libs.ws</code>.</p> 
  <p>To add XML and JSON support using Play-JSON or Scala XML, add the following:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.typesafe.play<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>play-ws-standalone-xml<span class="pl-pds">"</span></span> <span class="pl-k">%</span> playWsStandaloneVersion
libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.typesafe.play<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>play-ws-standalone-json<span class="pl-pds">"</span></span> <span class="pl-k">%</span> playWsStandaloneVersion</pre>
  </div> 
  <h2><a href="https://github.com/playframework/play-ws#shading" aria-hidden="true" class="anchor" id="user-content-shading" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Shading</h2> 
  <p>Play WS uses shaded versions of AsyncHttpClient and OAuth Signpost, repackaged under the <code>play.shaded.ahc</code> and <code>play.shaded.oauth</code> package names, respectively. Shading AsyncHttpClient means that the version of Netty used behind AsyncHttpClient is completely independent of the application and Play as a whole.</p> 
  <p>Specifically, shading AsyncHttpClient means that there are no version conflicts introduced between Netty 4.0 and Netty 4.1 using Play WS.</p> 
  <blockquote> 
   <p><strong>NOTE</strong>: If you are developing play-ws and publishing <code>shaded-asynchttpclient</code> and <code>shaded-oauth</code> using <code>sbt publishLocal</code>, you need to be aware that updating <code>~/.ivy2/local</code> does not overwrite <code>~/.ivy2/cache</code> and so you will not see your updated shaded code until you remove it from cache. See <a href="http://eed3si9n.com/field-test" target="_blank">http://eed3si9n.com/field-test</a> for more details. This bug has been filed as <a href="https://github.com/sbt/sbt/issues/2687" target="_blank">https://github.com/sbt/sbt/issues/2687</a>.</p> 
  </blockquote> 
  <h3><a href="https://github.com/playframework/play-ws#shaded-ahc-defaults" aria-hidden="true" class="anchor" id="user-content-shaded-ahc-defaults" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Shaded AHC Defaults</h3> 
  <p>Because Play WS shades AsyncHttpClient, the default settings are also shaded and so do not adhere to the AHC documentation. This means that the settings in <code>ahc-default.properties</code> and the AsyncHttpClient system properties are prepended with <code>play.shaded.ahc</code>, for example the <code>usePooledMemory</code> setting in the shaded version of AsyncHttpClient is defined like this:</p> 
  <div class="highlight highlight-source-ini">
   <pre><span class="pl-k">play.shaded.ahc.org.asynchttpclient.usePooledMemory</span>=true</pre>
  </div> 
  <h3><a href="https://github.com/playframework/play-ws#typed-bodies" aria-hidden="true" class="anchor" id="user-content-typed-bodies" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Typed Bodies</h3> 
  <p>The type system in Play-WS has changed so that the request body and the response body can use richer types.</p> 
  <p>You can define your own BodyWritable or BodyReadable, but if you want to use the default out of the box settings, you can import the type mappings with the DefaultBodyReadables / DefaultBodyWritables.</p> 
  <h4><a href="https://github.com/playframework/play-ws#scala" aria-hidden="true" class="anchor" id="user-content-scala" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scala</h4> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">play.api.libs.ws.DefaultBodyReadables.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">play.api.libs.ws.DefaultBodyWritables.</span><span class="pl-v">_</span></pre>
  </div> 
  <p>More likely you will want the XML and JSON support:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">play.api.libs.ws.XMLBodyReadables.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">play.api.libs.ws.XMLBodyWritables.</span><span class="pl-v">_</span></pre>
  </div> 
  <p>or</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">play.api.libs.ws.JsonBodyReadables.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">play.api.libs.ws.JsonBodyWritables.</span><span class="pl-v">_</span></pre>
  </div> 
  <p>To use a BodyReadable in a response, you must type the response explicitly:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">responseBody</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[scala.xml.<span class="pl-en">Elem</span>] <span class="pl-k">=</span> ws.url(...).get().map { response <span class="pl-k">=&gt;</span>
  response.body[scala.xml.<span class="pl-en">Elem</span>]
}</pre>
  </div> 
  <p>or using Play-JSON:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">jsonBody</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">JsValue</span>] <span class="pl-k">=</span> ws.url(...).get().map { response <span class="pl-k">=&gt;</span>
  response.body[<span class="pl-en">JsValue</span>]
}</pre>
  </div> 
  <p>Note that there is a special case: when you are streaming the response, then you should get the body as a Source:</p> 
  <div class="highlight highlight-source-scala">
   <pre>ws.url(...).stream().map { response <span class="pl-k">=&gt;</span>
   <span class="pl-k">val</span> <span class="pl-en">source</span><span class="pl-k">:</span> <span class="pl-en">Source</span>[<span class="pl-en">ByteString</span>, <span class="pl-en">NotUsed</span>] <span class="pl-k">=</span> response.bodyAsSource
}</pre>
  </div> 
  <p>To POST, you should pass in a type which has an implicit class mapping of BodyWritable:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">stringData</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Hello world<span class="pl-pds">"</span></span>
ws.url(...).post(stringData).map { response <span class="pl-k">=&gt;</span> ... }</pre>
  </div> 
  <p>You can also define your own custom BodyReadable:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Foo</span>(<span class="pl-v">body</span>: <span class="pl-k">String</span>)

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">fooBodyReadable</span> <span class="pl-k">=</span> <span class="pl-en">BodyReadable</span>[<span class="pl-en">Foo</span>] { response <span class="pl-k">=&gt;</span>
  <span class="pl-k">import</span> <span class="pl-v">play.shaded.ahc.org.asynchttpclient.</span>{ <span class="pl-v">Response</span> <span class="pl-k">=&gt;</span> <span class="pl-v">AHCResponse</span> }
  <span class="pl-k">val</span> <span class="pl-en">ahcResponse</span> <span class="pl-k">=</span> response.<span class="pl-c1">asInstanceOf</span>[<span class="pl-en">StandaloneAhcWSResponse</span>].underlying[<span class="pl-en">AHCResponse</span>]
  <span class="pl-en">Foo</span>(ahcResponse.getResponseBody)
}</pre>
  </div> 
  <p>or custom BodyWritable:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">writeableOf_Foo</span><span class="pl-k">:</span> <span class="pl-en">BodyWritable</span>[<span class="pl-en">Foo</span>] <span class="pl-k">=</span> {
  <span class="pl-c"><span class="pl-c">//</span> https://tools.ietf.org/html/rfc6838#section-3.2</span>
  <span class="pl-en">BodyWritable</span>(foo <span class="pl-k">=&gt;</span> <span class="pl-en">InMemoryBody</span>(<span class="pl-en">ByteString</span>.fromString(foo.serialize)), application<span class="pl-k">/</span>vnd.company.category<span class="pl-k">+</span>foo)
}</pre>
  </div> 
  <h4><a href="https://github.com/playframework/play-ws#java" aria-hidden="true" class="anchor" id="user-content-java" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Java</h4> 
  <p>To use the default type mappings in Java, you should use the following:</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">import</span> <span class="pl-smi">play.libs.ws.DefaultBodyReadables</span>;
<span class="pl-k">import</span> <span class="pl-smi">play.libs.ws.DefaultBodyWritables</span>;</pre>
  </div> 
  <p>followed by:</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyClient</span> <span class="pl-k">implements</span> <span class="pl-e">DefaultBodyWritables</span>, <span class="pl-e">DefaultBodyReadables</span> {    
    <span class="pl-k">public</span> <span class="pl-k">CompletionStage&lt;<span class="pl-smi">String</span>&gt;</span> <span class="pl-en">doStuff</span>() {
      <span class="pl-k">return</span> client<span class="pl-k">.</span>url(<span class="pl-s"><span class="pl-pds">"</span>http://example.com<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>post(body(<span class="pl-s"><span class="pl-pds">"</span>hello world<span class="pl-pds">"</span></span>))<span class="pl-k">.</span>thenApply(response <span class="pl-k">-</span><span class="pl-k">&gt;</span>
        response<span class="pl-k">.</span>body(string())
      );
    }
}</pre>
  </div> 
  <p>Note that there is a special case: when you are using a stream, then you should get the body as a Source:</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">class</span> <span class="pl-en">MyClass</span> {
    <span class="pl-k">public</span> <span class="pl-k">CompletionStage&lt;<span class="pl-k">Source&lt;<span class="pl-smi">ByteString</span>, <span class="pl-smi">NotUsed</span>&gt;</span>&gt;</span> <span class="pl-en">readResponseAsStream</span>() {
        <span class="pl-k">return</span> ws<span class="pl-k">.</span>url(url)<span class="pl-k">.</span>stream()<span class="pl-k">.</span>thenApply(response <span class="pl-k">-</span><span class="pl-k">&gt;</span>
            response<span class="pl-k">.</span>bodyAsSource()
        );
    }
}</pre>
  </div> 
  <p>You can also post a Source:</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">class</span> <span class="pl-en">MyClass</span> {
    <span class="pl-k">public</span> <span class="pl-k">CompletionStage&lt;<span class="pl-smi">String</span>&gt;</span> <span class="pl-en">doStuff</span>() {
        <span class="pl-k">Source&lt;<span class="pl-smi">ByteString</span>, <span class="pl-smi">NotUsed</span>&gt;</span> source <span class="pl-k">=</span> fromSource();
        <span class="pl-k">return</span> ws<span class="pl-k">.</span>url(url)<span class="pl-k">.</span>post(source)<span class="pl-k">.</span>thenApply(response <span class="pl-k">-</span><span class="pl-k">&gt;</span>
            response<span class="pl-k">.</span>body()
        );
    }
}</pre>
  </div> 
  <p>You can define a custom <code>BodyReadable</code>:</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">import</span> <span class="pl-smi">play.libs.ws.ahc.*</span>;
<span class="pl-k">import</span> <span class="pl-smi">play.shaded.ahc.org.asynchttpclient.Response</span>;

<span class="pl-k">class</span> <span class="pl-en">FooReadable</span> <span class="pl-k">implements</span> <span class="pl-e">BodyReadable&lt;<span class="pl-smi">StandaloneWSResponse</span>, <span class="pl-smi">Foo</span>&gt;</span> {
    <span class="pl-k">public</span> <span class="pl-smi">Foo</span> <span class="pl-en">apply</span>(<span class="pl-smi">StandaloneWSResponse</span> <span class="pl-v">response</span>) {
        <span class="pl-smi">Response</span> ahcResponse <span class="pl-k">=</span> (<span class="pl-smi">Response</span>) response<span class="pl-k">.</span>getUnderlying();
        <span class="pl-k">return</span> <span class="pl-smi">Foo</span><span class="pl-k">.</span>serialize(ahcResponse<span class="pl-k">.</span>getResponseBody(<span class="pl-smi">StandardCharsets</span><span class="pl-c1"><span class="pl-k">.</span>UTF_8</span>));
    }
}</pre>
  </div> 
  <p>You can also define your own custom <code>BodyWritable</code>:</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyClient</span> {
    <span class="pl-k">private</span> <span class="pl-k">BodyWritable&lt;<span class="pl-smi">String</span>&gt;</span> <span class="pl-en">someOtherMethod</span>(<span class="pl-smi">String</span> <span class="pl-v">string</span>) {
      <span class="pl-smi">akka.util<span class="pl-k">.</span>ByteString</span> byteString <span class="pl-k">=</span> <span class="pl-smi">akka.util<span class="pl-k">.</span>ByteString</span><span class="pl-k">.</span>fromString(string);
      <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">DefaultBodyWritables</span>.<span class="pl-smi">InMemoryBodyWritable</span>(byteString, <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>);
    }
}</pre>
  </div> 
  <h2><a href="https://github.com/playframework/play-ws#instantiating-a-standalone-client" aria-hidden="true" class="anchor" id="user-content-instantiating-a-standalone-client" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Instantiating a standalone client</h2> 
  <p>The standalone client needs <a href="http://akka.io/" target="_blank">Akka</a> to handle streaming data internally:</p> 
  <h3><a href="https://github.com/playframework/play-ws#scala-1" aria-hidden="true" class="anchor" id="user-content-scala-1" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scala</h3> 
  <p>In Scala, the way to call out to a web service and close down the client:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">package</span> <span class="pl-en">playwsclient</span>

<span class="pl-k">import</span> <span class="pl-v">akka.actor.</span><span class="pl-v">ActorSystem</span>
<span class="pl-k">import</span> <span class="pl-v">akka.stream.</span><span class="pl-v">ActorMaterializer</span>
<span class="pl-k">import</span> <span class="pl-v">play.api.libs.ws.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">play.api.libs.ws.ahc.</span><span class="pl-v">_</span>

<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.</span><span class="pl-v">Future</span>

<span class="pl-k">object</span> <span class="pl-en">ScalaClient</span> {
  <span class="pl-k">import</span> <span class="pl-v">DefaultBodyReadables.</span><span class="pl-v">_</span>
  <span class="pl-k">import</span> <span class="pl-v">scala.concurrent.ExecutionContext.Implicits.</span><span class="pl-v">_</span>

  <span class="pl-k">def</span> <span class="pl-en">main</span>(<span class="pl-v">args</span>: <span class="pl-en">Array</span>[<span class="pl-k">String</span>])<span class="pl-k">:</span> <span class="pl-k">Unit</span> <span class="pl-k">=</span> {
    <span class="pl-c"><span class="pl-c">//</span> Create Akka system for thread and streaming management</span>
    <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">system</span> <span class="pl-k">=</span> <span class="pl-en">ActorSystem</span>()
    system.registerOnTermination {
      <span class="pl-en">System</span>.exit(<span class="pl-c1">0</span>)
    }
    <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">materializer</span> <span class="pl-k">=</span> <span class="pl-en">ActorMaterializer</span>()

    <span class="pl-c"><span class="pl-c">//</span> Create the standalone WS client</span>
    <span class="pl-c"><span class="pl-c">//</span> no argument defaults to a AhcWSClientConfig created from</span>
    <span class="pl-c"><span class="pl-c">//</span> "AhcWSClientConfigFactory.forConfig(ConfigFactory.load, this.getClass.getClassLoader)"</span>
    <span class="pl-k">val</span> <span class="pl-en">wsClient</span> <span class="pl-k">=</span> <span class="pl-en">StandaloneAhcWSClient</span>()

    call(wsClient)
      .andThen { <span class="pl-k">case</span> _ <span class="pl-k">=&gt;</span> wsClient.close() }
      .andThen { <span class="pl-k">case</span> _ <span class="pl-k">=&gt;</span> system.terminate() }
  }

  <span class="pl-k">def</span> <span class="pl-en">call</span>(<span class="pl-v">wsClient</span>: <span class="pl-en">StandaloneWSClient</span>)<span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-k">Unit</span>] <span class="pl-k">=</span> {
    wsClient.url(<span class="pl-s"><span class="pl-pds">"</span>http://www.google.com<span class="pl-pds">"</span></span>).get().map { response <span class="pl-k">⇒</span>
      <span class="pl-k">val</span> <span class="pl-en">statusText</span><span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> response.statusText
      <span class="pl-k">val</span> <span class="pl-en">body</span> <span class="pl-k">=</span> response.body[<span class="pl-k">String</span>]
      println(s<span class="pl-s"><span class="pl-pds">"</span>Got a response $statusText<span class="pl-pds">"</span></span>)
    }
  }
}</pre>
  </div> 
  <h3><a href="https://github.com/playframework/play-ws#java-1" aria-hidden="true" class="anchor" id="user-content-java-1" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Java</h3> 
  <p>In Java the API is much the same, except that an instance of AsyncHttpClient has to be passed in explicitly:</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">package</span> <span class="pl-smi">playwsclient</span>;

<span class="pl-k">import</span> <span class="pl-smi">akka.actor.ActorSystem</span>;
<span class="pl-k">import</span> <span class="pl-smi">akka.stream.ActorMaterializer</span>;
<span class="pl-k">import</span> <span class="pl-smi">akka.stream.ActorMaterializerSettings</span>;
<span class="pl-k">import</span> <span class="pl-smi">com.typesafe.config.ConfigFactory</span>;

<span class="pl-k">import</span> <span class="pl-smi">play.libs.ws.*</span>;
<span class="pl-k">import</span> <span class="pl-smi">play.libs.ws.ahc.*</span>;

<span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.CompletionStage</span>;

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">JavaClient</span> <span class="pl-k">implements</span> <span class="pl-e">DefaultBodyReadables</span> {

    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">void</span> <span class="pl-en">main</span>(<span class="pl-k">String</span>[] <span class="pl-v">args</span>) {
        <span class="pl-c"><span class="pl-c">//</span> Set up Akka materializer to handle streaming</span>
        <span class="pl-k">final</span> <span class="pl-smi">String</span> name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>wsclient<span class="pl-pds">"</span></span>;
        <span class="pl-smi">ActorSystem</span> system <span class="pl-k">=</span> <span class="pl-smi">ActorSystem</span><span class="pl-k">.</span>create(name);
        system<span class="pl-k">.</span>registerOnTermination(() <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-smi">System</span><span class="pl-k">.</span>exit(<span class="pl-c1">0</span>));
        <span class="pl-k">final</span> <span class="pl-smi">ActorMaterializerSettings</span> settings <span class="pl-k">=</span> <span class="pl-smi">ActorMaterializerSettings</span><span class="pl-k">.</span>create(system);
        <span class="pl-k">final</span> <span class="pl-smi">ActorMaterializer</span> materializer <span class="pl-k">=</span> <span class="pl-smi">ActorMaterializer</span><span class="pl-k">.</span>create(settings, system, name);

        <span class="pl-c"><span class="pl-c">//</span> Create the WS client from the `application.conf` file, the current classloader and materializer.</span>
        <span class="pl-smi">StandaloneAhcWSClient</span> client <span class="pl-k">=</span> <span class="pl-smi">StandaloneAhcWSClient</span><span class="pl-k">.</span>create(
                <span class="pl-smi">AhcWSClientConfigFactory</span><span class="pl-k">.</span>forConfig(<span class="pl-smi">ConfigFactory</span><span class="pl-k">.</span>load(), system<span class="pl-k">.</span>getClass()<span class="pl-k">.</span>getClassLoader()),
                materializer
        );

        client<span class="pl-k">.</span>url(<span class="pl-s"><span class="pl-pds">"</span>http://www.google.com<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>get()
                .whenComplete((response, throwable) <span class="pl-k">-</span><span class="pl-k">&gt;</span> {
                    <span class="pl-smi">String</span> statusText <span class="pl-k">=</span> response<span class="pl-k">.</span>getStatusText();
                    <span class="pl-smi">String</span> body <span class="pl-k">=</span> response<span class="pl-k">.</span>body(string());
                    <span class="pl-smi">System</span><span class="pl-k">.</span>out<span class="pl-k">.</span>println(<span class="pl-s"><span class="pl-pds">"</span>Got a response <span class="pl-pds">"</span></span> <span class="pl-k">+</span> statusText);
                })
                .thenRun(() <span class="pl-k">-</span><span class="pl-k">&gt;</span> {
                    <span class="pl-k">try</span> {
                        client<span class="pl-k">.</span>close();
                    } <span class="pl-k">catch</span> (<span class="pl-smi">Exception</span> e) {
                        e<span class="pl-k">.</span>printStackTrace();
                    }
                })
                .thenRun(system<span class="pl-k">::</span>terminate);
    }
}</pre>
  </div> 
  <h2><a href="https://github.com/playframework/play-ws#caching" aria-hidden="true" class="anchor" id="user-content-caching" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Caching</h2> 
  <p>Play WS implements <a href="https://tools.ietf.org/html/rfc7234" target="_blank">HTTP Caching</a> through CachingAsyncHttpClient, AhcHTTPCache and <a href="https://github.com/playframework/cachecontrol" target="_blank">CacheControl</a>, a minimal HTTP cache management library in Scala.</p> 
  <p>To create a standalone AHC client that uses caching, pass in an instance of AhcHttpCache with a cache adapter to the underlying implementation. For example, to use Caffeine as the underlying cache, you could use the following:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">class</span> <span class="pl-en">CaffeineHttpCache</span> <span class="pl-k">extends</span> <span class="pl-e">Cache</span> {
     <span class="pl-k">val</span> <span class="pl-en">underlying</span> <span class="pl-k">=</span> <span class="pl-en">Caffeine</span>.newBuilder()
       .ticker(<span class="pl-en">Ticker</span>.systemTicker())
       .expireAfterWrite(<span class="pl-c1">365</span>, <span class="pl-en">TimeUnit</span>.<span class="pl-en">DAYS</span>)
       .build[<span class="pl-en">EffectiveURIKey</span>, <span class="pl-en">ResponseEntry</span>]()

  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">remove</span>(<span class="pl-v">key</span>: <span class="pl-en">EffectiveURIKey</span>)<span class="pl-k">:</span> <span class="pl-k">Unit</span> <span class="pl-k">=</span> underlying.invalidate(key)
  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">put</span>(<span class="pl-v">key</span>: <span class="pl-en">EffectiveURIKey</span>, <span class="pl-v">entry</span>: <span class="pl-en">ResponseEntry</span>)<span class="pl-k">:</span> <span class="pl-k">Unit</span> <span class="pl-k">=</span> underlying.put(key, entry)
  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">get</span>(<span class="pl-v">key</span>: <span class="pl-en">EffectiveURIKey</span>)<span class="pl-k">:</span> <span class="pl-en">ResponseEntry</span> <span class="pl-k">=</span> underlying.getIfPresent(key)
  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">close</span>()<span class="pl-k">:</span> <span class="pl-k">Unit</span> <span class="pl-k">=</span> underlying.cleanUp()
}
<span class="pl-k">val</span> <span class="pl-en">cache</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">CaffeineHttpCache</span>()
<span class="pl-k">val</span> <span class="pl-en">client</span> <span class="pl-k">=</span> <span class="pl-en">StandaloneAhcWSClient</span>(httpCache <span class="pl-k">=</span> <span class="pl-en">AhcHttpCache</span>(cache))   </pre>
  </div> 
  <p>There are a number of guides that help with putting together Cache-Control headers:</p> 
  <ul> 
   <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching" target="_blank">Mozilla's Guide to HTTP caching</a></li> 
   <li><a href="https://www.mnot.net/cache_docs/" target="_blank">Mark Nottingham's Guide to Caching</a></li> 
   <li><a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching" target="_blank">HTTP Caching</a></li> 
   <li><a href="http://odino.org/rest-better-http-cache/" target="_blank">REST Easy: HTTP Cache</a></li> 
  </ul> 
  <h2><a href="https://github.com/playframework/play-ws#releasing" aria-hidden="true" class="anchor" id="user-content-releasing" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Releasing</h2> 
  <p>This project uses <code>sbt-release</code> to push to Sonatype and Maven. You will need Lightbend Sonatype credentials and a GPG key that is available on one of the public keyservers to release this project.</p> 
  <p>To release cleanly, you should clone this project fresh into a directory with writable credentials (i.e. you have ssh key to github):</p> 
  <div class="highlight highlight-source-shell">
   <pre>mkdir releases
<span class="pl-c1">cd</span> releases
git clone git@github.com:playframework/play-ws.git</pre>
  </div> 
  <p>and from there you can release:</p> 
  <div class="highlight highlight-source-shell">
   <pre><span class="pl-c1">cd</span> play-ws
./release</pre>
  </div> 
  <p>The script will walk you through integration tests and publishing.</p> 
  <h2><a href="https://github.com/playframework/play-ws#license" aria-hidden="true" class="anchor" id="user-content-license" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p>Play WS is licensed under the Apache license, version 2. See the LICENSE file for more information.</p> 
 </article>
</div>