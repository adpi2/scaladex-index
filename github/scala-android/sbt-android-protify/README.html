<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-protify-instantaneous-on-device-development-for-android" class="anchor" href="https://github.com/scala-android/sbt-android-protify#protify-instantaneous-on-device-development-for-android" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>protify: instantaneous, on-device development for Android</h1> 
  <p><a href="https://bintray.com/pfn/sbt-plugins/sbt-android-protify" target="_blank"><img src="https://camo.githubusercontent.com/f09ee63bb1426bf02cd1798f065b1cfd64a872dd/68747470733a2f2f696d672e736869656c64732e696f2f62696e747261792f762f70666e2f7362742d706c7567696e732f7362742d616e64726f69642d70726f746966792e7376673f6d61784167653d32353932303030" alt="Latest version" data-canonical-src="https://img.shields.io/bintray/v/pfn/sbt-plugins/sbt-android-protify.svg?maxAge=2592000" style="max-width:100%;"></a> <a href="https://gitter.im/scala-android/sbt-android?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Join the chat at https://gitter.im/scala-android/sbt-android" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg" style="max-width:100%;"></a></p> 
  <p>NOTE: 1.2.0 is the last version published using <code>addSbtPlugin("com.hanhuy.sbt" % "android-protify" % "1.2.0")</code>, all future updates can be accessed by using <code>addSbtPlugin("org.scala-android" % "sbt-android-protify" % VERSION)</code></p> 
  <h2><a id="user-content-features" class="anchor" href="https://github.com/scala-android/sbt-android-protify#features" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Features:</h2> 
  <ul> 
   <li>Multiple language support: Java (including retrolambda), Scala, Kotlin</li> 
   <li>No code changes to app required!</li> 
   <li>Support for appcompat-v7, design and support-v4 libraries</li> 
   <li>Works with most existing android projects</li> 
   <li>Android devices api level 5+</li> 
   <li>Dex sharding for near-instant deployment</li> 
  </ul> 
  <h2><a id="user-content-demo" class="anchor" href="https://github.com/scala-android/sbt-android-protify#demo" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Demo:</h2> 
  <p><a href="http://www.youtube.com/watch?v=LJLLyua0bYA" target="_blank"><img src="https://camo.githubusercontent.com/abdc952d8fefa8f97353e2df1010a2cea8ffbf65/687474703a2f2f696d672e796f75747562652e636f6d2f76692f4c4a4c4c797561306259412f6d7164656661756c742e6a7067" alt="Live coding and hot deploy" data-canonical-src="http://img.youtube.com/vi/LJLLyua0bYA/mqdefault.jpg" style="max-width:100%;"></a></p> 
  <h2><a id="user-content-getting-started" class="anchor" href="https://github.com/scala-android/sbt-android-protify#getting-started" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Getting started:</h2> 
  <h3><a id="user-content-android-studio--gradle-quick-start" class="anchor" href="https://github.com/scala-android/sbt-android-protify#android-studio--gradle-quick-start" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Android Studio / Gradle Quick Start</h3> 
  <ol> 
   <li>Install sbt from <a href="http://scala-sbt.org" target="_blank">http://scala-sbt.org</a>, homebrew, ports, or your package manager of choice</li> 
   <li>Optionally add <code>idea-sbt-plugin</code> to run SBT inside of Android Studio</li> 
   <li>Install the <a href="https://github.com/scala-android/sbt-android/blob/master/GRADLE.md" target="_blank"><code>sbt-android-gradle</code></a> SBT plugin to automatically load your gradle build. From the base of your Android project, do: 
    <ul> 
     <li><code>mkdir project</code></li> 
     <li><code>echo 'addSbtPlugin("org.scala-android" % "sbt-android-gradle" % "1.3.2")' &gt; project/plugins.sbt</code></li> 
     <li><code>echo &gt;&gt; project/plugins.sbt</code></li> 
     <li>If you have any flavors or build types that must be loaded: 
      <ul> 
       <li><code>echo 'android.Plugin.withVariant("PROJECT-NAME (e.g. app)", Some("BUILD-TYPE"), Some("FLAVOR"))' &gt; build.sbt</code></li> 
       <li><code>echo &gt;&gt; build.sbt</code> 
        <ul> 
         <li>Replace <code>Some(...)</code> with <code>None</code> if you don't have a flavor or build type to apply</li> 
        </ul> </li> 
      </ul> </li> 
    </ul> </li> 
   <li>Install the <code>sbt-android-protify</code> plugin, also from the project base, do: 
    <ul> 
     <li><code>echo 'addSbtPlugin("org.scala-android" % "sbt-android-protify" % "1.4.4")' &gt;&gt; project/plugins.sbt</code></li> 
     <li>For every application sub-project, do: <code>echo 'enablePlugins(AndroidProtify)' &gt; APP-PROJECT-DIR/protify.sbt</code></li> 
    </ul> </li> 
   <li>Launch SBT, <code>sbt</code> (first time's gonna take a while, downloading the internet and all)</li> 
   <li>Build and install the application normally, at least once: 
    <ul> 
     <li><code>PROJECT-NAME/android:install</code> (or <code>run</code> instead of <code>install</code>) -- the first time will take a while too, since it will download the parts of the internet that your app requires</li> 
    </ul> </li> 
   <li>Thereafter: <code>PROJECT-NAME/protify</code>, do <code>~PROJECT-NAME/protify</code> to automatically trigger on all source changes</li> 
  </ol> 
  <h3><a id="user-content-everyone-else" class="anchor" href="https://github.com/scala-android/sbt-android-protify#everyone-else" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Everyone else:</h3> 
  <ol> 
   <li>Install sbt from <a href="http://scala-sbt.org" target="_blank">http://scala-sbt.org</a>, homebrew, ports, or your package manager of choice</li> 
   <li>Install <a href="https://github.com/scala-android/sbt-android" target="_blank">sbt-android</a>: <code>echo 'addSbtPlugin("org.scala-android" % "sbt-android" % "1.7.7")' &gt; ~/.sbt/0.13/plugins/android.sbt</code></li> 
   <li>Start from an existing or new project (for trivial projects): <code>sbt "gen-android ..."</code> to create a new project, <code>sbt gen-android-sbt</code> to generate sbt files in an existing project. Non-trivial projects will need more advanced sbt configuration. 
    <ul> 
     <li>Alternatively, use <code>sbt-android-gradle</code> when working with an existing gradle project: 
      <ul> 
       <li><code>echo 'addSbtPlugin("org.scala-android" % "sbt-android-gradle" % "1.3.2")' &gt; project/plugins.sbt</code></li> 
      </ul> </li> 
    </ul> </li> 
   <li>Add the protify plugin: <code>echo 'addSbtPlugin("org.scala-android" % "sbt-android-protify" % "1.4.4")' &gt;&gt; project/plugins.sbt</code></li> 
   <li>Add <code>AndroidProtify</code>: <code>echo enablePlugins(AndroidProtify) &gt;&gt; build.sbt</code></li> 
   <li>Run SBT</li> 
   <li>Select device to run on by using the <code>devices</code> and <code>device</code> commands. Run on all devices by executing <code>set allDevices in Android := true</code></li> 
   <li><code>android:run</code>, and <code>~protify</code> 
    <ul> 
     <li>Alternatively, high speed turnaround can be achieved with <code>protify:install</code> and <code>protify:run</code> to pretend the app is getting updated, rather than using the live-code mechanism.</li> 
    </ul> </li> 
   <li>Enjoy</li> 
  </ol> 
  <h3><a id="user-content-full-intellij-idea--android-studio-integration" class="anchor" href="https://github.com/scala-android/sbt-android-protify#full-intellij-idea--android-studio-integration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Full IntelliJ IDEA &amp; Android Studio integration</h3> 
  <p>To make it so that protify can be run when triggered in the IDE with a keystroke, do the following</p> 
  <ol> 
   <li>Install <a href="https://plugins.jetbrains.com/plugin/1347?pr=idea" target="_blank">Scala plugin</a> in IDE</li> 
   <li>Install <a href="https://plugins.jetbrains.com/plugin/5007?pr=idea" target="_blank">SBT plugin</a> in IDE</li> 
   <li>Create a new <code>Run</code> configuration, press the dropdown next to the play button, select <code>Edit Configurations</code> 
    <ul> 
     <li>Press <code>+</code> -&gt; <code>Android Application</code></li> 
     <li>Name the configuration <code>protify</code>, <code>instant run</code>, or whatever you like</li> 
     <li>Select the <code>app</code> module</li> 
     <li>Select <code>Do not deploy anything</code></li> 
     <li>Select <code>Do not launch activity</code></li> 
     <li>For target device, select anything that will not prompt</li> 
     <li>Uncheck <code>Activate tool window</code></li> 
     <li>Remove <code>Make</code> from <code>Before launch</code></li> 
     <li><code>Before launch</code> -&gt; <code>+</code> -&gt; <code>Add New Configuration</code> -&gt; <code>SBT</code> 
      <ul> 
       <li>In the drop down, edit the text to say <code>protify</code></li> 
      </ul> </li> 
    </ul> </li> 
   <li>You can now invoke <code>protify</code> directly as a run configuration and see changes instantly (FSVO instant) appear on-device.</li> 
  </ol> 
  <h3><a id="user-content-vim-etc" class="anchor" href="https://github.com/scala-android/sbt-android-protify#vim-etc" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Vim, etc.</h3> 
  <ol> 
   <li>Just do any of the above getting started steps and follow your own workflow.</li> 
  </ol> 
  <h4><a id="user-content-limitations" class="anchor" href="https://github.com/scala-android/sbt-android-protify#limitations" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>LIMITATIONS</h4> 
  <ul> 
   <li>Manifest changes will require <code>android:install</code> again (i.e. adding/removing: activities, services, permissions, receivers, etc). Incremental deployment cannot modify manifest.</li> 
   <li>No longer true with build-tools 24.0.0 and newer: Deleting a constant value from <code>R</code> classes (removing resources) will require running <code>protify:clean</code> or else the build will break</li> 
   <li>Object instance state, including singleton and static, will not be restored upon deploying new dex code (or resources when on device api level &lt;14). All Android <code>Bundle</code>d state will be restored in all situations</li> 
   <li>Android instrumented tests are not supported. They will fail to run because of the sharded dex and re-located resource files.</li> 
   <li>NDK is not supported at the moment (initial install works, no <code>protify</code> updates when jni code changes)</li> 
  </ul> 
  <h4><a id="user-content-todo-volunteers-wanted" class="anchor" href="https://github.com/scala-android/sbt-android-protify#todo-volunteers-wanted" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>TODO (volunteers wanted)</h4> 
  <ul> 
   <li>Support NDK. This means delivering the <code>.so</code> libraries from the build environment to the device, placing them into the correct location and triggering an app restart</li> 
   <li>Support instrumented testing. This would need implementation similar to <code>MultiDexTestRunner</code></li> 
  </ul> 
 </article>
</div>