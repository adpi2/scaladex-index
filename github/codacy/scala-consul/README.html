<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-scala-consul" class="anchor" href="https://github.com/codacy/scala-consul#scala-consul" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>scala-consul</h1> 
  <p><strong>Unmaintained</strong></p> 
  <blockquote> 
   <p>Codacy is not using consul at the moment and for that reason we are not developing this library any more. If you want to be a maintainer of this library create an <a href="https://github.com/codacy/scala-consul/issues/new" target="_blank">issue</a> so we can take that into consideration. Also, feel free to fork this and keep your own code.</p> 
  </blockquote> 
  <p><a href="https://www.codacy.com/app/Codacy/scala-consul" target="_blank"><img src="https://camo.githubusercontent.com/45f0c8a4b2259ac0c8d53a1d141639cd51f88552/68747470733a2f2f6170692e636f646163792e636f6d2f70726f6a6563742f62616467652f67726164652f3165646161653737666566393431633339623434366236646638383737313833" alt="Codacy Badge" data-canonical-src="https://api.codacy.com/project/badge/grade/1edaae77fef941c39b446b6df8877183" style="max-width:100%;"></a> <a href="https://circleci.com/gh/codacy/scala-consul" target="_blank"><img src="https://camo.githubusercontent.com/31a6ed327470f91233d3237c20cda07edb191ccb/68747470733a2f2f636972636c6563692e636f6d2f67682f636f646163792f7363616c612d636f6e73756c2e7376673f7374796c653d736869656c6426636972636c652d746f6b656e3d3a636972636c652d746f6b656e" alt="Circle CI" data-canonical-src="https://circleci.com/gh/codacy/scala-consul.svg?style=shield&amp;circle-token=:circle-token" style="max-width:100%;"></a> <a href="https://maven-badges.herokuapp.com/maven-central/com.codacy/scala-consul_2.11" target="_blank"><img src="https://camo.githubusercontent.com/4f1c2da06ea27031e33e041b3008956d25bdc246/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f636f6d2e636f646163792f7363616c612d636f6e73756c5f322e31312f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/com.codacy/scala-consul_2.11/badge.svg" style="max-width:100%;"></a></p> 
  <p>An asynchronous Scala (<a href="http://scala-lang.org/" target="_blank">http://scala-lang.org/</a>) client for Consul (<a href="https://consul.io/" target="_blank">https://consul.io/</a>)</p> 
  <p>on an sbt project add this line to your build.sbt:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.codacy<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>scala-consul<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.1.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>import Consul</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">consul.</span><span class="pl-v">Consul</span></pre>
  </div> 
  <p>instanciate a consul supplying an ip and a port indicating a working consul agent:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">myConsul</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">consul.Consul</span>(<span class="pl-en">CONSUL_IP</span>, <span class="pl-en">CONSUL_PORT</span>, <span class="pl-en">Option</span>(<span class="pl-en">CONSUL_ACL_TOKEN</span>))
<span class="pl-k">import</span> <span class="pl-v">myConsul.v1.</span><span class="pl-v">_</span></pre>
  </div> 
  <p>now you can use the consul API as indicated in the official documentation (<a href="http://www.consul.io/docs/agent/http.html" target="_blank">http://www.consul.io/docs/agent/http.html</a>)</p> 
  <p>Example - add a tuple to the Key/Value store:</p> 
  <div class="highlight highlight-source-scala">
   <pre>kv.put(<span class="pl-s"><span class="pl-pds">"</span>myKey<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>myValue<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>Example - query the registered nodes:</p> 
  <div class="highlight highlight-source-scala">
   <pre>catalog.nodes().map{ <span class="pl-k">case</span> nodes <span class="pl-k">=&gt;</span>
    <span class="pl-c"><span class="pl-c">//</span>do something with my nodes</span>
}</pre>
  </div> 
  <p>Example - register a service with an http-check on the local node:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">myAddress</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>127.0.0.1<span class="pl-pds">"</span></span>
<span class="pl-k">val</span> <span class="pl-en">myServicePort</span> <span class="pl-k">=</span> <span class="pl-c1">5000</span>
<span class="pl-k">val</span> <span class="pl-en">myServiceCheck</span> <span class="pl-k">=</span> agent.service.httpCheck(s<span class="pl-s"><span class="pl-pds">"</span>http://localhost:$myServicePort/health<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>15s<span class="pl-pds">"</span></span>)
<span class="pl-k">val</span> <span class="pl-en">myService</span> <span class="pl-k">=</span> agent.service.<span class="pl-en">LocalService</span>(<span class="pl-en">ServiceId</span>(<span class="pl-s"><span class="pl-pds">"</span>myServiceId<span class="pl-pds">"</span></span>),<span class="pl-en">ServiceType</span>(<span class="pl-s"><span class="pl-pds">"</span>myTypeOfService<span class="pl-pds">"</span></span>),<span class="pl-en">Set</span>(<span class="pl-en">ServiceTag</span>(<span class="pl-s"><span class="pl-pds">"</span>MyTag<span class="pl-pds">"</span></span>)),<span class="pl-en">Some</span>(myServicePort),<span class="pl-en">Some</span>(myServiceCheck),<span class="pl-en">Some</span>(<span class="pl-en">Address</span>(myAddress)))
agent.service.register(myService)</pre>
  </div> 
  <p>the check ID of the registered service-check is available via:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">myCheckId</span> <span class="pl-k">=</span> myService.checkId</pre>
  </div> 
  <p>the other 2 types of checks are created with:</p> 
  <div class="highlight highlight-source-scala">
   <pre>agent.service.ttlCheck</pre>
  </div> 
  <p>and</p> 
  <div class="highlight highlight-source-scala">
   <pre>agent.service.scriptCheck</pre>
  </div> 
  <p>Error Handling:</p> 
  <p>All api methods return Futures that can fail. To parse Consul responses Play's Json library is used. In the unlikely case that the client cannot parse the response the Future will fail and you might want to access the JsError parsing resulted in. You can do so by recovering the Future:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">consul.v1.common.Types.</span><span class="pl-v">ConsulResponseParseException</span>
catalog.nodes().recover{
  <span class="pl-k">case</span> <span class="pl-en">ConsulResponseParseException</span>(jsError) <span class="pl-k">=&gt;</span>  <span class="pl-c"><span class="pl-c">//</span>do something with the JsError</span>
  <span class="pl-k">case</span> <span class="pl-en">NonFatal</span>(otherException) <span class="pl-k">=&gt;</span> <span class="pl-c"><span class="pl-c">//</span>something else</span>
}</pre>
  </div> 
  <h2><a id="user-content-what-is-codacy" class="anchor" href="https://github.com/codacy/scala-consul#what-is-codacy" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>What is Codacy?</h2> 
  <p><a href="https://www.codacy.com/" target="_blank">Codacy</a> is an Automated Code Review Tool that monitors your technical debt, helps you improve your code quality, teaches best practices to your developers, and helps you save time in Code Reviews.</p> 
  <h3><a id="user-content-among-codacys-features" class="anchor" href="https://github.com/codacy/scala-consul#among-codacys-features" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Among Codacyâ€™s features:</h3> 
  <ul> 
   <li>Identify new Static Analysis issues</li> 
   <li>Commit and Pull Request Analysis with GitHub, BitBucket/Stash, GitLab (and also direct git repositories)</li> 
   <li>Auto-comments on Commits and Pull Requests</li> 
   <li>Integrations with Slack, HipChat, Jira, YouTrack</li> 
   <li>Track issues in Code Style, Security, Error Proneness, Performance, Unused Code and other categories</li> 
  </ul> 
  <p>Codacy also helps keep track of Code Coverage, Code Duplication, and Code Complexity.</p> 
  <p>Codacy supports PHP, Python, Ruby, Java, JavaScript, and Scala, among others.</p> 
  <h3><a id="user-content-free-for-open-source" class="anchor" href="https://github.com/codacy/scala-consul#free-for-open-source" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Free for Open Source</h3> 
  <p>Codacy is free for Open Source projects.</p> 
  <h3><a id="user-content-licence" class="anchor" href="https://github.com/codacy/scala-consul#licence" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Licence</h3> 
  <p>This software is licensed under the Apache 2 license: <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">http://www.apache.org/licenses/LICENSE-2.0</a></p> 
  <p>Copyright (C) 2014 Codacy (<a href="https://www.codacy.com" target="_blank">https://www.codacy.com</a>)</p> 
 </article>
</div>