<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a href="https://github.com/vptheron/spartan#spartan" aria-hidden="true" class="anchor" id="user-content-spartan" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Spartan</h1> 
  <p><a href="https://www.travis-ci.org/vptheron/spartan" target="_blank"><img src="https://camo.githubusercontent.com/ef9d3eed1cd7b9531530086dd1c9486f901b14db/68747470733a2f2f7777772e7472617669732d63692e6f72672f7670746865726f6e2f7370617274616e2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://www.travis-ci.org/vptheron/spartan.svg?branch=master" style="max-width:100%;"></a> <a href="https://codecov.io/gh/vptheron/spartan" target="_blank"><img src="https://camo.githubusercontent.com/1d0efffb62a032072c01dcb6246ff12dd0c164a2/68747470733a2f2f636f6465636f762e696f2f67682f7670746865726f6e2f7370617274616e2f6272616e63682f6d61737465722f67726170682f62616467652e737667" alt="codecov" data-canonical-src="https://codecov.io/gh/vptheron/spartan/branch/master/graph/badge.svg" style="max-width:100%;"></a> <a href="http://www.apache.org/licenses/LICENSE-2.0.html" target="_blank"><img src="https://camo.githubusercontent.com/60a4436cdbb8e282f0f6e6d309c097356e3a2905/687474703a2f2f696d672e736869656c64732e696f2f3a6c6963656e73652d6170616368652d627269676874677265656e2e737667" alt="License" data-canonical-src="http://img.shields.io/:license-apache-brightgreen.svg" style="max-width:100%;"></a></p> 
  <p><a href="https://github.com/vptheron/spartan/blob/master/assets/logo.png" target="_blank"><img src="https://github.com/vptheron/spartan/raw/master/assets/logo.png" width="128" height="128" style="max-width:100%;"></a></p> 
  <p>Spartan is a Scala library for handling failures. It is designed with the following goals in mind (in no particular order):</p> 
  <ul> 
   <li>as few 3rd party dependencies as possible</li> 
   <li>a good compromise between being opinionated and flexible</li> 
   <li>using FP principles where possible</li> 
  </ul> 
  <h2><a href="https://github.com/vptheron/spartan#disclaimer" aria-hidden="true" class="anchor" id="user-content-disclaimer" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Disclaimer</h2> 
  <p>The library is currently experimental and actively worked on. Versions released as 0.X.Y are still at the exploration stage. Until version 1.0 is reached, the API should be considered highly unstable and candidate to breaking changes.</p> 
  <h2><a href="https://github.com/vptheron/spartan#usage" aria-hidden="true" class="anchor" id="user-content-usage" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <h3><a href="https://github.com/vptheron/spartan#futures" aria-hidden="true" class="anchor" id="user-content-futures" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Futures</h3> 
  <p>The <a href="https://github.com/vptheron/spartan/blob/master/src/main/scala/me/vptheron/spartan/Futures.scala" target="_blank">Futures</a> module contains convenient functions to manipulate <code>Future</code> and computations producing a <code>Future</code>.</p> 
  <p>It also introduces the concept of deferred <code>Future</code>, aliased <code>FutureF</code>. This is a simple alias for a function taking 0 arguments, and returning a <code>Future</code>. This is a simple way to manipulate futures and asynchronous computations while limiting the side-effect of scheduling a <code>Future</code> for execution as soon as an instance is created. It makes it possible to write the following:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">delay</span><span class="pl-k">:</span> <span class="pl-en">FiniteDuration</span> <span class="pl-k">=</span> <span class="pl-k">???</span>
<span class="pl-k">val</span> <span class="pl-en">timeout</span><span class="pl-k">:</span> <span class="pl-en">FiniteDuration</span> <span class="pl-k">=</span> <span class="pl-k">???</span>
<span class="pl-k">val</span> <span class="pl-en">f</span> <span class="pl-k">=</span> futureF(<span class="pl-c1">42</span>)

<span class="pl-k">val</span> <span class="pl-en">resultF</span> <span class="pl-k">=</span> withTimeout(withDelay(f, delay), timeout)

resultF()</pre>
  </div> 
  <p>A deferred computation can be instantiated and manipulated to add timeouts, delays, etc. It is then easy to perform the computation at the end.</p> 
  <h3><a href="https://github.com/vptheron/spartan#retrystrategy" aria-hidden="true" class="anchor" id="user-content-retrystrategy" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>RetryStrategy</h3> 
  <p>A <a href="https://github.com/vptheron/spartan/blob/master/src/main/scala/me/vptheron/spartan/RetryStrategy.scala" target="_blank">RetryStrategy</a> can be used to retry a potentially failing computation several times. It is composed of various strategies:</p> 
  <ul> 
   <li><code>DelayStrategy</code> is used to decide how long to wait between each attempt</li> 
   <li><code>TerminationStrategy</code> is used to decide when to give up and return the last failure</li> 
  </ul> 
  <p>Additionally, a <code>RetryStrategy</code> can be defined to abort on specific types of <code>Throwable</code>.</p> 
  <p>Each module comes with factory functions to create various strategies.</p> 
  <p>Examples:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">//</span> A strategy that will give up after 5 failures, and will always wait for `delay`</span>
<span class="pl-c"><span class="pl-c">//</span> between each attempt</span>
<span class="pl-en">RetryStrategy</span>(
  <span class="pl-en">TerminationStrategy</span>.maxAttempts(<span class="pl-c1">5</span>),
  <span class="pl-en">DelayStrategy</span>.constantDelay(delay))
  
<span class="pl-c"><span class="pl-c">//</span> A strategy that will retry for `duration`, where the delay between each retry</span>
<span class="pl-c"><span class="pl-c">//</span> will exponentially increase, while remaining lower than `maxDelay`, and where</span>
<span class="pl-c"><span class="pl-c">//</span> a random `jitter` is applied.</span>
<span class="pl-en">RetryStrategy</span>(
  <span class="pl-en">TerminationStrategy</span>.maxDuration(duration),
  <span class="pl-en">DelayStrategy</span>.withJitter(
    <span class="pl-en">DelayStrategy</span>.withMaxDelay(
      <span class="pl-en">DelayStrategy</span>.exponentialDelay(delay, <span class="pl-c1">1.3</span>),
      maxDelay), 
    jitter))
    
<span class="pl-c"><span class="pl-c">//</span> A strategy that will retry either 3 times, or for a max duration of `duration`, </span>
<span class="pl-c"><span class="pl-c">//</span> whichever happens first.  The delay will grow linearly.  Additionally, if a failure</span>
<span class="pl-c"><span class="pl-c">//</span> happens to be an `IllegalArgumentException`, the computation will return immediately, </span>
<span class="pl-c"><span class="pl-c">//</span> regardless of the termination strategy.</span>
<span class="pl-en">RetryStrategy</span>(
  <span class="pl-en">TerminationStrategy</span>.terminatesIfAtLeastOne(
    <span class="pl-en">TerminationStrategy</span>.maxAttempts(<span class="pl-c1">3</span>),
    <span class="pl-en">TerminationStrategy</span>.maxDuration(duration)),
  <span class="pl-en">DelayStrategy</span>.linearDelay(delay),
  {
    <span class="pl-k">case</span> <span class="pl-v">_</span>: <span class="pl-en">IllegalArgumentException</span> <span class="pl-k">=&gt;</span> <span class="pl-c1">true</span>
    <span class="pl-k">case</span> _ <span class="pl-k">=&gt;</span> <span class="pl-c1">false</span>
  })</pre>
  </div> 
  <p>A <code>RetryStrategy</code> can be used to perform synchronous, blocking computations, or asynchronous computations:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">strategy</span><span class="pl-k">:</span> <span class="pl-en">RetryStrategy</span> <span class="pl-k">=</span> <span class="pl-k">???</span>

<span class="pl-en">RetryStrategy</span>.attempt(strategy, () <span class="pl-k">=&gt;</span> <span class="pl-c1">42</span>)
<span class="pl-en">RetryStrategy</span>.attemptAsync(strategy, <span class="pl-en">Futures</span>.futureF(<span class="pl-c1">42</span>))</pre>
  </div> 
  <h3><a href="https://github.com/vptheron/spartan#circuit-breaker" aria-hidden="true" class="anchor" id="user-content-circuit-breaker" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Circuit Breaker</h3> 
  <p>Coming soon :)</p> 
  <h2><a href="https://github.com/vptheron/spartan#contribute" aria-hidden="true" class="anchor" id="user-content-contribute" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Contribute</h2> 
  <p>All pull requests welcome.</p> 
  <h2><a href="https://github.com/vptheron/spartan#license" aria-hidden="true" class="anchor" id="user-content-license" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p>Copyright 2017 Vincent Theron. Released under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html" target="_blank">Apache 2.0 license</a>.</p> 
 </article>
</div>