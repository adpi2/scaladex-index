<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-scalacache" class="anchor" href="https://github.com/cb372/cacheable#scalacache" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>ScalaCache</h1> 
  <p><a href="https://gitter.im/cb372/scalacache?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank"><img src="https://camo.githubusercontent.com/1118cf23986796b63bf33ef04c0ce24752e65066/68747470733a2f2f6261646765732e6769747465722e696d2f63623337322f7363616c6163616368652e737667" alt="Join the chat at https://gitter.im/cb372/scalacache" data-canonical-src="https://badges.gitter.im/cb372/scalacache.svg" style="max-width:100%;"></a></p> 
  <p><a href="https://travis-ci.org/cb372/scalacache" target="_blank"><img src="https://camo.githubusercontent.com/586644912f0acfa98e179837930231670f3b2190/68747470733a2f2f7472617669732d63692e6f72672f63623337322f7363616c6163616368652e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/cb372/scalacache.png?branch=master" style="max-width:100%;"></a> <a href="https://maven-badges.herokuapp.com/maven-central/com.github.cb372/scalacache-core_2.11" target="_blank"><img src="https://camo.githubusercontent.com/06be616b3ef9b99525fae413596393e06daba19e/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f636f6d2e6769746875622e63623337322f7363616c6163616368652d636f72655f322e31312f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/com.github.cb372/scalacache-core_2.11/badge.svg" style="max-width:100%;"></a></p> 
  <p>(formerly known as Cacheable)</p> 
  <p>A facade for the most popular cache implementations, with a simple, idiomatic Scala API.</p> 
  <p>Use ScalaCache to add caching to any Scala app with the minimum of fuss.</p> 
  <p>The following cache implementations are supported, and it's easy to plugin your own implementation:</p> 
  <ul> 
   <li>Google Guava</li> 
   <li>Memcached</li> 
   <li>Ehcache</li> 
   <li>Redis</li> 
   <li><a href="https://github.com/ben-manes/caffeine" target="_blank">Caffeine</a></li> 
  </ul> 
  <h2><a id="user-content-versioning" class="anchor" href="https://github.com/cb372/cacheable#versioning" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Versioning</h2> 
  <p>ScalaCache is available for Scala 2.11.x and 2.12.x.</p> 
  <h2><a id="user-content-how-to-use" class="anchor" href="https://github.com/cb372/cacheable#how-to-use" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>How to use</h2> 
  <h3><a id="user-content-scalacache-instance" class="anchor" href="https://github.com/cb372/cacheable#scalacache-instance" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>ScalaCache instance</h3> 
  <p>To use ScalaCache you must first create a <code>ScalaCache</code> instance and ensure it is in implicit scope. The <code>ScalaCache</code> is a container for the cache itself, as well as a variety of configuration parameters. It packages up everything needed for caching into one case class for easy implicit passing.</p> 
  <p>The simplest way to construct a <code>ScalaCache</code> is just to pass a cache instance, like this:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">scalacache.</span><span class="pl-v">_</span>

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">scalaCache</span> <span class="pl-k">=</span> <span class="pl-en">ScalaCache</span>(<span class="pl-k">new</span> <span class="pl-en">MyCache</span>())</pre>
  </div> 
  <p>Note that depending on your cache implementation, the cache may take an <code>ExecutionContext</code> in its constructor. By default it will use <code>ExecutionContext.global</code>, but you can pass in a custom one if you wish.</p> 
  <h3><a id="user-content-basic-cache-operations" class="anchor" href="https://github.com/cb372/cacheable#basic-cache-operations" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Basic cache operations</h3> 
  <p>Assuming you have a <code>ScalaCache</code> in implicit scope:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">scalacache.</span><span class="pl-v">_</span>

<span class="pl-c">// Add an item to the cache</span>
put(<span class="pl-s"><span class="pl-pds">"</span>myKey<span class="pl-pds">"</span></span>)(<span class="pl-s"><span class="pl-pds">"</span>myValue<span class="pl-pds">"</span></span>) <span class="pl-c">// returns a Future[Unit]</span>

<span class="pl-c">// Add an item to the cache with a Time To Live</span>
put(<span class="pl-s"><span class="pl-pds">"</span>otherKey<span class="pl-pds">"</span></span>)(<span class="pl-s"><span class="pl-pds">"</span>otherValue<span class="pl-pds">"</span></span>, ttl <span class="pl-k">=</span> <span class="pl-en">Some</span>(<span class="pl-c1">10.</span>seconds))

<span class="pl-c">// Retrieve the added item</span>
get[<span class="pl-k">String</span>, <span class="pl-en">NoSerialization</span>](<span class="pl-s"><span class="pl-pds">"</span>myKey<span class="pl-pds">"</span></span>) <span class="pl-c">// returns a Future of an Option</span>

<span class="pl-c">// If you are using a serializing cache implementation (Memcached or Redis), use Array[Byte]</span>
get[<span class="pl-k">String</span>, <span class="pl-en">Array</span>[<span class="pl-k">Byte</span>]](<span class="pl-s"><span class="pl-pds">"</span>myKey<span class="pl-pds">"</span></span>) <span class="pl-c">// returns a Future of an Option</span>

<span class="pl-c">// Remove it from the cache</span>
remove(<span class="pl-s"><span class="pl-pds">"</span>myKey<span class="pl-pds">"</span></span>) <span class="pl-c">// returns a Future[Unit]</span>

<span class="pl-c">// Flush the cache</span>
removeAll() <span class="pl-c">// returns a Future[Unit]</span>

<span class="pl-c">// Wrap any block with caching</span>
<span class="pl-k">val</span> <span class="pl-en">future</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-k">String</span>] <span class="pl-k">=</span> caching(<span class="pl-s"><span class="pl-pds">"</span>myKey<span class="pl-pds">"</span></span>) {
  <span class="pl-en">Future</span> { 
    <span class="pl-c">// e.g. call an external API ...</span>
    <span class="pl-s"><span class="pl-pds">"</span>result of block<span class="pl-pds">"</span></span> 
  }
}

<span class="pl-c">// You can specify a Time To Live if you like</span>
<span class="pl-k">val</span> <span class="pl-en">future</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-k">String</span>] <span class="pl-k">=</span> cachingWithTTL(<span class="pl-s"><span class="pl-pds">"</span>myKey<span class="pl-pds">"</span></span>)(<span class="pl-c1">10.</span>seconds) {
  <span class="pl-en">Future</span> {
    <span class="pl-c">// do stuff...</span>
    <span class="pl-s"><span class="pl-pds">"</span>result of block<span class="pl-pds">"</span></span>
  }
}

<span class="pl-c">// You can also pass multiple parts to be combined into one key</span>
put(<span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span>, <span class="pl-c1">123</span>, <span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>)(value) <span class="pl-c">// Will be cached with key "foo:123:bar"</span></pre>
  </div> 
  <h3><a id="user-content-synchronous-api" class="anchor" href="https://github.com/cb372/cacheable#synchronous-api" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Synchronous API</h3> 
  <p>If you don't want to bother with Futures, you can do a blocking read from the cache using the <code>getSync</code> method. This just wraps the <code>get</code> method, blocking indefinitely.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">scalacache.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">myValue</span><span class="pl-k">:</span> <span class="pl-en">Option</span>[<span class="pl-k">String</span>] <span class="pl-k">=</span> sync.get(<span class="pl-s"><span class="pl-pds">"</span>myKey<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>If you're using an in-memory cache (e.g. Guava) then this is fine. But if you're communicating with a cache over a network (e.g. Redis, Memcached) then <code>sync.get</code> is not recommended. If the network goes down, your app could hang forever!</p> 
  <p>There are also synchronous versions of the <code>caching</code> and <code>cachingWithTTL</code> methods available:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">result</span> <span class="pl-k">=</span> sync.caching(<span class="pl-s"><span class="pl-pds">"</span>myKey<span class="pl-pds">"</span></span>) {
  <span class="pl-c">// do stuff...</span>
  <span class="pl-s"><span class="pl-pds">"</span>result of block<span class="pl-pds">"</span></span>
}

<span class="pl-k">val</span> <span class="pl-en">result</span> <span class="pl-k">=</span> sync.cachingWithTTL(<span class="pl-s"><span class="pl-pds">"</span>myKey<span class="pl-pds">"</span></span>)(<span class="pl-c1">10.</span>seconds) {
  <span class="pl-c">// do stuff...</span>
  <span class="pl-s"><span class="pl-pds">"</span>result of block<span class="pl-pds">"</span></span>
}</pre>
  </div> 
  <h3><a id="user-content-memoization-of-method-results" class="anchor" href="https://github.com/cb372/cacheable#memoization-of-method-results" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Memoization of method results</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">scalacache.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">memoization.</span><span class="pl-v">_</span>

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">scalaCache</span> <span class="pl-k">=</span> <span class="pl-en">ScalaCache</span>(<span class="pl-k">new</span> <span class="pl-en">MyCache</span>())

<span class="pl-k">def</span> <span class="pl-en">getUser</span>(<span class="pl-v">id</span>: <span class="pl-k">Int</span>)<span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">User</span>] <span class="pl-k">=</span> memoize {
  <span class="pl-en">Future</span> {
    <span class="pl-c">// Retrieve data from a remote API here ...</span>
    <span class="pl-en">User</span>(id, s<span class="pl-s"><span class="pl-pds">"</span>user${id}<span class="pl-pds">"</span></span>)
  }
}</pre>
  </div> 
  <p>Did you spot the magic word 'memoize' in the <code>getUser</code> method? Just adding this keyword will cause the result of the method to be memoized to a cache. The next time you call the method with the same arguments the result will be retrieved from the cache and returned immediately.</p> 
  <h4><a id="user-content-time-to-live" class="anchor" href="https://github.com/cb372/cacheable#time-to-live" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Time To Live</h4> 
  <p>You can optionally specify a Time To Live for the cached result:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">concurrent.duration.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">language.</span><span class="pl-v">postfixOps</span>

<span class="pl-k">def</span> <span class="pl-en">getUser</span>(<span class="pl-v">id</span>: <span class="pl-k">Int</span>)<span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">User</span>] <span class="pl-k">=</span> memoize(<span class="pl-c1">60</span> seconds) {
  <span class="pl-en">Future</span> {
    <span class="pl-c">// Retrieve data from a remote API here ...</span>
    <span class="pl-en">User</span>(id, s<span class="pl-s"><span class="pl-pds">"</span>user${id}<span class="pl-pds">"</span></span>)
  }
}</pre>
  </div> 
  <p>In the above sample, the retrieved User object will be evicted from the cache after 60 seconds.</p> 
  <h4><a id="user-content-synchronous-memoization-api" class="anchor" href="https://github.com/cb372/cacheable#synchronous-memoization-api" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Synchronous memoization API</h4> 
  <p>Again, there are synchronous equivalents available for the case where you don't want to bother with Futures:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">scalacache.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">memoization.</span><span class="pl-v">_</span>

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">scalaCache</span> <span class="pl-k">=</span> <span class="pl-en">ScalaCache</span>(<span class="pl-k">new</span> <span class="pl-en">MyCache</span>())

<span class="pl-k">def</span> <span class="pl-en">getUser</span>(<span class="pl-v">id</span>: <span class="pl-k">Int</span>)<span class="pl-k">:</span> <span class="pl-en">User</span> <span class="pl-k">=</span> memoizeSync {
  <span class="pl-c">// Do DB lookup here...</span>
  <span class="pl-en">User</span>(id, s<span class="pl-s"><span class="pl-pds">"</span>user${id}<span class="pl-pds">"</span></span>)
}</pre>
  </div> 
  <h4><a id="user-content-how-it-works" class="anchor" href="https://github.com/cb372/cacheable#how-it-works" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>How it works</h4> 
  <p>Like Spring Cache and similar frameworks, ScalaCache automatically builds a cache key based on the method being called, and the values of the arguments being passed to that method. However, instead of using proxies like Spring, it makes use of Scala macros, so most of the information needed to build the cache key is gathered at compile time. No reflection or AOP magic is required at runtime.</p> 
  <h4><a id="user-content-cache-key-generation" class="anchor" href="https://github.com/cb372/cacheable#cache-key-generation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Cache key generation</h4> 
  <p>The cache key is built automatically from the class name, the name of the enclosing method, and the values of all of the method's parameters.</p> 
  <p>For example, given the following method:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">package</span> <span class="pl-en">foo</span>

<span class="pl-k">object</span> <span class="pl-en">Bar</span> {
  <span class="pl-k">def</span> <span class="pl-en">baz</span>(<span class="pl-v">a</span>: <span class="pl-k">Int</span>, <span class="pl-v">b</span>: <span class="pl-k">String</span>)(<span class="pl-v">c</span>: <span class="pl-k">String</span>)<span class="pl-k">:</span> <span class="pl-k">Int</span> <span class="pl-k">=</span> memoizeSync {
    <span class="pl-c">// Reticulating splines...   </span>
    <span class="pl-c1">123</span>
  }
}</pre>
  </div> 
  <p>the result of the method call</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">result</span> <span class="pl-k">=</span> <span class="pl-en">Bar</span>.baz(<span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>)(<span class="pl-s"><span class="pl-pds">"</span>world<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>would be cached with the key: <code>foo.bar.Baz(1, hello)(world)</code>.</p> 
  <p>Note that the cache key generation logic is customizable. Just provide your own implementation of <a href="https://github.com/cb372/cacheable/blob/master/core/src/main/scala/scalacache/memoization/MethodCallToStringConverter.scala" target="_blank">MethodCallToStringConverter</a></p> 
  <h4><a id="user-content-enclosing-classs-constructor-arguments" class="anchor" href="https://github.com/cb372/cacheable#enclosing-classs-constructor-arguments" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Enclosing class's constructor arguments</h4> 
  <p>If your memoized method is inside a class, rather than an object, then the method's result might depend on values passed to that class's constructor.</p> 
  <p>For example, if your code looks like this:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">package</span> <span class="pl-en">foo</span>

<span class="pl-k">class</span> <span class="pl-en">Bar</span>(<span class="pl-v">a</span>: <span class="pl-k">Int</span>) {

  <span class="pl-k">def</span> <span class="pl-en">baz</span>(<span class="pl-v">b</span>: <span class="pl-k">Int</span>)<span class="pl-k">:</span> <span class="pl-k">Int</span> <span class="pl-k">=</span> memoizeSync {
    a <span class="pl-k">+</span> b
  }

}</pre>
  </div> 
  <p>then you want the cache key to depend on the values of both <code>a</code> and <code>b</code>. In that case, you need to use a different implementation of <a href="https://github.com/cb372/cacheable/blob/master/core/src/main/scala/scalacache/memoization/MethodCallToStringConverter.scala" target="_blank">MethodCallToStringConverter</a>, like this:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">scalaCache</span> <span class="pl-k">=</span> <span class="pl-en">ScalaCache</span>(
  cache <span class="pl-k">=</span> ... ,
  memoization <span class="pl-k">=</span> <span class="pl-en">MemoizationConfig</span>(<span class="pl-en">MethodCallToStringConverter</span>.includeClassConstructorParams)
)</pre>
  </div> 
  <p>Doing this will ensure that both the constructor arguments and the method arguments are included in the cache key:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">new</span> <span class="pl-en">Bar</span>(<span class="pl-c1">10</span>).baz(<span class="pl-c1">42</span>) <span class="pl-c">// cached as "foo.Bar(10).baz(42)" -&gt; 52</span>
<span class="pl-k">new</span> <span class="pl-en">Bar</span>(<span class="pl-c1">20</span>).baz(<span class="pl-c1">42</span>) <span class="pl-c">// cached as "foo.Bar(20).baz(42)" -&gt; 62</span></pre>
  </div> 
  <h4><a id="user-content-excluding-parameters-from-the-generated-cache-key" class="anchor" href="https://github.com/cb372/cacheable#excluding-parameters-from-the-generated-cache-key" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Excluding parameters from the generated cache key</h4> 
  <p>If there are any parameters (either method arguments or class constructor arguments) that you don't want to include in the auto-generated cache key for memoization, you can exclude them using the <code>@cacheKeyExclude</code> annotation.</p> 
  <p>For example:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">def</span> <span class="pl-en">doSomething</span>(<span class="pl-v">userId</span>: <span class="pl-en">UserId</span>)(<span class="pl-k">implicit</span> <span class="pl-k">@</span>cacheKeyExclude <span class="pl-v">db</span>: <span class="pl-en">DBConnection</span>) <span class="pl-k">=</span> memoize {
  ...
}</pre>
  </div> 
  <p>will only include the <code>userId</code> argument's value in its cache keys.</p> 
  <h3><a id="user-content-flags" class="anchor" href="https://github.com/cb372/cacheable#flags" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Flags</h3> 
  <p>Cache GETs and/or PUTs can be temporarily disabled using flags. This can be useful if for example you want to skip the cache and read a value from the DB under certain conditions.</p> 
  <p>You can set flags by defining a <a href="https://github.com/cb372/cacheable/blob/master/core/src/main/scala/scalacache/Flags.scala" target="_blank">scalacache.Flags</a> instance in implicit scope.</p> 
  <p>The detailed behaviour of the flags is as follows:</p> 
  <ul> 
   <li>If <code>readsEnabled</code> = false, the cache will not be read, and ScalaCache will behave as if it was a cache miss. This means that memoization will compute the value (e.g. read it from a DB) and then write it to the cache.</li> 
   <li>If <code>writesEnabled</code> = false, in the case of a cache miss, the value will be computed (e.g. read from a DB) but it will not be written to the cache.</li> 
   <li>If both flags are false, memoization will not read from the cache or write to the cache.</li> 
  </ul> 
  <p>Note that your memoized method must take an implicit parameter of type <code>Flags</code>. Otherwise any flags you try to set using an implicit will be silently ignored.</p> 
  <p>Example:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">scalacache.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">memoization.</span><span class="pl-v">_</span>

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">scalaCache</span> <span class="pl-k">=</span> <span class="pl-en">ScalaCache</span>(<span class="pl-k">new</span> <span class="pl-en">MyCache</span>())

<span class="pl-k">def</span> <span class="pl-en">getUser</span>(<span class="pl-v">id</span>: <span class="pl-k">Int</span>)(<span class="pl-k">implicit</span> <span class="pl-v">flags</span>: <span class="pl-en">Flags</span>)<span class="pl-k">:</span> <span class="pl-en">User</span> <span class="pl-k">=</span> memoizeSync {
  <span class="pl-c">// Do DB lookup here...</span>
  <span class="pl-en">User</span>(id, s<span class="pl-s"><span class="pl-pds">"</span>user${id}<span class="pl-pds">"</span></span>)
}

<span class="pl-k">def</span> <span class="pl-en">getUser</span>(<span class="pl-v">id</span>: <span class="pl-k">Int</span>, <span class="pl-v">skipCache</span>: <span class="pl-k">Boolean</span>)<span class="pl-k">:</span> <span class="pl-en">User</span> <span class="pl-k">=</span> {
  <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">flags</span> <span class="pl-k">=</span> <span class="pl-en">Flags</span>(readsEnabled <span class="pl-k">=</span> <span class="pl-k">!</span>skipCache)
  getUser(id)
}</pre>
  </div> 
  <p>Tip: Because the flags are passed as a parameter to your method, they will be included in the generated cache key. This means the cache key will vary depending on the value of the flags, which is probably not what you want. In that case, you should exclude the <code>implicit flags: Flags</code> parameter from cache key generation by annotating it with <code>@cacheKeyExclude</code>.</p> 
  <h3><a id="user-content-typed-api" class="anchor" href="https://github.com/cb372/cacheable#typed-api" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Typed API</h3> 
  <p>If you are only storing one type of object in your cache, and you want to ensure you don't accidentally cache something of the wrong type, you can use the Typed API:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">scalacache.</span><span class="pl-v">_</span>

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">scalaCache</span> <span class="pl-k">=</span> <span class="pl-en">ScalaCache</span>(<span class="pl-k">new</span> <span class="pl-en">MyCache</span>())

<span class="pl-c">// Use NoSerialization for in-memory caches such as Caffeine, </span>
<span class="pl-c">// or Array[Byte] for serializing caches such as Memcached or Redis</span>
<span class="pl-k">val</span> <span class="pl-en">cache</span> <span class="pl-k">=</span> typed[<span class="pl-en">User</span>, <span class="pl-en">NoSerialization</span>]

cache.put(<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>, <span class="pl-en">User</span>(<span class="pl-c1">123</span>, <span class="pl-s"><span class="pl-pds">"</span>Chris<span class="pl-pds">"</span></span>)) <span class="pl-c">// OK</span>
cache.put(<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>wibble<span class="pl-pds">"</span></span>) <span class="pl-c">// Compile error!</span>

cache.get(<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>) <span class="pl-c">// returns Future[Option[User]]</span></pre>
  </div> 
  <h2><a id="user-content-serialization--deserialization" class="anchor" href="https://github.com/cb372/cacheable#serialization--deserialization" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Serialization / Deserialization</h2> 
  <p>For cache implementations that do not store their data locally (like <a href="https://github.com/cb372/cacheable#Memcached" target="_blank">Memcached</a> and <a href="https://github.com/cb372/cacheable#Redis" target="_blank">Redis</a>), serialization and deserialization of data to and from <code>Array[Byte]</code> is handled by a <code>Codec</code> type class. We provide efficient <code>Codec</code> instances for all primitive types, and provide an implementation for objects based on Java serialisation. </p> 
  <h3><a id="user-content-custom-codec" class="anchor" href="https://github.com/cb372/cacheable#custom-codec" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Custom Codec</h3> 
  <p>If you want to use a custom <code>Codec</code> for your object of type <code>A</code>, simply implement an instance of <code>Codec[A, Array[Byte]]</code> and make sure it is in scope at your <code>set</code>/<code>put</code> call site.</p> 
  <h3><a id="user-content-compression-of-codeca-arraybyte" class="anchor" href="https://github.com/cb372/cacheable#compression-of-codeca-arraybyte" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Compression of <code>Codec[A, Array[Byte]]</code></h3> 
  <p>If you want to compress your serialised data before sending it to your cache, ScalaCache has a built-in <code>GZippingBinaryCodec[A]</code> mix-in trait that will automatically apply GZip compression before sending it over the wire if the <code>Array[Byte]</code> representation is above a <code>sizeThreshold</code>. It also takes care of properly decompressing data upon retrieval. To use it, simply extend your <code>Codec[A, Array[Byte] with GZippingBinaryCodec[A]</code> <strong>last</strong> (it should be the right-most extended trait).</p> 
  <p>Those who want to use GZip compression with standard Java serialisation can <code>import scalacache.serialization.GZippingJavaAnyBinaryCodec._</code> or provide an implicit <code>GZippingJavaAnyBinaryCodec</code> at the cache call site.</p> 
  <h3><a id="user-content-backwards-compatibility" class="anchor" href="https://github.com/cb372/cacheable#backwards-compatibility" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Backwards compatibility</h3> 
  <p>In the interests of keeping backward compatibility with older versions of ScalaCache before serialization was handled by <code>Codec</code>, <code>MemcachedCache</code>, <code>RedisCache</code>, <code>SentinelRedisCache</code>, and <code>SharedRedisCache</code> have a <code>useLegacySerialization</code> boolean parameter, which allows you to continue using the original ScalaCache serialization/deserialization logic.</p> 
  <p>Legacy users who want to avoid deserialization errors when uprading should set this parameter to <code>true</code> <em>or</em> clear your caches before deploying code that depends on ScalaCache after version <code>0.7.5</code></p> 
  <h2><a id="user-content-cache-implementations" class="anchor" href="https://github.com/cb372/cacheable#cache-implementations" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Cache implementations</h2> 
  <h3><a id="user-content-google-guava" class="anchor" href="https://github.com/cb372/cacheable#google-guava" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Google Guava</h3> 
  <p>SBT:</p> 
  <pre><code>libraryDependencies += "com.github.cb372" %% "scalacache-guava" % "0.9.3"
</code></pre> 
  <p>Usage:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">scalacache.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">guava.</span><span class="pl-v">_</span>

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">scalaCache</span> <span class="pl-k">=</span> <span class="pl-en">ScalaCache</span>(<span class="pl-en">GuavaCache</span>())</pre>
  </div> 
  <p>This will build a Guava cache with all the default settings. If you want to customize your Guava cache, then build it yourself and pass it to <code>GuavaCache</code> like this:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">scalacache.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">guava.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">com.google.common.cache.</span><span class="pl-v">CacheBuilder</span>

<span class="pl-k">val</span> <span class="pl-en">underlyingGuavaCache</span> <span class="pl-k">=</span> <span class="pl-en">CacheBuilder</span>.newBuilder().maximumSize(<span class="pl-c1">10000L</span>).build[<span class="pl-k">String</span>, <span class="pl-en">Object</span>]
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">scalaCache</span> <span class="pl-k">=</span> <span class="pl-en">ScalaCache</span>(<span class="pl-en">GuavaCache</span>(underlyingGuavaCache))</pre>
  </div> 
  <h3><a id="user-content-memcached" class="anchor" href="https://github.com/cb372/cacheable#memcached" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Memcached</h3> 
  <p>SBT:</p> 
  <pre><code>libraryDependencies += "com.github.cb372" %% "scalacache-memcached" % "0.9.3"
</code></pre> 
  <p>Usage:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">scalacache.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">memcached.</span><span class="pl-v">_</span>

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">scalaCache</span> <span class="pl-k">=</span> <span class="pl-en">ScalaCache</span>(<span class="pl-en">MemcachedCache</span>(<span class="pl-s"><span class="pl-pds">"</span>host:port<span class="pl-pds">"</span></span>))</pre>
  </div> 
  <p>or provide your own Memcached client, like this:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">scalacache.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">memcached.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">net.spy.memcached.</span><span class="pl-v">MemcachedClient</span>

<span class="pl-k">val</span> <span class="pl-en">memcachedClient</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">MemcachedClient</span>(...)
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">scalaCache</span> <span class="pl-k">=</span> <span class="pl-en">ScalaCache</span>(<span class="pl-en">MemcachedCache</span>(memcachedClient))</pre>
  </div> 
  <h4><a id="user-content-keys" class="anchor" href="https://github.com/cb372/cacheable#keys" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Keys</h4> 
  <p>Memcached only accepts ASCII keys with length &lt;= 250 characters (see the <a href="https://github.com/memcached/memcached/blob/1.4.20/doc/protocol.txt#L41" target="_blank">spec</a> for more details).</p> 
  <p>ScalaCache provides two <code>KeySanitizer</code> implementations that convert your cache keys into valid Memcached keys.</p> 
  <ul> 
   <li><p><code>ReplaceAndTruncateSanitizer</code> simply replaces non-ASCII characters with underscores and truncates long keys to 250 chars. This sanitizer is convenient because it keeps your keys human-readable. Use it if you only expect ASCII characters to appear in cache keys and you don't use any massively long keys.</p></li> 
   <li><p><code>HashingMemcachedKeySanitizer</code> uses a hash of your cache key, so it can turn any string into a valid Memcached key. The only downside is that it turns your keys into gobbledigook, which can make debugging a pain. </p></li> 
  </ul> 
  <h3><a id="user-content-ehcache" class="anchor" href="https://github.com/cb372/cacheable#ehcache" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Ehcache</h3> 
  <p>SBT:</p> 
  <pre><code>libraryDependencies += "com.github.cb372" %% "scalacache-ehcache" % "0.9.3"
</code></pre> 
  <p>Usage:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">scalacache.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">ehcache.</span><span class="pl-v">_</span>

<span class="pl-c">// We assume you've already taken care of Ehcache config, </span>
<span class="pl-c">// and you have an initialized Ehcache cache.</span>
<span class="pl-k">val</span> <span class="pl-en">cacheManager</span><span class="pl-k">:</span> net.sf.ehcache.<span class="pl-en">CacheManager</span> <span class="pl-k">=</span> ...
<span class="pl-k">val</span> <span class="pl-en">underlying</span><span class="pl-k">:</span> net.sf.ehcache.<span class="pl-en">Cache</span> <span class="pl-k">=</span> cacheManager.getCache(<span class="pl-s"><span class="pl-pds">"</span>myCache<span class="pl-pds">"</span></span>)

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">scalaCache</span> <span class="pl-k">=</span> <span class="pl-en">ScalaCache</span>(<span class="pl-en">EhcacheCache</span>(underlying))</pre>
  </div> 
  <h3><a id="user-content-redis" class="anchor" href="https://github.com/cb372/cacheable#redis" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Redis</h3> 
  <p>SBT:</p> 
  <pre><code>libraryDependencies += "com.github.cb372" %% "scalacache-redis" % "0.9.3"
</code></pre> 
  <p>Usage:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">scalacache.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">redis.</span><span class="pl-v">_</span>

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">scalaCache</span> <span class="pl-k">=</span> <span class="pl-en">ScalaCache</span>(<span class="pl-en">RedisCache</span>(<span class="pl-s"><span class="pl-pds">"</span>host1<span class="pl-pds">"</span></span>, <span class="pl-c1">6379</span>))</pre>
  </div> 
  <p>or provide your own <a href="https://github.com/xetorthio/jedis" target="_blank">Jedis</a> client, like this:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">scalacache.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">redis.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">redis.clients.jedis.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">jedis</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Jedis</span>(...)
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">scalaCache</span> <span class="pl-k">=</span> <span class="pl-en">ScalaCache</span>(<span class="pl-en">RedisCache</span>(jedis))</pre>
  </div> 
  <p>ScalaCache also supports <a href="https://github.com/xetorthio/jedis/wiki/AdvancedUsage#shardedjedis" target="_blank">sharded Redis</a> and <a href="http://redis.io/topics/sentinel" target="_blank">Redis Sentinel</a>. Just create a <code>ShardedRedisCache</code> or <code>SentinelRedisCache</code> respectively.</p> 
  <h2><a id="user-content-caffeine" class="anchor" href="https://github.com/cb372/cacheable#caffeine" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Caffeine</h2> 
  <p>Note that Caffeine requires Java 8 or newer.</p> 
  <p>SBT:</p> 
  <pre><code>libraryDependencies += "com.github.cb372" %% "scalacache-caffeine" % "0.9.3"
</code></pre> 
  <p>Usage:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">scalacache.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">caffeine.</span><span class="pl-v">_</span>

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">scalaCache</span> <span class="pl-k">=</span> <span class="pl-en">ScalaCache</span>(<span class="pl-en">CaffeineCache</span>())</pre>
  </div> 
  <p>This will build a Caffeine cache with all the default settings. If you want to customize your Caffeine cache, then build it yourself and pass it to <code>CaffeineCache</code> like this:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">scalacache.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">caffeine.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">com.github.benmanes.caffeine.cache.</span><span class="pl-v">Caffeine</span>

<span class="pl-k">val</span> <span class="pl-en">underlyingCaffeineCache</span> <span class="pl-k">=</span> <span class="pl-en">Caffeine</span>.newBuilder().maximumSize(<span class="pl-c1">10000L</span>).build[<span class="pl-k">String</span>, <span class="pl-en">Object</span>]
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">scalaCache</span> <span class="pl-k">=</span> <span class="pl-en">ScalaCache</span>(<span class="pl-en">CaffeineCache</span>(underlyingCaffeineCache))</pre>
  </div> 
  <h2><a id="user-content-troubleshootingrestrictions" class="anchor" href="https://github.com/cb372/cacheable#troubleshootingrestrictions" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Troubleshooting/Restrictions</h2> 
  <p>Methods containing <code>memoize</code> blocks must have an explicit return type. If you don't specify the return type, you'll get a confusing compiler error along the lines of <code>recursive method withExpiry needs result type</code>.</p> 
  <p>For example, this is OK</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">def</span> <span class="pl-en">getUser</span>(<span class="pl-v">id</span>: <span class="pl-k">Int</span>)<span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">User</span>] <span class="pl-k">=</span> memoize {
  <span class="pl-c">// Do stuff...</span>
}</pre>
  </div> 
  <p>but this is not</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">def</span> <span class="pl-en">getUser</span>(<span class="pl-v">id</span>: <span class="pl-k">Int</span>) <span class="pl-k">=</span> memoize {
  <span class="pl-c">// Do stuff...</span>
}</pre>
  </div> 
 </article>
</div>