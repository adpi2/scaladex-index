<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h3><a id="user-content-akka-http-spring-boot-integration-akka-http-spring-boot" class="anchor" href="https://github.com/scalaspring/akka-http-spring-boot#akka-http-spring-boot-integration-akka-http-spring-boot" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Akka HTTP Spring Boot Integration (akka-http-spring-boot)</h3> 
  <p>Integrates Scala Akka HTTP and Spring Boot for rapid, robust service development with minimal configuration. Pre-configured server components require little more than a route to get a service up and running.</p> 
  <h4><a id="user-content-key-benefits" class="anchor" href="https://github.com/scalaspring/akka-http-spring-boot#key-benefits" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Key Benefits</h4> 
  <ol> 
   <li>Simple creation of microservices 
    <ul> 
     <li>Create your service route and implement it via a trivial server class to get going</li> 
     <li>Easily send outbound requests to aggregate data from other services</li> 
    </ul></li> 
   <li>Highly testable, easily composable services 
    <ul> 
     <li>Full support for testing service routes and injecting an HTTP client to mock outbound requests during testing</li> 
     <li>Services are implemented via stackable Scala traits to promote bite-sized, reusable services that are easily composed in your server class. Ditch the monster service route.</li> 
    </ul></li> 
   <li>Pre-configured server that's managed for you 
    <ul> 
     <li>No need to manage the server lifecycle. An Akka HTTP server will be started when your application starts and terminated when your application is stopped.</li> 
     <li>Provide your own configuration via standard Spring Boot configuration (application.yaml or other property source) to override defaults, if needed</li> 
    </ul></li> 
   <li>Full Spring dependency injection support 
    <ul> 
     <li>Autowire any dependency into your services and leverage the full Spring ecosystem</li> 
     <li>Use existing Spring components to enable gradual migration or reuse of suitable existing enterprise components</li> 
     <li>Avoid the downsides of using Scala implicits or abstract types to implement dependency injection. While both implicits and abstract types are excellent language features, they can also lead to tight coupling and less maintainable code.</li> 
    </ul></li> 
  </ol> 
  <h4><a id="user-content-getting-started" class="anchor" href="https://github.com/scalaspring/akka-http-spring-boot#getting-started" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Getting Started</h4> 
  <h5><a id="user-content-buildsbt" class="anchor" href="https://github.com/scalaspring/akka-http-spring-boot#buildsbt" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>build.sbt</h5> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.github.scalaspring<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>akka-http-spring-boot<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.3.1<span class="pl-pds">"</span></span></pre>
  </div> 
  <h5><a id="user-content-creating-a-service" class="anchor" href="https://github.com/scalaspring/akka-http-spring-boot#creating-a-service" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Creating a service</h5> 
  <p>Extend <code>AkkaHttpService</code> and override the <code>route</code> method to define your service</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c">// Echo a path segment</span>
<span class="pl-k">trait</span> <span class="pl-en">EchoService</span> <span class="pl-k">extends</span> <span class="pl-e">AkkaHttpService</span> {
  <span class="pl-k">abstract</span> <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">route</span><span class="pl-k">:</span> <span class="pl-en">Route</span> <span class="pl-k">=</span> {
    (get &amp; path(<span class="pl-s"><span class="pl-pds">"</span>echo<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-en">Segment</span>)) { name <span class="pl-k">=&gt;</span>
      complete(name)
    }
  } <span class="pl-k">~</span> <span class="pl-v">super</span>.route
}</pre>
  </div> 
  <h6><a id="user-content-notes-on-the-code" class="anchor" href="https://github.com/scalaspring/akka-http-spring-boot#notes-on-the-code" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Notes on the code</h6> 
  <ul> 
   <li>Be sure to use <code>abstract override</code> and to concatenate <code>super.route</code> when defining your route to make your services composable. See <code>MultiServiceSpec</code> in the test source for an example of a server implementing multiple, stackable services.</li> 
  </ul> 
  <h5><a id="user-content-create-the-server-configuration-and-run-it" class="anchor" href="https://github.com/scalaspring/akka-http-spring-boot#create-the-server-configuration-and-run-it" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Create the server configuration and run it</h5> 
  <p>Extend <code>AkkaHttpServer</code> and import <code>AkkaHttpServerAutoConfiguration</code> to implement your service(s)</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">@</span><span class="pl-en">Configuration</span>
<span class="pl-k">@</span><span class="pl-en">Import</span>(<span class="pl-en">Array</span>(<span class="pl-c1">classOf</span>[<span class="pl-en">AkkaHttpServerAutoConfiguration</span>]))
<span class="pl-k">class</span> <span class="pl-en">Application</span> <span class="pl-k">extends</span> <span class="pl-e">AkkaHttpServer</span> <span class="pl-k">with</span> <span class="pl-e">EchoService</span>

<span class="pl-k">object</span> <span class="pl-en">Application</span> <span class="pl-k">extends</span> <span class="pl-e">App</span> {
  <span class="pl-en">SpringApplication</span>.run(<span class="pl-c1">classOf</span>[<span class="pl-en">Application</span>], <span class="pl-v">args</span>: _<span class="pl-k">*</span>)
}</pre>
  </div> 
  <h4><a id="user-content-testing" class="anchor" href="https://github.com/scalaspring/akka-http-spring-boot#testing" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Testing</h4> 
  <p>Create a ScalaTest-based test that extends the service trait to test your service route</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">@</span><span class="pl-en">Configuration</span>
<span class="pl-k">@</span><span class="pl-en">ContextConfiguration</span>(classes <span class="pl-k">=</span> <span class="pl-en">Array</span>(<span class="pl-c1">classOf</span>[<span class="pl-en">EchoServiceSpec</span>]))
<span class="pl-k">@</span><span class="pl-en">Import</span>(<span class="pl-en">Array</span>(<span class="pl-c1">classOf</span>[<span class="pl-en">AkkaStreamsAutoConfiguration</span>]))
<span class="pl-k">class</span> <span class="pl-en">EchoServiceSpec</span> <span class="pl-k">extends</span> <span class="pl-e">FlatSpec</span> <span class="pl-k">with</span> <span class="pl-e">TestContextManagement</span> <span class="pl-k">with</span> <span class="pl-e">EchoService</span> <span class="pl-k">with</span> <span class="pl-e">ScalatestRouteTest</span> <span class="pl-k">with</span> <span class="pl-e">Matchers</span> {

  <span class="pl-s"><span class="pl-pds">"</span>Echo service<span class="pl-pds">"</span></span> should <span class="pl-s"><span class="pl-pds">"</span>echo<span class="pl-pds">"</span></span> in {
    <span class="pl-en">Get</span>(s<span class="pl-s"><span class="pl-pds">"</span>/echo/test<span class="pl-pds">"</span></span>) <span class="pl-k">~</span><span class="pl-k">&gt;</span> route <span class="pl-k">~</span><span class="pl-k">&gt;</span> check {
      status shouldBe <span class="pl-en">OK</span>
      responseAs[<span class="pl-k">String</span>] shouldBe <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>
    }
  }

}</pre>
  </div> 
  <h4><a id="user-content-outbound-requests" class="anchor" href="https://github.com/scalaspring/akka-http-spring-boot#outbound-requests" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Outbound Requests</h4> 
  <p>Inject the Akka HTTP-based client into your service and call its <code>request</code> method to make outbound requests. The HttpClient bean is automatically created as part of the <code>AkkaHttpServerAutoConfiguration</code> configuration.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c">// Primitive site proxy (ex: http://localhost:8080/finance.yahoo.com)</span>
<span class="pl-k">trait</span> <span class="pl-en">ProxyService</span> <span class="pl-k">extends</span> <span class="pl-e">AkkaHttpService</span> {

  <span class="pl-k">@</span><span class="pl-en">Autowired</span> <span class="pl-k">val</span> <span class="pl-en">client</span><span class="pl-k">:</span> <span class="pl-en">HttpClient</span> <span class="pl-k">=</span> <span class="pl-c1">null</span>

  <span class="pl-k">abstract</span> <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">route</span><span class="pl-k">:</span> <span class="pl-en">Route</span> <span class="pl-k">=</span> {
    (get &amp; path(<span class="pl-s"><span class="pl-pds">"</span>proxy<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-en">Segment</span>)) { site <span class="pl-k">=&gt;</span>
      complete(client.request(<span class="pl-en">Get</span>(s<span class="pl-s"><span class="pl-pds">"</span>http://$site/<span class="pl-pds">"</span></span>)))
    }
  } <span class="pl-k">~</span> <span class="pl-v">super</span>.route
}</pre>
  </div> 
  <h5><a id="user-content-notes-on-the-code-1" class="anchor" href="https://github.com/scalaspring/akka-http-spring-boot#notes-on-the-code-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Notes on the code</h5> 
  <ul> 
   <li>The autowired <code>HttpClient</code> will be injected by Spring (standard injection) upon startup.</li> 
   <li>Configuration Properties 
    <ul> 
     <li>Use the <code>http.server.lifecycle.phase</code> configuration property to control when the server is unbound and terminated. The default value is 10 to ensure its termination before the underlying actor system. </li> 
    </ul></li> 
  </ul> 
  <h4><a id="user-content-putting-it-all-together---stackable-services" class="anchor" href="https://github.com/scalaspring/akka-http-spring-boot#putting-it-all-together---stackable-services" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Putting it all together - stackable services</h4> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c">// Echo a path segment</span>
<span class="pl-k">trait</span> <span class="pl-en">EchoService</span> <span class="pl-k">extends</span> <span class="pl-e">AkkaHttpService</span> {
  <span class="pl-k">abstract</span> <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">route</span><span class="pl-k">:</span> <span class="pl-en">Route</span> <span class="pl-k">=</span> {
    (get &amp; path(<span class="pl-s"><span class="pl-pds">"</span>echo<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-en">Segment</span>)) { name <span class="pl-k">=&gt;</span>
      complete(name)
    }
  } <span class="pl-k">~</span> <span class="pl-v">super</span>.route
}

<span class="pl-c">// Primitive site proxy (ex: http://localhost:8080/finance.yahoo.com)</span>
<span class="pl-k">trait</span> <span class="pl-en">ProxyService</span> <span class="pl-k">extends</span> <span class="pl-e">AkkaHttpService</span> {

  <span class="pl-k">@</span><span class="pl-en">Autowired</span> <span class="pl-k">val</span> <span class="pl-en">client</span><span class="pl-k">:</span> <span class="pl-en">HttpClient</span> <span class="pl-k">=</span> <span class="pl-c1">null</span>

  <span class="pl-k">abstract</span> <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">route</span><span class="pl-k">:</span> <span class="pl-en">Route</span> <span class="pl-k">=</span> {
    (get &amp; path(<span class="pl-s"><span class="pl-pds">"</span>proxy<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-en">Segment</span>)) { site <span class="pl-k">=&gt;</span>
      complete(client.request(<span class="pl-en">Get</span>(s<span class="pl-s"><span class="pl-pds">"</span>http://$site/<span class="pl-pds">"</span></span>)))
    }
  } <span class="pl-k">~</span> <span class="pl-v">super</span>.route
}

<span class="pl-k">@</span><span class="pl-en">SpringBootApplication</span>
<span class="pl-k">@</span><span class="pl-en">Import</span>(<span class="pl-en">Array</span>(<span class="pl-c1">classOf</span>[<span class="pl-en">AkkaHttpServerAutoConfiguration</span>]))
<span class="pl-k">class</span> <span class="pl-en">Application</span> <span class="pl-k">extends</span> <span class="pl-e">AkkaHttpServer</span> <span class="pl-k">with</span> <span class="pl-e">EchoService</span> <span class="pl-k">with</span> <span class="pl-e">ProxyService</span>

<span class="pl-k">object</span> <span class="pl-en">Application</span> <span class="pl-k">extends</span> <span class="pl-e">App</span> {
  <span class="pl-en">SpringApplication</span>.run(<span class="pl-c1">classOf</span>[<span class="pl-en">Application</span>], <span class="pl-v">args</span>: _<span class="pl-k">*</span>)
}</pre>
  </div> 
 </article>
</div>