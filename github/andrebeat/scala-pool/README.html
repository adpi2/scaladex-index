<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-scala-pool" class="anchor" href="https://github.com/andrebeat/scala-pool#scala-pool" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>scala-pool</h1> 
  <p><em>scala-pool</em> is a Scala library for object pooling. The library provides an API and different pool implementations that allow:</p> 
  <ul> 
   <li>blocking/non-blocking object acquisition</li> 
   <li>object invalidation</li> 
   <li>capping the number of pooled objects</li> 
   <li>creating new objects lazily, as needed</li> 
   <li>health checking</li> 
   <li>time-based pool eviction (idle instances)</li> 
   <li>GC-based pool eviction (soft and weak references)</li> 
   <li>efficient thread-safety</li> 
  </ul> 
  <hr> 
  <p><a href="https://travis-ci.org/andrebeat/scala-pool" target="_blank"><img src="https://camo.githubusercontent.com/19b33f89b088971d5cfe9439f9527f16cebf9be3/68747470733a2f2f696d672e736869656c64732e696f2f7472617669732f616e647265626561742f7363616c612d706f6f6c2f6d61737465722e737667" alt="Build Status" data-canonical-src="https://img.shields.io/travis/andrebeat/scala-pool/master.svg" style="max-width:100%;"></a> <a href="https://maven-badges.herokuapp.com/maven-central/io.github.andrebeat/scala-pool_2.11" target="_blank"><img src="https://camo.githubusercontent.com/c4c0cd07743450b2881b43dcfc670d78b12ed93d/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f696f2e6769746875622e616e647265626561742f7363616c612d706f6f6c5f322e31312e737667" alt="Maven Central" data-canonical-src="https://img.shields.io/maven-central/v/io.github.andrebeat/scala-pool_2.11.svg" style="max-width:100%;"></a> <a href="https://coveralls.io/github/andrebeat/scala-pool" target="_blank"><img src="https://camo.githubusercontent.com/6691396e9ea14341233e49effdc532e4d8956d84/68747470733a2f2f696d672e736869656c64732e696f2f636f766572616c6c732f616e647265626561742f7363616c612d706f6f6c2f6d61737465722e737667" alt="Coverage" data-canonical-src="https://img.shields.io/coveralls/andrebeat/scala-pool/master.svg" style="max-width:100%;"></a> <a href="https://raw.githubusercontent.com/andrebeat/scala-pool/master/LICENSE" target="_blank"><img src="https://camo.githubusercontent.com/3f7996bf7bd441deb7199c498aaa835164dee8da/68747470733a2f2f696d672e736869656c64732e696f2f6475622f6c2f766962652d642e737667" alt="License" data-canonical-src="https://img.shields.io/dub/l/vibe-d.svg" style="max-width:100%;"></a> <a href="http://javadoc-badge.appspot.com/io.github.andrebeat/scala-pool_2.11" target="_blank"><img src="https://camo.githubusercontent.com/68b98c282497a99797e52d7cfd49089e7388c8ad/687474703a2f2f6a617661646f632d62616467652e61707073706f742e636f6d2f696f2e6769746875622e616e647265626561742f7363616c612d706f6f6c5f322e31312e7376673f6c6162656c3d7363616c61646f63" alt="Scaladoc" data-canonical-src="http://javadoc-badge.appspot.com/io.github.andrebeat/scala-pool_2.11.svg?label=scaladoc" style="max-width:100%;"></a> <a href="https://andrebeat.github.io/scala-pool/latest/api/index.html" target="_blank"><img src="https://camo.githubusercontent.com/08bc15bd86b2fda82f557f1104be7bddeff6f2c6/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f7363616c61646f632d6c61746573742d627269676874677265656e2e737667" alt="Scaladoc" data-canonical-src="https://img.shields.io/badge/scaladoc-latest-brightgreen.svg" style="max-width:100%;"></a></p> 
  <h2><a id="user-content-installation" class="anchor" href="https://github.com/andrebeat/scala-pool#installation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Installation</h2> 
  <p>scala-pool is currently available for Scala 2.10 and 2.11, the latest version is <code>0.3.0</code>.</p> 
  <p>To use it in an existing SBT project, add the following dependency to your <code>build.sbt</code>:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>io.github.andrebeat<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>scala-pool<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.3.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>The latest snapshot version is also available:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>io.github.andrebeat<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>scala-pool<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.4.0-SNAPSHOT<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>It might be necessary to add the Sonatype OSS Snapshot resolver:</p> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-en">Resolver</span>.sonatypeRepo(<span class="pl-s"><span class="pl-pds">"</span>snapshots<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>Currently, the library has no external dependencies apart from the Java and Scala standard libraries.</p> 
  <h2><a id="user-content-usage" class="anchor" href="https://github.com/andrebeat/scala-pool#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <p>The basic usage of the pool is shown below:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">io.github.andrebeat.pool.</span><span class="pl-v">_</span>

<span class="pl-c">// Creating a `Pool[Object]` with a capacity of 2 instances</span>
<span class="pl-k">val</span> <span class="pl-en">pool</span> <span class="pl-k">=</span> <span class="pl-en">Pool</span>(<span class="pl-c1">2</span>, () <span class="pl-k">=&gt;</span> <span class="pl-k">new</span> <span class="pl-en">Object)</span>

<span class="pl-c">// Acquiring a lease on an object from the pool (blocking if none available)</span>
<span class="pl-k">val</span> <span class="pl-en">lease</span> <span class="pl-k">=</span> pool.acquire()

<span class="pl-c">// Using the lease</span>
lease { o <span class="pl-k">=&gt;</span>
  println(o)
}

<span class="pl-c">// The object is returned to the pool at this point</span></pre>
  </div> 
  <p>All of the different pool features are exposed in the <code>Pool</code> companion object <code>apply</code> method:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-en">Pool</span>(
  <span class="pl-v">capacity</span>: <span class="pl-k">Int</span>,                <span class="pl-c">// the maximum capacity of the pool</span>
  <span class="pl-v">factory</span>: () <span class="pl-k">=&gt;</span> <span class="pl-en">A</span>,             <span class="pl-c">// the function used to create new objects in the pool</span>
  <span class="pl-v">referenceType</span>: <span class="pl-en">ReferenceType</span>, <span class="pl-c">// the reference type of objects in the pool</span>
  <span class="pl-v">maxIdleTime</span>: <span class="pl-en">Duration</span>,        <span class="pl-c">// the maximum amount of the time that objects are allowed</span>
                                <span class="pl-c">//   to idle in the pool before being evicted</span>
  <span class="pl-v">reset</span>: <span class="pl-en">A</span> <span class="pl-k">=&gt;</span> <span class="pl-k">Unit</span>,             <span class="pl-c">// the function used to reset objects in the pool</span>
                                <span class="pl-c">//   (called when leasing an object from the pool)</span>
  <span class="pl-v">dispose</span>: <span class="pl-en">A</span> <span class="pl-k">=&gt;</span> <span class="pl-k">Unit</span>,           <span class="pl-c">// the function used to destroy an object from the pool</span>
  <span class="pl-v">healthCheck</span>: <span class="pl-en">A</span> <span class="pl-k">=&gt;</span> <span class="pl-k">Boolean</span>)    <span class="pl-c">// the predicate used to test whether an object is</span>
                                <span class="pl-c">//   healthy and should be used, or destroyed otherwise</span></pre>
  </div> 
  <p>It is also possible to get a value from a lease and release it (or invalidate) manually.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">io.github.andrebeat.pool.</span><span class="pl-v">_</span>

<span class="pl-c">// Creating a `Pool[Object]` with a capacity of 2 instances</span>
<span class="pl-k">val</span> <span class="pl-en">pool</span> <span class="pl-k">=</span> <span class="pl-en">Pool</span>(<span class="pl-c1">2</span>, () <span class="pl-k">=&gt;</span> <span class="pl-k">new</span> <span class="pl-en">Object)</span>

<span class="pl-c">// Getting the value from the lease</span>
<span class="pl-k">val</span> <span class="pl-en">obj</span> <span class="pl-k">=</span> lease.get()

<span class="pl-c">// There are currently no objects on the pool</span>
pool.size
<span class="pl-c">// res0: Int = 0</span>

<span class="pl-c">// But its capacity is 2 (objects are created lazily)</span>
pool.capacity
<span class="pl-c">// res1: Int = 2</span>

<span class="pl-c">// There's 1 live object</span>
pool.live
<span class="pl-c">// res2: Int = 1</span>

<span class="pl-c">// And its currently leased</span>
pool.leased
<span class="pl-c">// res3: Int = 1</span>

<span class="pl-c">// Releasing our lease back to the pool</span>
lease.release

<span class="pl-c">// Its now in the pool waiting to be reused</span>
pool.size
<span class="pl-c">// res4: Int = 1</span></pre>
  </div> 
  <p>The API is documented in depth in the <a href="https://andrebeat.github.io/scala-pool/latest/api/index.html" target="_blank">Scaladoc</a>.</p> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/andrebeat/scala-pool#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p>scala-pool is licensed under the <a href="http://opensource.org/licenses/MIT" target="_blank">MIT</a> license. See <code>LICENSE</code> for details.</p> 
 </article>
</div>