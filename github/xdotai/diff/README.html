<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h2><a id="user-content-diff" class="anchor" href="https://github.com/xdotai/diff#diff" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>diff</h2> 
  <p><a href="https://gitter.im/xdotai/diff?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank"><img src="https://camo.githubusercontent.com/de0c8bb12349acff269069a990fe518373bcc8b3/68747470733a2f2f6261646765732e6769747465722e696d2f78646f7461692f646966662e737667" alt="Join the chat at https://gitter.im/xdotai/diff" data-canonical-src="https://badges.gitter.im/xdotai/diff.svg" style="max-width:100%;"></a></p> 
  <p>A tool to visually compare Scala data structures with out of the box support for arbitrary case classes.</p> 
  <p>Be aware: Collections (List, Seq, etc.) are compared like sets, i.e. ignoring order.</p> 
  <h3><a id="user-content-sbt-dependencies" class="anchor" href="https://github.com/xdotai/diff#sbt-dependencies" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>SBT Dependencies</h3> 
  <h4><a id="user-content-scala-211" class="anchor" href="https://github.com/xdotai/diff#scala-211" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scala 2.11</h4> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-s"><span class="pl-pds">"</span>ai.x<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>diff<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.2.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <h4><a id="user-content-scala-210" class="anchor" href="https://github.com/xdotai/diff#scala-210" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scala 2.10</h4> 
  <p>Stopped working in 1.2.0 due to what seems like a Scala compiler bug. See <a href="https://github.com/xdotai/diff/issues/18" target="_blank">https://github.com/xdotai/diff/issues/18</a></p> 
  <h3><a id="user-content-usage" class="anchor" href="https://github.com/xdotai/diff#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">ai.x.diff.</span><span class="pl-v">DiffShow</span>
<span class="pl-k">import</span> <span class="pl-v">ai.x.diff.conversions.</span><span class="pl-v">_</span>
println(  <span class="pl-en">DiffShow</span>.diff[<span class="pl-en">Foo</span>]( before, after ).string  )</pre>
  </div> 
  <p>Be aware that diff throws an Exception if a DiffShow type class instance for some field can't be found rather than a type error. If you use diff in a testing or debugging scenario that's usually not a problem. The advantage is that the Exception can tell exactly which instance wasn't found. A type error can only point to the outer most class (<code>Foo</code> in this case) even if it is actually one of it's deeply nested fields that is lacking an instance for it's type. Knowing only <code>Foo</code> would not be very helpful to pin point which instance is missing.</p> 
  <h4><a id="user-content-output" class="anchor" href="https://github.com/xdotai/diff#output" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Output</h4> 
  <p><a href="https://cloud.githubusercontent.com/assets/274947/15580477/e46957e6-2336-11e6-919c-3eaf00f60cff.png" target="_blank"><img width="422" alt="example-output" src="https://cloud.githubusercontent.com/assets/274947/15580477/e46957e6-2336-11e6-919c-3eaf00f60cff.png" style="max-width:100%;"></a></p> 
  <h4><a id="user-content-code" class="anchor" href="https://github.com/xdotai/diff#code" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Code</h4> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">sealed</span> <span class="pl-k">trait</span> <span class="pl-en">Parent</span>
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Bar</span>( <span class="pl-v">s</span>: <span class="pl-k">String</span>, <span class="pl-v">i</span>: <span class="pl-k">Int</span> ) <span class="pl-k">extends</span> <span class="pl-e">Parent</span>
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Foo</span>( <span class="pl-v">bar</span>: <span class="pl-en">Bar</span>, <span class="pl-v">b</span>: <span class="pl-en">List</span>[<span class="pl-k">Int</span>], <span class="pl-v">parent</span>: <span class="pl-en">Option</span>[<span class="pl-en">Parent</span>] ) <span class="pl-k">extends</span> <span class="pl-e">Parent</span>

<span class="pl-k">val</span> <span class="pl-en">before</span><span class="pl-k">:</span> <span class="pl-en">Foo</span> <span class="pl-k">=</span> <span class="pl-en">Foo</span>(
  <span class="pl-en">Bar</span>( <span class="pl-s"><span class="pl-pds">"</span>asdf<span class="pl-pds">"</span></span>, <span class="pl-c1">5</span> ),
  <span class="pl-en">List</span>( <span class="pl-c1">123</span>, <span class="pl-c1">1234</span> ),
  <span class="pl-en">Some</span>( <span class="pl-en">Bar</span>( <span class="pl-s"><span class="pl-pds">"</span>asdf<span class="pl-pds">"</span></span>, <span class="pl-c1">5</span> ) )
)
<span class="pl-k">val</span> <span class="pl-en">after</span><span class="pl-k">:</span> <span class="pl-en">Foo</span> <span class="pl-k">=</span> <span class="pl-en">Foo</span>(
  <span class="pl-en">Bar</span>( <span class="pl-s"><span class="pl-pds">"</span>asdf<span class="pl-pds">"</span></span>, <span class="pl-c1">66</span> ),
  <span class="pl-en">List</span>( <span class="pl-c1">1234</span> ),
  <span class="pl-en">Some</span>( <span class="pl-en">Bar</span>( <span class="pl-s"><span class="pl-pds">"</span>qwer<span class="pl-pds">"</span></span>, <span class="pl-c1">5</span> ) )
)</pre>
  </div> 
  <h3><a id="user-content-helpful-tips" class="anchor" href="https://github.com/xdotai/diff#helpful-tips" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Helpful tips</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">ai.x.diff.</span><span class="pl-v">_</span></pre>
  </div> 
  <h4><a id="user-content-custom-comparison" class="anchor" href="https://github.com/xdotai/diff#custom-comparison" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Custom comparison</h4> 
  <p>Sometimes you may need to write your own type class instances. For example for non-case classes that don't compare well using ==.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">org.joda.time.</span><span class="pl-v">LocalTime</span>
<span class="pl-k">implicit</span> <span class="pl-k">def</span> <span class="pl-en">localTimeDiffShow</span><span class="pl-k">:</span> <span class="pl-en">DiffShow</span>[<span class="pl-en">LocalTime</span>] <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">DiffShow</span>[<span class="pl-en">LocalTime</span>]{
  <span class="pl-k">def</span> <span class="pl-en">show</span> ( <span class="pl-v">d</span>: <span class="pl-en">LocalTime</span> ) <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>LocalTime(<span class="pl-pds">"</span></span> <span class="pl-k">+</span> d.toString <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>)<span class="pl-pds">"</span></span>
  <span class="pl-k">def</span> <span class="pl-en">diff</span>( <span class="pl-v">l</span>: <span class="pl-en">LocalTime</span>, <span class="pl-v">r</span>: <span class="pl-en">LocalTime</span> ) <span class="pl-k">=</span>
    <span class="pl-k">if</span> ( l isEqual r ) <span class="pl-en">Identical</span>( show( l ) ) <span class="pl-k">else</span> <span class="pl-en">Different</span>( showChange( l, r ) )
}</pre>
  </div> 
  <h4><a id="user-content-ignore-parts-of-data" class="anchor" href="https://github.com/xdotai/diff#ignore-parts-of-data" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Ignore parts of data</h4> 
  <p>Sometimes you may want to ignore some parts of your data during comparison. You can do so by type, e.g. for non-deterministic parts like ObjectId, which always differ.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">def</span> <span class="pl-en">ignore</span>[<span class="pl-en">T</span>]<span class="pl-k">:</span> <span class="pl-en">DiffShow</span>[<span class="pl-en">T</span>] <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">DiffShow</span>[<span class="pl-en">T</span>] {
  <span class="pl-k">def</span> <span class="pl-en">show</span>( <span class="pl-v">t</span>: <span class="pl-en">T</span> ) <span class="pl-k">=</span> t.toString
  <span class="pl-k">def</span> <span class="pl-en">diff</span>( <span class="pl-v">left</span>: <span class="pl-en">T</span>, <span class="pl-v">right</span>: <span class="pl-en">T</span> ) <span class="pl-k">=</span> <span class="pl-en">Identical</span>( <span class="pl-s"><span class="pl-pds">"</span>&lt;not compared&gt;<span class="pl-pds">"</span></span> )
  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">diffable</span>( <span class="pl-v">left</span>: <span class="pl-en">T</span>, <span class="pl-v">right</span>: <span class="pl-en">T</span> ) <span class="pl-k">=</span> <span class="pl-c1">true</span>
}
<span class="pl-k">implicit</span> <span class="pl-k">def</span> <span class="pl-en">LocationIdShow</span><span class="pl-k">:</span> <span class="pl-en">DiffShow</span>[<span class="pl-en">LocationId</span>] <span class="pl-k">=</span> ignore[<span class="pl-en">LocationId</span>]</pre>
  </div> 
  <h4><a id="user-content-influence-comparison-in-collections" class="anchor" href="https://github.com/xdotai/diff#influence-comparison-in-collections" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Influence comparison in collections</h4> 
  <p>When comparing collections you can influence if two elements should be compared or treated as completely different. Comparing elements shows their partial differences. Not comparing them shows them as added or removed.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">def</span> <span class="pl-en">PersonDiffShow</span>[<span class="pl-en">L</span> <span class="pl-k">&lt;</span><span class="pl-k">:</span> <span class="pl-en">HList</span>](
  <span class="pl-k">implicit</span>
  <span class="pl-v">labelled</span>:  <span class="pl-en">LabelledGeneric</span>.<span class="pl-en">Aux</span>[<span class="pl-en">Person</span>, <span class="pl-en">L</span>],
  <span class="pl-v">hlistShow</span>: <span class="pl-en">Lazy</span>[<span class="pl-en">DiffShowFields</span>[<span class="pl-en">L</span>]]
)<span class="pl-k">:</span> <span class="pl-en">DiffShow</span>[<span class="pl-en">Person</span>] <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">CaseClassDiffShow</span>[<span class="pl-en">Person</span>, <span class="pl-en">L</span>] {
  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">diffable</span>( <span class="pl-v">left</span>: <span class="pl-en">Person</span>, <span class="pl-v">right</span>: <span class="pl-en">Person</span> ) <span class="pl-k">=</span> left._id <span class="pl-k">===</span> right._id
}</pre>
  </div> 
 </article>
</div>