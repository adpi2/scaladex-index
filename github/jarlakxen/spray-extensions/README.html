<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-spray-extensions" class="anchor" href="https://github.com/jarlakxen/spray-extensions#spray-extensions" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Spray Extensions</h1> 
  <p>spray-extensions its a simple library with useful tools for develop web apps with Spray.</p> 
  <h3><a id="user-content-repository" class="anchor" href="https://github.com/jarlakxen/spray-extensions#repository" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Repository</h3> 
  <p>Stable <a href="https://oss.sonatype.org/content/repositories/releases/com/github/jarlakxen/" target="_blank">OSS Sonatype</a></p> 
  <pre><code>"com.github.jarlakxen" %% "spray-extensions" % "1.0"
</code></pre> 
  <h3><a id="user-content-changelog" class="anchor" href="https://github.com/jarlakxen/spray-extensions#changelog" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Changelog</h3> 
  <p>1.0</p> 
  <ul> 
   <li>Add <a href="http://scalate.fusesource.org/" target="_blank">scalate</a> support.</li> 
   <li>Add json filtering.</li> 
   <li>Add pagination support.</li> 
  </ul> 
  <h2><a id="user-content-pagination-support" class="anchor" href="https://github.com/jarlakxen/spray-extensions#pagination-support" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Pagination Support</h2> 
  <p>The trait PaginationDirectives offers some helpers for handling pagination:</p> 
  <pre><code>path("filter-test") {
  pagination { page =&gt;
    complete {
      page match {
        case Some(page) =&gt; ... // A page was requested
        case None =&gt; ... // No page was requested
      }
    }
  }
}
</code></pre> 
  <p>The page object has this format</p> 
  <pre><code>sealed trait Order

object Order {
  case object Asc extends Order
  case object Desc extends Order
}

case class PageRequest(index: Int, size: Int, sort: Map[String, Order])
</code></pre> 
  <p>This is an example of url: <code>/filter-test?page=1&amp;size=10</code> or <code>/filter-test?page=1&amp;size=10&amp;sort=name,asc;age,desc</code></p> 
  <p>The name of the parameters can be configured through <a href="https://github.com/typesafehub/config" target="_blank">Typesafe Config</a>:</p> 
  <pre><code>
spray {
    extensions {
        rest{
            pagination{
                index-param-name = "page"
                size-param-name  = "size"
                sort-param-name  = "sort"
                asc-param-name   = "asc"
                desc-param-name  = "desc"
                sorting-separator = ";"
                order-separator  = ","
                totalelements-header-name = "total_elements"
            }
        }
    }
}

</code></pre> 
  <p>When you replay a page, you sometime needs to send te total number of elements. This is usefull for the client for knowing how many pages they are. For this scenario there is:</p> 
  <pre><code>
path("filter-test") {
  pagination { page =&gt;
    complete {
      page match {
        case Some(page) =&gt; {
            val response = PageResponse(List("test"), 10)
            completePage(response)
        }
        case None =&gt; ... // No page was requested
      }
    }
  }
}

</code></pre> 
  <p>The total number of elements is sended in the header <code>total_elements</code></p> 
  <h2><a id="user-content-json-filtering-support" class="anchor" href="https://github.com/jarlakxen/spray-extensions#json-filtering-support" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>JSON filtering Support</h2> 
  <p>The trait FiltersDirectives offers some helpers for filtering the json response:</p> 
  <pre><code>val JsonArrayFull = """[
    {
        "name":"user1",
        "password":"1234", 
        "meta":{"email":"user1@email.com", "age": 12}
    }, 
    {
        "name":"user2", 
        "password":"0000",
        "meta":{"email":"user2@email.com", "age": 20}
    }
  ]"""

path("filter-test") {
  pagination { page =&gt;
    filterResponse(resolver.json4s) {
        complete { HttpEntity(ContentTypes.`application/json`, JsonArrayFull) }
    }
  }
}
</code></pre> 
  <p>The filterResponse directive required a resolver, depending of the json parser:</p> 
  <ul> 
   <li>resolver.json4s</li> 
   <li>resolver.'spray-json'</li> 
  </ul> 
  <p>You need to add the dependency to the json parser in you build.sbt ( "spray-json" or "json4s-jackson")</p> 
  <p>Using this url: <code>/filter-test?filter=name</code>. The result is: <code>[{"name":"user1"},{"name":"user2"}]</code></p> 
  <p>Using this url: <code>/filter-test?filter=name;meta;!meta.email</code>. The result is: <code>[{"name":"user1","meta":{"age":12}},{"name":"user2","meta":{"age":20}}]</code></p> 
  <p>In the last example the operator <code>!</code> is used to exclude fields.</p> 
  <p>You can customize the filter separator, changing the property <code>spray.extensions.rest.filter.separator</code>.</p> 
  <h2><a id="user-content-scalate-support" class="anchor" href="https://github.com/jarlakxen/spray-extensions#scalate-support" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scalate Support</h2> 
  <p>The trait ScalateSupport offers some helpers for using the <a href="http://scalate.fusesource.org/" target="_blank">scalate</a> template engine. This is usefull if you, for example, want to use mustache.</p> 
  <pre><code>
path("filter-test") {
  pagination { page =&gt;
    mustache("index", Map("USER_NAME" -&gt; "Test"))
  }
}
</code></pre> 
  <p>In this example the file /templates/index.mustache is loaded by scalate. The base path can be changed, by the property <code>spray.extensions.view.templates-path</code>.</p> 
 </article>
</div>