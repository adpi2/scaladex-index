<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-treelog" class="anchor" href="https://github.com/lancewalton/treelog#treelog" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>treelog</h1> 
  <p><a href="https://gitter.im/lancewalton/treelog?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Gitter" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg" style="max-width:100%;"></a></p> 
  <p><a href="https://travis-ci.org/lancewalton/treelog" target="_blank"><img src="https://camo.githubusercontent.com/a8405f7e6fb908ef2d50f91395806cf47bb60688/68747470733a2f2f7472617669732d63692e6f72672f6c616e636577616c746f6e2f747265656c6f672e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/lancewalton/treelog.png?branch=master" style="max-width:100%;"></a></p> 
  <p>It is often necessary to understand exactly what happened in a computation: what went right, what went wrong, what was done with what, why it was done, and how a result was derived.</p> 
  <p>Such complex computations are trees, and so attempting to describe whats going on in a linear fashion is difficult to follow after the fact. What treelog offers is a means of writing a log together with a computation, with values computed on the way with all information relevant to the computation. </p> 
  <p>Logtree is a veritable complect of computation and description in perfect harmony.</p> 
  <p>TreeLog achieves this remarkable feat with a Writer monad writing to a Tree representing the hierarchical log of computation.</p> 
  <h2><a id="user-content-getting-treelog" class="anchor" href="https://github.com/lancewalton/treelog#getting-treelog" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Getting TreeLog</h2> 
  <p>For Scala 2.11.x and scalaz 7.2.x:</p> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>Sonatype OSS Releases<span class="pl-pds">"</span></span>  at <span class="pl-s"><span class="pl-pds">"</span>http://oss.sonatype.org/content/repositories/releases/<span class="pl-pds">"</span></span>,
)

libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
    <span class="pl-s"><span class="pl-pds">"</span>com.casualmiracles<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>treelog<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.3.0<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>org.scalaz<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>scalaz-core<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>7.2.0<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>For Scala 2.11.x and scalaz 7.1.x:</p> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>Sonatype OSS Releases<span class="pl-pds">"</span></span>  at <span class="pl-s"><span class="pl-pds">"</span>http://oss.sonatype.org/content/repositories/releases/<span class="pl-pds">"</span></span>,
)

libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
    <span class="pl-s"><span class="pl-pds">"</span>com.casualmiracles<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>treelog<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.2.6<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>org.scalaz<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>scalaz-core<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>7.1.7<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>For Scala 2.10.x</p> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>Sonatype OSS Releases<span class="pl-pds">"</span></span>  at <span class="pl-s"><span class="pl-pds">"</span>http://oss.sonatype.org/content/repositories/releases/<span class="pl-pds">"</span></span>,
)

libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
    <span class="pl-s"><span class="pl-pds">"</span>com.casualmiracles<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>treelog<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.2.2<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>org.scalaz<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>scalaz-core<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>7.0.6<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <h2><a id="user-content-quick-start-tldr" class="anchor" href="https://github.com/lancewalton/treelog#quick-start-tldr" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Quick Start TL;DR</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">treelog.LogTreeSyntaxWithoutAnnotations.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">scalaz.</span><span class="pl-v">_, </span><span class="pl-v">Scalaz.</span><span class="pl-v">_</span>

<span class="pl-c">// syntax for logging something</span>
<span class="pl-k">val</span> <span class="pl-en">one</span><span class="pl-k">:</span> <span class="pl-en">DescribedComputation</span>[<span class="pl-k">Int</span>] <span class="pl-k">=</span> <span class="pl-c1">1</span> <span class="pl-k">~</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>The number one<span class="pl-pds">"</span></span>

<span class="pl-c">// syntax for logging something and include the value in the log</span>
<span class="pl-k">val</span> <span class="pl-en">oneA</span><span class="pl-k">:</span> <span class="pl-en">DescribedComputation</span>[<span class="pl-k">Int</span>] <span class="pl-k">=</span> <span class="pl-c1">1</span> <span class="pl-k">~</span><span class="pl-k">&gt;</span> (v <span class="pl-k">=&gt;</span> s<span class="pl-s"><span class="pl-pds">"</span>The value is $v<span class="pl-pds">"</span></span>)

<span class="pl-c">// Extract the result ( a scalaz.\/ ) and log (a LogTree which is a type alias for scalaz.Tree[LogTreeLabel[A]])</span>
<span class="pl-k">val</span> <span class="pl-en">v</span><span class="pl-k">:</span> \<span class="pl-k">/</span>[<span class="pl-k">String</span>, <span class="pl-k">Int</span>] <span class="pl-k">=</span> one.run.value
<span class="pl-k">val</span> <span class="pl-en">logtree</span><span class="pl-k">:</span> <span class="pl-en">LogTree</span> <span class="pl-k">=</span> one.run.written

<span class="pl-c">// turn the LogTree into a String</span>
<span class="pl-k">val</span> <span class="pl-en">logTreeString</span> <span class="pl-k">=</span> logtree.shows

<span class="pl-c">// In for comprehensions with a top level description</span>
<span class="pl-k">val</span> <span class="pl-en">result</span><span class="pl-k">:</span> <span class="pl-en">DescribedComputation</span>[<span class="pl-k">Int</span>] <span class="pl-k">=</span> 
 <span class="pl-s"><span class="pl-pds">"</span>Adding up<span class="pl-pds">"</span></span> <span class="pl-k">~</span><span class="pl-k">&lt;</span> { 
  <span class="pl-k">for</span> {
   foo <span class="pl-k">&lt;</span><span class="pl-k">-</span> <span class="pl-c1">1</span> <span class="pl-k">~</span><span class="pl-k">&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>foo = <span class="pl-pds">"</span></span> <span class="pl-k">+</span> _)
   bar <span class="pl-k">&lt;</span><span class="pl-k">-</span> <span class="pl-c1">2</span> <span class="pl-k">~</span><span class="pl-k">&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>bar = <span class="pl-pds">"</span></span> <span class="pl-k">+</span> _)
   foobar <span class="pl-k">&lt;</span><span class="pl-k">-</span> (foo <span class="pl-k">+</span> bar) <span class="pl-k">~</span><span class="pl-k">&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>foobar = <span class="pl-pds">"</span></span> <span class="pl-k">+</span> _)
  } <span class="pl-k">yield</span> foobar 
 }

println(result.run.written.shows)
<span class="pl-c">// prints:</span>
<span class="pl-c">// Adding up</span>
<span class="pl-c">//   foo = 1</span>
<span class="pl-c">//   bar = 2</span>
<span class="pl-c">//   foobar = 3</span></pre>
  </div> 
  <p>Now don't be lazy and read the <a href="http://lancewalton.github.io/treelog/api/master/#treelog.package" target="_blank">scaladoc</a>.</p> 
  <h2><a id="user-content-treelog-examples" class="anchor" href="https://github.com/lancewalton/treelog#treelog-examples" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>TreeLog Examples</h2> 
  <p><a href="https://github.com/lancewalton/treelog/blob/master/src/test/scala/QuadraticRootsExample.scala" target="_blank">QuadraticRootsExample.scala</a> and <a href="https://github.com/lancewalton/treelog/blob/master/src/test/scala/OptionsAndEithersExample.scala" target="_blank">OptionsAndEithersExample.scala</a> in the test package is the simplest way to see how to use TreeLog. <a href="https://github.com/lancewalton/treelog/blob/master/src/test/scala/FuturesExample.scala" target="_blank">FuturesExample.scala</a> demonstrates how you can combine the results of several parallel computations.</p> 
  <p>The quadratic example does the extremely important job of logging the computation of roots of a quadratic equation. This:</p> 
  <div class="highlight highlight-source-scala">
   <pre>root(<span class="pl-en">Parameters</span>(<span class="pl-c1">2</span>, <span class="pl-c1">5</span>, <span class="pl-c1">3</span>)).run.written.shows</pre>
  </div> 
  <p>results in </p> 
  <pre>   
Extracting root
  Calculating Numerator
    Calculating Determinant
      Calculating b^2
        Got b: 5.0
        Got b^2: 25.0
      Calculating 4ac
        Got a: 2.0
        Got c: 3.0
        Got 4ac: 24.0
      Got b^2 - 4ac: 1.0
    Calculating sqrt(determinant)
      Determinant (1.0) is &gt;= 0
      Got sqrt(determinant): 1.0
    Got b: 5.0
    Got -b: -5.0
    Got -b + sqrt(determinant): -4.0
  Calculating Denominator
    Got a: 2.0
    Got 2a: 4.0
  Got root = numerator / denominator: -1.0
</pre> 
  <p>Or, in the case of a failure (when the roots are complex)</p> 
  <div class="highlight highlight-source-scala">
   <pre>root(<span class="pl-en">Parameters</span>(<span class="pl-c1">2</span>, <span class="pl-c1">5</span>, <span class="pl-c1">10</span>)).run.written.shows</pre>
  </div> 
  <p>gives</p> 
  <pre>    
Extracting root: Failed
  Calculating Numerator: Failed
    Calculating Determinant
      Calculating b^2
        Got b: 5.0
        Got b^2: 25.0
      Calculating 4ac
        Got a: 2.0
        Got c: 10.0
        Got 4ac: 80.0
      Got b^2 - 4ac: -55.0
    Calculating sqrt(determinant): Failed
      Determinant (-55.0) is &lt; 0: Failed
</pre> 
  <h3><a id="user-content-annotations" class="anchor" href="https://github.com/lancewalton/treelog#annotations" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Annotations</h3> 
  <p><a href="https://github.com/lancewalton/treelog/blob/master/src/test/scala/AnnotationsExample.scala" target="_blank">AnnotationsExample.scala</a> shows how nodes in the log tree can be annotated with important information for your program to use later. This is useful, for example, when you want to audit a process that affects multiple entities, and you want to make sure that the audit trail is associated with each of the modified entities. You can use the annotation facility to carry the key (or something richer) for each modified entity.</p> 
  <h2><a id="user-content-resources" class="anchor" href="https://github.com/lancewalton/treelog#resources" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Resources</h2> 
  <ul> 
   <li>Channing's <a href="http://typelevel.org/blog/2013/10/18/treelog.html" target="_blank">blog</a> at typelevel.</li> 
   <li>@oranda's <a href="https://github.com/oranda/treelog-scalajs" target="_blank">project</a> to give TreeLog a GUI, the ScalaJS ReactTreeView</li> 
  </ul> 
 </article>
</div>