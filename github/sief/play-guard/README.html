<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a href="https://github.com/sief/play-guard#play2-guard-module" aria-hidden="true" class="anchor" id="user-content-play2-guard-module" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Play2 Guard Module</h1> 
  <p><a href="http://mvnrepository.com/artifact/com.digitaltangible/play-guard_2.10" target="_blank"><img src="https://camo.githubusercontent.com/ef397bfcfad85c6dd1c2fd486ab63bc6bdaeec95/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f636f6d2e6469676974616c74616e6769626c652f706c61792d67756172645f322e31302e7376673f6c6162656c3d6c617465737425323072656c65617365253230666f72253230322e3130" alt="Maven" data-canonical-src="https://img.shields.io/maven-central/v/com.digitaltangible/play-guard_2.10.svg?label=latest%20release%20for%202.10" style="max-width:100%;"></a> <a href="http://mvnrepository.com/artifact/com.digitaltangible/play-guard_2.11" target="_blank"><img src="https://camo.githubusercontent.com/d4ae96c46c1db20879a4e36d661a2b96bcac5e99/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f636f6d2e6469676974616c74616e6769626c652f706c61792d67756172645f322e31312e7376673f6c6162656c3d6c617465737425323072656c65617365253230666f72253230322e3131" alt="Maven" data-canonical-src="https://img.shields.io/maven-central/v/com.digitaltangible/play-guard_2.11.svg?label=latest%20release%20for%202.11" style="max-width:100%;"></a> <a href="http://mvnrepository.com/artifact/com.digitaltangible/play-guard_2.12" target="_blank"><img src="https://camo.githubusercontent.com/c5242f8b30986aad2b99b7765e6c96961136bbb4/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f636f6d2e6469676974616c74616e6769626c652f706c61792d67756172645f322e31322e7376673f6c6162656c3d6c617465737425323072656c65617365253230666f72253230322e3132" alt="Maven" data-canonical-src="https://img.shields.io/maven-central/v/com.digitaltangible/play-guard_2.12.svg?label=latest%20release%20for%202.12" style="max-width:100%;"></a></p> 
  <p>Play2 module for blocking and throttling abusive requests.</p> 
  <ul> 
   <li> <p>throttling specific Actions based on IP address or other request attribute</p> </li> 
   <li> <p>throttling specific Actions based on IP address or other request attribute and failure rate, e.g. wrong credentials or any other Result attribute</p> </li> 
   <li> <p>global IP address whitelisting/blacklisting</p> </li> 
   <li> <p>global request throttling</p> </li> 
  </ul> 
  <h2><a href="https://github.com/sief/play-guard#target" aria-hidden="true" class="anchor" id="user-content-target" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Target</h2> 
  <p>This module targets the <strong>Scala</strong> version of <strong>Play 2.x.x</strong></p> 
  <h2><a href="https://github.com/sief/play-guard#rate-limit-algorithm" aria-hidden="true" class="anchor" id="user-content-rate-limit-algorithm" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Rate Limit Algorithm</h2> 
  <p>Based on the token bucket algorithm: <a href="http://en.wikipedia.org/wiki/Token_bucket" target="_blank">http://en.wikipedia.org/wiki/Token_bucket</a></p> 
  <h2><a href="https://github.com/sief/play-guard#getting-play-guard" aria-hidden="true" class="anchor" id="user-content-getting-play-guard" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Getting play-guard</h2> 
  <p>For Play 2.6.x:</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-s"><span class="pl-pds">"</span>com.digitaltangible<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>play-guard<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>2.1.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>For Play 2.5.x:</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-s"><span class="pl-pds">"</span>com.digitaltangible<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>play-guard<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>2.0.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>For Play 2.4.x:</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-s"><span class="pl-pds">"</span>com.digitaltangible<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>play-guard<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.6.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>For Play 2.3.x:</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-s"><span class="pl-pds">"</span>com.digitaltangible<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>play-guard<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.4.1<span class="pl-pds">"</span></span></pre>
  </div> 
  <h1><a href="https://github.com/sief/play-guard#1-ratelimitaction" aria-hidden="true" class="anchor" id="user-content-1-ratelimitaction" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>1. RateLimitAction</h1> 
  <p>Action function/filter for request and failure rate limiting specific actions. You can derive the bucket key from the request.</p> 
  <p>The rate limit functions/filters all take a RateLimiter instance as the first parameter:</p> 
  <div class="highlight highlight-source-scala">
   <pre> <span class="pl-k">class</span> <span class="pl-en">RateLimiter</span>(<span class="pl-v">size</span>: <span class="pl-k">Int</span>, <span class="pl-v">rate</span>: <span class="pl-k">Float</span>, <span class="pl-v">logPrefix</span>: <span class="pl-k">String</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, <span class="pl-v">clock</span>: <span class="pl-en">Clock</span> <span class="pl-k">=</span> <span class="pl-en">CurrentTimeClock</span>)(<span class="pl-k">implicit</span> <span class="pl-v">system</span>: <span class="pl-en">ActorSystem</span>)</pre>
  </div> 
  <p>It holds the token bucket group with the specified size and rate and can be shared between actions if you want to use the same bucket group for various actions.</p> 
  <h2><a href="https://github.com/sief/play-guard#11-request-rate-limit" aria-hidden="true" class="anchor" id="user-content-11-request-rate-limit" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>1.1 Request rate limit</h2> 
  <p>There is a general ActionFilter for handling any type of request so you can chain it behind you own ActionTransformer:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">/**</span></span>
<span class="pl-c">  * ActionFilter which holds a RateLimiter with a bucket for each key returned by function f.</span>
<span class="pl-c">  * Can be used with any Request type. Useful if you want to use content from a wrapped request, e.g. User ID</span>
<span class="pl-c">  *</span>
<span class="pl-c">  * <span class="pl-k">@param</span> <span class="pl-v">rl</span></span>
<span class="pl-c">  * <span class="pl-k">@param</span> <span class="pl-v">rejectResponse</span></span>
<span class="pl-c">  * <span class="pl-k">@param</span> <span class="pl-v">f</span></span>
<span class="pl-c">  * <span class="pl-k">@tparam</span> <span class="pl-en">R</span></span>
<span class="pl-c">  * <span class="pl-k">@param</span> <span class="pl-v">executionContext</span></span>
<span class="pl-c">  * <span class="pl-k">@return</span></span>
<span class="pl-c">  <span class="pl-c">*/</span></span>
<span class="pl-k">class</span> <span class="pl-en">RateLimitActionFilter</span>[<span class="pl-en">R</span>[_] <span class="pl-k">&lt;</span><span class="pl-k">:</span> <span class="pl-en">Request</span>[_]](<span class="pl-v">rl</span>: <span class="pl-en">RateLimiter</span>)(<span class="pl-v">rejectResponse</span>: <span class="pl-en">R</span>[_] <span class="pl-k">=&gt;</span> <span class="pl-en">Result</span>, <span class="pl-v">f</span>: <span class="pl-en">R</span>[_] <span class="pl-k">=&gt;</span> <span class="pl-en">Any</span>)(<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">executionContext</span><span class="pl-k">:</span> <span class="pl-en">ExecutionContext</span>) <span class="pl-k">extends</span> <span class="pl-e">ActionFilter</span>[<span class="pl-en">R</span>] {</pre>
  </div> 
  <p>There are also two convenience filters:</p> 
  <p><strong>IP address as key</strong> (from the sample app):</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-c"><span class="pl-c">//</span> allow 3 requests immediately and get a new token every 5 seconds</span>
  <span class="pl-k">private</span> <span class="pl-k">val</span> <span class="pl-en">ipRateLimitFilter</span> <span class="pl-k">=</span> <span class="pl-en">IpRateLimitFilter</span>(<span class="pl-k">new</span> <span class="pl-en">RateLimiter</span>(<span class="pl-c1">3</span>, <span class="pl-c1">1f</span> <span class="pl-k">/</span> <span class="pl-c1">5</span>, <span class="pl-s"><span class="pl-pds">"</span>test limit by IP address<span class="pl-pds">"</span></span>)) {
    <span class="pl-k">implicit</span> <span class="pl-v">r</span>: <span class="pl-en">RequestHeader</span> <span class="pl-k">=&gt;</span> <span class="pl-en">TooManyRequests</span>( s<span class="pl-s"><span class="pl-pds">"""</span>rate limit for ${r.remoteAddress} exceeded<span class="pl-pds">"""</span></span>)
  }

  <span class="pl-k">def</span> <span class="pl-en">limitedByIp</span> <span class="pl-k">=</span> (<span class="pl-en">Action</span> andThen ipRateLimitFilter) {
    <span class="pl-en">Ok</span>(<span class="pl-s"><span class="pl-pds">"</span>limited by IP<span class="pl-pds">"</span></span>)
  }</pre>
  </div> 
  <p><strong>Action parameter as key</strong> (from the sample app):</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-c"><span class="pl-c">//</span> allow 4 requests immediately and get a new token every 15 seconds</span>
  <span class="pl-k">private</span> <span class="pl-k">val</span> <span class="pl-en">keyRateLimitFilter</span> <span class="pl-k">=</span> <span class="pl-en">KeyRateLimitFilter</span>(<span class="pl-k">new</span> <span class="pl-en">RateLimiter</span>(<span class="pl-c1">4</span>, <span class="pl-c1">1f</span> <span class="pl-k">/</span> <span class="pl-c1">15</span>, <span class="pl-s"><span class="pl-pds">"</span>test by token<span class="pl-pds">"</span></span>)) _

  <span class="pl-k">def</span> <span class="pl-en">limitedByKey</span>(<span class="pl-v">key</span>: <span class="pl-k">String</span>) <span class="pl-k">=</span> (<span class="pl-en">Action</span> andThen keyRateLimitFilter(_ <span class="pl-k">=&gt;</span> <span class="pl-en">TooManyRequests</span>( s<span class="pl-s"><span class="pl-pds">"""</span>rate limit for '$key' exceeded<span class="pl-pds">"""</span></span>), key)) {
    <span class="pl-en">Ok</span>(<span class="pl-s"><span class="pl-pds">"</span>limited by token<span class="pl-pds">"</span></span>)
  }</pre>
  </div> 
  <h2><a href="https://github.com/sief/play-guard#12-error-rate-limit" aria-hidden="true" class="anchor" id="user-content-12-error-rate-limit" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>1.2 Error rate limit</h2> 
  <p>There is a general ActionFunction for handling any type of request so you can chain it behind you own ActionTransformer and determine failure from the Result:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">/**</span></span>
<span class="pl-c">  * ActionFunction which holds a RateLimiter with a bucket for each key returned by function keyFromRequest.</span>
<span class="pl-c">  * Tokens are consumed only by failures determined by function resultCheck. If no tokens remain, requests with this key are rejected.</span>
<span class="pl-c">  * Can be used with any Request type. Useful if you want to use content from a wrapped request, e.g. User ID</span>
<span class="pl-c">  *</span>
<span class="pl-c">  * <span class="pl-k">@param</span> <span class="pl-v">rl</span></span>
<span class="pl-c">  * <span class="pl-k">@param</span> <span class="pl-v">rejectResponse</span></span>
<span class="pl-c">  * <span class="pl-k">@param</span> <span class="pl-v">keyFromRequest</span></span>
<span class="pl-c">  * <span class="pl-k">@param</span> <span class="pl-v">resultCheck</span></span>
<span class="pl-c">  * <span class="pl-k">@param</span> <span class="pl-v">executionContext</span></span>
<span class="pl-c">  * <span class="pl-k">@tparam</span> <span class="pl-en">R</span></span>
<span class="pl-c">  <span class="pl-c">*/</span></span>
<span class="pl-k">class</span> <span class="pl-en">FailureRateLimitFunction</span>[<span class="pl-en">R</span>[_] <span class="pl-k">&lt;</span><span class="pl-k">:</span> <span class="pl-en">Request</span>[_]](<span class="pl-v">rl</span>: <span class="pl-en">RateLimiter</span>)(<span class="pl-v">rejectResponse</span>: <span class="pl-en">R</span>[_] <span class="pl-k">=&gt;</span> <span class="pl-en">Result</span>, <span class="pl-v">keyFromRequest</span>: <span class="pl-en">R</span>[_] <span class="pl-k">=&gt;</span> <span class="pl-en">Any</span>, <span class="pl-v">resultCheck</span>: <span class="pl-en">Result</span> <span class="pl-k">=&gt;</span> <span class="pl-k">Boolean</span>)(<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">executionContext</span><span class="pl-k">:</span> <span class="pl-en">ExecutionContext</span>) <span class="pl-k">extends</span> <span class="pl-e">ActionFunction</span>[<span class="pl-en">R</span>, <span class="pl-en">R</span>] </pre>
  </div> 
  <p>The convenience action HttpErrorRateLimitAction <strong>limits the HTTP error rate for each IP address</strong>. This is for example useful if you want to prevent brute force bot attacks on authentication requests.</p> 
  <p>From the sample app:</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-c"><span class="pl-c">//</span> allow 2 failures immediately and get a new token every 10 seconds</span>
  <span class="pl-k">private</span> <span class="pl-k">val</span> <span class="pl-en">httpErrorRateLimitFunction</span> <span class="pl-k">=</span> <span class="pl-en">HttpErrorRateLimitFunction</span>(<span class="pl-k">new</span> <span class="pl-en">RateLimiter</span>(<span class="pl-c1">2</span>, <span class="pl-c1">1f</span> <span class="pl-k">/</span> <span class="pl-c1">10</span>, <span class="pl-s"><span class="pl-pds">"</span>test failure rate limit<span class="pl-pds">"</span></span>)) {
    <span class="pl-k">implicit</span> <span class="pl-v">r</span>: <span class="pl-en">RequestHeader</span> <span class="pl-k">=&gt;</span> <span class="pl-en">BadRequest</span>(<span class="pl-s"><span class="pl-pds">"</span>failure rate exceeded<span class="pl-pds">"</span></span>)
  }

  <span class="pl-k">def</span> <span class="pl-en">failureLimitedByIp</span>(<span class="pl-v">fail</span>: <span class="pl-k">Boolean</span>) <span class="pl-k">=</span> (<span class="pl-en">Action</span> andThen httpErrorRateLimitFunction) {
    <span class="pl-k">if</span> (fail) <span class="pl-en">BadRequest</span>(<span class="pl-s"><span class="pl-pds">"</span>failed<span class="pl-pds">"</span></span>)
    <span class="pl-k">else</span> <span class="pl-en">Ok</span>(<span class="pl-s"><span class="pl-pds">"</span>Ok<span class="pl-pds">"</span></span>)
  }</pre>
  </div> 
  <h2><a href="https://github.com/sief/play-guard#13-integration-with-silhouette" aria-hidden="true" class="anchor" id="user-content-13-integration-with-silhouette" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>1.3 Integration with Silhouette</h2> 
  <p><a href="https://www.silhouette.rocks/docs/rate-limiting" target="_blank">https://www.silhouette.rocks/docs/rate-limiting</a></p> 
  <h1><a href="https://github.com/sief/play-guard#2-guardfilter" aria-hidden="true" class="anchor" id="user-content-2-guardfilter" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>2. GuardFilter</h1> 
  <p>Filter for global rate limiting and IP address whitelisting/blacklisting.</p> 
  <p><strong>Note: this global filter is only useful if you don't have access to a reverse proxy like nginx where you can handle these kind of things</strong></p> 
  <h2><a href="https://github.com/sief/play-guard#21-rules" aria-hidden="true" class="anchor" id="user-content-21-rules" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>2.1 Rules</h2> 
  <p>Rejects requests based on the following rules:</p> 
  <pre><code>if IP address is in whitelist =&gt; let pass
else if IP address is in blacklist =&gt; reject with ‘403 FORBIDDEN’
else if IP address rate limit exceeded =&gt; reject with ‘429 TOO_MANY_REQUEST’
else if global rate limit exceeded =&gt; reject with ‘429 TOO_MANY_REQUEST’
</code></pre> 
  <h2><a href="https://github.com/sief/play-guard#22-usage" aria-hidden="true" class="anchor" id="user-content-22-usage" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>2.2 Usage</h2> 
  <p>For compile time DI:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">class</span> <span class="pl-en">ApplicationComponents</span>(<span class="pl-v">context</span>: <span class="pl-en">Context</span>) <span class="pl-k">extends</span> <span class="pl-e">BuiltInComponentsFromContext</span>(context) <span class="pl-k">with</span> <span class="pl-e">PlayGuardComponents</span> {

  <span class="pl-k">override</span> <span class="pl-k">lazy</span> <span class="pl-k">val</span> <span class="pl-en">httpFilters</span><span class="pl-k">:</span> <span class="pl-en">Seq</span>[<span class="pl-en">EssentialFilter</span>] <span class="pl-k">=</span> <span class="pl-en">Seq</span>(guardFilter)
}</pre>
  </div> 
  <p>Runtime DI with Guice:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">@</span><span class="pl-en">Singleton</span>
<span class="pl-k">class</span> <span class="pl-en">Filters</span> <span class="pl-k">@</span><span class="pl-en">Inject</span>()(<span class="pl-v">env</span>: <span class="pl-en">Environment</span>, <span class="pl-v">guardFilter</span>: <span class="pl-en">GuardFilter</span>) <span class="pl-k">extends</span> <span class="pl-e">DefaultHttpFilters</span>(guardFilter)</pre>
  </div> 
  <p>The filter uses the black/whitelists from the configuration by default. You can also plug in you own IpChecker implementation. With runtime time DI you have to disable the default module in your application.conf and bind your implementation in your app's module:</p> 
  <pre><code>play {
  modules {
    disabled += "com.digitaltangible.playguard.PlayGuardIpCheckerModule"
  }
}
</code></pre> 
  <h1><a href="https://github.com/sief/play-guard#3-configuration" aria-hidden="true" class="anchor" id="user-content-3-configuration" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>3. Configuration</h1> 
  <p><strong>Note: the config format has changed with v2.0.0</strong></p> 
  <pre><code>playguard {

  # the http header to use for the client IP address.
  # If not set, RequestHeader.remoteAddress will be used
  clientipheader = "X-Forwarded-For"


  # required for the global GuardFilter
  filter {
    enabled = true
    global {
      bucket {
        size = 100
        rate = 100
      }
    }
    ip {
      whitelist = ["1.1.1.1", "2.2.2.2"]
      blacklist = ["3.3.3.3", "4.4.4.4"]
      bucket {
        size = 50
        rate = 50
      }
    }
  }
}
</code></pre> 
 </article>
</div>