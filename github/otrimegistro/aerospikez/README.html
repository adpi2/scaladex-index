<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-aerospikez---aerospike-v3-scala-client" class="anchor" href="https://github.com/otrimegistro/aerospikez#aerospikez---aerospike-v3-scala-client" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>aerospikez - Aerospike v3 Scala Client</h1> 
  <p>A fast, asynchronous, composable and type safe Scala client for <a href="http://www.aerospike.com/" target="_blank">Aerospike</a> v3.</p> 
  <h3><a id="user-content-key-points" class="anchor" href="https://github.com/otrimegistro/aerospikez#key-points" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Key Points</h3> 
  <ul> 
   <li>Wrapper over java library, to take advantage from Scalaz Stream.</li> 
   <li>Type safe, Aerospike support only some types, so the compiler will check this for us.</li> 
   <li>Idiomatic Scala as possible, e.g. avoid dealing with nulls, instead Scala's Option type is used.</li> 
   <li>Avoid database configurations in the code that you write, this will relies in an file (see this <a href="https://github.com/otrimegistro/aerospikez/blob/master/src/test/resources/reference.conf" target="_blank">reference.conf</a>).</li> 
   <li>Concise &amp; Usable, i.e not take care about creating a Key/Bin/Policy/Statement, etc that main result in boilerplate code.</li> 
  </ul> 
  <h2><a id="user-content-installation" class="anchor" href="https://github.com/otrimegistro/aerospikez#installation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Installation</h2> 
  <table>
   <thead> 
    <tr> 
     <th>Release Version</th> 
     <th>Scala compatible</th> 
     <th>Scalaz-Stream compatible</th> 
     <th>More Info</th> 
    </tr> 
   </thead>
   <tbody> 
    <tr> 
     <td>0.2</td> 
     <td>2.10/2.11</td> 
     <td>0.5a</td> 
     <td><a href="https://github.com/otrimegistro/aerospikez/blob/master/notes/0.2.md" target="_blank">notes</a> / <a href="https://github.com/otrimegistro/aerospikez#guide" target="_blank">guide</a></td> 
    </tr> 
    <tr> 
     <td>0.1</td> 
     <td>2.10</td> 
     <td>0.4.1a</td> 
     <td><a href="https://github.com/otrimegistro/aerospikez/blob/master/notes/0.1.md" target="_blank">notes</a> / <a href="https://github.com/otrimegistro/aerospikez/tree/v0.1#guide" target="_blank">guide</a></td> 
    </tr> 
   </tbody>
  </table> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Scalaz Bintray Repo<span class="pl-pds">"</span></span> at <span class="pl-s"><span class="pl-pds">"</span>http://dl.bintray.com/scalaz/releases<span class="pl-pds">"</span></span>

libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.github.otrimegistro<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>aerospikez<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>release-version<span class="pl-pds">"</span></span></pre>
  </div> 
  <h5><a id="user-content-snapshot-version---" class="anchor" href="https://github.com/otrimegistro/aerospikez#snapshot-version---" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Snapshot Version <a href="http://travis-ci.org/otrimegistro/aerospikez" target="_blank"><img src="https://camo.githubusercontent.com/c755a043b799a0f44f6c064185ba86b35bd725a0/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f6f7472696d6567697374726f2f6165726f7370696b657a2e706e67" alt="Build Status" data-canonical-src="https://secure.travis-ci.org/otrimegistro/aerospikez.png" style="max-width:100%;"></a> <a href="https://coveralls.io/r/otrimegistro/aerospikez?branch=master" target="_blank"><img src="https://camo.githubusercontent.com/09d28700277706767efa8a55235a4c50e753d40e/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6f7472696d6567697374726f2f6165726f7370696b657a2f62616467652e706e673f6272616e63683d6d6173746572" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/otrimegistro/aerospikez/badge.png?branch=master" style="max-width:100%;"></a> <a href="https://waffle.io/otrimegistro/aerospikez" target="_blank"><img src="https://camo.githubusercontent.com/6846541a615f1d4a2ecb34229e24d359ff23245a/68747470733a2f2f62616467652e776166666c652e696f2f6f7472696d6567697374726f2f6165726f7370696b657a2e706e673f6c6162656c3d5265616479" alt="Stories in Ready" data-canonical-src="https://badge.waffle.io/otrimegistro/aerospikez.png?label=Ready" style="max-width:100%;"></a></h5> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>Sonatype OSS Snapshots<span class="pl-pds">"</span></span> at <span class="pl-s"><span class="pl-pds">"</span>https://oss.sonatype.org/content/repositories/snapshots/<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>Scalaz Bintray Repo<span class="pl-pds">"</span></span>    at <span class="pl-s"><span class="pl-pds">"</span>http://dl.bintray.com/scalaz/releases<span class="pl-pds">"</span></span>
)

libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.github.otrimegistro<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>aerospikez<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.3-SNAPSHOT<span class="pl-pds">"</span></span></pre>
  </div> 
  <h2><a id="user-content-what-can-you-do" class="anchor" href="https://github.com/otrimegistro/aerospikez#what-can-you-do" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>What can you do?</h2> 
  <p>To give an example we can use the <a href="https://github.com/aerospike/flights-analytics" target="_blank">flights-analytics</a> (see the readme to get a basic idea):</p> 
  <ul> 
   <li><p>Clone the repo (we need only the udf and data): <code>git clone https://github.com/aerospike/flights-analytics</code></p></li> 
   <li><p>In <code>sbt console</code> copy this code in the <code>:paste</code> mode (but wait, change the <code>path</code> value!):</p></li> 
  </ul> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">aerospikez.</span>{ <span class="pl-v">AerospikeClient</span>, <span class="pl-v">Namespace</span>, <span class="pl-v">Filter</span>, <span class="pl-v">Bin</span> }
<span class="pl-k">import</span> <span class="pl-v">scalaz.stream.</span><span class="pl-v">io</span>

<span class="pl-k">val</span> <span class="pl-en">client</span> <span class="pl-k">=</span> <span class="pl-en">AerospikeClient</span>()
<span class="pl-k">val</span> <span class="pl-en">flight</span> <span class="pl-k">=</span> client.setOf(<span class="pl-en">Namespace</span>(<span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>), <span class="pl-s"><span class="pl-pds">"</span>flights<span class="pl-pds">"</span></span>)
<span class="pl-k">val</span> <span class="pl-en">format</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">java.text.SimpleDateFormat</span>(<span class="pl-s"><span class="pl-pds">"</span>yyyy/MM/dd<span class="pl-pds">"</span></span>)
<span class="pl-k">val</span> <span class="pl-en">sdf</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">java.text.SimpleDateFormat</span>(<span class="pl-s"><span class="pl-pds">"</span>yyyy-MM-dd<span class="pl-pds">"</span></span>)
<span class="pl-k">val</span> <span class="pl-en">startDate</span> <span class="pl-k">=</span> sdf.parse(<span class="pl-s"><span class="pl-pds">"</span>2012-01-15<span class="pl-pds">"</span></span>).getTime<span class="pl-k">/</span><span class="pl-c1">1000</span>
<span class="pl-k">val</span> <span class="pl-en">endDate</span> <span class="pl-k">=</span> sdf.parse(<span class="pl-s"><span class="pl-pds">"</span>2012-01-15<span class="pl-pds">"</span></span>).getTime<span class="pl-k">/</span><span class="pl-c1">1000</span>
<span class="pl-k">val</span> <span class="pl-en">path</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>/home/otrimegistro/flights-analytics/<span class="pl-pds">"</span></span> <span class="pl-c">// Change this where the repo was clone</span>

<span class="pl-k">val</span> <span class="pl-en">preparation</span> <span class="pl-k">=</span> client.register(<span class="pl-s"><span class="pl-pds">"</span>simple_aggregation.lua<span class="pl-pds">"</span></span>, path <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>udf<span class="pl-pds">"</span></span>).map(_ <span class="pl-k">=&gt;</span>
  (<span class="pl-k">new</span> <span class="pl-en">java.io.File</span>(path <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>data<span class="pl-pds">"</span></span>)).listFiles.map(file <span class="pl-k">=&gt;</span>
    io.linesR(file.toString).map(_.split(<span class="pl-c1">','</span>)).evalMap(a <span class="pl-k">=&gt;</span>
      flight.put(a(<span class="pl-c1">0</span>).trim,
        <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>YEAR<span class="pl-pds">"</span></span>, a(<span class="pl-c1">1</span>).trim.toInt),
        <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>DAY_OF_MONTH<span class="pl-pds">"</span></span>, a(<span class="pl-c1">2</span>).trim.toInt),
        <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>FL_DATE<span class="pl-pds">"</span></span>, format.parse(a(<span class="pl-c1">3</span>).trim).getTime<span class="pl-k">/</span><span class="pl-c1">1000</span>),
        <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>AIRLINE_ID<span class="pl-pds">"</span></span>, a(<span class="pl-c1">4</span>).trim.toInt),
        <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>CARRIER<span class="pl-pds">"</span></span>, a(<span class="pl-c1">5</span>).trim),
        <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>FL_NUM<span class="pl-pds">"</span></span>, a(<span class="pl-c1">6</span>).trim.toInt),
        <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>ORI_AIRPORT_ID<span class="pl-pds">"</span></span>, a(<span class="pl-c1">7</span>).trim.toInt),
        <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>ORIGIN<span class="pl-pds">"</span></span>, a(<span class="pl-c1">8</span>).trim),
        <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>ORI_CITY_NAME<span class="pl-pds">"</span></span>, a(<span class="pl-c1">9</span>).trim),
        <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>ORI_STATE_ABR<span class="pl-pds">"</span></span>, a(<span class="pl-c1">10</span>).trim),
        <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>DEST<span class="pl-pds">"</span></span>, a(<span class="pl-c1">11</span>).trim),
        <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>DEST_CITY_NAME<span class="pl-pds">"</span></span>, a(<span class="pl-c1">12</span>).trim),
        <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>DEST_STATE_ABR<span class="pl-pds">"</span></span>, a(<span class="pl-c1">13</span>).trim),
        <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>DEP_TIME<span class="pl-pds">"</span></span>, a(<span class="pl-c1">14</span>).trim.toInt),
        <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>ARR_TIME<span class="pl-pds">"</span></span>, a(<span class="pl-c1">15</span>).trim.toInt),
        <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>ELAPSED_TIME<span class="pl-pds">"</span></span>, a(<span class="pl-c1">16</span>).trim.toInt),
        <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>AIR_TIME<span class="pl-pds">"</span></span>, a(<span class="pl-c1">17</span>).trim.toInt),
        <span class="pl-en">Bin</span>(<span class="pl-s"><span class="pl-pds">"</span>DISTANCE<span class="pl-pds">"</span></span>, a(<span class="pl-c1">18</span>).trim.toInt))
    ).drain.run.runAsync(_ <span class="pl-k">=&gt;</span> ())
)).flatMap(_  <span class="pl-k">=&gt;</span> flight.createIndex[<span class="pl-k">Int</span>](<span class="pl-s"><span class="pl-pds">"</span>flight_date<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>FL_DATE<span class="pl-pds">"</span></span>))

<span class="pl-k">val</span> <span class="pl-en">analytics</span> <span class="pl-k">=</span> flight.queryAggregate[<span class="pl-en">Map</span>[<span class="pl-k">String</span>, <span class="pl-en">Map</span>[<span class="pl-k">String</span>,<span class="pl-k">Long</span>]]](
  <span class="pl-en">Filter</span>.range(<span class="pl-s"><span class="pl-pds">"</span>FL_DATE<span class="pl-pds">"</span></span>, startDate, endDate), <span class="pl-s"><span class="pl-pds">"</span>simple_aggregation<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>late_flights_by_airline<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <ul> 
   <li>Now this will register the udf, create the secondary index and loading the data. This 3 step are compose to ensure the requeriment of processing:</li> 
  </ul> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> preparation.runAsync(_ <span class="pl-k">=&gt;</span> println(<span class="pl-s"><span class="pl-pds">"</span>Done!, the data is loading ...<span class="pl-pds">"</span></span>))</pre>
  </div> 
  <ul> 
   <li>The previous task, simulate a flow of incomming data into your system, wich we can analyze in realtime:</li> 
  </ul> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> analytics.runLog.runAsync(println)
\<span class="pl-k">/-</span>(<span class="pl-en">Vector</span>(<span class="pl-en">Map</span>(<span class="pl-en">OO</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">22</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">20</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">87</span>), <span class="pl-en">B6</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">18</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">27</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">144</span>), <span class="pl-en">AA</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">36</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">48</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">131</span>), <span class="pl-en">YV</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">26</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">11</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">41</span>), <span class="pl-en">EV</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">18</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">21</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">115</span>), <span class="pl-en">UA</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">46</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">23</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">49</span>), <span class="pl-en">MQ</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">22</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">17</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">75</span>), <span class="pl-en">VX</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">6</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">2</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">30</span>), <span class="pl-en">HA</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">0</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">0</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">10</span>)))</pre>
  </div> 
  <ul> 
   <li>Also we can consume repetitively, to manage each/time result against more data are arrive:</li> 
  </ul> 
  <div class="highlight highlight-source-scala">
   <pre>scala<span class="pl-k">&gt;</span> <span class="pl-k">val</span> <span class="pl-en">result</span> <span class="pl-k">=</span> analytics.repeat.take(<span class="pl-c1">3</span>).runLog.run
<span class="pl-c">// ...</span>
scala<span class="pl-k">&gt;</span> result(<span class="pl-c1">0</span>)
res1<span class="pl-k">:</span> <span class="pl-en">Map</span>[<span class="pl-k">String</span>,<span class="pl-en">Map</span>[<span class="pl-k">String</span>,<span class="pl-k">Long</span>]] <span class="pl-k">=</span> <span class="pl-en">Map</span>(<span class="pl-en">US</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">36</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">58</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">159</span>), <span class="pl-en">OO</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">22</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">40</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">174</span>), <span class="pl-en">B6</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">18</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">27</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">144</span>), <span class="pl-en">AA</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">32</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">88</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">268</span>), <span class="pl-en">YV</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">26</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">11</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">41</span>), <span class="pl-en">EV</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">15</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">35</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">220</span>), <span class="pl-en">UA</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">40</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">34</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">83</span>), <span class="pl-en">MQ</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">22</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">34</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">153</span>), <span class="pl-en">VX</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">6</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">2</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">30</span>), <span class="pl-en">HA</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">0</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">0</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">19</span>))

scala<span class="pl-k">&gt;</span> result(<span class="pl-c1">1</span>)
res2<span class="pl-k">:</span> <span class="pl-en">Map</span>[<span class="pl-k">String</span>,<span class="pl-en">Map</span>[<span class="pl-k">String</span>,<span class="pl-k">Long</span>]] <span class="pl-k">=</span> <span class="pl-en">Map</span>(<span class="pl-en">US</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">38</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">83</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">214</span>), <span class="pl-en">OO</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">23</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">45</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">193</span>), <span class="pl-en">B6</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">18</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">27</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">144</span>), <span class="pl-en">AA</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">34</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">102</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">299</span>), <span class="pl-en">YV</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">26</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">11</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">41</span>), <span class="pl-en">EV</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">17</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">41</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">239</span>), <span class="pl-en">UA</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">41</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">36</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">87</span>), <span class="pl-en">MQ</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">20</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">34</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">164</span>), <span class="pl-en">VX</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">6</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">2</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">30</span>), <span class="pl-en">HA</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">0</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">0</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">20</span>))

scala<span class="pl-k">&gt;</span> result(<span class="pl-c1">2</span>)
res3<span class="pl-k">:</span> <span class="pl-en">Map</span>[<span class="pl-k">String</span>,<span class="pl-en">Map</span>[<span class="pl-k">String</span>,<span class="pl-k">Long</span>]] <span class="pl-k">=</span> <span class="pl-en">Map</span>(<span class="pl-en">US</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">38</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">96</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">248</span>), <span class="pl-en">OO</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">22</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">45</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">204</span>), <span class="pl-en">B6</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">18</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">27</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">144</span>), <span class="pl-en">AA</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">33</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">104</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">314</span>), <span class="pl-en">YV</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">26</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">11</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">41</span>), <span class="pl-en">EV</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">17</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">45</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">252</span>), <span class="pl-en">UA</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">41</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">39</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">94</span>), <span class="pl-en">MQ</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">20</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">34</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">170</span>), <span class="pl-en">VX</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">6</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">2</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">30</span>), <span class="pl-en">HA</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-en">Map</span>(percent <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">0</span>, late <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">0</span>, flights <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-c1">21</span>))</pre>
  </div> 
  <h2><a id="user-content-guide" class="anchor" href="https://github.com/otrimegistro/aerospikez#guide" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Guide</h2> 
  <ul> 
   <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/before_start.md" target="_blank">Before Start</a></li> 
   <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/connection_management.md" target="_blank">Cluster Connection Management</a> 
    <ul> 
     <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/connection_management.md#connecting" target="_blank">Connecting</a></li> 
     <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/connection_management.md#connection-check" target="_blank">Connection Check</a></li> 
     <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/connection_management.md#listing-active-server-nodes" target="_blank">Listing active server nodes</a></li> 
     <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/connection_management.md#close-connection" target="_blank">Close Connection</a></li> 
    </ul></li> 
   <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/creating_set.md" target="_blank">Set Creation</a></li> 
   <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/key_value_store.md" target="_blank">Key Value Store</a> 
    <ul> 
     <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/key_value_store.md#write-record-operations" target="_blank">Write Record</a></li> 
     <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/key_value_store.md#read-record-operations" target="_blank">Read Record</a></li> 
     <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/key_value_store.md#existence-check-operations" target="_blank">Existence-Check</a></li> 
     <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/key_value_store.md#touch-operations" target="_blank">Touch Record</a></li> 
     <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/key_value_store.md#delete-operations" target="_blank">Delete Record</a></li> 
     <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/key_value_store.md#arithmetic-operations" target="_blank">Arithmetic Operations</a></li> 
     <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/key_value_store.md#string-operations" target="_blank">String Operations</a></li> 
     <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/key_value_store.md#generic-database-operations" target="_blank">Generic Database Operations</a></li> 
    </ul></li> 
   <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/user_define_function.md" target="_blank">Working with Lua UDF</a> 
    <ul> 
     <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/user_define_function.md#register-the-udf" target="_blank">Register the UDF</a></li> 
     <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/user_define_function.md#create-a-secondary-index" target="_blank">Create a Index</a></li> 
     <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/user_define_function.md#execute" target="_blank">Execute</a></li> 
     <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/user_define_function.md#query" target="_blank">Query</a></li> 
     <li><a href="https://github.com/otrimegistro/aerospikez/blob/master/guide/user_define_function.md#aggregation" target="_blank">Aggregation</a></li> 
    </ul></li> 
  </ul> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/otrimegistro/aerospikez#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p>Copyright 2014 Omar González <a href="mailto:otrimegistro@gmail.com" target="_blank">otrimegistro@gmail.com</a></p> 
  <p>Licensed under the <a href="https://raw.githubusercontent.com/otrimegistro/aerospikez/master/LICENSE" target="_blank">MIT License</a>.</p> 
 </article>
</div>