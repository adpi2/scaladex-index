<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <p><a href="http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22iothub-react_2.11%22" target="_blank"><img src="https://camo.githubusercontent.com/68cca729d11fcc20e7fc3f00308e330bcf4aa604/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f636f6d2e6d6963726f736f66742e617a7572652e696f742f696f746875622d72656163745f322e31312e737667" alt="Maven Central" data-canonical-src="https://img.shields.io/maven-central/v/com.microsoft.azure.iot/iothub-react_2.11.svg" style="max-width:100%;"></a> <a href="https://bintray.com/microsoftazuretoketi/toketi-repo/iothub-react" target="_blank"><img src="https://camo.githubusercontent.com/9dcdd9907f2e2ff934169f9523559c0ebb552be0/68747470733a2f2f696d672e736869656c64732e696f2f62696e747261792f762f6d6963726f736f6674617a757265746f6b6574692f746f6b6574692d7265706f2f696f746875622d72656163742e737667" alt="Bintray" data-canonical-src="https://img.shields.io/bintray/v/microsoftazuretoketi/toketi-repo/iothub-react.svg" style="max-width:100%;"></a> <a href="https://travis-ci.org/Azure/toketi-iothubreact" target="_blank"><img src="https://camo.githubusercontent.com/b68eb38c8b2936fcbc025d90667dbb027ff0b72d/68747470733a2f2f696d672e736869656c64732e696f2f7472617669732f417a7572652f746f6b6574692d696f7468756272656163742e737667" alt="Build" data-canonical-src="https://img.shields.io/travis/Azure/toketi-iothubreact.svg" style="max-width:100%;"></a> <a href="https://github.com/azure/toketi-iothubreact/issues" target="_blank"><img src="https://camo.githubusercontent.com/6be9248fc9a01df23485a06d323103de97fa3492/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6973737565732f617a7572652f746f6b6574692d696f7468756272656163742e7376673f7374796c653d666c61742d737175617265" alt="Issues" data-canonical-src="https://img.shields.io/github/issues/azure/toketi-iothubreact.svg?style=flat-square" style="max-width:100%;"></a> <a href="https://gitter.im/azure-toketi/iothub-react" target="_blank"><img src="https://camo.githubusercontent.com/c0f9f4abb1e6e7afc2545dd559c2bf0506504edd/68747470733a2f2f696d672e736869656c64732e696f2f6769747465722f726f6f6d2f617a7572652f746f6b6574692d7265706f2e6a732e737667" alt="Gitter" data-canonical-src="https://img.shields.io/gitter/room/azure/toketi-repo.js.svg" style="max-width:100%;"></a></p> 
  <h1><a id="user-content-iothubreact" class="anchor" href="https://github.com/azure/toketi-iothubreact#iothubreact" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>IoTHubReact</h1> 
  <p>IoTHub React is an Akka Stream library that can be used to read data from <a href="https://azure.microsoft.com/en-us/services/iot-hub/" target="_blank">Azure IoT Hub</a>, via a reactive stream with asynchronous back pressure. Azure IoT Hub is a service used to connect thousands to millions of devices to the Azure cloud.</p> 
  <p>A simple example on how to use the library in Scala is the following:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-en">IoTHub</span>().source()
    .map(m <span class="pl-k">=&gt;</span> parse(m.contentAsString).extract[<span class="pl-en">Temperature</span>])
    .filter(_.value <span class="pl-k">&gt;</span> <span class="pl-c1">100</span>)
    .to(console)
    .run()</pre>
  </div> 
  <p>and the equivalent code in Java:</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">TypeReference&lt;<span class="pl-smi">Temperature</span>&gt;</span> type <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">TypeReference&lt;<span class="pl-smi">Temperature</span>&gt;</span>() {};

<span class="pl-k">new</span> <span class="pl-smi">IoTHub</span>()<span class="pl-k">.</span>source()
    .map(m <span class="pl-k">-</span><span class="pl-k">&gt;</span> (<span class="pl-smi">Temperature</span>) jsonParser<span class="pl-k">.</span>readValue(m<span class="pl-k">.</span>contentAsString(), type))
    .filter(x <span class="pl-k">-</span><span class="pl-k">&gt;</span> x<span class="pl-k">.</span>value <span class="pl-k">&gt;</span> <span class="pl-c1">100</span>)
    .to(console())
    .run(streamMaterializer);</pre>
  </div> 
  <p>A stream of incoming telemetry data is read, parsed and converted to a <code>Temperature</code> object and filtered based on the temperature value. </p> 
  <h4><a id="user-content-streaming-from-iot-hub-to-any" class="anchor" href="https://github.com/azure/toketi-iothubreact#streaming-from-iot-hub-to-any" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Streaming from IoT hub to <em>any</em></h4> 
  <p>A more interesting example is reading telemetry data from Azure IoTHub, and sending it to a Kafka topic, so it can be consumed by other services downstream:</p> 
  <div class="highlight highlight-source-scala">
   <pre>... 
<span class="pl-k">import</span> <span class="pl-v">org.apache.kafka.common.serialization.</span><span class="pl-v">StringSerializer</span>
<span class="pl-k">import</span> <span class="pl-v">org.apache.kafka.common.serialization.</span><span class="pl-v">ByteArraySerializer</span>
<span class="pl-k">import</span> <span class="pl-v">org.apache.kafka.clients.producer.</span><span class="pl-v">ProducerRecord</span>
<span class="pl-k">import</span> <span class="pl-v">akka.kafka.</span><span class="pl-v">ProducerSettings</span>
<span class="pl-k">import</span> <span class="pl-v">akka.kafka.scaladsl.</span><span class="pl-v">Producer</span>

<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">KafkaProducer</span>(<span class="pl-v">bootstrapServer</span>: <span class="pl-k">String</span>)(<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">system</span><span class="pl-k">:</span> <span class="pl-en">ActorSystem</span>) {

  <span class="pl-k">protected</span> <span class="pl-k">val</span> <span class="pl-en">producerSettings</span> <span class="pl-k">=</span> <span class="pl-en">ProducerSettings</span>(system, <span class="pl-k">new</span> <span class="pl-en">ByteArraySerializer,</span> <span class="pl-k">new</span> <span class="pl-en">StringSerializer)</span>
    .withBootstrapServers(bootstrapServer)

  <span class="pl-k">def</span> <span class="pl-en">getSink</span>() <span class="pl-k">=</span> <span class="pl-en">Producer</span>.plainSink(producerSettings)

  <span class="pl-k">def</span> <span class="pl-en">packageMessage</span>(<span class="pl-v">elem</span>: <span class="pl-k">String</span>, <span class="pl-v">topic</span>: <span class="pl-k">String</span>)<span class="pl-k">:</span> <span class="pl-en">ProducerRecord</span>[<span class="pl-en">Array</span>[<span class="pl-k">Byte</span>], <span class="pl-k">String</span>] <span class="pl-k">=</span> {
    <span class="pl-k">new</span> <span class="pl-en">ProducerRecord</span>[<span class="pl-en">Array</span>[<span class="pl-k">Byte</span>], <span class="pl-k">String</span>](topic, elem)
  }
}</pre>
  </div> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">kafkaProducer</span> <span class="pl-k">=</span> <span class="pl-en">KafkaProducer</span>(bootstrapServer)

<span class="pl-en">IoTHub</span>().source()
    .map(m <span class="pl-k">=&gt;</span> parse(m.contentAsString).extract[<span class="pl-en">Temperature</span>])
    .filter(_.value <span class="pl-k">&gt;</span> <span class="pl-c1">100</span>)
    .runWith(kafkaProducer.getSink())</pre>
  </div> 
  <h2><a id="user-content-source-options" class="anchor" href="https://github.com/azure/toketi-iothubreact#source-options" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Source options</h2> 
  <h3><a id="user-content-iot-hub-partitions" class="anchor" href="https://github.com/azure/toketi-iothubreact#iot-hub-partitions" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>IoT hub partitions</h3> 
  <p>The library supports also reading from a single <a href="https://azure.microsoft.com/en-us/documentation/articles/event-hubs-overview" target="_blank">IoTHub partition</a>, so a service that consumes IoTHub events can create multiple streams and process them independently.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">partitionNumber</span> <span class="pl-k">=</span> <span class="pl-c1">1</span>

<span class="pl-en">IoTHub</span>.source(partitionNumber)
    .map(m <span class="pl-k">=&gt;</span> parse(m.contentAsString).extract[<span class="pl-en">Temperature</span>])
    .filter(_.value <span class="pl-k">&gt;</span> <span class="pl-c1">100</span>)
    .to(console)
    .run()</pre>
  </div> 
  <h3><a id="user-content-starting-point" class="anchor" href="https://github.com/azure/toketi-iothubreact#starting-point" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Starting point</h3> 
  <p>Unless specified, the stream starts from the beginning of the data present in each partition. It's possible to start the stream from a given date and time too:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">start</span> <span class="pl-k">=</span> java.time.<span class="pl-en">Instant</span>.now()

<span class="pl-en">IoTHub</span>.source(start)
    .map(m <span class="pl-k">=&gt;</span> parse(m.contentAsString).extract[<span class="pl-en">Temperature</span>])
    .filter(_.value <span class="pl-k">&gt;</span> <span class="pl-c1">100</span>)
    .to(console)
    .run()</pre>
  </div> 
  <h3><a id="user-content-stream-processing-restart-saving-the-current-position" class="anchor" href="https://github.com/azure/toketi-iothubreact#stream-processing-restart-saving-the-current-position" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Stream processing restart, saving the current position</h3> 
  <p>The library provides a mechanism to restart the stream from a recent <em>checkpoint</em>, to be resilient to restarts and crashes. <em>Checkpoints</em> are saved automatically, with a configured frequency, on a storage provided. For instance, the stream position can be saved every 15 seconds, in a table in Cassandra, on Azure blobs, or a custom backend.</p> 
  <p>To store checkpoints in Azure blobs the configuration looks like this:</p> 
  <pre><code>iothub-checkpointing {
  enabled = true
  frequency = 15s
  countThreshold = 1000
  timeThreshold = 30s
  storage {
    rwTimeout = 5s
    backendType = "AzureBlob"
    namespace = "iothub-react-checkpoints"
    azureblob {
      lease = 15s
      useEmulator = false
      protocol = "https"
      account = "..."
      key = "..."
    }
  }
}
</code></pre> 
  <p>There are some <a href="https://github.com/azure/toketi-iothubreact/blob/master/src/main/resources/reference.conf" target="_blank">configuration parameters</a> to manage the checkpoint behavior, and soon it will also be possible to plug-in custom storage backends, implementing a simple <a href="https://github.com/azure/toketi-iothubreact/blob/master/src/main/scala/com/microsoft/azure/iot/iothubreact/checkpointing/Backends/CheckpointBackend.scala" target="_blank">interface</a> to read and write the stream position.</p> 
  <p>There is also one API parameter to enabled/disable the mechanism, for example:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">start</span> <span class="pl-k">=</span> java.time.<span class="pl-en">Instant</span>.now()
<span class="pl-k">val</span> <span class="pl-en">withCheckpoints</span> <span class="pl-k">=</span> <span class="pl-c1">false</span>

<span class="pl-en">IoTHub</span>.source(start, withCheckpoints)
    .map(m <span class="pl-k">=&gt;</span> parse(m.contentAsString).extract[<span class="pl-en">Temperature</span>])
    .filter(_.value <span class="pl-k">&gt;</span> <span class="pl-c1">100</span>)
    .to(console)
    .run()</pre>
  </div> 
  <h2><a id="user-content-build-configuration" class="anchor" href="https://github.com/azure/toketi-iothubreact#build-configuration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Build configuration</h2> 
  <p>IoTHubReact is available on Maven Central, you just need to add the following reference in your <code>build.sbt</code> file:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> {
  <span class="pl-k">val</span> <span class="pl-en">iothubReactV</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>0.7.0<span class="pl-pds">"</span></span>

  <span class="pl-en">Seq</span>(
    <span class="pl-s"><span class="pl-pds">"</span>com.microsoft.azure.iot<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>iothub-react<span class="pl-pds">"</span></span> <span class="pl-k">%</span> iothubReactV
  )
}</pre>
  </div> 
  <p>or this dependency in <code>pom.xml</code> file if working with Maven:</p> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">dependency</span>&gt;
    &lt;<span class="pl-ent">groupId</span>&gt;com.microsoft.azure.iot&lt;/<span class="pl-ent">groupId</span>&gt;
    &lt;<span class="pl-ent">artifactId</span>&gt;iothub-react_2.11&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;0.7.0&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre>
  </div> 
  <h3><a id="user-content-iothub-configuration" class="anchor" href="https://github.com/azure/toketi-iothubreact#iothub-configuration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>IoTHub configuration</h3> 
  <p>IoTHubReact uses a configuration file to fetch the parameters required to connect to Azure IoTHub. The exact values to use can be found in the <a href="https://portal.azure.com" target="_blank">Azure Portal</a>:</p> 
  <ul> 
   <li><strong>namespace</strong>: it is the first part of the <em>Event Hub-compatible endpoint</em>, which usually has this format: <code>sb://&lt;namespace&gt;.servicebus.windows.net/</code></li> 
   <li><strong>name</strong>: see <em>Event Hub-compatible name</em></li> 
   <li><strong>keyname</strong>: usually the value is <code>service</code></li> 
   <li><strong>key</strong>: the Primary Key can be found under <em>shared access policies/service</em> policy (it's a base64 encoded string)</li> 
  </ul> 
  <p>The values should be stored in your <code>application.conf</code> resource (or equivalent), which can reference environment settings if you prefer.</p> 
  <pre><code>iothub {
  namespace  = "&lt;IoT hub namespace&gt;"
  name       = "&lt;IoT hub name&gt;"
  keyName    = "&lt;IoT hub key name&gt;"
  key        = "&lt;IoT hub key value&gt;"
  partitions = &lt;IoT hub partitions&gt;
}
</code></pre> 
  <p>Example using environment settings:</p> 
  <pre><code>iothub {
  namespace  = ${?IOTHUB_NAMESPACE}
  name       = ${?IOTHUB_NAME}
  keyName    = ${?IOTHUB_ACCESS_KEY_NAME}
  key        = ${?IOTHUB_ACCESS_KEY_VALUE}
  partitions = ${?IOTHUB_PARTITIONS}
}
</code></pre> 
  <p>There are other settings, to tune performance and connection details:</p> 
  <ul> 
   <li><strong>consumerGroup</strong>: the <a href="https://azure.microsoft.com/en-us/documentation/articles/event-hubs-overview" target="_blank">consumer group</a> used during the connection</li> 
   <li><strong>receiverBatchSize</strong>: the number of messages retrieved on each call to Azure IoT hub. The default (and maximum) value is 999.</li> 
   <li><strong>receiverTimeout</strong>: timeout applied to calls while retrieving messages. The default value is 3 seconds.</li> 
  </ul> 
  <p>The complete configuration reference is available in <a href="https://github.com/azure/toketi-iothubreact/blob/master/src/main/resources/reference.conf" target="_blank">reference.conf</a>.</p> 
  <h2><a id="user-content-samples" class="anchor" href="https://github.com/azure/toketi-iothubreact#samples" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Samples</h2> 
  <p>The project includes 4 demos, showing some of the use cases and how IoThub React API works. All the demos require an instance of Azure IoT hub, with some devices, and messages.</p> 
  <ol> 
   <li><strong>DisplayMessages</strong> [Java]: how to stream Azure IoT hub withing a Java application, filtering temperature values greater than 60C</li> 
   <li><strong>OutputMessagesToConsole</strong> [Scala]: stream all Temeprature events to console</li> 
   <li><strong>MessagesThroughput</strong> [Scala]: stream all IoT hub messages, showing the current speed, and optionally throttling the speed to 200 msg/sec</li> 
   <li><strong>Checkpoints</strong> [Scala]: demonstrate how the stream can be restarted without losing its position. The current position is stored in a Cassandra table (we suggest to run a docker container for the purpose of the demo, e.g. <code>docker run -ip 9042:9042 --rm cassandra</code>)</li> 
  </ol> 
  <p>We provide a <a href="https://github.com/azure/toketi-iothubreact/blob/master/tools/devices-simulator/README.md" target="_blank">device simulator</a> in the tools section, which will help setting up these requirements.</p> 
  <p>When ready, you should either edit the <code>application.conf</code> configuration files (<a href="https://github.com/azure/toketi-iothubreact/blob/master/samples-scala/src/main/resources/application.conf" target="_blank">scala</a> and <a href="https://github.com/azure/toketi-iothubreact/blob/master/samples-java/src/main/resources/application.conf" target="_blank">java</a>) with your credentials, or set the corresponding global variables. Follow the instructions in the previous section on how to set the correct values.</p> 
  <ul> 
   <li><a href="https://github.com/azure/toketi-iothubreact/blob/master/samples-scala/src/main/scala" target="_blank"><code>samples-scala</code></a>: You can use <code>sbt run</code> to run the demos (or the <code>run_samples.*</code> scripts)</li> 
   <li><a href="https://github.com/azure/toketi-iothubreact/blob/master/samples-java/src/main/java" target="_blank"><code>samples-java</code></a>: You can use <code>mvn clean compile exec:java -Dexec.mainClass="DisplayMessages.Demo"</code> to run the demo app (or the <code>run_samples.*</code> scripts)</li> 
  </ul> 
  <h2><a id="user-content-future-work" class="anchor" href="https://github.com/azure/toketi-iothubreact#future-work" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Future work</h2> 
  <ul> 
   <li>improve asynchronicity by using EventHub SDK async APIs</li> 
   <li>add Sink for Cloud2Device scenarios. <code>IoTHub.Sink</code> will allow cloud services to send messages to devices (via Azure IoTHub)</li> 
  </ul> 
  <h1><a id="user-content-contribute-code" class="anchor" href="https://github.com/azure/toketi-iothubreact#contribute-code" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Contribute Code</h1> 
  <p>If you want/plan to contribute, we ask you to sign a <a href="https://cla.microsoft.com/" target="_blank">CLA</a> (Contribution license Agreement). A friendly bot will remind you about it when you submit a pull-request.</p> 
  <p>If you are sending a pull request, we kindly request to check the code style with IntelliJ IDEA, importing the settings from <code>Codestyle.IntelliJ.xml</code>.</p> 
 </article>
</div>