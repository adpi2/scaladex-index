<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <p><code>gcp-scala-datastore</code> is a simple wrapper library for <a href="http://googlecloudplatform.github.io/google-cloud-java/" target="_blank">Google Cloud Datastore</a>.</p> 
  <p>The library provides asynchronous API and supports the following types of fields in model classes:</p> 
  <ul> 
   <li><code>Byte</code></li> 
   <li><code>Int</code></li> 
   <li><code>Long</code></li> 
   <li><code>Float</code></li> 
   <li><code>Double</code></li> 
   <li><code>String</code></li> 
   <li><code>Boolean</code></li> 
   <li><code>java.util.Date</code></li> 
   <li><code>com.google.cloud.datastore.DateTime</code></li> 
   <li><code>com.google.cloud.datastore.LatLng</code></li> 
   <li><code>com.google.cloud.datastore.Blob</code></li> 
  </ul> 
  <h3><a href="https://github.com/applctv/gcp-scala-datastore#usage-of-the-gcp-scala-datastore" aria-hidden="true" class="anchor" id="user-content-usage-of-the-gcp-scala-datastore" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage of the <code>gcp-scala-datastore</code></h3> 
  <p>To be stored in Cloud Datastore a model class must inherit <code>io.applicative.datastore.BaseEntity</code> and must have <code>id</code> field of type <code>Long</code> or <code>String</code>.</p> 
  <pre><code>import io.applicative.datastore.{BaseEntity, DatastoreService}
import io.applicative.datastore.query._

import scala.concurrent.Future

// Sample model class
case class Item(id: Long, name: String, price: Double, size: Int, brand: Option[String]) extends BaseEntity

val item = Item(1, "foo", 20.0, 2, None)

// Save
DatastoreService.add[Item](item)

// Save with autogenerated id
for {
  key &lt;- DatastoreService.newKey[Item]()
  user &lt;- DatastoreService.add[Item](Item(key.id.get, "foo", 20.0, 2, None))
} yield user

// Update
DatastoreService.update[Item](item.copy(brand = Some("bar")))

// Delete
DatastoreService.delete[Item](List(1L))

// Get one by id
DatastoreService.get[Item](1)

// or
select[Item] asSingle

// Select
val items: Future[List[Item]] = select[Item] where "size" |&gt;| 23 and "price" |&lt;=| 200.2 ascOrderBy "size" descOrderBy "price" asList
val items2: Future[List[Item]] = select[Item]
                                  .where("size" |&gt;| 23)
                                  .and("price" |&lt;| 200.2)
                                  .ascOrderBy("size")
                                  .descOrderBy("price")
                                  .asList
val singleItem: Future[Option[Item]] = select[Item] where "name" |==| "foo" asSingle
</code></pre> 
  <h3><a href="https://github.com/applctv/gcp-scala-datastore#indexes" aria-hidden="true" class="anchor" id="user-content-indexes" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Indexes</h3> 
  <p>By default, Cloud Datastore automatically predefines an index for each property of each entity kind(see <a href="https://cloud.google.com/datastore/docs/concepts/indexes" target="_blank">https://cloud.google.com/datastore/docs/concepts/indexes</a> for more details). <br> If you want to exclude any of your properties from the indexes, just add the annotation <code>@excludeFromIndexes</code>.</p> 
  <pre><code>import io.applicative.datastore.BaseEntity
import io.applicative.datastore.util.reflection.excludeFromIndexes

case class Item(id: Long, name: String, price: Double, size: Int, brand: Option[String], @excludeFromIndexes description: String) extends BaseEntity
</code></pre> 
 </article>
</div>