<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <p><a href="https://travis-ci.org/holdenk/spark-testing-base" target="_blank"><img src="https://camo.githubusercontent.com/2726b71bba0ec99450ade6b2b8c5f5604ad3a6b4/68747470733a2f2f7472617669732d63692e6f72672f686f6c64656e6b2f737061726b2d74657374696e672d626173652e7376673f6272616e63683d6d6173746572" alt="buildstatus" data-canonical-src="https://travis-ci.org/holdenk/spark-testing-base.svg?branch=master" style="max-width:100%;"></a> <a href="http://codecov.io/github/holdenk/spark-testing-base?branch=master" target="_blank"><img src="https://camo.githubusercontent.com/b85f2d9a900a408a2912137195e781a880687ce4/687474703a2f2f636f6465636f762e696f2f6769746875622f686f6c64656e6b2f737061726b2d74657374696e672d626173652f636f7665726167652e7376673f6272616e63683d6d6173746572" alt="codecov.io" data-canonical-src="http://codecov.io/github/holdenk/spark-testing-base/coverage.svg?branch=master" style="max-width:100%;"></a></p> 
  <h1><a id="user-content-spark-testing-base" class="anchor" href="https://github.com/holdenk/spark-testing-base#spark-testing-base" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>spark-testing-base</h1> 
  <p>Base classes to use when writing tests with Spark.</p> 
  <h2><a id="user-content-why" class="anchor" href="https://github.com/holdenk/spark-testing-base#why" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Why?</h2> 
  <p>You've written an awesome program in Spark and now its time to write some tests. Only you find yourself writing the code to setup and tear down local mode Spark in between each suite and you say to your self: This is not my beautiful code.</p> 
  <h2><a id="user-content-how" class="anchor" href="https://github.com/holdenk/spark-testing-base#how" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>How?</h2> 
  <p>So you include com.holdenkarau.spark-testing-base [spark_version]_0.7.2 and extend one of the classes and write some simple tests instead. For example to include this in a project using Spark 2.2.0:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-s"><span class="pl-pds">"</span>com.holdenkarau<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>spark-testing-base<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>2.2.0_0.7.2<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>or</p> 
  <pre><code>&lt;dependency&gt;
    &lt;groupId&gt;com.holdenkarau&lt;/groupId&gt;
    &lt;artifactId&gt;spark-testing-base_2.11&lt;/artifactId&gt;
    &lt;version&gt;${spark.version}_0.7.2&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre> 
  <p>How to use it inside your code? have a look at the <a href="https://github.com/holdenk/spark-testing-base/wiki" target="_blank">wiki</a> page.</p> 
  <p>The <a href="https://mvnrepository.com/artifact/com.holdenkarau" target="_blank">Maven repositories page for spark-testing-base</a> lists the releases available.</p> 
  <h2><a id="user-content-minimum-memory-requirements-and-ooms" class="anchor" href="https://github.com/holdenk/spark-testing-base#minimum-memory-requirements-and-ooms" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Minimum Memory Requirements and OOMs</h2> 
  <p>The default SBT testing java options are too small to support running many of the tests due to the need to launch Spark in local mode. To increase the amount of memory in a build.sbt file you can add:</p> 
  <div class="highlight highlight-source-scala">
   <pre>fork in <span class="pl-en">Test</span> <span class="pl-k">:</span><span class="pl-k">=</span> <span class="pl-c1">true</span>
javaOptions <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(<span class="pl-s"><span class="pl-pds">"</span>-Xms512M<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>-Xmx2048M<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>-XX:MaxPermSize=2048M<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>-XX:+CMSClassUnloadingEnabled<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>If using surefire you can add:</p> 
  <pre><code>&lt;argLine&gt;-Xmx2048m -XX:MaxPermSize=2048m&lt;/argLine&gt;
</code></pre> 
  <p>Note: the specific memory values are examples only (and the values used to run spark-testing-base's own tests).</p> 
  <h2><a id="user-content-special-considerations" class="anchor" href="https://github.com/holdenk/spark-testing-base#special-considerations" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Special considerations</h2> 
  <p>Make sure to disable parallel execution.</p> 
  <p>In sbt you can add:</p> 
  <div class="highlight highlight-source-scala">
   <pre>parallelExecution in <span class="pl-en">Test</span> <span class="pl-k">:</span><span class="pl-k">=</span> <span class="pl-c1">false</span></pre>
  </div> 
  <p>In surefire make sure that forkCount is set to 1 and reuseForks is true.</p> 
  <h2><a id="user-content-where-is-this-from" class="anchor" href="https://github.com/holdenk/spark-testing-base#where-is-this-from" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Where is this from?</h2> 
  <p>Much of this code is a stripped down version of the test suite bases that are in Apache Spark but are not accessible. Other parts are also inspired by sscheck (scalacheck generators for Spark).</p> 
  <p>Other parts of this are implemented on top of the test suite bases to make your life even easier.</p> 
  <h2><a id="user-content-what-are-some-other-options" class="anchor" href="https://github.com/holdenk/spark-testing-base#what-are-some-other-options" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>What are some other options?</h2> 
  <p>While we hope you choose our library, <a href="https://github.com/juanrh/sscheck" target="_blank">https://github.com/juanrh/sscheck</a> , <a href="https://github.com/hammerlab/spark-tests" target="_blank">https://github.com/hammerlab/spark-tests</a> , <a href="https://github.com/wdm0006/DummyRDD" target="_blank">https://github.com/wdm0006/DummyRDD</a> , and more <a href="https://www.google.com/search?q=python+spark+testing+libraries" target="_blank">https://www.google.com/search?q=python+spark+testing+libraries</a> exist as options.</p> 
  <h2><a id="user-content-release-notes" class="anchor" href="https://github.com/holdenk/spark-testing-base#release-notes" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a><a href="https://github.com/holdenk/spark-testing-base/blob/master/RELEASE_NOTES.md" target="_blank">Release Notes</a></h2> 
 </article>
</div>