<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-scala-common" class="anchor" href="https://github.com/softwaremill/scala-common#scala-common" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>scala-common</h1> 
  <p><a href="https://travis-ci.org/softwaremill/scala-common" target="_blank"><img src="https://camo.githubusercontent.com/f5614ef2ae83794965beae7c28ac987d415de8b8/68747470733a2f2f7472617669732d63692e6f72672f736f6674776172656d696c6c2f7363616c612d636f6d6d6f6e2e737667" alt="Build Status" data-canonical-src="https://travis-ci.org/softwaremill/scala-common.svg" style="max-width:100%;"></a> <a href="https://gitter.im/softwaremill/scala-common?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Join the chat at https://gitter.im/softwaremill/scala-common" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg" style="max-width:100%;"></a></p> 
  <p>Tiny independent libraries with a single purpose, often a single class.</p> 
  <h2><a id="user-content-tagging" class="anchor" href="https://github.com/softwaremill/scala-common#tagging" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Tagging</h2> 
  <p><a href="https://maven-badges.herokuapp.com/maven-central/com.softwaremill.common/tagging_2.11" target="_blank"><img src="https://camo.githubusercontent.com/750432ac52471eea33b97bf33c04383b7f7645d9/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f636f6d2e736f6674776172656d696c6c2e636f6d6d6f6e2f74616767696e675f322e31312f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/com.softwaremill.common/tagging_2.11/badge.svg" style="max-width:100%;"></a></p> 
  <p>Tag instances with arbitrary types. Useful if you'd like to differentiate between instances on the type level without runtime overhead. Tags are only used at compile-time to provide additional type safety.</p> 
  <p>An instance of type <code>T</code> tagged with type <code>U</code> has type <code>T @@ U</code> (which is sugar for <code>@@[T, U]</code>). You can only use <code>x: T @@ U</code> when an instance of type <code>T @@ V</code> is expected when <code>U</code> is a subtype of <code>V</code> (<code>U &lt;: V</code>).</p> 
  <p>The tag can be any type, but usually it is just an empty marker trait.</p> 
  <p>To add tags to existing instances, you can use the <code>taggedWith[_]</code> method, which returns a tagged instance (<code>T.taggedWith[U]: T @@ U</code>). Tagged instances can be used as regular ones, without any constraints.</p> 
  <p>SBT dependency:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.softwaremill.common<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>tagging<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>2.2.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>Example:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.softwaremill.tagging.</span><span class="pl-v">_</span>

<span class="pl-k">class</span> <span class="pl-en">Berry</span>()

<span class="pl-k">trait</span> <span class="pl-en">Black</span>
<span class="pl-k">trait</span> <span class="pl-en">Blue</span>

<span class="pl-k">val</span> <span class="pl-en">berry</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Berry</span>()
<span class="pl-k">val</span> <span class="pl-en">blackBerry</span><span class="pl-k">:</span> <span class="pl-en">Berry</span> <span class="pl-k">@@</span> <span class="pl-en">Black</span> <span class="pl-k">=</span> berry.taggedWith[<span class="pl-en">Black</span>]
<span class="pl-k">val</span> <span class="pl-en">blueBerry</span><span class="pl-k">:</span> <span class="pl-en">Berry</span> <span class="pl-k">@@</span> <span class="pl-en">Blue</span> <span class="pl-k">=</span> berry.taggedWith[<span class="pl-en">Blue</span>]

<span class="pl-c"><span class="pl-c">//</span> compile error: val anotherBlackBerry: Berry @@ Black = blueBerry</span></pre>
  </div> 
  <p>Original idea by <a href="https://gist.github.com/milessabin/89c9b47a91017973a35f" target="_blank">Miles Sabin</a>. Similar implementations are also available in <a href="https://github.com/milessabin/shapeless" target="_blank">Shapeless</a> and <a href="https://github.com/scalaz/scalaz" target="_blank">Scalaz</a>.</p> 
  <p>####Tagging and typeclasses Let's consider the following example:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.softwaremill.tagging.</span><span class="pl-v">_</span>

<span class="pl-c"><span class="pl-c">//</span> Our typeclass</span>
<span class="pl-k">trait</span> <span class="pl-en">Serializer</span>[<span class="pl-en">T</span>] {
  <span class="pl-k">def</span> <span class="pl-en">doSerialize</span>(<span class="pl-v">t</span>: <span class="pl-en">T</span>)<span class="pl-k">:</span> <span class="pl-k">String</span>
}

<span class="pl-c"><span class="pl-c">//</span> Method that leverages typeclass, to transform some T into a String</span>
<span class="pl-k">def</span> <span class="pl-en">serialize</span>[<span class="pl-en">T</span>](<span class="pl-v">t</span>: <span class="pl-en">T</span>)(<span class="pl-k">implicit</span> <span class="pl-v">ser</span>: <span class="pl-en">Serializer</span>[<span class="pl-en">T</span>])<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> {
  ser.doSerialize(t)
}

<span class="pl-c"><span class="pl-c">//</span> Typeclass instance for type `Long`</span>
<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">longSerializer</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Serializer</span>[<span class="pl-k">Long</span>] {
  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">doSerialize</span>(<span class="pl-v">t</span>: <span class="pl-k">Long</span>)<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Long number: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> t
}

<span class="pl-k">val</span> <span class="pl-en">longNumber</span> <span class="pl-k">=</span> <span class="pl-c1">30L</span>
serialize(longNumber) <span class="pl-c"><span class="pl-c">//</span> Compiles and returns "Long number: 30"</span>

<span class="pl-c"><span class="pl-c">//</span> Our marker trait to be used as a tag</span>
<span class="pl-k">trait</span> <span class="pl-en">UserId</span>

<span class="pl-k">val</span> <span class="pl-en">id</span><span class="pl-k">:</span> <span class="pl-k">Long</span> <span class="pl-k">@@</span> <span class="pl-en">Id</span> <span class="pl-k">=</span> <span class="pl-c1">1024L</span>.taggedWith[<span class="pl-en">UserId</span>]
serialize(id) <span class="pl-c"><span class="pl-c">//</span> Won't compile: could not find implicit value for parameter ser</span></pre>
  </div> 
  <p>Because tagged type <code>T @@ U</code> is considered by the compiler as a different type than <code>T</code>, it will complain about missing implicit typeclass <code>Serializer[_]</code> for <code>T @@ U</code>, even if there is instance of <code>Serializer[T]</code> already in scope.</p> 
  <p>To solve this problem just either mix-in <code>TypeclassTaggingCompat[M[_]]</code>/<code>AnyTypeclassTaggingCompat</code> trait or import contents of the <code>AnyTypeclassTaggingCompat</code> object:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.softwaremill.tagging.AnyTypeclassTaggingCompat.</span><span class="pl-v">_</span>

serialize(id) <span class="pl-c"><span class="pl-c">//</span> Compiles and returns "Long number: 1024"</span></pre>
  </div> 
  <p><code>TypeclassTaggingCompat</code> brings implicit conversion, that can adapt any implicit <code>M[T]</code> to be used as <code>M[T @@ U]</code>.</p> 
  <h2><a id="user-content-id-generator" class="anchor" href="https://github.com/softwaremill/scala-common#id-generator" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Id generator</h2> 
  <p><a href="https://maven-badges.herokuapp.com/maven-central/com.softwaremill.common/id-generator_2.11" target="_blank"><img src="https://camo.githubusercontent.com/a7da53cd457f460b31e05e7bbc10d705299ba156/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f636f6d2e736f6674776172656d696c6c2e636f6d6d6f6e2f69642d67656e657261746f725f322e31312f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/com.softwaremill.common/id-generator_2.11/badge.svg" style="max-width:100%;"></a></p> 
  <p>Generate unique ids. A default generator is provided, based on <a href="https://github.com/twitter/snowflake" target="_blank">Twitter Snowflake</a>, which generates time-based ids.</p> 
  <p>SBT depedency:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.softwaremill.common<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>id-generator<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.1.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <h2><a id="user-content-future-try-extensions" class="anchor" href="https://github.com/softwaremill/scala-common#future-try-extensions" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Future Try extensions</h2> 
  <p><a href="https://maven-badges.herokuapp.com/maven-central/com.softwaremill.common/futuretry_2.11" target="_blank"><img src="https://camo.githubusercontent.com/3eb784f3455bdc00ed50bc89a4b99fe208063c81/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f636f6d2e736f6674776172656d696c6c2e636f6d6d6f6e2f6675747572657472795f322e31312f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/com.softwaremill.common/futuretry_2.11/badge.svg" style="max-width:100%;"></a></p> 
  <p>Provides two utility methods for extending <code>Future</code>:</p> 
  <ul> 
   <li><code>tried: Future[Try[T]]</code> - reifying the Future's result.</li> 
   <li><code>transformTry(f: Try[T] =&gt; Try[S]): Future[S]</code> - corresponds to 2.12's new <code>transform</code> variant, allowing to supply a single function (if, for example, you already have one handy), instead of two. <em>Note: unfortunately, it was not possible to name this method transform, due to how scalac handles implicit resolution.</em></li> 
  </ul> 
  <p>SBT depedency:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.softwaremill.common<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>futuretry<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.0.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>Example:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">myFuture</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">Foo</span>] <span class="pl-k">=</span> ...
<span class="pl-k">val</span> <span class="pl-en">myUsefulTransformer</span><span class="pl-k">:</span> <span class="pl-en">Try</span>[<span class="pl-en">Foo</span>] <span class="pl-k">=&gt;</span> <span class="pl-en">Try</span>[<span class="pl-en">Bar</span>] <span class="pl-k">=</span> ...

<span class="pl-k">def</span> <span class="pl-en">someWeirdApiMethod</span>(<span class="pl-v">future</span>: <span class="pl-en">Future</span>[<span class="pl-en">Try</span>[<span class="pl-en">Foo</span>]])
 
<span class="pl-k">import</span> <span class="pl-v">com.softwaremill.futuretry.</span><span class="pl-v">_</span>

someWeirdApiMethod(myFuture.tried)

<span class="pl-k">val</span> <span class="pl-en">myBetterFuture</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">Bar</span>] <span class="pl-k">=</span> myFuture.transformTry(myUsefulTransformer)</pre>
  </div> 
  <h2><a id="user-content-simple-benchmarking-utilities" class="anchor" href="https://github.com/softwaremill/scala-common#simple-benchmarking-utilities" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Simple benchmarking utilities</h2> 
  <p><a href="https://maven-badges.herokuapp.com/maven-central/com.softwaremill.common/benchmarks_2.11" target="_blank"><img src="https://camo.githubusercontent.com/3eb784f3455bdc00ed50bc89a4b99fe208063c81/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f636f6d2e736f6674776172656d696c6c2e636f6d6d6f6e2f6675747572657472795f322e31312f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/com.softwaremill.common/futuretry_2.11/badge.svg" style="max-width:100%;"></a></p> 
  <p>Provides utilities for benchmarking.</p> 
  <ul> 
   <li> <p><code>Timed.runTests(tests: List[(String, () =&gt; String)], repetitions: Int)</code>: runs specified number of repetitions of given code blocks and collects results (<em>mean</em> and <em>standard deviation</em>). A warmup round of all tests will be executed before measuring any statistics. Tests will be executed in random order.</p> </li> 
   <li> <p><code>Timed.runTests(tests, repetitions, warmup)</code> runs multiple repetitions of shuffled tests provided as a list of <code>PerfTest</code> instances. Each <code>PerfTest</code> should define a name, body (synchronous code block) and, optionally, an additional code block that specifies a "warmup" that will be run before each test execution. The <code>Timed</code> object can also consume an optional <code>warmup</code> argument which specified code block that should be executed before all tests. If omitted, the default global warmup will run all the provided tests once (without collecting metrics).</p> </li> 
  </ul> 
  <p>Example:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">simpleTests</span><span class="pl-k">:</span> <span class="pl-en">List</span>[(<span class="pl-k">String</span>, () <span class="pl-k">=&gt;</span> <span class="pl-k">String</span>)] <span class="pl-k">=</span> <span class="pl-en">List</span>(
  (<span class="pl-s"><span class="pl-pds">"</span>test1<span class="pl-pds">"</span></span>, () <span class="pl-k">=&gt;</span> {
    <span class="pl-c"><span class="pl-c">//</span> do some calculation</span>
    <span class="pl-s"><span class="pl-pds">"</span>Ok<span class="pl-pds">"</span></span>
  }),
  (<span class="pl-s"><span class="pl-pds">"</span>test2<span class="pl-pds">"</span></span>, () <span class="pl-k">=&gt;</span> {
    <span class="pl-c"><span class="pl-c">//</span> do some other calculation</span>
    <span class="pl-s"><span class="pl-pds">"</span>Ok<span class="pl-pds">"</span></span>
  })
)

<span class="pl-en">Timed</span>.runTests(simpleTests, repetitions <span class="pl-k">=</span> <span class="pl-c1">50</span>)</pre>
  </div> 
  <p>or</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">MyTest</span>(<span class="pl-v">name</span>: <span class="pl-k">String</span>, <span class="pl-v">param</span>: <span class="pl-k">Int</span>) <span class="pl-k">extends</span> <span class="pl-e">PerfTest</span> {

  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">warmup</span>()<span class="pl-k">:</span> <span class="pl-k">Unit</span> <span class="pl-k">=</span> {
    <span class="pl-c"><span class="pl-c">//</span> prepare some resources</span>
  }

  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">run</span>()<span class="pl-k">:</span> <span class="pl-en">Try</span>[<span class="pl-k">String</span>] <span class="pl-k">=</span> {
    <span class="pl-c"><span class="pl-c">//</span> do some calculations</span>
    <span class="pl-en">Success</span>(<span class="pl-k">String</span>)
  }
}
  
<span class="pl-k">val</span> <span class="pl-en">tests</span><span class="pl-k">:</span> <span class="pl-en">List</span>[<span class="pl-en">MyTest</span>] <span class="pl-k">=</span> <span class="pl-en">List</span>(
  <span class="pl-en">MyTest</span>(<span class="pl-s"><span class="pl-pds">"</span>test1<span class="pl-pds">"</span></span>, param <span class="pl-k">=</span> <span class="pl-c1">665</span>), <span class="pl-en">MyTest</span>(<span class="pl-s"><span class="pl-pds">"</span>test2<span class="pl-pds">"</span></span>, param <span class="pl-k">=</span> <span class="pl-c1">777</span>)    
)
  
<span class="pl-en">Timed</span>.runTests(tests, repetitions <span class="pl-k">=</span> <span class="pl-c1">50</span>, warmup <span class="pl-k">=</span> (<span class="pl-v">tests</span>: <span class="pl-en">List</span>[<span class="pl-en">MyTest</span>]) <span class="pl-k">=&gt;</span> {
  <span class="pl-c"><span class="pl-c">//</span> global warmup body</span>
})</pre>
  </div> 
 </article>
</div>