<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-fintrospect" class="anchor" href="https://github.com/daviddenton/fintrospect#fintrospect" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a> <a href="http://fintrospect.io" target="_blank">Fintrospect</a>&nbsp;&nbsp;&nbsp; <a href="https://bintray.com/fintrospect/maven/fintrospect-core/_latestVersion" target="_blank"><img src="https://camo.githubusercontent.com/1b71cdfcad7ef14949538f24443182dcb872bb46/68747470733a2f2f6170692e62696e747261792e636f6d2f7061636b616765732f66696e74726f73706563742f6d6176656e2f66696e74726f73706563742d636f72652f696d616765732f646f776e6c6f61642e737667" data-canonical-src="https://api.bintray.com/packages/fintrospect/maven/fintrospect-core/images/download.svg" style="max-width:100%;"></a>&nbsp;&nbsp;&nbsp; <a href="https://travis-ci.org/daviddenton/fintrospect" target="_blank"><img src="https://camo.githubusercontent.com/0368c94037b976db20fc3f035a3448ffd965f77e/68747470733a2f2f7472617669732d63692e6f72672f646176696464656e746f6e2f66696e74726f73706563742e7376673f6272616e63683d6d6173746572" data-canonical-src="https://travis-ci.org/daviddenton/fintrospect.svg?branch=master" style="max-width:100%;"></a>&nbsp;&nbsp;&nbsp; <a href="https://coveralls.io/github/daviddenton/fintrospect?branch=master" target="_blank"><img src="https://camo.githubusercontent.com/40e76380f8f780795c1f4f1d8d84238c4b65394c/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f646176696464656e746f6e2f66696e74726f73706563742f62616467652e7376673f6272616e63683d6d6173746572" data-canonical-src="https://coveralls.io/repos/daviddenton/fintrospect/badge.svg?branch=master" style="max-width:100%;"></a>&nbsp;&nbsp;&nbsp; <a href="https://gitter.im/daviddenton/fintrospect" target="_blank"><img src="https://camo.githubusercontent.com/9160ad225f95f93eda2608c241637d631ce7434c/68747470733a2f2f6261646765732e6769747465722e696d2f646176696464656e746f6e2f66696e74726f73706563742e737667" data-canonical-src="https://badges.gitter.im/daviddenton/fintrospect.svg" style="max-width:100%;"></a>&nbsp;&nbsp;&nbsp; <a href="https://bintray.com/daviddenton/maven/fintrospect/view?source=watch" target="_blank"><img height="45" src="https://camo.githubusercontent.com/b387cc1b97e5edacfb25f46471c1847f8eab90fa/68747470733a2f2f7777772e62696e747261792e636f6d2f646f63732f696d616765732f62696e747261795f62616467655f636f6c6f722e706e67" data-canonical-src="https://www.bintray.com/docs/images/bintray_badge_color.png" style="max-width:100%;"></a>&nbsp;&nbsp;&nbsp; </h1> 
  <p>Fintrospect is a library that adds an intelligent HTTP routing layer to the <a href="http://twitter.github.io/finagle/" target="_blank">Finagle</a> RPC framework from Twitter. Via a shared contract, it provides a simple way to implement both server endpoints and HTTP clients which are:</p> 
  <ul> 
   <li><code>Type-safe</code> : auto-marshalls all request parameters/bodies into the correct types (including primitives + JSON/XML etc...)</li> 
   <li><code>Auto-validating</code> : the presence of required and optional request parameters and bodies are checked before entering service-layer code</li> 
   <li><code>Auto-documenting</code> : runtime generation of endpoint documentation such as <a href="http://swagger.io/" target="_blank">Swagger</a> JSON or web sitemap XML. Generates <a href="http://json-schema.org/" target="_blank">JSON Schema</a> for example object formats to be included in these API docs.</li> 
   <li><code>Uniform</code> : reuse the same contract to define both incoming or outgoing Finagle HTTP services. This also allows extremely low effort fake servers to be created</li> 
  </ul> 
  <p>Additionally, Fintrospect provides a number of mechanisms to leverage these routes:</p> 
  <ul> 
   <li>Easily build type-safe HTTP responses with a set of custom builders for a wide variety of message formats: 
    <ul> 
     <li>JSON: <a href="http://argo.sourceforge.net/" target="_blank">Argo</a>, <a href="http://argonaut.io/" target="_blank">Argonaut</a>, <a href="https://github.com/travisbrown/circe" target="_blank">Circe</a>, <a href="https://github.com/google/gson" target="_blank">GSON</a>, <a href="http://json4s.org/" target="_blank">Json4S</a>, <a href="https://github.com/playframework" target="_blank">Play JSON</a>, <a href="https://github.com/spray/spray-json" target="_blank">Spray JSON</a> 
      <ul> 
       <li>Auto-marshaling of case classes instances to/from JSON (for <code>Argonaut</code>/<code>Circe</code>/<code>Json4S</code>/<code>Play</code>).</li> 
       <li>Implement simple <code>PATCH</code>/<code>PUT</code> endpoints of case class instances (<code>Circe</code> only).</li> 
      </ul></li> 
     <li>Native implementations of XML, Plain Text, HTML, XHTML</li> 
     <li><a href="http://msgpack.org" target="_blank">MsgPack</a> binary format</li> 
    </ul></li> 
   <li>Serve static content from the classpath or a directory</li> 
   <li>Template <code>View</code> support (with Hot-Reloading) for building responses with <a href="http://mustache.github.io/" target="_blank">Mustache</a> or <a href="http://handlebarsjs.com" target="_blank">Handlebars</a></li> 
   <li>Anonymising headers for dynamic-path based endpoints, removing all dynamic path elements. This allows, for example, calls to particular endpoints to be grouped for metric purposes. e.g. <code>/search/author/rowling</code> becomes <code>/search/author/{name}</code></li> 
   <li>Interacts seamlessly with other Finagle based libraries, such as <a href="https://github.com/finagle/finagle-oauth2" target="_blank">Finagle OAuth2</a> </li> 
   <li>Utilities to help you unit-test endpoint services and write HTTP contract tests for remote dependencies </li> 
  </ul> 
  <h2><a id="user-content-get-it" class="anchor" href="https://github.com/daviddenton/fintrospect#get-it" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Get it</h2> 
  <p>Fintrospect is intentionally dependency-lite by design - other than Finagle, the core library itself only has a single non <code>org.scala</code> dependency.</p> 
  <p>To activate some optional features, additional dependencies may be required - please see <a href="http://fintrospect.io/installation" target="_blank">here</a> for details.</p> 
  <p>Add the following lines to <code>build.sbt</code> - the lib is hosted in Maven Central and JCenter:</p> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>JCenter<span class="pl-pds">"</span></span> at <span class="pl-s"><span class="pl-pds">"</span>https://jcenter.bintray.com<span class="pl-pds">"</span></span>
libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>io.fintrospect<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>fintrospect-core<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>13.16.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <h2><a id="user-content-see-the-code" class="anchor" href="https://github.com/daviddenton/fintrospect#see-the-code" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>See the code</h2> 
  <p>See the examples in this repo, or clone the <a href="http://github.com/daviddenton/fintrospect-example-app" target="_blank">full example application repo</a>.</p> 
  <h2><a id="user-content-learn-it" class="anchor" href="https://github.com/daviddenton/fintrospect#learn-it" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Learn it</h2> 
  <p>See the full user guide <a href="http://fintrospect.io/" target="_blank">here</a>, or read on for the tldr; example. :)</p> 
  <h3><a id="user-content-server-side-contracts" class="anchor" href="https://github.com/daviddenton/fintrospect#server-side-contracts" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Server-side contracts</h3> 
  <p>Adding Fintrospect routes to a Finagle HTTP server is simple. For this example, we'll imagine a Library application (see the example above for the full code) which will be rendering Swagger v2 documentation.</p> 
  <h4><a id="user-content-define-the-endpoint" class="anchor" href="https://github.com/daviddenton/fintrospect#define-the-endpoint" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Define the endpoint</h4> 
  <p>This example is quite contrived (and almost all the code is optional) but shows the kind of thing that can be done. Note the use of the example response object, which will be broken down to provide the JSON model for the Swagger documentation. </p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c">// implicit conversion from Status -&gt; ResponseBuilder pulled in here</span>
<span class="pl-k">import</span> <span class="pl-v">io.fintrospect.formats.Argo.ResponseBuilder.implicits.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">io.fintrospect.formats.Argo.JsonFormat.</span><span class="pl-v">array</span>

<span class="pl-k">class</span> <span class="pl-en">BookSearch</span>(<span class="pl-v">books</span>: <span class="pl-en">Books</span>) {
  <span class="pl-k">private</span> <span class="pl-k">val</span> <span class="pl-en">maxPages</span> <span class="pl-k">=</span> <span class="pl-en">Query</span>.optional.int(<span class="pl-s"><span class="pl-pds">"</span>maxPages<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>max number of pages in book<span class="pl-pds">"</span></span>)
  <span class="pl-k">private</span> <span class="pl-k">val</span> <span class="pl-en">minPages</span> <span class="pl-k">=</span> <span class="pl-en">FormField</span>.optional.int(<span class="pl-s"><span class="pl-pds">"</span>minPages<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>min number of pages in book<span class="pl-pds">"</span></span>)
  <span class="pl-k">private</span> <span class="pl-k">val</span> <span class="pl-en">titleTerm</span> <span class="pl-k">=</span> <span class="pl-en">FormField</span>.required.string(<span class="pl-s"><span class="pl-pds">"</span>term<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>the part of the title to look for<span class="pl-pds">"</span></span>)
  <span class="pl-k">private</span> <span class="pl-k">val</span> <span class="pl-en">form</span> <span class="pl-k">=</span> <span class="pl-en">Body</span>.form(minPages, titleTerm)

  <span class="pl-k">private</span> <span class="pl-k">def</span> <span class="pl-en">search</span>() <span class="pl-k">=</span> <span class="pl-en">Service</span>.mk[<span class="pl-en">Request</span>, <span class="pl-en">Response</span>] { 
    request <span class="pl-k">=&gt;</span> {
      <span class="pl-k">val</span> <span class="pl-en">requestForm</span> <span class="pl-k">=</span> form.from(request)
      <span class="pl-en">Status</span>.<span class="pl-en">Ok</span>(array(
        books.search(
            minPages.from(requestForm).getOrElse(<span class="pl-en">MIN_VALUE</span>), 
            maxPages.from(request).getOrElse(<span class="pl-en">MAX_VALUE</span>),
            titleTerm.from(requestForm)
        ).map(_.toJson)))
    }
  }

  <span class="pl-k">val</span> <span class="pl-en">route</span> <span class="pl-k">=</span> <span class="pl-en">RouteSpec</span>(<span class="pl-s"><span class="pl-pds">"</span>search for books<span class="pl-pds">"</span></span>)
    .taking(maxPages)
    .body(form)
    .returning(<span class="pl-en">Status</span>.<span class="pl-en">Ok</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>we found your book<span class="pl-pds">"</span></span>, array(<span class="pl-en">Book</span>(<span class="pl-s"><span class="pl-pds">"</span>a book<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>authorName<span class="pl-pds">"</span></span>, <span class="pl-c1">99</span>).toJson))
    .returning(<span class="pl-en">Status</span>.<span class="pl-en">BadRequest</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>invalid request<span class="pl-pds">"</span></span>)
    .producing(<span class="pl-en">ContentTypes</span>.<span class="pl-en">APPLICATION_JSON</span>)
    .at(<span class="pl-en">Method</span>.<span class="pl-en">Post</span>) <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>search<span class="pl-pds">"</span></span> bindTo search
}</pre>
  </div> 
  <h4><a id="user-content-define-a-module-to-live-at-httphost8080library" class="anchor" href="https://github.com/daviddenton/fintrospect#define-a-module-to-live-at-httphost8080library" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Define a module to live at <code>http://{host}:8080/library</code></h4> 
  <p>This module will have a single endpoint <code>search</code>:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">apiInfo</span> <span class="pl-k">=</span> <span class="pl-en">ApiInfo</span>(<span class="pl-s"><span class="pl-pds">"</span>Library Example<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>1.0<span class="pl-pds">"</span></span>, <span class="pl-en">Option</span>(<span class="pl-s"><span class="pl-pds">"</span>Simple description<span class="pl-pds">"</span></span>))
<span class="pl-k">val</span> <span class="pl-en">renderer</span> <span class="pl-k">=</span> <span class="pl-en">Swagger2dot0Json</span>(apiInfo) 
<span class="pl-k">val</span> <span class="pl-en">libraryModule</span> <span class="pl-k">=</span> <span class="pl-en">RouteModule</span>(<span class="pl-en">Root</span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>library<span class="pl-pds">"</span></span>, renderer)
    .withRoute(<span class="pl-k">new</span> <span class="pl-en">BookSearch</span>(<span class="pl-k">new</span> <span class="pl-en">BookRepo</span>()).route)
<span class="pl-k">val</span> <span class="pl-en">service</span> <span class="pl-k">=</span> <span class="pl-en">Module</span>.toService(libraryModule)
<span class="pl-en">Http</span>.serve(<span class="pl-s"><span class="pl-pds">"</span>:8080<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-en">HttpFilter</span>(<span class="pl-en">Cors</span>.<span class="pl-en">UnsafePermissivePolicy</span>).andThen(service)) </pre>
  </div> 
  <h4><a id="user-content-view-the-generated-documentation" class="anchor" href="https://github.com/daviddenton/fintrospect#view-the-generated-documentation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>View the generated documentation</h4> 
  <p>The auto-generated documentation lives at the root of the module, so point the Swagger UI at <code>http://{host}:8080/library</code> to see it.</p> 
  <h3><a id="user-content-client-side-contracts" class="anchor" href="https://github.com/daviddenton/fintrospect#client-side-contracts" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Client-side contracts</h3> 
  <p>Declare the fields to be sent to the client service and then bind them to a remote service. This produces a simple function, which can then be called with the bindings for each parameter.</p> 
  <p>Since we can re-use the routes between client and server, we can easily create fake implementations of remote systems without having to redefine the contract. This means that marshalling of objects and values into/out of the HTTP messages can be reused.</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-k">val</span> <span class="pl-en">theDate</span> <span class="pl-k">=</span> <span class="pl-en">Path</span>.localDate(<span class="pl-s"><span class="pl-pds">"</span>date<span class="pl-pds">"</span></span>)
  <span class="pl-k">val</span> <span class="pl-en">gender</span> <span class="pl-k">=</span> <span class="pl-en">FormField</span>.optional.string(<span class="pl-s"><span class="pl-pds">"</span>gender<span class="pl-pds">"</span></span>)
  <span class="pl-k">val</span> <span class="pl-en">body</span> <span class="pl-k">=</span> <span class="pl-en">Body</span>.form(gender)

  <span class="pl-k">val</span> <span class="pl-en">sharedRouteSpec</span> <span class="pl-k">=</span> <span class="pl-en">RouteSpec</span>()
    .body(body)
    .at(<span class="pl-en">Get</span>) <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>firstSection<span class="pl-pds">"</span></span> <span class="pl-k">/</span> theDate

  <span class="pl-k">val</span> <span class="pl-en">fakeServerRoute</span> <span class="pl-k">=</span> sharedRouteSpec bindTo (dateFromPath <span class="pl-k">=&gt;</span> <span class="pl-en">Service</span>.mk[<span class="pl-en">Request</span>, <span class="pl-en">Response</span>] {
    <span class="pl-v">request</span>: <span class="pl-en">Request</span> <span class="pl-k">=&gt;</span> {
      <span class="pl-c">// insert stub server implementation in here</span>
      println(<span class="pl-s"><span class="pl-pds">"</span>Form sent was <span class="pl-pds">"</span></span> <span class="pl-k">+</span> (body <span class="pl-k">&lt;</span><span class="pl-k">--</span> request))
      <span class="pl-en">Ok</span>(dateFromPath.toString)
    }
  })

  <span class="pl-en">Await</span>.result(<span class="pl-k">new</span> <span class="pl-en">TestHttpServer</span>(<span class="pl-c1">10000</span>, fakeServerRoute).start())

  <span class="pl-k">val</span> <span class="pl-en">client</span> <span class="pl-k">=</span> sharedRouteSpec bindToClient <span class="pl-en">Http</span>.newService(<span class="pl-s"><span class="pl-pds">"</span>localhost:10000<span class="pl-pds">"</span></span>)

  <span class="pl-k">val</span> <span class="pl-en">theCall</span> <span class="pl-k">=</span> client(
    body <span class="pl-k">--</span><span class="pl-k">&gt;</span> <span class="pl-en">Form</span>(gender <span class="pl-k">--</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>male<span class="pl-pds">"</span></span>), 
    theDate <span class="pl-k">--</span><span class="pl-k">&gt;</span> <span class="pl-en">LocalDate</span>.of(<span class="pl-c1">2015</span>, <span class="pl-c1">1</span>, <span class="pl-c1">1</span>)
  )

  println(<span class="pl-en">Await</span>.result(theCall))</pre>
  </div> 
  <h2><a id="user-content-upgrading" class="anchor" href="https://github.com/daviddenton/fintrospect#upgrading" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Upgrading?</h2> 
  <p>See the <a href="https://github.com/daviddenton/fintrospect/blob/master/CHANGELOG.md" target="_blank">changelog</a>.</p> 
  <h2><a id="user-content-contributing" class="anchor" href="https://github.com/daviddenton/fintrospect#contributing" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Contributing</h2> 
  <p>There are many ways in which you can contribute to the development of the library:</p> 
  <ul> 
   <li>Give us a 
    <g-emoji alias="star" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/2b50.png" ios-version="6.0">
     ⭐️
    </g-emoji> on Github - you know you want to ;)</li> 
   <li>Questions can be directed towards the Gitter channel, or on Twitter <a href="https://twitter.com/fintrospectdev" target="_blank">@fintrospectdev</a></li> 
   <li>For issues, please describe giving as much detail as you can - including version and steps to recreate</li> 
  </ul> 
  <p>See the <a href="https://github.com/daviddenton/fintrospect/blob/master/CONTRIBUTING.md" target="_blank">contributor guide</a> for details.</p> 
 </article>
</div>