<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a href="https://github.com/vicpara/exploratory-data-analysis#exploratory-data-analysis---eda" aria-hidden="true" class="anchor" id="user-content-exploratory-data-analysis---eda" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Exploratory-Data-Analysis - EDA</h1> 
  <p><a href="https://travis-ci.org/vicpara/exploratory-data-analysis" target="_blank"><img src="https://camo.githubusercontent.com/1e5fb7e93a48acf163dd30309111e1036b0b18d0/68747470733a2f2f7472617669732d63692e6f72672f766963706172612f6578706c6f7261746f72792d646174612d616e616c797369732e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/vicpara/exploratory-data-analysis.svg?branch=master" style="max-width:100%;"></a> <a href="https://tldrlegal.com/license/mit-license" target="_blank"><img src="https://camo.githubusercontent.com/67e83c379c9ed997fa2daeb65d0e996d2bf1b93b/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e63652d4d49542d626c75652e737667" alt="Licence" data-canonical-src="https://img.shields.io/badge/licence-MIT-blue.svg" style="max-width:100%;"></a></p> 
  <p>Spark library for doing exploratory data analysis on your data set in a scalable way.</p> 
  <h2><a href="https://github.com/vicpara/exploratory-data-analysis#getting-exploratory-data-analysis" aria-hidden="true" class="anchor" id="user-content-getting-exploratory-data-analysis" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Getting Exploratory Data Analysis</h2> 
  <p>If you're using SBT, add the following line to your build file:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.github.vicpara<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>exploratory-data-analysis_2.10<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.0.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>For Maven and other build tools, you can visit <a href="http://search.maven.org/#search%7Cga%7C1%7Cexploratory%20data%20analysis" target="_blank">search.maven.org</a>. To get sample configurations, click on the version of the module you are interested in.</p> 
  <hr> 
  <h3><a href="https://github.com/vicpara/exploratory-data-analysis#the-problem" aria-hidden="true" class="anchor" id="user-content-the-problem" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>The problem</h3> 
  <p>Before running any algorithm on a data set it is essential to understand how the data looks like and what are the expected edge cases. Maybe you have some expectations about the distribution of the numbers. Are all the buckets that you expect to find in the dataset populated with numbers? Very often a data set is provided which contains two types of columns::</p> 
  <ul> 
   <li>dimensions</li> 
   <li>measurements</li> 
  </ul> 
  <p>Dimensions are columns that help describe the data points such as: Date, UniqueID, Gender, Postcode, Country, Categories. Measurements are metrics that quantitatively characterize the described datum.</p> 
  <p>Depending on your analytical task, some sort of ordering or bucketing will be used in your model. Some examples::</p> 
  <ul> 
   <li>process daily transactions of a customer</li> 
   <li>aggregate daily transactions of a merchant</li> 
   <li>count the number of unique customers per merchant or postcode, sector or district</li> 
   <li>number of transactions per day.</li> 
  </ul> 
  <p>Let's take as example the metric : number of daily transactions per merchant</p> 
  <p>This is made out of two concepts. A key which is (dayId, merchantId) and a value count(transactions). Depending on the richness of your dataset is there may be keys with high number of transactiona and keys with very small number. This becomes a problem especially when you are dealing with a sample dataset which promises to capture the entire diversity of the original, complete dataset.</p> 
  <hr> 
  <p>###the library</p> 
  <p>For a collection / RDD[T] given a ::</p> 
  <ul> 
   <li>function that maps an element of T to a <em>key</em></li> 
   <li>function that maps an element of T to a <em>value</em> that corresponds to the <em>key</em></li> 
   <li>function to aggregate in a monoid-al fashion two <em>values</em></li> 
  </ul> 
  <p>It can compute two types of statistics::</p> 
  <ul> 
   <li>the percentile values of the ordered sequence key-statistic</li> 
   <li>the unique count of specific key</li> 
  </ul> 
  <p>The results are saved into 2 possible formats:</p> 
  <ul> 
   <li>object file</li> 
   <li>pretty text format ready for inspection</li> 
   <li>html files</li> 
  </ul> 
  <p>We use the <em>pretty</em> format when examining the results in bash on remote servers or HDFS. <em>Pretty</em> looks like this:</p> 
  <pre><code>BusinessId x Day - Distinct(CustomerId) 	DrillDownValue : Tuesday
	[PercentileStats]: NumBinsInHistogram: 1188
          (9191,2015-10-27) |    0| #######                                                | 44
          (6305,2015-11-10) |    1| ######################                                 | 51
          (6774,2015-11-03) |    2| ###########################                            | 53
          (4278,2015-11-03) |    3| #################################                      | 54
          (9191,2015-11-03) |    4| #################################                      | 54
          (4687,2015-11-17) |    5| ###################################                    | 55
          (380,2015-11-03)  |    6| ######################################                 | 56
          (8114,2015-11-03) |    7| ############################################           | 57
          (5629,2015-10-27) |    8| ############################################           | 57
          (404,2015-11-03)  |    9| ###############################################        | 58
          (7586,2015-11-10) |   10| ###############################################        | 58
          (3765,2015-11-10) |   11| ###############################################        | 58
          (8478,2015-11-17) |   12| ###############################################        | 58
          (3701,2015-10-27) |   13| ###################################################### | 60
          
</code></pre> 
  <p>Using <code>scala-bokeh</code>, the library can also output the results of the EDA in html files for easier examination. <a href="https://github.com/vicpara/exploratory-data-analysis/blob/master/Histogram.png" target="_blank"><img src="https://github.com/vicpara/exploratory-data-analysis/raw/master/Histogram.png" alt="Histogram chart example" style="max-width:100%;"></a></p> 
  <h4><a href="https://github.com/vicpara/exploratory-data-analysis#example-distinct-statistic" aria-hidden="true" class="anchor" id="user-content-example-distinct-statistic" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Example distinct statistic</h4> 
  <p>You can find a working example for the capabilities of EDA in <em>test</em> folder.</p> 
  <p>For a datum of type transaction</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Transaction</span>(<span class="pl-v">timestamp</span>: <span class="pl-k">Long</span>, <span class="pl-v">customerId</span>: <span class="pl-k">Long</span>, <span class="pl-v">businessId</span>: <span class="pl-k">Long</span>, <span class="pl-v">postcode</span>: <span class="pl-en">Option</span>[<span class="pl-k">String</span>]) {
  <span class="pl-k">def</span> <span class="pl-en">toSv</span>(<span class="pl-v">sep</span>: <span class="pl-k">String</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\t</span><span class="pl-pds">"</span></span>)<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> <span class="pl-en">List</span>(timestamp, customerId, businessId).mkString(sep)
}
</pre>
  </div> 
  <p>we define a distinct statistic over number of unique businesses (distinct businessId) inside a <em>postcode</em> for a given <em>day</em> for each unique values of the key <em>toDrillDownKeyOption</em>. The value of this field would normally be a categorical segmentation axis which is expected to have relatively small cardinality. Examples of fields that could be used for toDrillDownKeyOption would be country / city / type of product / region.</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-k">def</span> <span class="pl-en">uniqueBusinessIdPerPostcodeNDayStats</span>(<span class="pl-v">tx</span>: <span class="pl-en">RDD</span>[<span class="pl-en">Transaction</span>], <span class="pl-v">nPercentiles</span>: <span class="pl-k">Int</span> <span class="pl-k">=</span> <span class="pl-c1">1001</span>) <span class="pl-k">=</span>
    <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>Postcode x Day - Distinct(BusinessId)<span class="pl-pds">"</span></span>)
    .map(n <span class="pl-k">=&gt;</span> <span class="pl-en">PrettyPercentileStats</span>(
      name <span class="pl-k">=</span> n,
      levels <span class="pl-k">=</span> <span class="pl-en">SequenceStats</span>.distinct[<span class="pl-en">Transaction</span>, (<span class="pl-k">String</span>, <span class="pl-k">String</span>), <span class="pl-k">Long</span>](
        data <span class="pl-k">=</span> tx,
        toDrillDownKeyOption <span class="pl-k">=</span> <span class="pl-c1">None</span>,
        toDimKey <span class="pl-k">=</span> t <span class="pl-k">=&gt;</span> (t.postcode.getOrElse(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>), dayAsString(t.timestamp)),
        toVal <span class="pl-k">=</span> tx <span class="pl-k">=&gt;</span> tx.businessId,
        numPercentiles <span class="pl-k">=</span> nPercentiles
      )
    ))
    </pre>
  </div> 
  <h4><a href="https://github.com/vicpara/exploratory-data-analysis#example-percentile-statistic" aria-hidden="true" class="anchor" id="user-content-example-percentile-statistic" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Example Percentile statistic</h4> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-k">def</span> <span class="pl-en">globalUniqueCustomersCounterStats</span>(<span class="pl-v">transactions</span>: <span class="pl-en">RDD</span>[<span class="pl-en">Transaction</span>], <span class="pl-v">nPercentiles</span>: <span class="pl-k">Int</span> <span class="pl-k">=</span> <span class="pl-c1">1001</span>) <span class="pl-k">=</span>
    <span class="pl-en">Some</span>(<span class="pl-s"><span class="pl-pds">"</span>Global distinct Customers<span class="pl-pds">"</span></span>)
    .map(n <span class="pl-k">=&gt;</span> <span class="pl-en">PrettyPercentileStats</span>(
      name <span class="pl-k">=</span> n,
      levels <span class="pl-k">=</span> <span class="pl-en">SequenceStats</span>.distinct[<span class="pl-en">Transaction</span>, <span class="pl-k">Long</span>, <span class="pl-k">Long</span>](data <span class="pl-k">=</span> <span class="pl-en">AppLogger</span>.logStage(transactions, n),
        toDrillDownKeyOption <span class="pl-k">=</span> <span class="pl-c1">None</span>,
        toDimKey <span class="pl-k">=</span> t <span class="pl-k">=&gt;</span> <span class="pl-c1">1l</span>,
        toVal <span class="pl-k">=</span> tx <span class="pl-k">=&gt;</span> tx.customerId,
        numPercentiles <span class="pl-k">=</span> nPercentiles
      )
    ))
    </pre>
  </div> 
 </article>
</div>