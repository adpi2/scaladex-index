<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a href="https://github.com/raquo/scala-dom-testutils#scala-dom-test-utils" aria-hidden="true" class="anchor" id="user-content-scala-dom-test-utils" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scala DOM Test Utils</h1> 
  <p><em>Scala DOM Test Utils</em> provides a convenient, type-safe way to assert that a real Javascript DOM node matches a certain description using an extensible DSL.</p> 
  <pre><code>"com.raquo" %%% "domtestutils" % "0.2"
</code></pre> 
  <p>The types of DOM tags, attributes, properties and styles are provided by <a href="https://github.com/raquo/scala-dom-types" target="_blank">Scala DOM Types</a>, but you don't need to be using that library in your application code, <em>Scala DOM TestUtils</em> can test any DOM node no matter how it was created.</p> 
  <p>You can use <em>Scala DOM Test Utils</em> either directly to make assertions, or you if you're writing a DOM construction / manipulation library, to power its own test utils package.</p> 
  <h2><a href="https://github.com/raquo/scala-dom-testutils#example-test" aria-hidden="true" class="anchor" id="user-content-example-test" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Example Test</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c"><span class="pl-c">//</span> Create a JS DOM node that you want to test (example shows optional Scala DOM Builder syntax)</span>
<span class="pl-k">val</span> <span class="pl-en">jsDomNode</span><span class="pl-k">:</span> org.scalajs.dom.<span class="pl-en">Node</span> <span class="pl-k">=</span> div(
  rel <span class="pl-k">:</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>yolo<span class="pl-pds">"</span></span>
  span(<span class="pl-s"><span class="pl-pds">"</span>Hello, <span class="pl-pds">"</span></span>),
  p(<span class="pl-s"><span class="pl-pds">"</span>bizzare <span class="pl-pds">"</span></span>, a(href <span class="pl-k">:</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>http://y2017.com<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>2017<span class="pl-pds">"</span></span>), span(<span class="pl-s"><span class="pl-pds">"</span> world<span class="pl-pds">"</span></span>)),
  hr
).ref 
 
<span class="pl-c"><span class="pl-c">//</span> Mount the DOM node for testing</span>
mount(jsDomNode, <span class="pl-s"><span class="pl-pds">"</span>optional clue to show on failure<span class="pl-pds">"</span></span>)
 
<span class="pl-c"><span class="pl-c">//</span> Assert that the mounted node matches the provided description (this test will pass given the input above)</span>
expectNode(
  div like(
    rel is <span class="pl-s"><span class="pl-pds">"</span>yolo<span class="pl-pds">"</span></span>, <span class="pl-c"><span class="pl-c">//</span> Ensure that rel attribute is "yolo". Note: assertions for properties and styles work similarly </span>
    span like <span class="pl-s"><span class="pl-pds">"</span>Hello, <span class="pl-pds">"</span></span>, <span class="pl-c"><span class="pl-c">//</span> Ensure the this element contains just one text node: "Hello, "</span>
    p like (
      <span class="pl-s"><span class="pl-pds">"</span>bizzare <span class="pl-pds">"</span></span>,
      a like (
        href is <span class="pl-s"><span class="pl-pds">"</span>http://y2017.com<span class="pl-pds">"</span></span>,
        title isEmpty, <span class="pl-c"><span class="pl-c">//</span> Ensure that title attribute is not set</span>
        <span class="pl-s"><span class="pl-pds">"</span>2017<span class="pl-pds">"</span></span>
      ),
      span like <span class="pl-s"><span class="pl-pds">"</span> world<span class="pl-pds">"</span></span>
    ),
    hr <span class="pl-c"><span class="pl-c">//</span> Just check existence of element and tag name. Equivalent to `hr like ()` </span>
  )
)</pre>
  </div> 
  <p>The above example defines <code>val jsDomNode</code> using <a href="https://github.com/raquo/scala-dom-builder" target="_blank">Scala DOM Builder</a> which is a separate project, completely optional. It is a minimal, unopinionated library for building and manipulating Javascript DOM trees. You are free to create the DOM nodes that you want to test in any other way.</p> 
  <p>See more usage examples in <a href="https://github.com/raquo/scala-dom-builder/tree/master/js/src/test/scala/com/raquo/dombuilder" target="_blank">Scala DOM Builder tests</a> and <a href="https://github.com/raquo/laminar/tree/master/src/test/scala/com/raquo/laminar" target="_blank">Laminar tests</a></p> 
  <h2><a href="https://github.com/raquo/scala-dom-testutils#usage" aria-hidden="true" class="anchor" id="user-content-usage" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <p>Canonical usage is to <code>mount</code> one DOM node / tree (e.g. the output of your component) and then test it using the <code>expectNode</code> method.</p> 
  <p>Alternative is to call <code>expectNode(actualNode, expectedNode)</code>, for example if you only want to test a subtree of what you mounted.</p> 
  <p>If the mechanics of <code>MountOps</code> do not work for you, you can bypass <code>MountOps</code> altogether and just call <code>ExpectedNode.checkNode(actualNode)</code> directly to get a list of errors.</p> 
  <p><strong>With ScalaTest</strong>: Your test suite should extend the <code>MountSpec[Any]</code> trait. Use <code>mount</code> and <code>expectNode</code> methods in your test code. You can call <code>unmount</code> and then <code>mount</code> again within one test if you want to test multiple unrelated nodes (e.g. different variations in a loop).</p> 
  <p><strong>Without ScalaTest</strong>: Write a tiny adapter like <code>MountSpec</code> for your test framework, which would:</p> 
  <ul> 
   <li>Extend <code>MountOps</code> and provide <code>doAssert</code> / <code>doFail</code> implementations specific to your test framework</li> 
   <li>Call <code>resetDOM</code> in the beginning of each test, and <code>clearDOM</code> at the end of each test.</li> 
  </ul> 
  <p>Pull requests for such adapters for popular test frameworks are welcome.</p> 
  <p><strong>To power your library's test utils</strong>: If you are building or using a DOM construction / manipulation library like e.g. React, you might want to override the <code>mount</code> / <code>unmount</code> methods to give your library the chance to do proper setup and cleanup. Instead of calling super methods for these, you can make use of <code>assertEmptyContainer</code> / <code>assertRootNodeMounted</code> / <code>mountedElementClue</code> the same way they are used in the default implementations in <code>MountOps</code>.</p> 
  <p>For an example of the above, see <a href="https://github.com/raquo/laminar/blob/master/src/test/scala/com/raquo/laminar/utils/LaminarSpec.scala" target="_blank">LaminarSpec</a>, which defines custom mounting / unmounting logic for <a href="https://github.com/raquo/laminar" target="_blank">Laminar</a>'s reactive nodes.</p> 
  <p>If all this is more hassle than it's worth for your use case, just forgo <code>MountOps</code> and drop down to calling <code>ExpectedNode.checkNode(actualNode)</code> to get a list of errors, and build your own test util around it.</p> 
  <h2><a href="https://github.com/raquo/scala-dom-testutils#todo" aria-hidden="true" class="anchor" id="user-content-todo" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>TODO</h2> 
  <ul> 
   <li>Docs: Add examples without Scala DOM Builder, in this library's own test suite</li> 
   <li>Docs: Explain in more detail how to make assertions</li> 
   <li>Docs: Explain the basics of Scala DOM Types node / attr / etc. types</li> 
   <li>Docs: Explain how to create your own custom rules</li> 
   <li>Docs: Document available assertions</li> 
   <li>Feature: Add <code>anyChildren</code> and/or <code>maybeMoreChildren</code> to allow shallow / focused matching</li> 
  </ul> 
  <h2><a href="https://github.com/raquo/scala-dom-testutils#my-related-projects" aria-hidden="true" class="anchor" id="user-content-my-related-projects" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>My Related Projects</h2> 
  <ul> 
   <li><a href="https://github.com/raquo/scala-dom-types" target="_blank">Scala DOM Types</a> – Type definitions that we use for all the HTML tags, attributes, properties, and styles</li> 
   <li><a href="https://github.com/raquo/scala-dom-builder" target="_blank">Scala DOM Builder</a> – Low-level library for building and manipulating DOM trees</li> 
   <li><a href="https://github.com/raquo/laminar" target="_blank">Laminar</a> – Reactive UI library based on <em>Scala DOM Builder</em></li> 
   <li><a href="https://github.com/raquo/Snabbdom.scala" target="_blank">Snabbdom.scala</a> – Scala.js interface to a popular JS virtual DOM library</li> 
   <li><a href="https://github.com/raquo/XStream.scala" target="_blank">XStream.scala</a> – Scala.js interface to a simple JS reactive streams library</li> 
   <li><a href="https://github.com/raquo/Cycle.scala" target="_blank">Cycle.scala</a> – Scala.js interface to a popular JS functional reactive library</li> 
  </ul> 
  <h2><a href="https://github.com/raquo/scala-dom-testutils#author" aria-hidden="true" class="anchor" id="user-content-author" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Author</h2> 
  <p>Nikita Gazarov – <a href="http://raquo.com" target="_blank">raquo.com</a></p> 
  <p>License – MIT</p> 
 </article>
</div>