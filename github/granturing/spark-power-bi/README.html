<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <p><a href="https://camo.githubusercontent.com/fbe06d907d14c88ba659a96a145907289ae6d5c6/68747470733a2f2f7472617669732d63692e6f72672f6772616e747572696e672f737061726b2d706f7765722d62692e737667" target="_blank"><img src="https://camo.githubusercontent.com/fbe06d907d14c88ba659a96a145907289ae6d5c6/68747470733a2f2f7472617669732d63692e6f72672f6772616e747572696e672f737061726b2d706f7765722d62692e737667" alt="build" data-canonical-src="https://travis-ci.org/granturing/spark-power-bi.svg" style="max-width:100%;"></a></p> 
  <h1><a href="https://github.com/granturing/spark-power-bi#spark-power-bi" aria-hidden="true" class="anchor" id="user-content-spark-power-bi" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>spark-power-bi</h1> 
  <p>A library for pushing data from Spark, SparkSQL, or Spark Streaming to <a href="https://powerbi.com/" target="_blank">Power BI</a>.</p> 
  <h2><a href="https://github.com/granturing/spark-power-bi#requirements" aria-hidden="true" class="anchor" id="user-content-requirements" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Requirements</h2> 
  <p>This library is supported on Apache Spark 1.4 and 1.5. The versions of the library match to the Spark version. So v1.4.0_0.0.7 is for Apache Spark 1.4 and v1.5.0_0.0.7 is for Apache Spark 1.5.</p> 
  <h2><a href="https://github.com/granturing/spark-power-bi#power-bi-api" aria-hidden="true" class="anchor" id="user-content-power-bi-api" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Power BI API</h2> 
  <p>Additional details regarding the Power BI API are available in the <a href="https://msdn.microsoft.com/en-us/library/dn877544.aspx" target="_blank">developer center</a>. Authentication is handled via OAuth2 with your Azure AD credentials specified via Spark properties. More details on registering an app and authenticating are available in the Power BI dev center. When pushing rows to Power BI the library will create the target dataset with table if necessary. The current Power BI service is limited to 10,000 rows per call so the library handles batching internally. The service also limits to no more than 5 concurrent calls at a time when adding rows. This is handled by the library using coalesce and can be tuned by with the <code>spark.powerbi.max_partitions</code> property.</p> 
  <h2><a href="https://github.com/granturing/spark-power-bi#scaladoc" aria-hidden="true" class="anchor" id="user-content-scaladoc" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scaladoc</h2> 
  <p>Scaladoc is available <a href="http://granturing.github.io/spark-power-bi/docs" target="_blank">here</a></p> 
  <h2><a href="https://github.com/granturing/spark-power-bi#configuration" aria-hidden="true" class="anchor" id="user-content-configuration" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Configuration</h2> 
  <p>A few of the key properties are related to OAuth2. These depend on your application's registration in Azure AD.</p> 
  <pre><code>spark.powerbi.username
spark.powerbi.password
spark.powerbi.clientid
</code></pre> 
  <p>Rather than using your personal AD credentials for publishing data, you may want to create a service account instead. Then you can logon to Power BI using that account and share the data sets and dashboards with other users in your organization. Unfortunately, there's currently no other way of authenticating to Power BI. Hopefully in the future there'll be an organization-level API token that can publish shared data sets, without having to use an actual AD account. You can also use a Power BI group when publishing data.</p> 
  <h3><a href="https://github.com/granturing/spark-power-bi#setting-up-azure-active-directory" aria-hidden="true" class="anchor" id="user-content-setting-up-azure-active-directory" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Setting Up Azure Active Directory</h3> 
  <p>You'll need to create an application within your Azure AD in order to have a client id to publish data sets.</p> 
  <ol> 
   <li>Using the Azure management portal, open up your directory and add a new Application (under the Apps tab)</li> 
   <li>Select "Add an application my organization is developing" <a href="https://camo.githubusercontent.com/8a49af19cad820f79457b822309f4676f9051e34/687474703a2f2f6772616e747572696e672e6769746875622e696f2f737061726b2d706f7765722d62692f696d616765732f41445f53657475705f302e706e67" target="_blank"><img src="https://camo.githubusercontent.com/8a49af19cad820f79457b822309f4676f9051e34/687474703a2f2f6772616e747572696e672e6769746875622e696f2f737061726b2d706f7765722d62692f696d616765732f41445f53657475705f302e706e67" alt="step0" data-canonical-src="http://granturing.github.io/spark-power-bi/images/AD_Setup_0.png" style="max-width:100%;"></a></li> 
   <li>Enter any name you want and select "Native Client Application" <a href="https://camo.githubusercontent.com/3b458e0db0d5474a6e7fc4a4e1a647f45e875f3e/687474703a2f2f6772616e747572696e672e6769746875622e696f2f737061726b2d706f7765722d62692f696d616765732f41445f53657475705f312e706e67" target="_blank"><img src="https://camo.githubusercontent.com/3b458e0db0d5474a6e7fc4a4e1a647f45e875f3e/687474703a2f2f6772616e747572696e672e6769746875622e696f2f737061726b2d706f7765722d62692f696d616765732f41445f53657475705f312e706e67" alt="step1" data-canonical-src="http://granturing.github.io/spark-power-bi/images/AD_Setup_1.png" style="max-width:100%;"></a></li> 
   <li>Enter a redirect URI, this can be anything since it won't be used <a href="https://camo.githubusercontent.com/0e29b6c63022995766ec48790995ff9bedaf71e2/687474703a2f2f6772616e747572696e672e6769746875622e696f2f737061726b2d706f7765722d62692f696d616765732f41445f53657475705f322e706e67" target="_blank"><img src="https://camo.githubusercontent.com/0e29b6c63022995766ec48790995ff9bedaf71e2/687474703a2f2f6772616e747572696e672e6769746875622e696f2f737061726b2d706f7765722d62692f696d616765732f41445f53657475705f322e706e67" alt="step2" data-canonical-src="http://granturing.github.io/spark-power-bi/images/AD_Setup_2.png" style="max-width:100%;"></a></li> 
   <li>Once the app has been added you need to grant permissions, click "Add application" <a href="https://camo.githubusercontent.com/d38e9109a3b7ec0fd3f7857daa9053ab5dcf017b/687474703a2f2f6772616e747572696e672e6769746875622e696f2f737061726b2d706f7765722d62692f696d616765732f41445f53657475705f332e706e67" target="_blank"><img src="https://camo.githubusercontent.com/d38e9109a3b7ec0fd3f7857daa9053ab5dcf017b/687474703a2f2f6772616e747572696e672e6769746875622e696f2f737061726b2d706f7765722d62692f696d616765732f41445f53657475705f332e706e67" alt="step3" data-canonical-src="http://granturing.github.io/spark-power-bi/images/AD_Setup_3.png" style="max-width:100%;"></a></li> 
   <li>Select the "Power BI Service" <a href="https://camo.githubusercontent.com/0ecc5f850ac53778d74f04c8b199e6b2f8659d51/687474703a2f2f6772616e747572696e672e6769746875622e696f2f737061726b2d706f7765722d62692f696d616765732f41445f53657475705f342e706e67" target="_blank"><img src="https://camo.githubusercontent.com/0ecc5f850ac53778d74f04c8b199e6b2f8659d51/687474703a2f2f6772616e747572696e672e6769746875622e696f2f737061726b2d706f7765722d62692f696d616765732f41445f53657475705f342e706e67" alt="step4" data-canonical-src="http://granturing.github.io/spark-power-bi/images/AD_Setup_4.png" style="max-width:100%;"></a></li> 
   <li>Add all 3 of the delegated permissions <a href="https://camo.githubusercontent.com/260179d1cade97758568d54a980513c2480276c1/687474703a2f2f6772616e747572696e672e6769746875622e696f2f737061726b2d706f7765722d62692f696d616765732f41445f53657475705f352e706e67" target="_blank"><img src="https://camo.githubusercontent.com/260179d1cade97758568d54a980513c2480276c1/687474703a2f2f6772616e747572696e672e6769746875622e696f2f737061726b2d706f7765722d62692f696d616765732f41445f53657475705f352e706e67" alt="step5" data-canonical-src="http://granturing.github.io/spark-power-bi/images/AD_Setup_5.png" style="max-width:100%;"></a></li> 
   <li>Save your changes and use the newly assigned client id for the <code>spark.powerbi.clientid</code> property <a href="https://camo.githubusercontent.com/eb011bc92ac2b444f3f4f361c311dc9347ca6235/687474703a2f2f6772616e747572696e672e6769746875622e696f2f737061726b2d706f7765722d62692f696d616765732f41445f53657475705f362e706e67" target="_blank"><img src="https://camo.githubusercontent.com/eb011bc92ac2b444f3f4f361c311dc9347ca6235/687474703a2f2f6772616e747572696e672e6769746875622e696f2f737061726b2d706f7765722d62692f696d616765732f41445f53657475705f362e706e67" alt="step6" data-canonical-src="http://granturing.github.io/spark-power-bi/images/AD_Setup_6.png" style="max-width:100%;"></a></li> 
  </ol> 
  <h2><a href="https://github.com/granturing/spark-power-bi#spark-core" aria-hidden="true" class="anchor" id="user-content-spark-core" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Spark Core</h2> 
  <pre><code>import com.granturing.spark.powerbi._

case class Person(name: String, age: Int)

val input = sc.textFile("examples/src/main/resources/people.txt")
val people = input.map(_.split(",")).map(l =&gt; Person(l(0), l(1).trim.toInt))

people.saveToPowerBI("Test", "People")
</code></pre> 
  <h2><a href="https://github.com/granturing/spark-power-bi#sparksql" aria-hidden="true" class="anchor" id="user-content-sparksql" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>SparkSQL</h2> 
  <pre><code>import com.granturing.spark.powerbi._
import org.apache.spark.sql._

val sqlCtx = new SQLContext(sc)
val people = sqlCtx.jsonFile("examples/src/main/resources/people.json")

people.write.format("com.granturing.spark.powerbi").options(Map("dataset" -&gt; "Test", "table" -&gt; "People")).save
</code></pre> 
  <h2><a href="https://github.com/granturing/spark-power-bi#spark-streaming" aria-hidden="true" class="anchor" id="user-content-spark-streaming" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Spark Streaming</h2> 
  <pre><code>val sc = new SparkContext(new SparkConf())
val ssc = new StreamingContext(sc, Seconds(5))

val filters = args

val input = TwitterUtils.createStream(ssc, None, filters)

val tweets = input.map(t =&gt; Tweet(t.getId, t.getCreatedAt, t.getText, t.getUser.getScreenName))
val hashTags = input.flatMap(t =&gt; t.getHashtagEntities.map(h =&gt; HashTag(t.getId, h.getText, t.getUser.getScreenName)))

tweets.saveToPowerBI(dataset, "Tweets")
hashTags.saveToPowerBI(dataset, "HashTags")

ssc.start()
ssc.awaitTermination()
</code></pre> 
  <h2><a href="https://github.com/granturing/spark-power-bi#referencing-as-a-dependency" aria-hidden="true" class="anchor" id="user-content-referencing-as-a-dependency" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Referencing As A Dependency</h2> 
  <p>You can also easily reference dependencies using the <code>--packages</code> argument:</p> 
  <div class="highlight highlight-source-shell">
   <pre>spark-shell --package com.granturing:spark-power-bi_2.10:1.5.0_0.0.7</pre>
  </div> 
  <h2><a href="https://github.com/granturing/spark-power-bi#building-from-source" aria-hidden="true" class="anchor" id="user-content-building-from-source" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Building From Source</h2> 
  <p>The library uses SBT and can be built by running <code>sbt package</code>.</p> 
 </article>
</div>