<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-sausagefactory" class="anchor" href="https://github.com/themillhousegroup/sausagefactory#sausagefactory" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>sausagefactory</h1> 
  <p>Turns Maps into Scala case classes.</p> 
  <p><a href="https://travis-ci.org/themillhousegroup/sausagefactory" target="_blank"><img src="https://camo.githubusercontent.com/6fccd8aebdcf35d9de6c58a8c08b50101c4e688e/68747470733a2f2f7472617669732d63692e6f72672f7468656d696c6c686f75736567726f75702f73617573616765666163746f72792e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/themillhousegroup/sausagefactory.svg?branch=master" style="max-width:100%;"></a></p> 
  <h2><a id="user-content-getting-started" class="anchor" href="https://github.com/themillhousegroup/sausagefactory#getting-started" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Getting Started</h2> 
  <h4><a id="user-content-including-the-dependency" class="anchor" href="https://github.com/themillhousegroup/sausagefactory#including-the-dependency" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Including the dependency</h4> 
  <p>Bring in the library by adding the following to your <code>build.sbt</code>. </p> 
  <ul> 
   <li>The release repository: </li> 
  </ul> 
  <pre><code>   resolvers ++= Seq(
     "Millhouse Bintray"  at "http://dl.bintray.com/themillhousegroup/maven"   )
</code></pre> 
  <ul> 
   <li>The dependency itself: </li> 
  </ul> 
  <pre><code>   libraryDependencies ++= Seq(
     "com.themillhousegroup" %% "sausagefactory" % "0.4.47"
   )

</code></pre> 
  <h4><a id="user-content-a-note-on-scala-versions" class="anchor" href="https://github.com/themillhousegroup/sausagefactory#a-note-on-scala-versions" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>A note on Scala versions</h4> 
  <p>For versions up to 0.3.x: the library is cross-built for Scala 2.10.4 and 2.11.2, but 2.11.2 is <em>highly</em> recommended; a number of reflection features are used and <code>scala-reflect</code> seems to be much more reliable in Scala 2.11.</p> 
  <p>As of version <strong>0.4.0</strong> only Scala 2.11 is supported. </p> 
  <h2><a id="user-content-usage" class="anchor" href="https://github.com/themillhousegroup/sausagefactory#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <p>Assuming the following declarations:</p> 
  <pre><code>   case class MyCaseClass(...)
   ...
   val myMap[String, Any] = ...
</code></pre> 
  <p>Invoke the <code>CaseClassConverter</code> on the map; it'll give you back a <code>Try</code> holding the result:</p> 
  <pre><code>   import com.themillhousegroup.sausagefactory.CaseClassConverter

   val conversionResult:Try[MyCaseClass] = CaseClassConverter[MyCaseClass](myMap)

   conversionResult.map { cc =&gt;
      println(s"It all worked! My case class is $cc")
   }

</code></pre> 
  <h3><a id="user-content-how-are-fields-mapped" class="anchor" href="https://github.com/themillhousegroup/sausagefactory#how-are-fields-mapped" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>How are fields mapped?</h3> 
  <p>We're looking for exact-matches between the keys of the <em>map</em> and the field names of the <em>target case class</em>.</p> 
  <ul> 
   <li><p>Fields in the <em>map</em> not found in the <em>target case class</em> will be ignored.</p></li> 
   <li><p>Fields in the <em>target case class</em> MUST be present in the <em>map</em>, unless they are <code>Option</code> types, in which case they will be set to None.</p></li> 
  </ul> 
  <p>If you're having trouble getting things to line up (and you aren't able to change the <em>map</em> or the <em>case class</em> definition to compensate), check out the <strong><em>extension mechanisms</em></strong> explained at the bottom of this document.</p> 
  <h3><a id="user-content-supported-case-class-structure-examples" class="anchor" href="https://github.com/themillhousegroup/sausagefactory#supported-case-class-structure-examples" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Supported case class structure examples</h3> 
  <pre><code>    case class Basic(foo: Int, bar: String, baz: Boolean)

    case class BasicOptions(foo: Option[Int], bar: Option[String])

    case class BasicCollections(foo: Set[String], bar: Seq[Int], baz: Map[String,String])

    case class NestedCaseClasses( foo: SomeCaseClass, bar: SomeOtherCaseClass)

    case class NestedOptionalCaseClass (foo: Option[Basic], bar: Option[Basic])

    case class IterablesOfCaseClass (foo: Set[Basic], bar: Seq[Basic], baz: List[Basic])

    case class MapOfCaseClass (foo: Map[String, Basic], bar: Map[Int, Basic])
</code></pre> 
  <p>The above are just simple examples; Your case classes can be as deeply-nested as you like - Sausagefactory will recurse down as far as needed to instantiate nested objects.</p> 
  <h2><a id="user-content-i-have-special-needs" class="anchor" href="https://github.com/themillhousegroup/sausagefactory#i-have-special-needs" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>I have special needs!</h2> 
  <p>Don't we all. If you need to perform some additional adjustment/casting/conversion during the sausage-making process (that you don't think would benefit anyone else with a <a href="https://github.com/themillhousegroup/sausagefactory/pulls" target="_blank">pull request</a>!), there is an extension-point built into the process that will allow you to hook in and change what you need.</p> 
  <p>If you look at the signature for the <code>CaseClassConverter</code> object's <code>apply</code> method, you'll see that there is an optional second argument:</p> 
  <pre><code>object CaseClassConverter {

  def apply[T &lt;: Product: TypeTag](map: Map[String, Any]): Try[T] 
  ...

  def apply[T]( map: Map[String, Any],
                converter: =&gt; FieldConverter): Try[T]

    ...
}
</code></pre> 
  <p>Where <code>FieldConverter</code> is a <code>PartialFunction</code> defined as follows:</p> 
  <pre><code>type FieldConverter = PartialFunction[(Type, Any), Any]
</code></pre> 
  <p>The <code>FieldConverter</code> gets invoked once we've found a match between a case class fieldname and a key in the incoming map. </p> 
  <p>You might want to provide your own if (for example) you're getting a type mismatch because the map has a value of type <code>Long</code> but your case class expects an <code>Int</code>.</p> 
  <p>When you see <code>PartialFunction</code> you just need to read "match expression" - just provide a <code>case</code> for the particular situation you need to intercept; e.g.:</p> 
  <pre><code>import com.themillhousegroup.sausagefactory.reflection.ReflectionHelpers
import com.themillhousegroup.sausagefactory.CaseClassConverter.FieldConverter

val alwaysMakeJavaLongsIntoInts: FieldConverter = {
    case (t: Type, v: Any) if (isInt(t) &amp;&amp; isJLong(v.getClass)) =&gt; {
      v.asInstanceOf[Long].toInt
    }
  }
</code></pre> 
  <p>For more info, see the Example / test spec: <a href="https://github.com/themillhousegroup/sausagefactory/blob/master/src/test/scala/com/themillhousegroup/sausagefactory/CustomFieldConverterExampleSpec.scala" target="_blank">CustomFieldConverterExampleSpec</a></p> 
 </article>
</div>