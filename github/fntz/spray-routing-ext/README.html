<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <p>Extension for create a Rails like routes for <a href="http://spray.io/" target="_blank">http://spray.io/</a></p> 
  <p>Api doc: <a href="http://fntzr.github.io/api/#com.github.fntzr.spray.routing.ext.Routable" target="_blank">doc</a></p> 
  <p>Example: <a href="https://github.com/fntzr/spray-routing-ext/blob/master/sample/src/main/scala/example.scala" target="_blank">blog</a></p> 
  <p>Library add a <code>resource, match0, get0, post0, delete0, put0, root</code> route directives.</p> 
  <h2><a id="user-content-install" class="anchor" href="https://github.com/fntz/spray-routing-ext#install" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Install</h2> 
  <p>In <code>Build.scala</code></p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-s"><span class="pl-pds">"</span>com.github.fntzr<span class="pl-pds">"</span></span>  <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>spray-routing-ext<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.2.3<span class="pl-pds">"</span></span>  <span class="pl-c"><span class="pl-c">//</span> For scala 2.10</span>
<span class="pl-s"><span class="pl-pds">"</span>com.github.fntzr<span class="pl-pds">"</span></span>  <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>spray-routing-ext<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.3.3<span class="pl-pds">"</span></span>  <span class="pl-c"><span class="pl-c">//</span> For scala 2.11</span></pre>
  </div> 
  <p>Also you need add into you <code>Build.scala</code> file <code>akka</code>, <code>spray-can</code>, and <code>spray-routing</code> or <code>spray-routing-shapeless2</code> for scala2.11. Also version 0.3.3 require shapeless <code>2.1.0</code> in scope.</p> 
  <h2><a id="user-content-methods" class="anchor" href="https://github.com/fntz/spray-routing-ext#methods" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Methods</h2> 
  <h3><a id="user-content-include-and-use" class="anchor" href="https://github.com/fntz/spray-routing-ext#include-and-use" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Include and use</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.github.fntzr.spray.routing.ext.</span><span class="pl-v">_</span>

<span class="pl-k">trait</span> <span class="pl-en">ApplicationRouteService</span> <span class="pl-k">extends</span> <span class="pl-e">Routable</span> {
  <span class="pl-k">def</span> <span class="pl-en">route</span> <span class="pl-k">=</span> ....
}</pre>
  </div> 
  <h3><a id="user-content-simple-http-methods" class="anchor" href="https://github.com/fntz/spray-routing-ext#simple-http-methods" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Simple http methods</h3> 
  <p>In package defined a <code>get0</code>, <code>post0</code>, <code>delete0</code>, and <code>put0</code> methods for handle request by Get, Post, Delete or Put http method.</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-c"><span class="pl-c">//</span>routes</span>
  get0[<span class="pl-en">Controller</span>](<span class="pl-s"><span class="pl-pds">"</span>path<span class="pl-pds">"</span></span>) <span class="pl-k">~</span>                                          <span class="pl-c"><span class="pl-c">//</span> GET http://example.com/path </span>
  get0[<span class="pl-en">Controller</span>](<span class="pl-s"><span class="pl-pds">"</span>path-name<span class="pl-pds">"</span></span> <span class="pl-k">~</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>controllerAction<span class="pl-pds">"</span></span>) <span class="pl-k">~</span>               <span class="pl-c"><span class="pl-c">//</span> GET http://example.com/path-name</span>
  delete0[<span class="pl-en">Controller</span>]((<span class="pl-s"><span class="pl-pds">"</span>delete-path<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-en">IntNumber</span>) <span class="pl-k">~</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>anotherAction<span class="pl-pds">"</span></span>) <span class="pl-c"><span class="pl-c">//</span> DELETE http://example.com/delete-path/1</span>
  
  <span class="pl-c"><span class="pl-c">//</span>in controller:</span>
  
  <span class="pl-k">trait</span> <span class="pl-en">Controller</span> {
    <span class="pl-k">def</span> <span class="pl-en">path</span> <span class="pl-k">=</span> { }
    
    <span class="pl-k">def</span> <span class="pl-en">controllerAction</span> <span class="pl-k">=</span> { ... }
                       ^^^^
                      without arguments
    
    <span class="pl-k">def</span> <span class="pl-en">anotherAction</span>(<span class="pl-v">num</span>: <span class="pl-k">Int</span>) <span class="pl-k">=</span> { ... }
                     ^^^^^^^^^^
                       <span class="pl-en">IntNumber</span>        
  }     </pre>
  </div> 
  <h3><a id="user-content-helper-methods-for-routing" class="anchor" href="https://github.com/fntz/spray-routing-ext#helper-methods-for-routing" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Helper methods for routing</h3> 
  <p>This is a <code>match0</code>, <code>root</code> and <code>scope</code> methods.</p> 
  <ul> 
   <li><code>math0</code> - used for define routes for few methods together</li> 
   <li><code>root</code> - just alias for `get0[Controller]("/" ~&gt; "action")</li> 
   <li><code>scope</code> - define route <code>path</code> with nested block, all url paths will be start with <code>path</code></li> 
  </ul> 
  <div class="highlight highlight-source-scala">
   <pre>  match0[<span class="pl-en">Controller</span>](<span class="pl-s"><span class="pl-pds">"</span>path-name<span class="pl-pds">"</span></span>) <span class="pl-k">~</span>                                   <span class="pl-c"><span class="pl-c">//</span> GET example.com/path-name</span>
  match0[<span class="pl-en">Controller</span>](<span class="pl-s"><span class="pl-pds">"</span>another-path<span class="pl-pds">"</span></span> <span class="pl-k">~</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>action<span class="pl-pds">"</span></span>, <span class="pl-en">List</span>(<span class="pl-en">GET</span>, <span class="pl-en">DELETE</span>) <span class="pl-k">~</span>  <span class="pl-c"><span class="pl-c">//</span> GET | DELETE example.com/another-path</span>
  root[<span class="pl-en">Controller</span>](<span class="pl-s"><span class="pl-pds">"</span>action<span class="pl-pds">"</span></span>)                                          <span class="pl-c"><span class="pl-c">//</span> GET example.com/</span>
  scope(<span class="pl-s"><span class="pl-pds">"</span>scope<span class="pl-pds">"</span></span>) {
    get0[<span class="pl-en">Controller</span>](<span class="pl-s"><span class="pl-pds">"</span>get<span class="pl-pds">"</span></span>)                                           <span class="pl-c"><span class="pl-c">//</span> GET example.com/get</span>
  }</pre>
  </div> 
  <h3><a id="user-content-resource" class="anchor" href="https://github.com/fntz/spray-routing-ext#resource" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Resource</h3> 
  <p>In Rails framework <code>resource</code> it's a set routes (<code>index</code>, <code>show</code>, <code>edit</code>, <code>create</code>, <code>update</code>, <code>delete</code>, <code>new</code>) which operate a <code>Model</code>. All urls will be started with <code>/model/</code>. Example:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Model</span>(<span class="pl-v">title</span>: <span class="pl-k">String</span>, <span class="pl-v">description</span>: <span class="pl-k">String</span>)

<span class="pl-k">trait</span> <span class="pl-en">Controller</span> {
  <span class="pl-k">def</span> <span class="pl-en">index</span> <span class="pl-k">=</span>  ...
  <span class="pl-k">def</span> <span class="pl-en">show</span>(<span class="pl-v">title</span>: <span class="pl-k">String</span>) <span class="pl-k">=</span> ...
  <span class="pl-k">def</span> <span class="pl-en">edit</span>(<span class="pl-v">title</span>: <span class="pl-k">String</span>) <span class="pl-k">=</span> ...
  <span class="pl-k">def</span> <span class="pl-en">create</span>(<span class="pl-v">model</span>: <span class="pl-en">Model</span>) <span class="pl-k">=</span> ...
  <span class="pl-k">def</span> <span class="pl-en">update</span>(<span class="pl-v">title</span>: <span class="pl-k">String</span>) <span class="pl-k">=</span> ...
  <span class="pl-k">def</span> <span class="pl-en">delete</span>(<span class="pl-v">title</span>: <span class="pl-k">String</span>) <span class="pl-k">=</span> ...
  <span class="pl-k">def</span> <span class="pl-en">fresh</span> <span class="pl-k">=</span> ... <span class="pl-c"><span class="pl-c">//</span> it's a `new` path</span>
}

<span class="pl-c"><span class="pl-c">//</span>route</span>
  
  resource[<span class="pl-en">Controller</span>, <span class="pl-en">Model</span>](<span class="pl-en">Segment</span>)
                             ^^^^^^^^^
                          define subroute, by default subroute is a <span class="pl-en">IntNumber</span>     
  </pre>
  </div> 
  <p>This code generate urls:</p> 
  <pre><code>GET    example.com/model/index  
GET    example.com/model/post-title
GET    example.com/model/post-title/edit
POST   example.com/model/
PUT    example.com/model/post-title
DELETE example.com/model/post-title
GET    example.com/model/new 
</code></pre> 
  <p>In <code>resource</code> you might exclude unnecessary methods, or define nested block, and you might define own <a href="http://spray.io/documentation/1.1-SNAPSHOT/api/index.html#spray.routing.PathMatchers" target="_blank">separator</a></p> 
  <p><a href="https://github.com/fntzr/spray-routing-ext/blob/master/src%2Ftest%2Fscala%2FRoutableTest.scala#L154" target="_blank">More</a> <a href="https://github.com/fntzr/spray-routing-ext/blob/master/src%2Ftest%2Fscala%2FSpecifySubrouteTest.scala#L71" target="_blank">resources</a></p> 
  <h4><a id="user-content-note-for-controller-define-method-fresh-instead-of-new-because-in-scala-new-reserved-keyworld" class="anchor" href="https://github.com/fntz/spray-routing-ext#note-for-controller-define-method-fresh-instead-of-new-because-in-scala-new-reserved-keyworld" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Note: For Controller define method <code>fresh</code> instead of <code>new</code>, because in scala, <code>new</code> reserved keyworld.</h4> 
  <h3><a id="user-content-controllers" class="anchor" href="https://github.com/fntz/spray-routing-ext#controllers" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Controllers</h3> 
  <p>Controllers it's only scala traits. When spray-routing-ext generate code inherited from you Controller, and you might use in a controller predefined value - <code>request: spray.http.HttpRequest</code>, but you might explicitly extends <code>BaseController</code>, which contain one abstract method.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">trait</span> <span class="pl-en">MyController</span> <span class="pl-k">extends</span> <span class="pl-e">BaseController</span> {
  <span class="pl-k">def</span> <span class="pl-en">myAction</span> <span class="pl-k">=</span> {
    <span class="pl-k">val</span> <span class="pl-en">headers</span> <span class="pl-k">=</span> request.headers
    ...
  }
}</pre>
  </div> 
  <h3><a id="user-content-respondto-helper" class="anchor" href="https://github.com/fntz/spray-routing-ext#respondto-helper" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>respondTo helper</h3> 
  <p>Sometimes you need according to <code>Accept</code> header send request with right <code>Content-Type</code></p> 
  <div class="highlight highlight-source-scala">
   <pre>  
  <span class="pl-k">def</span> <span class="pl-en">method</span> <span class="pl-k">=</span> {
    <span class="pl-k">val</span> <span class="pl-en">accept</span> <span class="pl-k">=</span> ... <span class="pl-c"><span class="pl-c">//</span> extract from request Accept header </span>
    
    <span class="pl-k">if</span> accept is a html
      complete ...
    <span class="pl-k">else</span> <span class="pl-k">if</span> accept is a json and request <span class="pl-k">with</span> <span class="pl-e">ajax</span> 
      complete ...
    <span class="pl-k">else</span>
      reject
  }</pre>
  </div> 
  <p>Now possible reduce the code</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">trait</span> <span class="pl-en">MyController</span> <span class="pl-k">extends</span> <span class="pl-e">BaseController</span> <span class="pl-k">with</span> <span class="pl-e">RespondToSupport</span> {
  <span class="pl-k">def</span> <span class="pl-en">method</span> <span class="pl-k">=</span> {
    respondTo {
      <span class="pl-k">case</span> `text<span class="pl-k">/</span>html`    <span class="pl-k">=&gt;</span>    &lt;<span class="pl-ent">html</span>&gt;&lt;<span class="pl-ent">body</span>&gt;....&lt;/<span class="pl-ent">body</span>&gt;&lt;/<span class="pl-ent">html</span>&gt;
      <span class="pl-k">case</span> `application<span class="pl-k">/</span>json` <span class="pl-k">if</span> isAjax  <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">"""</span> { json: "ok" } <span class="pl-pds">"""</span></span> 
    }
  }
}</pre>
  </div> 
  <p>Now, when we request content with <code>Accept: text/html</code> will be got a <code>&lt;html&gt;&lt;body&gt;....&lt;/body&gt;&lt;/html&gt;</code> response, when we request content with <code>Accept: application/json</code> with ajax, will be got <code>""" { json: "ok" } """</code>, otherwise will be got <code>406 Not Acceptable</code> Response Error.</p> 
  <h3><a id="user-content-form-support" class="anchor" href="https://github.com/fntz/spray-routing-ext#form-support" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Form support</h3> 
  <p><code>spray-routing-ext</code> adds a <code>postForm</code> method:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Model</span>(<span class="pl-v">id</span>: <span class="pl-k">Int</span>, <span class="pl-v">title</span>: <span class="pl-k">String</span>)

postForm[<span class="pl-en">Controller</span>, <span class="pl-en">Model</span>](<span class="pl-s"><span class="pl-pds">"</span>action<span class="pl-pds">"</span></span>)
postForm[<span class="pl-en">Controller</span>, <span class="pl-en">Model</span>](<span class="pl-s"><span class="pl-pds">"</span>post-path<span class="pl-pds">"</span></span> <span class="pl-k">~</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>anotherAction<span class="pl-pds">"</span></span>, exclude(<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>)

<span class="pl-c"><span class="pl-c">//</span> in controller</span>

<span class="pl-k">trait</span> <span class="pl-en">Controller</span> {
  
  <span class="pl-k">def</span> <span class="pl-en">action</span>(<span class="pl-v">model</span>: <span class="pl-en">Model</span>) <span class="pl-k">=</span> ... 
            ^^^^^^^^^^^^^^
            got a <span class="pl-en">Model</span> instance
  
  <span class="pl-k">def</span> <span class="pl-en">anotherAction</span>(<span class="pl-v">map</span>: <span class="pl-en">Map</span>[<span class="pl-k">String</span>, <span class="pl-en">Any</span>]) <span class="pl-k">=</span> ....
                   ^^^^^^^^^^^^^^^^^^^^^^^^
                   got a <span class="pl-en">Map</span>, because we excluded `id` attribute 
}</pre>
  </div> 
  <h3><a id="user-content-di" class="anchor" href="https://github.com/fntz/spray-routing-ext#di" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>DI</h3> 
  <p>Often need a pass into controllers some values (bd connection, actor path, predefined values...)</p> 
  <p>It's a simple:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">trait</span> <span class="pl-en">RouteService</span> <span class="pl-k">extends</span> <span class="pl-e">Routable</span> {
  <span class="pl-k">def</span> <span class="pl-en">route</span>(<span class="pl-v">db</span>: <span class="pl-en">ActorRef</span>, <span class="pl-v">render</span>: <span class="pl-en">Render</span>) <span class="pl-k">=</span>  { <span class="pl-c"><span class="pl-c">//</span> method take a `db` connection and `renderer`</span>
    resource[<span class="pl-en">PostController</span>, <span class="pl-en">Post</span>]
  }
}

<span class="pl-k">class</span> <span class="pl-en">MyService</span> <span class="pl-k">extends</span> <span class="pl-e">Actor</span> <span class="pl-k">with</span> <span class="pl-e">RouteService</span> {
  <span class="pl-k">val</span> <span class="pl-en">db</span> <span class="pl-k">=</span> ...
  <span class="pl-k">val</span> <span class="pl-en">render</span> <span class="pl-k">=</span> ....
  <span class="pl-k">def</span> <span class="pl-en">receive</span> <span class="pl-k">=</span> runRoute(route(db, render))
                        ^^^^^^^^^^^^^^^^^^^^^
                          pass `db` connection and `renderer`
                               
}

<span class="pl-k">trait</span> <span class="pl-en">Injection</span> {
  <span class="pl-k">val</span> <span class="pl-en">db</span><span class="pl-k">:</span> <span class="pl-en">ActorRef</span>
  <span class="pl-k">val</span> <span class="pl-en">render</span><span class="pl-k">:</span> <span class="pl-en">Render</span>
}

<span class="pl-c"><span class="pl-c">//</span>then into PostController </span>

<span class="pl-k">trait</span> <span class="pl-en">PostController</span> <span class="pl-k">extends</span> <span class="pl-e">BaseController</span> <span class="pl-k">with</span> <span class="pl-e">RespondToSupport</span> <span class="pl-k">with</span> <span class="pl-e">Injection</span> {
                                                                      ^^^^^^^^^^^^
   ....                                                                     
}</pre>
  </div> 
  <p>When application srart, in PostController possible use a <code>db</code> and <code>render</code>.</p> 
  <h2><a id="user-content-usage" class="anchor" href="https://github.com/fntz/spray-routing-ext#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <h3><a id="user-content-define-routes" class="anchor" href="https://github.com/fntz/spray-routing-ext#define-routes" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Define routes</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.github.fntzr.spray-routing-ext.</span><span class="pl-v">_</span>

<span class="pl-k">trait</span> <span class="pl-en">MyRoutes</span> <span class="pl-k">extends</span> <span class="pl-e">Routable</span> {
  <span class="pl-k">val</span> <span class="pl-en">route</span> <span class="pl-k">=</span> resource[<span class="pl-en">PostController</span>, <span class="pl-en">Post</span>] {
    pathPrefixt(<span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span>) {
      get {
        complete{<span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span>}
      }
    }
  } <span class="pl-k">~</span> get0[<span class="pl-en">OtherController</span>](<span class="pl-s"><span class="pl-pds">"</span>route<span class="pl-pds">"</span></span>) <span class="pl-k">~</span>
  post0[<span class="pl-en">Controller0</span>]((<span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-en">IntNumber</span>) <span class="pl-k">~</span><span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>action<span class="pl-pds">"</span></span>) <span class="pl-k">~</span>
  match0[<span class="pl-en">Controller0</span>](<span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>, <span class="pl-en">List</span>(<span class="pl-en">GET</span>, <span class="pl-en">POST</span>, <span class="pl-en">PUT</span>)) <span class="pl-k">~</span>
  resource[<span class="pl-en">ModelController</span>, <span class="pl-en">Model</span>] <span class="pl-k">~</span>
  root[<span class="pl-en">PostController</span>](<span class="pl-s"><span class="pl-pds">"</span>index<span class="pl-pds">"</span></span>)
}</pre>
  </div> 
  <h3><a id="user-content-define-controllers" class="anchor" href="https://github.com/fntz/spray-routing-ext#define-controllers" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Define controllers</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">trait</span> <span class="pl-en">PostController</span> <span class="pl-k">extends</span> <span class="pl-e">BaseController</span> {
  <span class="pl-k">def</span> <span class="pl-en">index</span> <span class="pl-k">=</span> {
    complete(<span class="pl-s"><span class="pl-pds">"</span>index<span class="pl-pds">"</span></span>)
  }
  <span class="pl-k">def</span> <span class="pl-en">show</span>(<span class="pl-v">id</span>: <span class="pl-k">Int</span>) <span class="pl-k">=</span> {
    complete(s<span class="pl-s"><span class="pl-pds">"</span>show:$id<span class="pl-pds">"</span></span>)
  }
  <span class="pl-c"><span class="pl-c">//</span>others...</span>
}</pre>
  </div> 
  <h2><a id="user-content-more-info" class="anchor" href="https://github.com/fntz/spray-routing-ext#more-info" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>More info</h2> 
  <p>My post about: <a href="http://fntzr.github.io/scala/2014/04/20/spray-routing-ext-extend-spray-routing.html" target="_blank">spray-routing-ext: Extend spray-routing</a></p> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/fntz/spray-routing-ext#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p>Copyright (c) 2014-2015 fntzr <a href="mailto:mike.fch1@gmail.com" target="_blank">mike.fch1@gmail.com</a></p> 
  <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> 
  <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> 
  <p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p> 
 </article>
</div>