<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h2><a id="user-content-schale" class="anchor" href="https://github.com/pawelkaczor/schale#schale" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Schale</h2> 
  <p>Schale is a subprocess interface for Scala. Make all your system programs easily available to Scala, call those programs and interact with their input and output!</p> 
  <h2><a id="user-content-why-use-schale" class="anchor" href="https://github.com/pawelkaczor/schale#why-use-schale" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Why use Schale?</h2> 
  <p>Although Scala standard library <code>scala.sys.process</code> helps external process execution, however it does not:</p> 
  <ul> 
   <li>Manage interactive input/output</li> 
   <li>Manage process environment (variables and working directory)</li> 
  </ul> 
  <p>Schale addresses both of the downsides:</p> 
  <ul> 
   <li>It supports both asynchronous and synchronous interactive IO by exposing an Akka actor, eliminating the necessity of manual stream management.</li> 
   <li>Process environment can be very easily managed and prepared in a hierarchical fashion, reduce code redundancy and improve readability.</li> 
  </ul> 
  <h2><a id="user-content-usage" class="anchor" href="https://github.com/pawelkaczor/schale#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <h3><a id="user-content-a-gentle-start" class="anchor" href="https://github.com/pawelkaczor/schale#a-gentle-start" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>A gentle start</h3> 
  <pre><code>import at.loveoneanother.schale._
println(Command("ls", "-l", "/"))
println(Shell("ls -l /"))
</code></pre> 
  <p><code>Command</code> runs any process, <code>Shell</code> runs system shell interpreter. The function return values have exactly the same Schale API.</p> 
  <p>This is the only use case in which <code>.waitFor()</code> call is unnecessary.</p> 
  <h3><a id="user-content-run-in-background" class="anchor" href="https://github.com/pawelkaczor/schale#run-in-background" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Run in background</h3> 
  <pre><code>val proc = Shell("sleep 100")
proc.bg()
val exitStatus = proc.waitFor()
</code></pre> 
  <p>Both simple and interactive IO may be used on background process.</p> 
  <p>Process <code>.destroy()</code> can be used any time to destory a process before its completion, even during simple or interactive IO.</p> 
  <h3><a id="user-content-simple-io" class="anchor" href="https://github.com/pawelkaczor/schale#simple-io" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Simple IO</h3> 
  <pre><code>val grepper = Shell("grep Scala")
grepper.input("Java API\n", "Scala API\n", "Scala Doc\n")
for (line &lt;- grepper.stdout) { println(line) }
for (line &lt;- grepper.stderr) { println(line) }
grepper.waitFor()
</code></pre> 
  <p><code>.input</code>, <code>.stdout</code> and <code>.stderr</code> may only be used once!</p> 
  <h3><a id="user-content-advanced-interactive-io" class="anchor" href="https://github.com/pawelkaczor/schale#advanced-interactive-io" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Advanced (interactive) IO</h3> 
  <pre><code>implicit val readTimeout = Timeout(2 seconds)
Shell("grep Scala") interact { io =&gt;
  // Stdin: write chars and strings
  io ! "Java API"; io ! '\n'
  io ! "Scala API\n"
  io ! ProcStdinClose // EOF

  // Stdout: read chars and strings
  println(Await.result(io ? ProcStdoutReadChar, 2 seconds).asInstanceOf[Int].toChar)
  println(Await.result(io ? ProcStdoutReadLine, 2 seconds).asInstanceOf[String])
} waitFor
</code></pre> 
  <p><code>interact</code> may be used any number of times. For reading from error output, there are <code>ProcStderrReadChar</code> and <code>ProcStderrReadLine</code>.</p> 
  <h3><a id="user-content-process-environment" class="anchor" href="https://github.com/pawelkaczor/schale#process-environment" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Process environment</h3> 
  <pre><code>// Do not import implicit default environment
import at.loveoneanother.schale.{ Env, Command, Shell }
new Env() {
  cd("/") {
    println(Command("pwd")) // root
    env(Map("mylang" -&gt; "Scala")) { println(Shell("echo $mylang")) } // Scala
  }
  cd("/tmp") {
    println(Command("pwd")) // tmp
  }
  env(Map("hobby" -&gt; "gliding")) {
    // Override value
    env(Map("hobby" -&gt; "programming")) { println(Shell("echo $hobby")) } // programming
  }
}
</code></pre> 
  <p>Start from a <code>new Env()</code> object, use <code>cd()</code> to change directory and <code>env()</code> to add/override variables, <strong>stack</strong> those calls to easily manage hierarchical process environment!</p> 
  <h2><a id="user-content-some-notes" class="anchor" href="https://github.com/pawelkaczor/schale#some-notes" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Some notes</h2> 
  <p><strong>Is <code>Shell()</code> cross platform?</strong></p> 
  <p><code>Comamnd()</code> is cross platform, however <code>Shell("script")</code> assumes *nix OS platform and the availability of <code>/bin/sh</code>. Alternative call <code>Shell("script", "interpreter path")</code> uses the specified interpreter, but still cannot be guaranteed to run cross-platform.</p> 
  <p><strong>Can I <code>cd()</code> to relative paths?</strong></p> 
  <p>In a process environment, <code>cd()</code> call only accepts absolute path, this due to JVM's inability to determine whether a path is relative or absolute. You may find <code>java.nio.file.Paths</code> easy to work with <code>cd()</code>.</p> 
  <p><strong>Can I use Schale to interact with SSH/SFTP/SCP?</strong></p> 
  <p>JVM cannot interact with TTY and Schale itself is not a terminal emulator, therefore it cannot be used on programs which require advanced terminal features, such as SSH/SFTP/SCP. Sorry!</p> 
  <h2><a id="user-content-version-history" class="anchor" href="https://github.com/pawelkaczor/schale#version-history" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version History</h2> 
  <table> 
   <tbody>
    <tr> 
     <th>Version</th> 
     <th>Branch</th> 
     <th>Release Date</th> 
     <th>Comment</th> 
    </tr> 
    <tr> 
     <td>Alpha</td> 
     <td>alpha</td> 
     <td>2013-08-10</td> 
     <td>First release</td> 
    </tr> 
    <tr> 
     <td>1.0.1</td> 
     <td> </td> 
     <td>2015-07-24</td> 
     <td>forked by Pawel Kaczor</td> 
    </tr> 
   </tbody>
  </table> 
  <h2><a id="user-content-contact-and-license" class="anchor" href="https://github.com/pawelkaczor/schale#contact-and-license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Contact and License</h2> 
  <p>You may want to check out <a href="https://github.com/HouzuoGuo/schale/issues" target="_blank">Issues</a> section for future plans, and please feel very free to contact <a href="mailto:guohouzuo@gmail.com" target="_blank">Howard</a> if you have any feedback / questions. I also have <a href="https://twitter.com/hzguo" target="_blank">Twitter</a> and <a href="http://allstarnix.blogspot.com.au" target="_blank">blog</a>, please check them out as well.</p> 
  <p>The following copyright notice and disclaimers apply to all files in the project repository:</p> 
  <pre>Copyright (c) 2013, Howard Guo
All rights reserved.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
- Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
- Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
</pre> 
  <h2><a id="user-content-project-background" class="anchor" href="https://github.com/pawelkaczor/schale#project-background" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Project Background</h2> 
  <p>Subprocess management was traditionally carried out by using <code>Runtime.getRuntime().exec</code> series of calls. Although JDK introduced <code>ProcessBuilder</code> later on, but process building and IO interactivity could still be cumbersome.</p> 
  <p>Schale takes advantage of advanced features and syntactic sugar offered by Scala, and brings to you:</p> 
  <ul> 
   <li>Easy process creation</li> 
   <li>Background process management</li> 
   <li>Simplified process input/output interface</li> 
   <li>Advanced, interactive, non-blocking process IO</li> 
   <li>Hierarchical process environment (variables, working directory) management</li> 
  </ul> 
  <p>Schale was inspired by Python third-party package "sh".</p> 
 </article>
</div>