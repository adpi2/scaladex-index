<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-streaming--asynchronous-scala-client-for-common-aws-services" class="anchor" href="https://github.com/mfglabs/commons-aws#streaming--asynchronous-scala-client-for-common-aws-services" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Streaming / asynchronous Scala client for common AWS services</h1> 
  <p>Streaming / asynchronous Scala client for common AWS services on top of <a href="https://github.com/dwhjames/aws-wrap" target="_blank">dwhjames/aws-wrap</a> . When possible, clients expose methods that return Akka Stream's Sources / Flows / Sinks to provide streaming facilities.</p> 
  <p>Clients use a pool of threads managed internally and optimized for blocking IO operations.</p> 
  <p>This library makes heavy use of our extension library for Akka Stream <a href="https://github.com/MfgLabs/akka-stream-extensions" target="_blank">MfgLabs/akka-stream-extensions</a>.</p> 
  <h2><a id="user-content-resolver" class="anchor" href="https://github.com/mfglabs/commons-aws#resolver" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Resolver</h2> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-en">Resolver</span>.bintrayRepo(<span class="pl-s"><span class="pl-pds">"</span>mfglabs<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>maven<span class="pl-pds">"</span></span>),
  <span class="pl-en">Resolver</span>.bintrayRepo(<span class="pl-s"><span class="pl-pds">"</span>dwhjames<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>maven<span class="pl-pds">"</span></span>)
)</pre>
  </div> 
  <h2><a id="user-content-dependencies" class="anchor" href="https://github.com/mfglabs/commons-aws#dependencies" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Dependencies</h2> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.mfglabs<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>commons-aws<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.10.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <h2><a id="user-content-usage" class="anchor" href="https://github.com/mfglabs/commons-aws#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <blockquote> 
   <p>Scaladoc is available <a href="http://mfglabs.github.io/commons-aws/api/current/" target="_blank">there</a></p> 
  </blockquote> 
  <h3><a id="user-content-commons" class="anchor" href="https://github.com/mfglabs/commons-aws#commons" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Commons</h3> 
  <h4><a id="user-content-s3" class="anchor" href="https://github.com/mfglabs/commons-aws#s3" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>S3</h4> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.mfglabs.commons.aws.s3.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">builder</span> <span class="pl-k">=</span> <span class="pl-en">S3StreamBuilder</span>(<span class="pl-k">new</span> <span class="pl-en">AmazonS3AsyncClient</span>()) <span class="pl-c"><span class="pl-c">//</span> contains un-materialized composable Source / Flow / Sink</span>

<span class="pl-k">val</span> <span class="pl-en">fileStream</span><span class="pl-k">:</span> <span class="pl-en">Source</span>[<span class="pl-en">ByteString</span>, <span class="pl-k">Unit</span>] <span class="pl-k">=</span> builder.getFileAsStream(bucket, key)

<span class="pl-k">val</span> <span class="pl-en">multipartfileStream</span><span class="pl-k">:</span> <span class="pl-en">Source</span>[<span class="pl-en">ByteString</span>, <span class="pl-k">Unit</span>] <span class="pl-k">=</span> builder.getMultipartFileAsStream(bucket, prefix)

someBinaryStream.via(
  builder.uploadStreamAsFile(bucket, key, chunkUploadConcurrency <span class="pl-k">=</span> <span class="pl-c1">2</span>)
)

someBinaryStream.via(
  builder.uploadStreamAsMultipartFile(
    bucket, 
    prefix, 
    nbChunkPerFile <span class="pl-k">=</span> <span class="pl-c1">10000</span>, 
    chunkUploadConcurrency <span class="pl-k">=</span> <span class="pl-c1">2</span>
  )
)

<span class="pl-k">val</span> <span class="pl-en">ops</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">builder.MaterializedOps</span>(flowMaterializer) <span class="pl-c"><span class="pl-c">//</span> contains materialized methods on top of S3Stream</span>

<span class="pl-k">val</span> <span class="pl-en">file</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">ByteString</span>] <span class="pl-k">=</span> ops.getFile(bucket, key)

<span class="pl-c"><span class="pl-c">//</span> More methods, check the source code</span></pre>
  </div> 
  <p>Please remark that you don't need any implicit <code>scala.concurrent.ExecutionContext</code> as it's directly provided and managed by [[AmazonS3Client]] itself.</p> 
  <p>There are also smart <code>AmazonS3Client</code> constructors that can be provided with custom. <code>java.util.concurrent.ExecutorService</code> if you want to manage your pools of threads.</p> 
  <h4><a id="user-content-sqs" class="anchor" href="https://github.com/mfglabs/commons-aws#sqs" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>SQS</h4> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.amazonaws.services.sqs.</span><span class="pl-v">AmazonSQSAsyncClient </span>
<span class="pl-k">import</span> <span class="pl-v">com.pellucid.wrap.sqs.</span><span class="pl-v">AmazonSQSScalaClient</span>
<span class="pl-k">import</span> <span class="pl-v">com.mfglabs.commons.aws.sqs.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">sqs</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">AmazonSQSScalaClient</span>(<span class="pl-k">new</span> <span class="pl-en">AmazonSQSAsyncClient</span>(), ec)
<span class="pl-k">val</span> <span class="pl-en">builder</span> <span class="pl-k">=</span> <span class="pl-en">SQSStreamBuilder</span>(sqs)

<span class="pl-k">val</span> <span class="pl-en">sender</span><span class="pl-k">:</span> <span class="pl-en">Flow</span>[<span class="pl-k">String</span>, <span class="pl-en">SendMessageResult</span>, <span class="pl-k">Unit</span>] <span class="pl-k">=</span>
  <span class="pl-en">Flow</span>[<span class="pl-k">String</span>].map { body <span class="pl-k">=&gt;</span>
    <span class="pl-k">val</span> <span class="pl-en">req</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SendMessageRequest</span>()
    req.setMessageBody(body)
    req.setQueueUrl(queueUrl)
    req
  }
  .via(builder.sendMessageAsStream())

<span class="pl-k">val</span> <span class="pl-en">receiver</span><span class="pl-k">:</span> <span class="pl-en">Source</span>[<span class="pl-en">Message</span>, <span class="pl-k">Unit</span>] <span class="pl-k">=</span> 
    builder.receiveMessageAsStream(queueUrl, autoAck <span class="pl-k">=</span> <span class="pl-c1">false</span>)</pre>
  </div> 
  <h4><a id="user-content-cloudwatch" class="anchor" href="https://github.com/mfglabs/commons-aws#cloudwatch" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Cloudwatch</h4> 
  <p>In your code:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.mfglabs.commons.aws.</span><span class="pl-v">cloudwatch</span>
<span class="pl-k">import</span> <span class="pl-v">cloudwatch.</span><span class="pl-v">_ </span><span class="pl-c"><span class="pl-c">//</span> brings implicit extensions</span>

<span class="pl-c"><span class="pl-c">//</span> Create the client</span>
<span class="pl-k">val</span> <span class="pl-en">CW</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">cloudwatch.AmazonCloudwatchClient</span>()

<span class="pl-c"><span class="pl-c">//</span> Use it</span>
<span class="pl-k">for</span> {
  metrics  <span class="pl-k">&lt;</span><span class="pl-k">-</span> <span class="pl-en">CW</span>.listMetrics()
} <span class="pl-k">yield</span> (metrics)</pre>
  </div> 
  <p>Please remark that you don't need any implicit <code>scala.concurrent.ExecutionContext</code> as it's directly provided and managed by [[AmazonCloudwatchClient]] itself.</p> 
  <p>There are also smart <code>AmazonCloudwatchClient</code> constructors that can be provided with custom. <code>java.util.concurrent.ExecutorService</code> if you want to manage your pools of threads.</p> 
  <h3><a id="user-content-extensions" class="anchor" href="https://github.com/mfglabs/commons-aws#extensions" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Extensions</h3> 
  <h4><a id="user-content-cloudwatch-heartbeat" class="anchor" href="https://github.com/mfglabs/commons-aws#cloudwatch-heartbeat" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Cloudwatch heartbeat</h4> 
  <p>It provides a simple mechanism that sends periodically a heartbeat metric to AWS Cloudwatch.</p> 
  <p>If the heartbeat rate on a <em>configurable</em> period falls under a <em>configurable</em> threshold or the metrics isn't fed with sufficient data, a Cloudwatch <code>ALARM</code> status is triggered &amp; sent to a given SQS endpoint.</p> 
  <p>When the rate goes above threshold again, an <code>OK</code> status is triggered &amp; sent to the same SQS endpoint.</p> 
  <blockquote> 
   <p><strong>IMPORTANT</strong>: the alarm is created by the API itself but due to a limitation (or a bug) in Amazon API, the status of this alarm will stay at <code>INSUFFICIENT_DATA</code> until you manually update it in the AWS console. For that, wait 1/2 minutes after start so that Cloudwatch receives enough heartbeats and then select the alarm, click on <code>modify</code> and then click on <code>save</code>. The alarm should pass to <code>OK</code> status.</p> 
  </blockquote> 
  <p><em>Cloudwatch heartbeat is based on Cloudwatch service &amp; Akka scheduler.</em></p> 
  <h5><a id="user-content-low-level-client" class="anchor" href="https://github.com/mfglabs/commons-aws#low-level-client" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Low-level client</h5> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.mfglabs.commons.aws.</span><span class="pl-v">cloudwatch</span>
<span class="pl-k">import</span> <span class="pl-v">com.mfglabs.commons.aws.extensions.cloudwatch.</span><span class="pl-v">CloudwatchAkkaHeartbeat</span>

<span class="pl-k">import</span> <span class="pl-v">myExecutionCtx </span><span class="pl-c"><span class="pl-c">//</span> an implicit custom execution context</span>

<span class="pl-k">val</span> <span class="pl-en">hb</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">CloudwatchAkkaHeartbeat</span>(
  namespace <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Test/Heartbeat<span class="pl-pds">"</span></span>,         <span class="pl-c"><span class="pl-c">//</span> the namespace of the cloudwatch metrics</span>
  name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>test1<span class="pl-pds">"</span></span>,                       <span class="pl-c"><span class="pl-c">//</span> the name of the cloudwatch</span>
  beatPeriod <span class="pl-k">=</span> <span class="pl-c1">2.</span>second,                <span class="pl-c"><span class="pl-c">//</span> the heart beat period in Scala.concurrent.duration.Duration string format</span>
  alarmPeriod <span class="pl-k">=</span> <span class="pl-c1">120.</span>seconds,            <span class="pl-c"><span class="pl-c">//</span> the period on which the metrics is analyzed to determine the heartbeat health</span>
  alarmPeriodNb <span class="pl-k">=</span> <span class="pl-c1">1</span>,                    <span class="pl-c"><span class="pl-c">//</span> the number of "bad health" periods after which the alarm is triggered</span>
  alarmThreshold <span class="pl-k">=</span> <span class="pl-c1">10</span>,                  <span class="pl-c"><span class="pl-c">//</span> the threshold counting the number of heartbeats on a period under which the "bad health" is detected</span>
  system <span class="pl-k">=</span> system,                      <span class="pl-c"><span class="pl-c">//</span> the Akka system to create scheduler</span>
  client <span class="pl-k">=</span> <span class="pl-en">CW</span>,                          <span class="pl-c"><span class="pl-c">//</span> the cloudwatch client</span>
  actionEndpoint <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>arn:aws:sns:eu-west-1:896733075612:Cloudwatch-HeartBeat-Test<span class="pl-pds">"</span></span> <span class="pl-c"><span class="pl-c">//</span> the actionEndpoint (SQS) to which Cloudwatch will send the alarm</span>
)

hb.start() <span class="pl-c"><span class="pl-c">//</span> to start the heartbeat</span>

hb.stop() <span class="pl-c"><span class="pl-c">//</span> to stop the heartbeat</span></pre>
  </div> 
  <blockquote> 
   <p>Please note that you need to provide an implicit <code>ExecutionContext</code> for <code>CloudwatchAkkaHeartbeat.start/stop</code></p> 
  </blockquote> 
  <h5><a id="user-content-cakable-client" class="anchor" href="https://github.com/mfglabs/commons-aws#cakable-client" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Cakable client</h5> 
  <p><code>CloudwatchHeartbeatLayer</code> is ready to be used in a cake pattern</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">object</span> <span class="pl-en">MyAkkaService</span> <span class="pl-k">extends</span> <span class="pl-e">CloudwatchHeartbeatLayer</span> {
  <span class="pl-k">override</span> <span class="pl-k">val</span> <span class="pl-en">system</span> <span class="pl-k">=</span> myAkkaSystem

  <span class="pl-k">override</span> <span class="pl-k">val</span> <span class="pl-en">heartbeatClient</span> <span class="pl-k">=</span> myCloudClient

  <span class="pl-k">override</span> <span class="pl-k">val</span> <span class="pl-en">heartbeatName</span><span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> ...
  <span class="pl-k">override</span> <span class="pl-k">val</span> <span class="pl-en">heartbeatNamespace</span><span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> ...

  <span class="pl-k">override</span> <span class="pl-k">val</span> <span class="pl-en">heartbeatPeriod</span><span class="pl-k">:</span> <span class="pl-en">FiniteDuration</span> <span class="pl-k">=</span> ...
  <span class="pl-k">override</span> <span class="pl-k">val</span> <span class="pl-en">heartbeatAlarmPeriod</span><span class="pl-k">:</span> <span class="pl-en">FiniteDuration</span> <span class="pl-k">=</span> ...
  <span class="pl-k">override</span> <span class="pl-k">val</span> <span class="pl-en">heartbeatAlarmPeriodNb</span><span class="pl-k">:</span> <span class="pl-k">Int</span> <span class="pl-k">=</span> ...
  <span class="pl-k">override</span> <span class="pl-k">val</span> <span class="pl-en">heartbeatAlarmThreshold</span><span class="pl-k">:</span> <span class="pl-k">Int</span> <span class="pl-k">=</span> ...
  <span class="pl-k">override</span> <span class="pl-k">val</span> <span class="pl-en">heartbeatEndpoint</span><span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> ...

  ...
  <span class="pl-c"><span class="pl-c">//</span> start the heartbeat</span>
  heartbeat.start()(myExeCtx)
}</pre>
  </div> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/mfglabs/commons-aws#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p>This software is licensed under the Apache 2 license, quoted below.</p> 
  <p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p> 
  <p><a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">http://www.apache.org/licenses/LICENSE-2.0</a></p> 
  <p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p> 
 </article>
</div>