<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a href="https://github.com/mfglabs/commons-aws#streaming--asynchronous-scala-client-for-common-aws-services" aria-hidden="true" class="anchor" id="user-content-streaming--asynchronous-scala-client-for-common-aws-services" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Streaming / asynchronous Scala client for common AWS services</h1> 
  <p>Streaming / asynchronous Scala client for common AWS services. When possible, clients expose methods that return Akka Stream's Sources / Flows / Sinks to provide streaming facilities.</p> 
  <p>Clients use a pool of threads managed internally and optimized for blocking IO operations.</p> 
  <p>This library makes heavy use of our extension library for Akka Stream <a href="https://github.com/MfgLabs/akka-stream-extensions" target="_blank">MfgLabs/akka-stream-extensions</a>.</p> 
  <h2><a href="https://github.com/mfglabs/commons-aws#resolver" aria-hidden="true" class="anchor" id="user-content-resolver" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Resolver</h2> 
  <div class="highlight highlight-source-scala">
   <pre>resolvers <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-en">Resolver</span>.bintrayRepo(<span class="pl-s"><span class="pl-pds">"</span>mfglabs<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>maven<span class="pl-pds">"</span></span>)
)</pre>
  </div> 
  <h2><a href="https://github.com/mfglabs/commons-aws#dependencies" aria-hidden="true" class="anchor" id="user-content-dependencies" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Dependencies</h2> 
  <p>Three packages are available :</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.mfglabs<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>commons-aws-cloudwatch<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.12.2<span class="pl-pds">"</span></span>
libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.mfglabs<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>commons-aws-s3<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.12.2<span class="pl-pds">"</span></span>
libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.mfglabs<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>commons-aws-sqs<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.12.2<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>Changelog <a href="https://github.com/mfglabs/commons-aws/blob/master/CHANGELOG.md" target="_blank">here</a></p> 
  <h2><a href="https://github.com/mfglabs/commons-aws#usage" aria-hidden="true" class="anchor" id="user-content-usage" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <blockquote> 
   <p>Scaladoc is available <a href="http://mfglabs.github.io/commons-aws/api/current/" target="_blank">there</a></p> 
  </blockquote> 
  <h3><a href="https://github.com/mfglabs/commons-aws#commons" aria-hidden="true" class="anchor" id="user-content-commons" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Commons</h3> 
  <h4><a href="https://github.com/mfglabs/commons-aws#s3" aria-hidden="true" class="anchor" id="user-content-s3" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>S3</h4> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.mfglabs.commons.aws.s3.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">client</span> <span class="pl-k">=</span> <span class="pl-en">AmazonS3Client</span>()()) <span class="pl-c"><span class="pl-c">//</span> client with un-materialized composable Source / Flow / Sink</span>

<span class="pl-k">val</span> <span class="pl-en">fileStream</span><span class="pl-k">:</span> <span class="pl-en">Source</span>[<span class="pl-en">ByteString</span>, <span class="pl-k">Unit</span>] <span class="pl-k">=</span> client.getFileAsStream(bucket, key)

<span class="pl-k">val</span> <span class="pl-en">multipartfileStream</span><span class="pl-k">:</span> <span class="pl-en">Source</span>[<span class="pl-en">ByteString</span>, <span class="pl-k">Unit</span>] <span class="pl-k">=</span> client.getMultipartFileAsStream(bucket, prefix)

someBinaryStream.via(
  client.uploadStreamAsFile(bucket, key, chunkUploadConcurrency <span class="pl-k">=</span> <span class="pl-c1">2</span>)
)

someBinaryStream.via(
  client.uploadStreamAsMultipartFile(
    bucket,
    prefix,
    nbChunkPerFile <span class="pl-k">=</span> <span class="pl-c1">10000</span>,
    chunkUploadConcurrency <span class="pl-k">=</span> <span class="pl-c1">2</span>
  )
)

<span class="pl-k">val</span> <span class="pl-en">ops</span> <span class="pl-k">=</span> client.materialized(flowMaterializer) <span class="pl-c"><span class="pl-c">//</span> client with added materialized methods</span>

<span class="pl-k">val</span> <span class="pl-en">file</span><span class="pl-k">:</span> <span class="pl-en">Future</span>[<span class="pl-en">ByteString</span>] <span class="pl-k">=</span> ops.getFile(bucket, key)

<span class="pl-c"><span class="pl-c">//</span> More methods, check the source code</span></pre>
  </div> 
  <p>Please remark that you don't need any implicit <code>scala.concurrent.ExecutionContext</code> as it's directly provided and managed by [[AmazonS3Client]] itself.</p> 
  <p>There are also smart <code>AmazonS3Client</code> constructors that can be provided with custom. <code>java.util.concurrent.ExecutorService</code> if you want to manage your pools of threads.</p> 
  <h4><a href="https://github.com/mfglabs/commons-aws#sqs" aria-hidden="true" class="anchor" id="user-content-sqs" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>SQS</h4> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.mfglabs.commons.aws.sqs.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">sqs</span> <span class="pl-k">=</span> <span class="pl-en">AmazonSQSClient</span>()()

<span class="pl-k">val</span> <span class="pl-en">sender</span><span class="pl-k">:</span> <span class="pl-en">Flow</span>[<span class="pl-k">String</span>, <span class="pl-en">SendMessageResult</span>, <span class="pl-k">Unit</span>] <span class="pl-k">=</span>
  <span class="pl-en">Flow</span>[<span class="pl-k">String</span>].map { body <span class="pl-k">=&gt;</span>
    <span class="pl-k">val</span> <span class="pl-en">req</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SendMessageRequest</span>()
    req.setMessageBody(body)
    req.setQueueUrl(queueUrl)
    req
  }
  .via(sqs.sendMessageAsStream())

<span class="pl-k">val</span> <span class="pl-en">receiver</span><span class="pl-k">:</span> <span class="pl-en">Source</span>[<span class="pl-en">Message</span>, <span class="pl-k">Unit</span>] <span class="pl-k">=</span> sqs.receiveMessageAsStream(queueUrl, autoAck <span class="pl-k">=</span> <span class="pl-c1">false</span>)</pre>
  </div> 
  <p>Please remark that you don't need any implicit <code>scala.concurrent.ExecutionContext</code> as it's directly provided and managed by [[AmazonSQSClient]] itself.</p> 
  <p>There are also smart <code>AmazonSQSClient</code> constructors that can be provided with custom. <code>java.util.concurrent.ExecutorService</code> if you want to manage your pools of threads.</p> 
  <h4><a href="https://github.com/mfglabs/commons-aws#cloudwatch" aria-hidden="true" class="anchor" id="user-content-cloudwatch" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Cloudwatch</h4> 
  <p>In your code:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.mfglabs.commons.aws.</span><span class="pl-v">cloudwatch</span>
<span class="pl-k">import</span> <span class="pl-v">cloudwatch.</span><span class="pl-v">_ </span><span class="pl-c"><span class="pl-c">//</span> brings implicit extensions</span>

<span class="pl-c"><span class="pl-c">//</span> Create the client</span>
<span class="pl-k">val</span> <span class="pl-en">CW</span> <span class="pl-k">=</span> cloudwatch.<span class="pl-en">AmazonCloudwatchClient</span>()()

<span class="pl-c"><span class="pl-c">//</span> Use it</span>
<span class="pl-k">for</span> {
  metrics  <span class="pl-k">&lt;</span><span class="pl-k">-</span> <span class="pl-en">CW</span>.listMetrics()
} <span class="pl-k">yield</span> (metrics)</pre>
  </div> 
  <p>Please remark that you don't need any implicit <code>scala.concurrent.ExecutionContext</code> as it's directly provided and managed by [[AmazonCloudwatchClient]] itself.</p> 
  <p>There are also smart <code>AmazonCloudwatchClient</code> constructors that can be provided with custom. <code>java.util.concurrent.ExecutorService</code> if you want to manage your pools of threads.</p> 
  <h2><a href="https://github.com/mfglabs/commons-aws#license" aria-hidden="true" class="anchor" id="user-content-license" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p>This software is licensed under the Apache 2 license, quoted below.</p> 
  <p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p> 
  <p><a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">http://www.apache.org/licenses/LICENSE-2.0</a></p> 
  <p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p> 
 </article>
</div>