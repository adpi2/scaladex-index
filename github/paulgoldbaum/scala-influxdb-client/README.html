<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-scala-influxdb-client" class="anchor" href="https://github.com/paulgoldbaum/scala-influxdb-client#scala-influxdb-client" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>scala-influxdb-client</h1> 
  <p><a href="https://travis-ci.org/paulgoldbaum/scala-influxdb-client" target="_blank"><img src="https://camo.githubusercontent.com/47e260d8de14359481286173bc11c4bf8dbdb877/68747470733a2f2f7472617669732d63692e6f72672f7061756c676f6c646261756d2f7363616c612d696e666c757864622d636c69656e742e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/paulgoldbaum/scala-influxdb-client.svg?branch=master" style="max-width:100%;"></a> <a href="http://codecov.io/github/paulgoldbaum/scala-influxdb-client?branch=master" target="_blank"><img src="https://camo.githubusercontent.com/cdd6a3efffda57c65b0ad7dff814da8b16573a3b/687474703a2f2f636f6465636f762e696f2f6769746875622f7061756c676f6c646261756d2f7363616c612d696e666c757864622d636c69656e742f636f7665726167652e7376673f6272616e63683d6d6173746572" alt="codecov.io" data-canonical-src="http://codecov.io/github/paulgoldbaum/scala-influxdb-client/coverage.svg?branch=master" style="max-width:100%;"></a></p> 
  <p>Asynchronous library for accessing InfluxDB from Scala.</p> 
  <h2><a id="user-content-installation" class="anchor" href="https://github.com/paulgoldbaum/scala-influxdb-client#installation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Installation</h2> 
  <p>Add the following to your <code>build.sbt</code></p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.paulgoldbaum<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>scala-influxdb-client<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.5.2<span class="pl-pds">"</span></span></pre>
  </div> 
  <p><strong>NOTE</strong>: Starting with version 0.5.0 JDK 8 is required.</p> 
  <h2><a id="user-content-connecting" class="anchor" href="https://github.com/paulgoldbaum/scala-influxdb-client#connecting" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Connecting</h2> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.paulgoldbaum.influxdbclient.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.ExecutionContext.Implicits.</span><span class="pl-v">global</span>

<span class="pl-k">val</span> <span class="pl-en">influxdb</span> <span class="pl-k">=</span> <span class="pl-en">InfluxDB</span>.connect(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, <span class="pl-c1">8086</span>)</pre>
  </div> 
  <p>And when all done close the client:</p> 
  <div class="highlight highlight-source-scala">
   <pre>influxdb.close()</pre>
  </div> 
  <h2><a id="user-content-usage" class="anchor" href="https://github.com/paulgoldbaum/scala-influxdb-client#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <p>All methods are non-blocking and return a <code>Future</code>; in most cases a <code>Future[QueryResponse]</code> which might be empty if the action does not return a result. Failing <code>Futures</code> carry a subclass of <code>InfluxDBException</code></p> 
  <h3><a id="user-content-working-with-databases" class="anchor" href="https://github.com/paulgoldbaum/scala-influxdb-client#working-with-databases" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Working with databases</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">database</span> <span class="pl-k">=</span> influxdb.selectDatabase(<span class="pl-s"><span class="pl-pds">"</span>my_database<span class="pl-pds">"</span></span>)
database.exists() <span class="pl-c"><span class="pl-c">//</span> =&gt; Future[Boolean]</span>
database.create()
database.drop()</pre>
  </div> 
  <h3><a id="user-content-writing-data" class="anchor" href="https://github.com/paulgoldbaum/scala-influxdb-client#writing-data" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Writing data</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">point</span> <span class="pl-k">=</span> <span class="pl-en">Point</span>(<span class="pl-s"><span class="pl-pds">"</span>cpu<span class="pl-pds">"</span></span>)
  .addTag(<span class="pl-s"><span class="pl-pds">"</span>host<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>my.server<span class="pl-pds">"</span></span>)
  .addField(<span class="pl-s"><span class="pl-pds">"</span>1m<span class="pl-pds">"</span></span>, <span class="pl-c1">0.3</span>)
  .addField(<span class="pl-s"><span class="pl-pds">"</span>5m<span class="pl-pds">"</span></span>, <span class="pl-c1">0.4</span>)
  .addField(<span class="pl-s"><span class="pl-pds">"</span>15m<span class="pl-pds">"</span></span>, <span class="pl-c1">0.5</span>)
database.write(point)</pre>
  </div> 
  <p>Additionally, timestamp precision, consistency and custom retention policies can be specified</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">point</span> <span class="pl-k">=</span> <span class="pl-en">Point</span>(<span class="pl-s"><span class="pl-pds">"</span>cpu<span class="pl-pds">"</span></span>, <span class="pl-en">System</span>.currentTimeMillis())
database.write(point,
               precision <span class="pl-k">=</span> <span class="pl-en">Precision</span>.<span class="pl-en">MILLISECONDS</span>,
               consistency <span class="pl-k">=</span> <span class="pl-en">Consistency</span>.<span class="pl-en">ALL</span>, 
               retentionPolicy <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>custom_rp<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>If no precision parameter is given, InfluxDB assumes timestamps to be in nanoseconds.</p> 
  <p>If a write fails, it's future will contain a subclass of <code>WriteException</code>. This can be handled through the usual methods of error handling in <code>Futures</code>, i.e.</p> 
  <div class="highlight highlight-source-scala">
   <pre>database.write(point)
  <span class="pl-c"><span class="pl-c">//</span> ...</span>
  .recover{ <span class="pl-k">case</span> <span class="pl-v">e</span>: <span class="pl-en">WriteException</span> <span class="pl-k">=&gt;</span> ...}</pre>
  </div> 
  <p>Multiple points can be written in one operation by using the bulkWrite operation</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">points</span> <span class="pl-k">=</span> <span class="pl-en">List</span>(
  <span class="pl-en">Point</span>(<span class="pl-s"><span class="pl-pds">"</span>test_measurement1<span class="pl-pds">"</span></span>).addField(<span class="pl-s"><span class="pl-pds">"</span>value1<span class="pl-pds">"</span></span>, <span class="pl-c1">123</span>),
  <span class="pl-en">Point</span>(<span class="pl-s"><span class="pl-pds">"</span>test_measurement2<span class="pl-pds">"</span></span>).addField(<span class="pl-s"><span class="pl-pds">"</span>value2<span class="pl-pds">"</span></span>, <span class="pl-c1">123</span>),
  <span class="pl-en">Point</span>(<span class="pl-s"><span class="pl-pds">"</span>test_measurement3<span class="pl-pds">"</span></span>).addField(<span class="pl-s"><span class="pl-pds">"</span>value3<span class="pl-pds">"</span></span>, <span class="pl-c1">123</span>)
)
database.bulkWrite(points, precision <span class="pl-k">=</span> <span class="pl-en">Precision</span>.<span class="pl-en">MILLISECONDS</span>)</pre>
  </div> 
  <h3><a id="user-content-querying-the-database" class="anchor" href="https://github.com/paulgoldbaum/scala-influxdb-client#querying-the-database" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Querying the database</h3> 
  <p>Given the following data:</p> 
  <pre><code>name: cpu
---------
time                            host     region   value
2015-10-14T18:31:14.744203449Z  serverA  us_west  0.64
2015-10-14T18:31:19.242472211Z  serverA  us_west  0.85
2015-10-14T18:31:22.644254309Z  serverA  us_west  0.43
</code></pre> 
  <div class="highlight highlight-source-scala">
   <pre>database.query(<span class="pl-s"><span class="pl-pds">"</span>SELECT * FROM cpu<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>This returns a <code>Future[QueryResult]</code>. To access the list of records use</p> 
  <div class="highlight highlight-source-scala">
   <pre>result.series.head.records</pre>
  </div> 
  <p>which we can iterate to access the different fields</p> 
  <div class="highlight highlight-source-scala">
   <pre>result.series.head.records.foreach(record <span class="pl-k">=&gt;</span> record(<span class="pl-s"><span class="pl-pds">"</span>host<span class="pl-pds">"</span></span>))</pre>
  </div> 
  <p>For each record, we can access all it's values at once using the allValues property</p> 
  <div class="highlight highlight-source-scala">
   <pre>result.series.head.records(<span class="pl-c1">0</span>).allValues</pre>
  </div> 
  <p>If we are only interested in the "value" field of each record</p> 
  <div class="highlight highlight-source-scala">
   <pre>result.series.head.points(<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>returns a list of just the <code>value</code> field of each record.</p> 
  <p>The list of column names can be accessed through</p> 
  <div class="highlight highlight-source-scala">
   <pre>result.series.head.columns</pre>
  </div> 
  <p>Multiple queries can be sent to the server at the same time using the <code>multiQuery</code> method</p> 
  <div class="highlight highlight-source-scala">
   <pre>database.multiQuery(<span class="pl-en">List</span>(<span class="pl-s"><span class="pl-pds">"</span>SELECT * FROM cpu LIMIT 5<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>SELECT * FROM cpu LIMIT 5 OFFSET 5<span class="pl-pds">"</span></span>))</pre>
  </div> 
  <p>In this case, the result is a <code>Future[List[QueryResult]]</code>.</p> 
  <p>Errors during queries return a <code>QueryException</code>.</p> 
  <h3><a id="user-content-managing-users" class="anchor" href="https://github.com/paulgoldbaum/scala-influxdb-client#managing-users" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Managing users</h3> 
  <div class="highlight highlight-source-scala">
   <pre>influxdb.createUser(username, password, isClusterAdmin)
influxdb.dropUser(username)
influxdb.showUsers()
influxdb.setUserPassword(username, password)
influxdb.grantPrivileges(username, database, privilege)
influxdb.revokePrivileges(username, database, privilege)
influxdb.makeClusterAdmin(username)
influxdb.userIsClusterAdmin(username)</pre>
  </div> 
  <h3><a id="user-content-managing-retention-policies" class="anchor" href="https://github.com/paulgoldbaum/scala-influxdb-client#managing-retention-policies" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Managing retention policies</h3> 
  <div class="highlight highlight-source-scala">
   <pre>database.createRetentionPolicy(name, duration, replication, default)
database.showRetentionPolicies()
database.dropRetentionPolicy(name)
database.alterRetentionPolicy(name, duration, replication, default)</pre>
  </div> 
  <p><strong>NOTE</strong>: User and retention policy management primitives return an empty <code>QueryResult</code> or fail with a <code>QueryException</code> in case of an error.</p> 
  <h3><a id="user-content-writing-over-udp" class="anchor" href="https://github.com/paulgoldbaum/scala-influxdb-client#writing-over-udp" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Writing over UDP</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.paulgoldbaum.influxdbclient.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">udpClient</span> <span class="pl-k">=</span> <span class="pl-en">InfluxDB</span>.udpConnect(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, <span class="pl-c1">8086</span>)
<span class="pl-k">val</span> <span class="pl-en">point</span> <span class="pl-k">=</span> <span class="pl-en">Point</span>(<span class="pl-s"><span class="pl-pds">"</span>cpu<span class="pl-pds">"</span></span>, <span class="pl-en">System</span>.currentTimeMillis())
udpClient.write(point)</pre>
  </div> 
  <p>Points can also be written in bulk</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">points</span> <span class="pl-k">=</span> <span class="pl-en">List</span>(
  <span class="pl-en">Point</span>(<span class="pl-s"><span class="pl-pds">"</span>test_measurement1<span class="pl-pds">"</span></span>).addField(<span class="pl-s"><span class="pl-pds">"</span>value1<span class="pl-pds">"</span></span>, <span class="pl-c1">123</span>),
  <span class="pl-en">Point</span>(<span class="pl-s"><span class="pl-pds">"</span>test_measurement2<span class="pl-pds">"</span></span>).addField(<span class="pl-s"><span class="pl-pds">"</span>value2<span class="pl-pds">"</span></span>, <span class="pl-c1">123</span>),
  <span class="pl-en">Point</span>(<span class="pl-s"><span class="pl-pds">"</span>test_measurement3<span class="pl-pds">"</span></span>).addField(<span class="pl-s"><span class="pl-pds">"</span>value3<span class="pl-pds">"</span></span>, <span class="pl-c1">123</span>)
)
udpClient.bulkWrite(points)</pre>
  </div> 
 </article>
</div>