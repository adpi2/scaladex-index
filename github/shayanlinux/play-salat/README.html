<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-disclaimer" class="anchor" href="https://github.com/shayanlinux/play-salat#disclaimer" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Disclaimer</h1> 
  <p><strong>This is continuation of Leon's <a href="https://github.com/leon/play-salat" target="_blank">play-salat plugin</a> for future versions of Play and is comptabile with latest version of play 2.5.3. Compatibility with earlier versions is not checked, please use older artifacts for older versions of Play Framework. Update your Build.scala or build.sbt with artifactId mentioned below.</strong></p> 
  <h1><a id="user-content-mongodb-salat-plugin-for-play-framework-2" class="anchor" href="https://github.com/shayanlinux/play-salat#mongodb-salat-plugin-for-play-framework-2" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>MongoDB Salat plugin for Play Framework 2</h1> 
  <p>Salat is a ORM for MongoDBs scala driver called Casbah.</p> 
  <p>The plugin's functionality simpifies the use of salat by presenting a simple "play style" configuration and binders for <code>ObjectId</code></p> 
  <ul> 
   <li><a href="https://github.com/mongodb/casbah" target="_blank">https://github.com/mongodb/casbah</a></li> 
   <li><a href="https://github.com/salat/salat" target="_blank">https://github.com/salat/salat</a></li> 
  </ul> 
  <p><a href="https://travis-ci.org/shayanlinux/play-salat" target="_blank"><img src="https://camo.githubusercontent.com/8e81e5d1db13b67d3e73cf76a65691aec4b2cf97/68747470733a2f2f7472617669732d63692e6f72672f73686179616e6c696e75782f706c61792d73616c61742e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/shayanlinux/play-salat.svg?branch=master" style="max-width:100%;"></a></p> 
  <h2><a id="user-content-installation" class="anchor" href="https://github.com/shayanlinux/play-salat#installation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Installation</h2> 
  <p>Start by adding the plugin, in your <code>project/Build.scala</code></p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">appDependencies</span> <span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>com.github.shayanlinux<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>play-plugins-salat<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.6.0<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <p>Then we can add the implicit converstions to and from ObjectId by adding to the routesImport and add ObjectId to all the templates</p> 
  <p>####Play 2.3.x and subsequent</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">play.twirl.sbt.Import.</span><span class="pl-v">TwirlKeys</span>
<span class="pl-k">val</span> <span class="pl-en">main</span> <span class="pl-k">=</span> <span class="pl-en">Project</span>(appName, file(<span class="pl-s"><span class="pl-pds">"</span>.<span class="pl-pds">"</span></span>)).enablePlugins(play.<span class="pl-en">PlayScala</span>).settings(
  routesImport <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>se.radley.plugin.salat.Binders._<span class="pl-pds">"</span></span>,
  <span class="pl-en">TwirlKeys</span>.templateImports <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>org.bson.types.ObjectId<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <p>We continue to edit the <code>conf/application.conf</code> file. We need to disable some plugins that we don't need. Add these lines:</p> 
  <pre><code>dbplugin = disabled
evolutionplugin = disabled
ehcacheplugin = disabled
</code></pre> 
  <p><strong>Only for Play 2.3.x and 2.4.x</strong></p> 
  <p>We now need to register the plugin, this is done by creating(or appending) to the <code>conf/play.plugins</code> file</p> 
  <pre><code>500:se.radley.plugin.salat.SalatPlugin
</code></pre> 
  <p><strong>Only for Play 2.5.x+</strong></p> 
  <p>Use version <code>1.6.0</code> that provides Play-Salat <strong>not</strong> as a <em>plugin</em> but as a <em>Guicable module</em>.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">appDependencies</span> <span class="pl-k">=</span> <span class="pl-en">Seq</span>(
  <span class="pl-s"><span class="pl-pds">"</span>com.github.shayanlinux<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>play-plugins-salat<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.6.0<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <p>Add the following line to the <code>conf/application.conf</code> file. This will enable the Play-Salat module and Guice will inject it.</p> 
  <pre><code>play.modules.enabled  += "se.radley.plugin.salat.PlaySalatModule"
</code></pre> 
  <h2><a id="user-content-configuration" class="anchor" href="https://github.com/shayanlinux/play-salat#configuration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Configuration</h2> 
  <p>now we need to setup our connections. The plugin is modeled after how plays DB plugin is built.</p> 
  <pre><code>mongodb.default.db = "mydb"
# Optional values
#mongodb.default.host = "127.0.0.1"
#mongodb.default.port = 27017
#mongodb.default.user = "leon"
#mongodb.default.password = "123456"

# MongoURI
# ~~~~~
# a MongoURI can also be used http://www.mongodb.org/display/DOCS/Connections
# mongodb.default.uri = "mongodb://127.0.0.1:27017,mongodb.org:1337/salat-test"

# WriteConcern
# ~~~~~
# Can be any of the following
#
# fsyncsafe - Exceptions are raised for network issues and server errors; Write operations wait for the server to flush data to disk.
# replicassafe - Exceptions are raised for network issues and server errors; waits for at least 2 servers for the write operation.
# safe - Exceptions are raised for network issues and server errors; waits on a server for the write operation.
# normal - Exceptions are raised for network issues but not server errors.

#mongodb.default.writeconcern = "safe"

# Replica sets
# ~~~~~
# http://www.mongodb.org/display/DOCS/Why+Replica+Sets
#
# To user a replicaset instead of a single host, omit optional values and use the configuration below instead.
# Since replica sets use public key authentication, user and password won't work together with the replicaset option.

#mongodb.default.replicaset {
#    host1.host = "10.0.0.1"
#
#    host2.host = "10.0.0.2"
#    host2.port = 27018
#}

# Mongo Options
# ~~~~~
# http://api.mongodb.org/java/2.8.0/com/mongodb/MongoOptions.html
#
# For passing custom options to the MongoConnection add the properties under "options". Add just the ones which are different from defaults.

#mongodb.default.options {
#    connectionsPerHost = 100
#    threadsAllowedToBlockForConnectionMultiplier = 1000
#    connectTimeout = 60000
#}
</code></pre> 
  <h2><a id="user-content-more-that-one-db" class="anchor" href="https://github.com/shayanlinux/play-salat#more-that-one-db" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>More that one DB?</h2> 
  <p>If you would like to connect to two databases you need to create two source names. You also can specify different options per database</p> 
  <pre><code>mongodb.myotherdb.db = "otherdb"
mongodb.myotherdb.options.connectionsPerHost = 80
</code></pre> 
  <p>Then you can call <code>playSalat.collection("collectionname", "myotherdb")</code></p> 
  <h2><a id="user-content-what-a-model-looks-like" class="anchor" href="https://github.com/shayanlinux/play-salat#what-a-model-looks-like" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>What a model looks like</h2> 
  <p>All models must be case classes otherwise salat doesn't know how to properly transform them into MongoDBObject's</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">package</span> <span class="pl-en">models</span>

<span class="pl-k">import</span> <span class="pl-v">java.util.</span><span class="pl-v">Date</span>
<span class="pl-k">import</span> <span class="pl-v">com.novus.salat.annotations.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">play.api.libs.json.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">play.api.libs.functional.syntax.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">se.radley.plugin.salat.Binders.</span><span class="pl-v">_</span>

<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">User</span>(
  <span class="pl-v">id</span>: <span class="pl-en">ObjectId</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">ObjectId,</span>
  <span class="pl-v">username</span>: <span class="pl-k">String</span>,
  <span class="pl-v">password</span>: <span class="pl-k">String</span>,
  <span class="pl-v">address</span>: <span class="pl-en">List</span>[<span class="pl-en">Address</span>] <span class="pl-k">=</span> <span class="pl-c1">Nil</span>,
  <span class="pl-v">added</span>: <span class="pl-en">Date</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Date</span>(),
  <span class="pl-v">updated</span>: <span class="pl-en">Option</span>[<span class="pl-en">Date</span>] <span class="pl-k">=</span> <span class="pl-c1">None</span>,
  <span class="pl-k">@</span><span class="pl-en">Key</span>(<span class="pl-s"><span class="pl-pds">"</span>company_id<span class="pl-pds">"</span></span>) <span class="pl-v">company</span>: <span class="pl-en">Option</span>[<span class="pl-en">ObjectId</span>] <span class="pl-k">=</span> <span class="pl-c1">None</span>)</pre>
  </div> 
  <h2><a id="user-content-dependency-injection" class="anchor" href="https://github.com/shayanlinux/play-salat#dependency-injection" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Dependency Injection</h2> 
  <p>Modules managed by the <em>Guice dependency injection framework</em> are declared like this:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">com.google.inject.</span><span class="pl-v">AbstractModule</span>
<span class="pl-k">import</span> <span class="pl-v">services.</span>{ <span class="pl-v">UserDAO</span>, <span class="pl-v">MongoContext</span> }

<span class="pl-k">class</span> <span class="pl-en">Module</span> <span class="pl-k">extends</span> <span class="pl-e">AbstractModule</span> {

  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">configure</span>() <span class="pl-k">=</span> {
    bind(<span class="pl-c1">classOf</span>[<span class="pl-en">MongoContext</span>])
    bind(<span class="pl-c1">classOf</span>[<span class="pl-en">UserDAO</span>])
  }
}</pre>
  </div> 
  <h2><a id="user-content-collections" class="anchor" href="https://github.com/shayanlinux/play-salat#collections" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Collections</h2> 
  <p>A <em>Salat Mongo Context</em> is typically implemented like this:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">package</span> <span class="pl-en">services</span>

<span class="pl-k">import</span> <span class="pl-v">javax.inject.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">com.novus.salat.</span>{ <span class="pl-v">TypeHintFrequency</span>, <span class="pl-v">StringTypeHintStrategy</span>, <span class="pl-v">Context</span> }
<span class="pl-k">import</span> <span class="pl-v">play.api.</span><span class="pl-v">Environment</span>

<span class="pl-k">@</span><span class="pl-en">Singleton</span>
<span class="pl-k">class</span> <span class="pl-en">MongoContext</span> <span class="pl-k">@</span><span class="pl-en">Inject</span>() (<span class="pl-v">environment</span>: <span class="pl-en">Environment</span>) {

  <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">context</span> <span class="pl-k">=</span> {
    <span class="pl-k">val</span> <span class="pl-en">context</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Context</span> {
      <span class="pl-k">val</span> <span class="pl-en">name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>global<span class="pl-pds">"</span></span>
      <span class="pl-k">override</span> <span class="pl-k">val</span> <span class="pl-en">typeHintStrategy</span> <span class="pl-k">=</span> <span class="pl-en">StringTypeHintStrategy</span>(when <span class="pl-k">=</span> <span class="pl-en">TypeHintFrequency</span>.<span class="pl-en">WhenNecessary</span>, typeHint <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>_t<span class="pl-pds">"</span></span>)
    }
    context.registerGlobalKeyOverride(remapThis <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, toThisInstead <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>_id<span class="pl-pds">"</span></span>)
    context.registerClassLoader(environment.classLoader)
    context
  }
}</pre>
  </div> 
  <p>A DAO to a collection with <em>Salat Mongo Context</em> and <em>Play Salat Plugin</em> injected is implemented like this:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">package</span> <span class="pl-en">services</span>

<span class="pl-k">import</span> <span class="pl-v">javax.inject.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">com.novus.salat.dao.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">com.mongodb.casbah.Imports.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">se.radley.plugin.salat.</span><span class="pl-v">PlaySalat</span>
<span class="pl-k">import</span> <span class="pl-v">models.</span><span class="pl-v">User</span>

<span class="pl-k">@</span><span class="pl-en">Singleton</span>
<span class="pl-k">class</span> <span class="pl-en">UserDAO</span> <span class="pl-k">@</span><span class="pl-en">Inject</span>() (<span class="pl-v">playSalat</span>: <span class="pl-en">PlaySalat</span>, <span class="pl-v">mongoContext</span>: <span class="pl-en">MongoContext</span>) <span class="pl-k">extends</span> <span class="pl-e">ModelCompanion</span>[<span class="pl-en">User</span>, <span class="pl-en">ObjectId</span>] {
  <span class="pl-k">import</span> <span class="pl-v">mongoContext.</span><span class="pl-v">_</span>

  <span class="pl-k">def</span> <span class="pl-en">collection</span> <span class="pl-k">=</span> playSalat.collection(<span class="pl-s"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span>)
  <span class="pl-k">val</span> <span class="pl-en">dao</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SalatDAO</span>[<span class="pl-en">User</span>, <span class="pl-en">ObjectId</span>](collection) {}

  <span class="pl-c"><span class="pl-c">//</span> Queries</span>
  <span class="pl-k">def</span> <span class="pl-en">findOneByUsername</span>(<span class="pl-v">username</span>: <span class="pl-k">String</span>)<span class="pl-k">:</span> <span class="pl-en">Option</span>[<span class="pl-en">User</span>] <span class="pl-k">=</span>
    dao.findOne(<span class="pl-en">MongoDBObject</span>(<span class="pl-s"><span class="pl-pds">"</span>username<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> username))

  <span class="pl-k">def</span> <span class="pl-en">findByCountry</span>(<span class="pl-v">country</span>: <span class="pl-k">String</span>) <span class="pl-k">=</span>
    dao.find(<span class="pl-en">MongoDBObject</span>(<span class="pl-s"><span class="pl-pds">"</span>address.country<span class="pl-pds">"</span></span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> country))
}</pre>
  </div> 
  <h2><a id="user-content-capped-collections" class="anchor" href="https://github.com/shayanlinux/play-salat#capped-collections" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Capped Collections</h2> 
  <p>If you want to use capped collections check this out.</p> 
  <p>Model:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">package</span> <span class="pl-en">models</span>

<span class="pl-k">import</span> <span class="pl-v">java.util.</span><span class="pl-v">Date</span>
<span class="pl-k">import</span> <span class="pl-v">com.mongodb.casbah.Imports.</span><span class="pl-v">_</span>

<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">LogItem</span>(
  <span class="pl-v">id</span>: <span class="pl-en">ObjectId</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">ObjectId,</span>
  <span class="pl-v">message</span>: <span class="pl-k">String</span>)</pre>
  </div> 
  <p>DAO (also remember to register it in the <em>Module</em> class):</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">package</span> <span class="pl-en">services</span>

<span class="pl-k">import</span> <span class="pl-v">javax.inject.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">com.novus.salat.dao.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">com.mongodb.casbah.Imports.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">se.radley.plugin.salat.</span><span class="pl-v">PlaySalat</span>
<span class="pl-k">import</span> <span class="pl-v">models.</span><span class="pl-v">LogItem</span>

<span class="pl-k">@</span><span class="pl-en">Singleton</span>
<span class="pl-k">class</span> <span class="pl-en">LogItemDAO</span> <span class="pl-k">@</span><span class="pl-en">Inject</span>() (<span class="pl-v">playSalat</span>: <span class="pl-en">PlaySalat</span>, <span class="pl-v">mongoContext</span>: <span class="pl-en">MongoContext</span>) <span class="pl-k">extends</span> <span class="pl-e">ModelCompanion</span>[<span class="pl-en">LogItem</span>, <span class="pl-en">ObjectId</span>] {
  <span class="pl-k">import</span> <span class="pl-v">mongoContext.</span><span class="pl-v">_</span>

  <span class="pl-k">val</span> <span class="pl-en">collection</span> <span class="pl-k">=</span> playSalat.cappedCollection(<span class="pl-s"><span class="pl-pds">"</span>logitems<span class="pl-pds">"</span></span>,
    <span class="pl-c1">1048576</span>, <span class="pl-c"><span class="pl-c">//</span> max size is 1 MB = 10485760 bytes</span>
    <span class="pl-en">Some</span>(<span class="pl-c1">10</span>)) <span class="pl-c"><span class="pl-c">//</span> max number of documents = 10</span>
  <span class="pl-k">val</span> <span class="pl-en">dao</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SalatDAO</span>[<span class="pl-en">LogItem</span>, <span class="pl-en">ObjectId</span>](collection) {}
}</pre>
  </div> 
  <h2><a id="user-content-gridfs" class="anchor" href="https://github.com/shayanlinux/play-salat#gridfs" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>GridFS</h2> 
  <p><strong>TODO</strong> adjust the example to use dependency injection.</p> 
  <p>If you want to store things in gridfs you can do this</p> 
  <pre><code>package models

import play.api.Play.current
import se.radley.plugin.salat._
import mongoContext._

val files = gridFS("myfiles")
</code></pre> 
  <h2><a id="user-content-mongo-context" class="anchor" href="https://github.com/shayanlinux/play-salat#mongo-context" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Mongo Context</h2> 
  <p>All models must contain an implicit salat Context. The context is somewhat like a hibernate dialect. You can override mapping names and configure how salat does it's type hinting. read more about it <a href="https://github.com/salat/salat/wiki/CustomContext" target="_blank">here</a></p> 
  <p>In the sample there is a custom <code>mongoContext</code>, partly because we need to add plays classloader to salat so it knows when to reload it's graters, but also so we can override all models id fields to be serialized to MongoDB's _id.</p> 
  <ul> 
   <li><a href="https://github.com/shayanlinux/play-salat/tree/master/sample" target="_blank">Sample</a></li> 
  </ul> 
  <h2><a id="user-content-enums" class="anchor" href="https://github.com/shayanlinux/play-salat#enums" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Enums?</h2> 
  <p>If you're using Scala Enumerations have a look at my play-enumeration project.</p> 
  <ul> 
   <li><a href="https://github.com/leon/play-enumeration" target="_blank">play-enumeration</a></li> 
  </ul> 
 </article>
</div>