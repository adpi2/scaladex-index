<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <p><a href="https://travis-ci.org/Workday/prometheus-akka" target="_blank"><img src="https://camo.githubusercontent.com/ddfe137d59653c05ac0a262e5b1be9902a7d87e5/68747470733a2f2f7472617669732d63692e6f72672f576f726b6461792f70726f6d6574686575732d616b6b612e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/Workday/prometheus-akka.svg?branch=master" style="max-width:100%;"></a> <a href="https://codecov.io/gh/Workday/prometheus-akka/branch/master" target="_blank"><img src="https://camo.githubusercontent.com/87a0d37aee4b6bcbb175d4328735f3020fd715d1/68747470733a2f2f636f6465636f762e696f2f67682f576f726b6461792f70726f6d6574686575732d616b6b612f636f7665726167652e7376673f6272616e63683d6d6173746572" alt="codecov.io" data-canonical-src="https://codecov.io/gh/Workday/prometheus-akka/coverage.svg?branch=master" style="max-width:100%;"></a></p> 
  <h1><a id="user-content-prometheus-akka" class="anchor" href="https://github.com/workday/prometheus-akka#prometheus-akka" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>prometheus-akka</h1> 
  <p>This project is a fork of <a href="http://kamon.io/documentation/kamon-akka/0.6.6/overview/" target="_blank">Kamon-Akka</a>. The Kamon team have done a great job and if you are just experimenting with metrics collection, then their tools and documentation are a great starting point. Our internal monitoring tools work better with <a href="https://github.com/prometheus/client_java" target="_blank">Prometheus Java Client</a> based metrics than with <a href="http://kamon.io/documentation/get-started/" target="_blank">Kamon</a> based metrics. The use of the <a href="https://github.com/MonsantoCo/kamon-prometheus" target="_blank">Kamon-Prometheus</a> bridge was not as smooth as we had hoped.</p> 
  <p>Other Differences from Kamon-Akka:</p> 
  <ul> 
   <li>we do not support Kamon TraceContexts, as currently have no use case for them yet</li> 
   <li>we only support Scala 2.11 and Scala 2.12</li> 
   <li>we only build with Akka 2.4 but this jar works fine with Akka 2.5 too</li> 
   <li>we have added Actor Group support, similar to the support that will soon be released in kamon-akka (see description in Metrics section)</li> 
  </ul> 
  <p>The jar will soon be published to Maven Central.</p> 
  <p>There is a sample project at <a href="https://github.com/pjfanning/prometheus-akka-sample" target="_blank">https://github.com/pjfanning/prometheus-akka-sample</a></p> 
  <h2><a id="user-content-usage" class="anchor" href="https://github.com/workday/prometheus-akka#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <p>To enable monitoring, include the appropriate jar as a dependency and include the following Java runtime flag in your Java startup command (aspectjweaver is a transitive dependency of prometheus-akka):</p> 
  <p>-javaagent:/path/to/aspectjweaver-1.8.10.jar</p> 
  <p>If you don't have a Prometheus Metrics endpoint already, you can use the <a href="https://github.com/prometheus/client_java/blob/master/simpleclient_servlet/src/main/java/io/prometheus/client/exporter/MetricsServlet.java" target="_blank">Prometheus MetricsServlet</a>. If you don't want to use a servlet, you can work directly with the <a href="https://github.com/prometheus/client_java/blob/master/simpleclient_common/src/main/java/io/prometheus/client/exporter/common/TextFormat.java" target="_blank">Prometheus TextFormat</a> class.</p> 
  <h2><a id="user-content-configuration" class="anchor" href="https://github.com/workday/prometheus-akka#configuration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Configuration</h2> 
  <p>The metrics are configured using <a href="https://github.com/typesafehub/config" target="_blank">application.conf</a> files. There is a default <a href="https://github.com/Workday/prometheus-akka/blob/master/src/main/resources/reference.conf" target="_blank">reference.conf</a> that enables only some metrics.</p> 
  <h3><a id="user-content-metrics" class="anchor" href="https://github.com/workday/prometheus-akka#metrics" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Metrics</h3> 
  <h4><a id="user-content-dispatcher" class="anchor" href="https://github.com/workday/prometheus-akka#dispatcher" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Dispatcher</h4> 
  <ul> 
   <li>differs a little between ForkJoin dispatchers and ThreadPool dispatchers</li> 
   <li>ForkJoin: parallelism, activeThreadCount, runningThreadCount, queuedSubmissionCount, queuedTaskCountGauge stealCount</li> 
   <li>ThreadPool: activeThreadCount, corePoolSize, currentPoolSize, largestPoolSize, maxPoolSize, completedTaskCount, totalTaskCount</li> 
  </ul> 
  <h4><a id="user-content-actor" class="anchor" href="https://github.com/workday/prometheus-akka#actor" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Actor</h4> 
  <ul> 
   <li>One metric per actor instance</li> 
   <li>mailboxSize (current size), processingTime, timeInMailbox, message, errors</li> 
  </ul> 
  <h4><a id="user-content-actor-router" class="anchor" href="https://github.com/workday/prometheus-akka#actor-router" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Actor Router</h4> 
  <ul> 
   <li>One metric per router instance, summed across all routee actors</li> 
   <li>routingTime, timeInMailbox, message, errors</li> 
  </ul> 
  <h4><a id="user-content-actor-group" class="anchor" href="https://github.com/workday/prometheus-akka#actor-group" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Actor Group</h4> 
  <ul> 
   <li>Each actor group has its own include/exclude rules and you can define many groups with individual actors being allowed to be included in many groups - the metrics are summed across all actors in the group</li> 
   <li>actorCount (current active actors), mailboxSize (current size), processingTime, timeInMailbox, message, errors</li> 
  </ul> 
 </article>
</div>