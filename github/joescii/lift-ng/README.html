<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-lift-ng" class="anchor" href="https://github.com/joescii/lift-ng#lift-ng" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>lift-ng</h1> 
  <p><strong>lift-ng</strong> is the most powerful, most secure AngularJS backend available today.</p> 
  <p>The design philosophy of <strong>lift-ng</strong> is to capture the spirit of both <a href="http://liftweb.net" target="_blank">Lift</a> and <a href="http://docs.angularjs.org/guide/overview" target="_blank">AngularJS</a> into one package. The result is a secure-by-default framework facilitating powerful and robust client/server interactions for building today's modern web applications. By utilizing Scala's powerfully-flexible language, <strong>lift-ng</strong> provides a DSL that is natural to use for AngularJS developers and Scala developers alike.</p> 
  <p>Lift as a backend should appeal to AngularJS developers for the following reasons:</p> 
  <ul> 
   <li>Lift's templating is unlike most web application frameworks in that it is plain HTML. There is no massaging of your Angular templates to make the framework happy.</li> 
   <li>The approach of manipulating the templates on the server by Lift is similar to how you manipulate them on the client with AngularJS. Hence you can manipulate the DOM at the time you know the information, while on the client or earlier while on the server.</li> 
   <li>Lift is not MVC. No need to navigate another MVC framework while building with Angular's MVC approach.</li> 
   <li>Lift is excellent at slinging HTML and JS. This is precisely what an Angular application needs for a backend.</li> 
   <li>Security is handled for you, making it virtually impossible to have your http endpoints successfully attacked. (More on <a href="http://seventhings.liftweb.net/security" target="_blank">Lift's security</a>)</li> 
   <li>Your application will be built on the rock-solid JVM as a time-tested Java servlet on the most mature Scala web framework.</li> 
  </ul> 
  <p>AngularJS as a front end should appeal to Scala and Lift developers for the following reasons:</p> 
  <ul> 
   <li>JQuery is a pain for non-trivial applications.</li> 
   <li>AngularJS does a fantastic job of managing complex client-side interactions for you.</li> 
   <li>With <strong>lift-ng</strong> in particular, you get to utilize Lift's reactive features such as asynchronous comet updates to the client and returning <code>LAFuture[T]</code> results for services.</li> 
  </ul> 
  <p><strong>lift-ng</strong> has three major feature areas (click the respective link for details and usage examples):</p> 
  <ul> 
   <li><a href="https://github.com/joescii/lift-ng#client-initiated-service-calls" target="_blank">Client-Initiated Service Calls</a>: Write secure services in the Scala DSL which can be invoked by the client.</li> 
   <li><a href="https://github.com/joescii/lift-ng#server-initiated-events" target="_blank">Server-Initiated Events</a>: Send events to <code>$rootScope</code> or a given <code>$scope</code> easily via familiar AngularJS-like calls to <code>broadcast</code> and <code>emit</code>.</li> 
   <li><a href="https://github.com/joescii/lift-ng#client-server-model-binding" target="_blank">Client-Server Model Binding</a>: Define your model, declare your scope, and assign a name. Then let <strong>lift-ng</strong> keep your data in sync between the client(s) and server.</li> 
  </ul> 
  <h2><a id="user-content-tutorials" class="anchor" href="https://github.com/joescii/lift-ng#tutorials" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Tutorials</h2> 
  <ul> 
   <li><a href="https://www.youtube.com/watch?v=PQA6829cRy8" target="_blank">15-minute Chat with lift-ng</a>: Screencast by Lift committer/lift-ng contributor <a href="https://github.com/joescii" target="_blank">Joe Barnes</a> briefly introducing Lift, AngularJS, and lift-ng.</li> 
   <li><a href="http://www.youtube.com/watch?v=VH-S2UDN-NQ" target="_blank">ScalaDC (Scala + Lift + Angular) is Magic</a>: Screen cast by original lift-ng contributor <a href="https://github.com/htmldoug" target="_blank">Doug Roper</a> featuring Scala, Lift, AngularJS, ponies, magic, spastic keyboard pounding, and the first incarnation of lift-ng.</li> 
  </ul> 
  <h2><a id="user-content-jump-start" class="anchor" href="https://github.com/joescii/lift-ng#jump-start" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Jump Start</h2> 
  <p>The quickest jump start you can get on <strong>lift-ng</strong> is via the <a href="https://github.com/joescii/lift-ng.g8" target="_blank">giter8 template</a>. Otherwise, you should first <a href="http://liftweb.net/getting_started" target="_blank">get started with Lift</a> and configure the project to include the <strong>lift-ng</strong> module as outlined below.</p> 
  <h2><a id="user-content-configuration" class="anchor" href="https://github.com/joescii/lift-ng#configuration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Configuration</h2> 
  <p>You can configure an existing Lift project to use <strong>lift-ng</strong> manually. Add <code>lift-ng</code> as a dependency in your <code>build.sbt</code> or <code>Build.scala</code> as appropriate. Optionally add angular from <a href="http://www.webjars.org/" target="_blank">webjars</a> as a dependency if you would like us to manage the delivery of your AngularJS library javascript files. (See <a href="https://github.com/joescii/lift-ng#Webjar-Support" target="_blank">Webjar Support</a> below for more details)</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> {
  <span class="pl-k">val</span> <span class="pl-en">liftVersion</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>3.0.1<span class="pl-pds">"</span></span> <span class="pl-c"><span class="pl-c">//</span> Also supported: "2.5.4", "2.6.3", "3.1.0-M2"</span>
  <span class="pl-k">val</span> <span class="pl-en">liftEdition</span> <span class="pl-k">=</span> liftVersion.substring(<span class="pl-c1">0</span>,<span class="pl-c1">3</span>)
  <span class="pl-k">val</span> <span class="pl-en">angularVersion</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>1.4.8<span class="pl-pds">"</span></span>
  <span class="pl-en">Seq</span>(
    <span class="pl-c"><span class="pl-c">//</span> Other dependencies ...</span>
    <span class="pl-s"><span class="pl-pds">"</span>org.webjars.bower<span class="pl-pds">"</span></span> <span class="pl-k">%</span>  <span class="pl-s"><span class="pl-pds">"</span>angularjs<span class="pl-pds">"</span></span>         <span class="pl-k">%</span> angularVersion,
    <span class="pl-s"><span class="pl-pds">"</span>net.liftmodules<span class="pl-pds">"</span></span>   <span class="pl-k">%%</span> (<span class="pl-s"><span class="pl-pds">"</span>ng_<span class="pl-pds">"</span></span><span class="pl-k">+</span>liftEdition) <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.10.1<span class="pl-pds">"</span></span>  <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>compile<span class="pl-pds">"</span></span>
   )
}</pre>
  </div> 
  <p>And invoke <code>Angular.init()</code> in your <code>Boot</code> class (shown here with the default values).</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">package</span> <span class="pl-en">bootstrap.liftweb</span>

<span class="pl-k">class</span> <span class="pl-en">Boot</span> {
  <span class="pl-k">def</span> <span class="pl-en">boot</span> {
    <span class="pl-c"><span class="pl-c">//</span> Other stuff...</span>
    
    net.liftmodules.ng.<span class="pl-en">Angular</span>.init(
      <span class="pl-c"><span class="pl-c">//</span> Set to true if you plan to use futures. False otherwise to avoid an unneeded comet</span>
      futures <span class="pl-k">=</span> <span class="pl-c1">true</span>,

      <span class="pl-c"><span class="pl-c">//</span> Set to the CSS selector for finding your apps in the page.</span>
      appSelector <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>[ng-app]<span class="pl-pds">"</span></span>,

      <span class="pl-c"><span class="pl-c">//</span> Set to true to include a script tag with the src set to the path for liftproxy.js.</span>
      <span class="pl-c"><span class="pl-c">//</span> Set to false if you want to handle that yourself by referring to the path in</span>
      <span class="pl-c"><span class="pl-c">//</span> net_liftmodules_ng.</span>
      includeJsScript <span class="pl-k">=</span> <span class="pl-c1">true</span>,

      <span class="pl-c"><span class="pl-c">//</span> Set to true to include angular.js from org.webjars angularjs</span>
      includeAngularJs <span class="pl-k">=</span> <span class="pl-c1">true</span>,

      <span class="pl-c"><span class="pl-c">//</span> Add any additional js modules you want to load in the page from the angularjs webjar</span>
      additionalAngularJsModules <span class="pl-k">=</span> <span class="pl-en">List</span>(<span class="pl-s"><span class="pl-pds">"</span>animate<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>cookies<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>loader<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>resource<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>route<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>sanitize<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>scenario<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>touch<span class="pl-pds">"</span></span>),

      <span class="pl-c"><span class="pl-c">//</span> Set to true to also deliver the angular-csp.css stylesheet on the page</span>
      includeAngularCspCss <span class="pl-k">=</span> <span class="pl-c1">true</span>,

      <span class="pl-c"><span class="pl-c">//</span> Set to true to preserve the order of ajax service calls even in the event of server communication failures</span>
      retryAjaxInOrder <span class="pl-k">=</span> <span class="pl-c1">true</span>,
      
      <span class="pl-c"><span class="pl-c">//</span> Set to any function mapping a net.liftweb.common.Failure into a Reject</span>
      failureHandler <span class="pl-k">=</span> net.liftmodules.ng.<span class="pl-en">Angular</span>.defaultFailureHandler
    )

    <span class="pl-k">val</span> <span class="pl-en">context</span><span class="pl-k">:</span><span class="pl-en">ExecutionContext</span> <span class="pl-k">=</span> <span class="pl-c"><span class="pl-c">//</span> Create context</span>
    net.liftmodules.ng.<span class="pl-en">AngularExecutionContext</span>(context) <span class="pl-c"><span class="pl-c">//</span> Tell lift-ng to use it</span>
  }
}</pre>
  </div> 
  <p>If you want to handle the downloading of javascript assets yourself with a library such as <a href="http://headjs.com/" target="_blank">head.js</a>, then you should initialize with <code>includeJsScript = false</code>. This will prevent our <code>Angular</code> snippet from including the <code>liftproxy.js</code> file. Instead, you can use the global <code>ng_liftmodules_ng</code> object to include the file yourself. You can get the full path to the <code>liftproxy.js</code> file via <code>net_liftmodules_ng.path</code> or get just the lift-ng version alone with <code>net_liftmodules_ng.version</code>.</p> 
  <p>If you plan to use futures of type <code>scala.concurrent.Future[T]</code>, you can dictate the <code>scala.concurrent.ExecutionContext</code> that is implicitly required when <strong>lift-ng</strong> converts them to <code>LAFuture[T]</code>. By default, we will use <code>scala.concurrent.ExecutionContext.global</code>. To specify a different <code>ExecutionContext</code>, in your <code>Boot.boot</code> invoke the <code>apply</code> method of <code>net.liftmodules.ng.AngularExecutionContext</code> with your preferred <code>ExecutionContext</code> as shown above. For more details about how we handle <code>scala.concurrent.Future[T]</code>, <a href="https://github.com/joescii/lift-ng#scalaconcurrentfuture" target="_blank">read here</a></p> 
  <h2><a id="user-content-webjar-support" class="anchor" href="https://github.com/joescii/lift-ng#webjar-support" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Webjar support</h2> 
  <p>As mentioned in the <a href="https://github.com/joescii/lift-ng#Configuration" target="_blank">Configuration</a>, <strong>lift-ng</strong> allows you to smoothly utilize <a href="http://www.webjars.org/" target="_blank">webjars</a> for delivering the angular.js assets. This is the recommended approach as it allows you to update your angular version in the same place as your Scala dependencies. We handle adding the angular version to the asset path for proper cache behavior, and we serve the minified version of the js when you are not running in development mode.</p> 
  <p>All three flavors of Webjars are supported: Classic, Bower, and NPM.</p> 
  <h3><a id="user-content-classic-webjars" class="anchor" href="https://github.com/joescii/lift-ng#classic-webjars" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Classic Webjars</h3> 
  <p>The <code>angularjs</code> Classic Webjar contains all optional angular modules such as animate, cookies, route, etc. Hence you only need to include one jar even if you are using optional modules. However, Classic Webjars are packaged and published by hand, causing you to depend on someone else's manual effort before you can utilize the next version.</p> 
  <h3><a id="user-content-bower-and-npm-webjars" class="anchor" href="https://github.com/joescii/lift-ng#bower-and-npm-webjars" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Bower and NPM Webjars</h3> 
  <p>The <code>angular</code>/<code>angularjs</code> Bower and NPM Webjars do NOT contain the optional angular modules. You will need to add each one to your build dependencies if you want those served by <strong>lift-ng</strong>. For instance, if you would like to use the <code>animate</code> module, you should also include it in your dependencies in addition to adding it to <code>additionalAngularJsModules</code>:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> {
  <span class="pl-k">val</span> <span class="pl-en">liftVersion</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>2.5.3<span class="pl-pds">"</span></span>
  <span class="pl-k">val</span> <span class="pl-en">liftEdition</span> <span class="pl-k">=</span> liftVersion.substring(<span class="pl-c1">0</span>,<span class="pl-c1">3</span>)
  <span class="pl-k">val</span> <span class="pl-en">angularVersion</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>1.4.7<span class="pl-pds">"</span></span>
  <span class="pl-en">Seq</span>(
    <span class="pl-c"><span class="pl-c">//</span> Other dependencies ...</span>
    <span class="pl-s"><span class="pl-pds">"</span>org.webjars.npm<span class="pl-pds">"</span></span> <span class="pl-k">%</span>  <span class="pl-s"><span class="pl-pds">"</span>angular<span class="pl-pds">"</span></span>           <span class="pl-k">%</span> angularVersion,
    <span class="pl-s"><span class="pl-pds">"</span>org.webjars.npm<span class="pl-pds">"</span></span> <span class="pl-k">%</span>  <span class="pl-s"><span class="pl-pds">"</span>angular-animate<span class="pl-pds">"</span></span>   <span class="pl-k">%</span> angularVersion,
    <span class="pl-s"><span class="pl-pds">"</span>net.liftmodules<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> (<span class="pl-s"><span class="pl-pds">"</span>ng_<span class="pl-pds">"</span></span><span class="pl-k">+</span>liftEdition) <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.8.0<span class="pl-pds">"</span></span>  <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>compile<span class="pl-pds">"</span></span>
   )
}</pre>
  </div> 
  <p>The same applies for Bower Webjars.</p> 
  <p>Note also that for the <code>org.webjars.npm</code> organization, the module name is <code>angular</code>. Angular is published as either <code>angular</code> or <code>angularjs</code> module names under the <code>org.webjars.bower</code> organization.</p> 
  <h2><a id="user-content-supported-versions" class="anchor" href="https://github.com/joescii/lift-ng#supported-versions" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Supported Versions</h2> 
  <p><strong>lift-ng</strong> is built and released to support Lift edition 2.5 with Scala versions 2.9.1, 2.9.2, and 2.10; Lift edition 2.6 with Scala versions 2.9.1, 2.9.2, 2.10, and 2.11; and Lift edition 3.0 with Scala version 2.11. This project's scala version is purposefully set at the lowest common denominator to ensure each version compiles. Automated testing is performed against the latest 2.10/2.5, 2.10/2.6, 2.11/2.6, and 2.11/3.0 Scala/Lift versions for each release of <strong>lift-ng</strong>.</p> 
  <h2><a id="user-content-usage" class="anchor" href="https://github.com/joescii/lift-ng#usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Usage</h2> 
  <p>Below are usage examples of each of the major features of <strong>lift-ng</strong>. Be sure to check out the aforementioned <a href="https://github.com/htmldoug/ng-lift-proxy" target="_blank">sample project</a> or the <a href="https://github.com/joescii/lift-ng/tree/master/test-project" target="_blank">test project</a> for fully functional examples.</p> 
  <h3><a id="user-content-client-initiated-service-calls" class="anchor" href="https://github.com/joescii/lift-ng#client-initiated-service-calls" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Client-Initiated Service Calls</h3> 
  <p>Most AngularJS backends provide RESTful http endpoints for the application to receive data from the server. <strong>lift-ng</strong> is certainly no exception by providing a server-side DSL for creating services. Compare the following AngularJS factory</p> 
  <div class="highlight highlight-source-js">
   <pre><span class="pl-smi">angular</span>.<span class="pl-en">module</span>(<span class="pl-s"><span class="pl-pds">'</span>lift.pony<span class="pl-pds">'</span></span>, [])
  .<span class="pl-en">factory</span>(<span class="pl-s"><span class="pl-pds">"</span>ponyService<span class="pl-pds">"</span></span>, <span class="pl-k">function</span>() {
    <span class="pl-k">return</span> {
      <span class="pl-en">getBestPony</span><span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">arg</span>) {
        <span class="pl-c"><span class="pl-c">//</span> Return the best pony (client-side)</span>
        <span class="pl-k">return</span> BestPony;
      }
    };
  });</pre>
  </div> 
  <p>... to this <strong>lift-ng</strong> DSL in Scala</p> 
  <div class="highlight highlight-source-scala">
   <pre>angular.module(<span class="pl-s"><span class="pl-pds">"</span>lift.pony<span class="pl-pds">"</span></span>)
  .factory(<span class="pl-s"><span class="pl-pds">"</span>ponyService<span class="pl-pds">"</span></span>, jsObjFactory()
    .jsonCall(<span class="pl-s"><span class="pl-pds">"</span>getBestPony<span class="pl-pds">"</span></span>, (arg) <span class="pl-k">=&gt;</span> {
      <span class="pl-c"><span class="pl-c">//</span> Return the best pony (server-side)</span>
      <span class="pl-en">Full</span>(<span class="pl-en">BestPony</span>)
    })
  )</pre>
  </div> 
  <p>Both will create an angular module named <code>lift.pony</code> with a service named <code>ponyService</code> with a function named <code>getBestPony</code>, yet the former runs on the client-side, and the latter runs on the server-side.</p> 
  <p>To flesh out this example completely, you will define a <a href="http://exploring.liftweb.net/master/index-5.html" target="_blank">Lift snippet</a> to provide the service to the resulting HTML. Here, we have elected to create an object named <code>NgPonyService</code>, delivering the snippet via Lift's default snippet method name, <code>render</code></p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">object</span> <span class="pl-en">NgPonyService</span> {
  <span class="pl-k">def</span> <span class="pl-en">render</span> <span class="pl-k">=</span> renderIfNotAlreadyDefined(
    angular.module(<span class="pl-s"><span class="pl-pds">"</span>lift.pony<span class="pl-pds">"</span></span>)
      .factory(<span class="pl-s"><span class="pl-pds">"</span>ponyService<span class="pl-pds">"</span></span>, jsObjFactory()
        .jsonCall(<span class="pl-s"><span class="pl-pds">"</span>getBestPony<span class="pl-pds">"</span></span>, (arg) <span class="pl-k">=&gt;</span> {
          <span class="pl-c"><span class="pl-c">//</span> Return the best pony (server-side)</span>
          <span class="pl-k">try</span> {
            <span class="pl-en">Full</span>(<span class="pl-en">BestPony</span>)
          } <span class="pl-k">catch</span> {
            <span class="pl-k">case</span> e<span class="pl-k">:</span><span class="pl-en">Exception</span> <span class="pl-k">=&gt;</span> <span class="pl-en">Failure</span>(e.getMessage)
          }
        })
      )
  )
}</pre>
  </div> 
  <p>This <code>renderIfNotAlreadyDefined</code> returns a <code>scala.xml.NodeSeq</code>. Hence you will need to add script tags to your target HTML page(s) for the services as well as some plumbing from this module.</p> 
  <div class="highlight highlight-text-html-basic">
   <pre><span class="pl-c"><span class="pl-c">&lt;!--</span> The angular library itself, if not using webjars with includeAngularJs = true <span class="pl-c">--&gt;</span></span>
&lt;<span class="pl-ent">script</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text/javascript<span class="pl-pds">"</span></span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>/scripts/angular.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;

<span class="pl-c"><span class="pl-c">&lt;!--</span> Prerequisite stuff the module needs <span class="pl-c">--&gt;</span></span>
&lt;<span class="pl-ent">script</span> <span class="pl-e">data-lift</span>=<span class="pl-s"><span class="pl-pds">"</span>Angular<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;

<span class="pl-c"><span class="pl-c">&lt;!--</span> The NgPonyService snippet defined above <span class="pl-c">--&gt;</span></span>
&lt;<span class="pl-ent">script</span> <span class="pl-e">data-lift</span>=<span class="pl-s"><span class="pl-pds">"</span>NgPonyService<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;

<span class="pl-c"><span class="pl-c">&lt;!--</span> Your angular controllers, etc <span class="pl-c">--&gt;</span></span>
&lt;<span class="pl-ent">script</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text/javascript<span class="pl-pds">"</span></span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>/scripts/pony.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre>
  </div> 
  <p>The resulting angular service returns a <a href="http://docs.angularjs.org/api/ng.$q" target="_blank"><code>$q</code> promise</a>. When you call the service, you register callbacks for success, error, and notify (not currently utilized).</p> 
  <div class="highlight highlight-source-js">
   <pre><span class="pl-smi">angular</span>.<span class="pl-en">module</span>(<span class="pl-s"><span class="pl-pds">'</span>pony<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>lift.pony<span class="pl-pds">'</span></span>])
  .<span class="pl-en">controller</span>(<span class="pl-s"><span class="pl-pds">'</span>PonyCtrl<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">$scope</span>, <span class="pl-smi">ponyService</span>) {
    <span class="pl-smi">$scope</span>.<span class="pl-en">onClick</span> <span class="pl-k">=</span> <span class="pl-k">function</span> () {
      <span class="pl-smi">ponyService</span>.<span class="pl-en">getBestPony</span>().<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">pony</span>) {
        <span class="pl-c"><span class="pl-c">//</span> We have our pony!</span>
        <span class="pl-smi">$scope</span>.<span class="pl-smi">pony</span> <span class="pl-k">=</span> pony;
      },
      <span class="pl-k">function</span>(<span class="pl-smi">err</span>) {
        <span class="pl-c"><span class="pl-c">//</span> No pony!</span>
        <span class="pl-smi">$scope</span>.<span class="pl-smi">error</span> <span class="pl-k">=</span> err;
      },
      <span class="pl-k">function</span>(<span class="pl-smi">progress</span>) {
        <span class="pl-c"><span class="pl-c">//</span> We're still working on getting that pony...</span>
        <span class="pl-c"><span class="pl-c">//</span> Well, not really... we don't use this today...</span>
      });
    };
  });</pre>
  </div> 
  <h4><a id="user-content-mapping-box-to-promise" class="anchor" href="https://github.com/joescii/lift-ng#mapping-box-to-promise" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Mapping Box to Promise</h4> 
  <p>Values requested from the client are always wrapped in a <code>net.liftweb.common.Box</code>. These <code>Box[T]</code> values are mapped to their respective <a href="http://docs.angularjs.org/api/ng.$q" target="_blank"><code>$q</code> promises</a> as follows:</p> 
  <ul> 
   <li><code>Full(value)</code> =&gt; A resolved promise with the given value.</li> 
   <li><code>Empty</code> =&gt; A resolved promise with <code>undefined</code> value.</li> 
   <li><code>Failure(msg)</code> =&gt; A rejected promise with the given message value (see <a href="https://github.com/joescii/lift-ng#failure-handler" target="_blank">Failure Handler</a> below for configuration)</li> 
  </ul> 
  <h5><a id="user-content-failure-handler" class="anchor" href="https://github.com/joescii/lift-ng#failure-handler" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Failure Handler</h5> 
  <p>The <code>Angular.init</code> function has a parameter <code>failureHandler: Failure =&gt; Reject</code>. Any service which returns a <code>Failure</code> or throws an <code>Exception</code> will have the failure pass through this function. The returned <code>Reject</code> object is used to reject the respective Promise on the client.</p> 
  <p>The default implementation of this function simply places the <code>Failure</code>'s <code>msg: String</code> into the <code>Reject</code>:</p> 
  <div class="highlight highlight-source-scala">
   <pre>f<span class="pl-k">:</span> <span class="pl-en">Failure</span> <span class="pl-k">=&gt;</span> <span class="pl-en">Reject</span>(<span class="pl-en">JString</span>(f.msg))</pre>
  </div> 
  <p>The <code>Reject</code> case class can accept any <code>JValue</code>, allowing full control over the data used to reject Promises from lift-ng.</p> 
  <h4><a id="user-content-json-serialization" class="anchor" href="https://github.com/joescii/lift-ng#json-serialization" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>JSON Serialization</h4> 
  <p><strong>lift-ng</strong> uses <a href="https://github.com/lift/framework/tree/master/core/json" target="_blank">Lift JSON</a> for JSON serialization. This JSON serialization is configurable via the implicit <a href="http://liftweb.net/api/26/api/#net.liftweb.json.Formats" target="_blank"><code>Formats</code></a> trait. Originally, <strong>lift-ng</strong> always used the <a href="http://liftweb.net/api/26/api/#net.liftweb.json.DefaultFormats" target="_blank"><code>DefaultFormats</code></a> which limited the library's flexibility. Now <strong>lift-ng</strong> uses <code>DefaultFormats</code> if no other implicit <code>Formats</code> can be found.</p> 
  <p>However, this does NOT apply to the old <code>JsObjFactory</code> methods <code>jsonCall</code> or <code>future</code>. Because these two were over-loaded with multiple signatures, it is not legal in Scala to provide a default value. In order to avoid a breaking change, we chose not to add an implicit <code>Formats</code> parameter to <code>jsonCall</code> and <code>future</code>.</p> 
  <p>There are now six methods available for handling the three overrides of each <code>jsonCall</code> and <code>future</code>: <code>defAny</code>, <code>defStringToAny</code>, <code>defModelToAny</code>, <code>defFutureAny</code>, <code>defStringToFutureAny</code>, and <code>defModelToFutureAny</code>. These six have the exact same signature as their respective <code>jsonCall</code>/<code>future</code> methods, except they accept an implicit <code>Formats</code>. If you need to provide a <code>Formats</code>, replace your calls to these new functions.</p> 
  <p>Regarding these names, please see <a href="https://github.com/joescii/lift-ng#new-interface-for-jsobjfactory" target="_blank">New interface for <code>JsObjFactory</code></a> below.</p> 
  <h4><a id="user-content-no-arguments-string-arguments-or-case-class-arguments" class="anchor" href="https://github.com/joescii/lift-ng#no-arguments-string-arguments-or-case-class-arguments" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>No arguments, string arguments, or case class arguments</h4> 
  <p>Just like with Lift's <code>SHtml.ajaxInvoke</code>, you can make a service which takes no arguments. Hence we could have defined our <code>ponyService.getBestPony</code> like the following:</p> 
  <div class="highlight highlight-source-scala">
   <pre>angular.module(<span class="pl-s"><span class="pl-pds">"</span>lift.pony<span class="pl-pds">"</span></span>)
  .factory(<span class="pl-s"><span class="pl-pds">"</span>ponyService<span class="pl-pds">"</span></span>, jsObjFactory()
    .jsonCall(<span class="pl-s"><span class="pl-pds">"</span>getBestPony<span class="pl-pds">"</span></span>, {
      <span class="pl-c"><span class="pl-c">//</span> Return the best pony (server-side)</span>
      <span class="pl-k">try</span> {
        <span class="pl-en">Full</span>(<span class="pl-en">BestPony</span>)
      } <span class="pl-k">catch</span> {
        <span class="pl-k">case</span> e<span class="pl-k">:</span><span class="pl-en">Exception</span> <span class="pl-k">=&gt;</span> <span class="pl-en">Failure</span>(<span class="pl-s"><span class="pl-pds">"</span>No Pony!<span class="pl-pds">"</span></span>)
      }
    })
  )</pre>
  </div> 
  <p>Or we can accept a <code>String</code>...</p> 
  <div class="highlight highlight-source-scala">
   <pre>angular.module(<span class="pl-s"><span class="pl-pds">"</span>lift.pony<span class="pl-pds">"</span></span>)
  .factory(<span class="pl-s"><span class="pl-pds">"</span>ponyService<span class="pl-pds">"</span></span>, jsObjFactory()
    .jsonCall(<span class="pl-s"><span class="pl-pds">"</span>getPonyByName<span class="pl-pds">"</span></span>, (name<span class="pl-k">:</span><span class="pl-k">String</span>) <span class="pl-k">=&gt;</span> {
      <span class="pl-c"><span class="pl-c">//</span> Return the matching pony</span>
      <span class="pl-k">try</span> {
        <span class="pl-en">Full</span>(<span class="pl-en">BestPony</span>)
      } <span class="pl-k">catch</span> {
        <span class="pl-k">case</span> e<span class="pl-k">:</span><span class="pl-en">Exception</span> <span class="pl-k">=&gt;</span> <span class="pl-en">Failure</span>(<span class="pl-s"><span class="pl-pds">"</span>No Pony!<span class="pl-pds">"</span></span>)
      }
    })
  )</pre>
  </div> 
  <p>Finally, perhaps most importantly, we expect a case class to be sent to the server. Note that the case class must extend <code>NgModel</code> for this to work. (Read more about models <a href="https://github.com/joescii/lift-ng#model-objects" target="_blank">here</a>)</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Pony</span> (name<span class="pl-k">:</span><span class="pl-k">String</span>, img<span class="pl-k">:</span><span class="pl-en">URL</span>) <span class="pl-k">extends</span> <span class="pl-e">NgModel</span>

angular.module(<span class="pl-s"><span class="pl-pds">"</span>lift.pony<span class="pl-pds">"</span></span>)
  .factory(<span class="pl-s"><span class="pl-pds">"</span>ponyService<span class="pl-pds">"</span></span>, jsObjFactory()
    .jsonCall(<span class="pl-s"><span class="pl-pds">"</span>setBestPony<span class="pl-pds">"</span></span>, (pony<span class="pl-k">:</span><span class="pl-en">Pony</span>) <span class="pl-k">=&gt;</span> {
      <span class="pl-c"><span class="pl-c">//</span> Nothing to return</span>
      <span class="pl-en">Empty</span>
    })
  )</pre>
  </div> 
  <h4><a id="user-content-multiple-function-calls" class="anchor" href="https://github.com/joescii/lift-ng#multiple-function-calls" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Multiple function calls</h4> 
  <p>All of the above functions can be part of the same service...</p> 
  <div class="highlight highlight-source-scala">
   <pre>angular.module(<span class="pl-s"><span class="pl-pds">"</span>lift.pony<span class="pl-pds">"</span></span>)
  .factory(<span class="pl-s"><span class="pl-pds">"</span>ponyService<span class="pl-pds">"</span></span>, jsObjFactory()
    .jsonCall(<span class="pl-s"><span class="pl-pds">"</span>getBestPony<span class="pl-pds">"</span></span>, {
      <span class="pl-c"><span class="pl-c">//</span> Return the best pony (server-side)</span>
      <span class="pl-en">Full</span>(<span class="pl-en">BestPony</span>)
    })

    .jsonCall(<span class="pl-s"><span class="pl-pds">"</span>getPonyByName<span class="pl-pds">"</span></span>, (name<span class="pl-k">:</span><span class="pl-k">String</span>) <span class="pl-k">=&gt;</span> {
      <span class="pl-c"><span class="pl-c">//</span> Return the matching pony</span>
      <span class="pl-en">Full</span>(<span class="pl-en">MyPony</span>)

    .jsonCall(<span class="pl-s"><span class="pl-pds">"</span>setBestPony<span class="pl-pds">"</span></span>, (pony<span class="pl-k">:</span><span class="pl-en">Pony</span>) <span class="pl-k">=&gt;</span> {
      <span class="pl-c"><span class="pl-c">//</span> Nothing to return</span>
      <span class="pl-en">Empty</span>
    })
  )</pre>
  </div> 
  <h4><a id="user-content-futures" class="anchor" href="https://github.com/joescii/lift-ng#futures" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Futures</h4> 
  <p>All of the examples thus far have assumed the value can be calculated quickly without expensive blocking or asynchronous calls. Since it is quite common to perform expensive operations or call APIs which return a <code>Future[T]</code>, it is important that <strong>lift-ng</strong> likewise supports returning a future.</p> 
  <p>The same signatures for <code>jsonCall</code> are supported for futures:</p> 
  <div class="highlight highlight-source-scala">
   <pre>angular.module(<span class="pl-s"><span class="pl-pds">"</span>lift.pony<span class="pl-pds">"</span></span>)
  .factory(<span class="pl-s"><span class="pl-pds">"</span>ponyService<span class="pl-pds">"</span></span>, jsObjFactory()
    .future(<span class="pl-s"><span class="pl-pds">"</span>getBestPony<span class="pl-pds">"</span></span>, {
      <span class="pl-c"><span class="pl-c">//</span> Create the future</span>
      <span class="pl-k">val</span> <span class="pl-en">f</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">LAFuture</span>[<span class="pl-en">Box</span>[<span class="pl-en">Pony</span>]]()
      <span class="pl-c"><span class="pl-c">//</span> Do something to get the result</span>
      futurePonyGetter(f)
      <span class="pl-c"><span class="pl-c">//</span> Return the future that will contain a Pony</span>
      f
    })

    .future(<span class="pl-s"><span class="pl-pds">"</span>getPonyByName<span class="pl-pds">"</span></span>, (name<span class="pl-k">:</span><span class="pl-k">String</span>) <span class="pl-k">=&gt;</span> {
      <span class="pl-c"><span class="pl-c">//</span> Return a future containing the matching pony</span>
      futurePonyGetter(name)

    .future(<span class="pl-s"><span class="pl-pds">"</span>setBestPony<span class="pl-pds">"</span></span>, (pony<span class="pl-k">:</span><span class="pl-en">Pony</span>) <span class="pl-k">=&gt;</span> {
      <span class="pl-c"><span class="pl-c">//</span> Nothing to return</span>
      <span class="pl-k">val</span> <span class="pl-en">f</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">LAFuture</span>[<span class="pl-en">Box</span>[<span class="pl-en">Pony</span>]]()
      f.satisfy(<span class="pl-en">Empty</span>)
      f
    })
  )</pre>
  </div> 
  <p>In addition to supporting <code>net.liftweb.actor.LAFuture</code>, we also provide support for <code>scala.concurrent.Future</code> via conversions. See <a href="https://github.com/joescii/lift-ng#scalaconcurrentfuture" target="_blank">this section</a> for details</p> 
  <p>Because the underlying Lift library does not currently support returning futures for AJAX calls (as of 2.5.1/2.6), we had to circumvent this limitation by utilizing comet. As a result, if you want to utilize futures in your angular app, we must be able to locate your app in the DOM. By default, we look for any elements containing the <code>ng-app</code> attribute. This can be overridden in the <code>Angular.init()</code> call via the <code>appSelector</code> property. This allows us to hook in to your app via comet and send messages asynchronously back to the lift-proxy service.</p> 
  <h4><a id="user-content-testing" class="anchor" href="https://github.com/joescii/lift-ng#testing" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Testing</h4> 
  <p>Testing services provided by <strong>lift-ng</strong> with Jasmine (etc) can be accomplished in the same manner as you would test any Angular service.</p> 
  <div class="highlight highlight-source-js">
   <pre><span class="pl-en">describe</span>(<span class="pl-s"><span class="pl-pds">"</span>pony<span class="pl-pds">"</span></span>, <span class="pl-k">function</span>(){
  <span class="pl-c"><span class="pl-c">//</span> Service mock</span>
  <span class="pl-k">var</span> ponyService <span class="pl-k">=</span> {};

  <span class="pl-c"><span class="pl-c">//</span> Handle to the rootScope</span>
  <span class="pl-k">var</span> rootScope <span class="pl-k">=</span> {};

  <span class="pl-c"><span class="pl-c">//</span> Handle to the scope</span>
  <span class="pl-k">var</span> scope <span class="pl-k">=</span> {};

  <span class="pl-c"><span class="pl-c">//</span> Set up the pony module</span>
  <span class="pl-en">beforeEach</span>(<span class="pl-k">function</span>(){<span class="pl-c1">module</span>(<span class="pl-s"><span class="pl-pds">'</span>pony<span class="pl-pds">'</span></span>);});

  <span class="pl-c"><span class="pl-c">//</span> Mock out the service</span>
  <span class="pl-en">beforeEach</span>(<span class="pl-k">function</span>() {
    <span class="pl-smi">angular</span>.<span class="pl-smi">mock</span>.<span class="pl-en">module</span>(<span class="pl-k">function</span>(<span class="pl-smi">$provide</span>) {
      <span class="pl-smi">$provide</span>.<span class="pl-c1">value</span>(<span class="pl-s"><span class="pl-pds">'</span>lift.pony<span class="pl-pds">'</span></span>, ponyService);
    });
  });

  <span class="pl-c"><span class="pl-c">//</span> Build the mock with a $q promise</span>
  <span class="pl-en">beforeEach</span>(<span class="pl-en">inject</span>(<span class="pl-k">function</span>(<span class="pl-smi">$q</span>) {
    <span class="pl-smi">ponyService</span>.<span class="pl-c1">defer</span> <span class="pl-k">=</span> <span class="pl-smi">$q</span>.<span class="pl-c1">defer</span>();
    <span class="pl-smi">ponyService</span>.<span class="pl-en">getBestPony</span> <span class="pl-k">=</span> <span class="pl-k">function</span>() {
      <span class="pl-k">return</span> <span class="pl-c1">this</span>.<span class="pl-c1">defer</span>.<span class="pl-smi">promise</span>;
    };
  }));

  <span class="pl-c"><span class="pl-c">//</span> Create a controller for each test</span>
  <span class="pl-en">beforeEach</span>(<span class="pl-en">inject</span>(<span class="pl-k">function</span>(<span class="pl-smi">$rootScope</span>, <span class="pl-smi">$controller</span>) {
    rootScope <span class="pl-k">=</span> $rootScope;
    scope <span class="pl-k">=</span> <span class="pl-smi">$rootScope</span>.<span class="pl-en">$new</span>();
    <span class="pl-en">$controller</span>(<span class="pl-s"><span class="pl-pds">'</span>PonyCtrl<span class="pl-pds">'</span></span>, {
      $scope<span class="pl-k">:</span> scope,
      ponyService<span class="pl-k">:</span> ponyService
    });
  }));

  <span class="pl-c"><span class="pl-c">//</span> Write a test</span>
  <span class="pl-en">it</span>(<span class="pl-s"><span class="pl-pds">'</span>should call the service when onClick is called<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>() {
    <span class="pl-c"><span class="pl-c">//</span> Before onClick, the pony will be undefined.</span>
    <span class="pl-en">expect</span>(<span class="pl-smi">scope</span>.<span class="pl-smi">pony</span>).<span class="pl-en">toBeUndefined</span>();

    <span class="pl-c"><span class="pl-c">//</span> Provide a pony to be returned</span>
    <span class="pl-k">var</span> pony <span class="pl-k">=</span> {
      name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Doug<span class="pl-pds">'</span></span>,
      img<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>doug.jpg<span class="pl-pds">'</span></span>
    };
    <span class="pl-smi">ponyService</span>.<span class="pl-c1">defer</span>.<span class="pl-en">resolve</span>(pony);

    <span class="pl-c"><span class="pl-c">//</span> Simulate the click</span>
    <span class="pl-smi">scope</span>.<span class="pl-en">onClick</span>();

    <span class="pl-c"><span class="pl-c">//</span> This call lets the $q callback happen</span>
    <span class="pl-smi">rootScope</span>.<span class="pl-en">$digest</span>();

    <span class="pl-c"><span class="pl-c">//</span> Expect that pony has now been set.</span>
    <span class="pl-en">expect</span>(<span class="pl-smi">scope</span>.<span class="pl-smi">pony</span>).<span class="pl-en">toEqual</span>(pony);
  });
});</pre>
  </div> 
  <h4><a id="user-content-under-the-services-hood" class="anchor" href="https://github.com/joescii/lift-ng#under-the-services-hood" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Under the Services' hood</h4> 
  <p>Unlike most AngularJS RESTful http backends, you have no further work to do to secure your application. Rather than a fixed named endpoint, <strong>lift-ng</strong> dynamically creates an http endpoint for each service per page load. The name given to the end points is a securely-randomized number that is difficult to predict for an attacker attempting to utilize cross-site scripting techniques for instance.</p> 
  <p>In regards to testing the server-side code, we recommend implementing your service logic in a standalone module which handles all of the complex business logic. Then utilize <strong>lift-ng</strong> to merely expose those services to your angular app. This way your business logic is decoupled from <strong>lift-ng</strong> and easily testable.</p> 
  <h4><a id="user-content-non-ajax" class="anchor" href="https://github.com/joescii/lift-ng#non-ajax" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Non-AJAX</h4> 
  <p>Sometimes the value you want to provide in a service is known at page load time and should not require a round trip back to the server. Typical examples of this are configuration settings, session values, etc. To provide a value at page load time, just use <code>JsonObjFactory</code>'s <code>string</code>, <code>anyVal</code>, or <code>json</code> methods.</p> 
  <div class="highlight highlight-source-scala">
   <pre>angular.module(<span class="pl-s"><span class="pl-pds">"</span>StaticServices<span class="pl-pds">"</span></span>)
  .factory(<span class="pl-s"><span class="pl-pds">"</span>staticService<span class="pl-pds">"</span></span>, jsObjFactory()
    .string(<span class="pl-s"><span class="pl-pds">"</span>string<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>FromServer1<span class="pl-pds">"</span></span>)
    .anyVal(<span class="pl-s"><span class="pl-pds">"</span>integer<span class="pl-pds">"</span></span>, <span class="pl-c1">42</span>)
    .json(<span class="pl-s"><span class="pl-pds">"</span>obj<span class="pl-pds">"</span></span>, <span class="pl-en">StringInt</span>(<span class="pl-s"><span class="pl-pds">"</span>FromServer2<span class="pl-pds">"</span></span>, <span class="pl-c1">88</span>))

  )</pre>
  </div> 
  <p>The above produces a simple service equivalent to the following JavaScript</p> 
  <div class="highlight highlight-source-js">
   <pre><span class="pl-smi">angular</span>.<span class="pl-en">module</span>(<span class="pl-s"><span class="pl-pds">"</span>StaticServices<span class="pl-pds">"</span></span>,[<span class="pl-s"><span class="pl-pds">"</span>lift-ng<span class="pl-pds">"</span></span>])
  .<span class="pl-en">factory</span>(<span class="pl-s"><span class="pl-pds">"</span>staticService<span class="pl-pds">"</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">liftProxy</span>) { <span class="pl-k">return</span> {
    <span class="pl-en">string</span><span class="pl-k">:</span>  <span class="pl-k">function</span>() {<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">"</span>FromServer1<span class="pl-pds">"</span></span>},
    <span class="pl-en">integer</span><span class="pl-k">:</span> <span class="pl-k">function</span>() {<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">"</span>42<span class="pl-pds">"</span></span>},
    <span class="pl-en">obj</span><span class="pl-k">:</span>     <span class="pl-k">function</span>() {<span class="pl-k">return</span> {str<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>FromServer2<span class="pl-pds">"</span></span>,num<span class="pl-k">:</span><span class="pl-c1">88</span>}}
  }});</pre>
  </div> 
  <h3><a id="user-content-server-initiated-events" class="anchor" href="https://github.com/joescii/lift-ng#server-initiated-events" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Server-Initiated Events</h3> 
  <p>Now we can take a look at how to utilize Lift's comet support to asynchronously send angular updates from the server</p> 
  <p>First you should write a new class which extends the <code>AngularActor</code> trait, which is a sub-trait of Lift's <code>CometActor</code>. Thus you can do anything you can normally with a <code>CometActor</code>, as well as get access the <code>$scope</code> where the actor is defined in the DOM and the <code>$rootScope</code> of the angular application. Currently we support <code>$emit</code>, <code>$broadcast</code>, and assignment of arbitrary fields on the given scope object.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">class</span> <span class="pl-en">CometExample</span> <span class="pl-k">extends</span> <span class="pl-e">AngularActor</span> {
  <span class="pl-k">override</span> <span class="pl-k">def</span> <span class="pl-en">lowPriority</span> <span class="pl-k">=</span> {
    <span class="pl-k">case</span> (<span class="pl-s"><span class="pl-pds">"</span>emit<span class="pl-pds">"</span></span>, msg<span class="pl-k">:</span><span class="pl-k">String</span>) <span class="pl-k">=&gt;</span> rootScope.emit(<span class="pl-s"><span class="pl-pds">"</span>emit-message<span class="pl-pds">"</span></span>, msg)
    <span class="pl-k">case</span> (<span class="pl-s"><span class="pl-pds">"</span>emit<span class="pl-pds">"</span></span>, obj<span class="pl-k">:</span><span class="pl-en">AnyRef</span>) <span class="pl-k">=&gt;</span> rootScope.emit(<span class="pl-s"><span class="pl-pds">"</span>emit-object<span class="pl-pds">"</span></span>,  obj)
    
    <span class="pl-k">case</span> (<span class="pl-s"><span class="pl-pds">"</span>broadcast<span class="pl-pds">"</span></span>, msg<span class="pl-k">:</span><span class="pl-k">String</span>) <span class="pl-k">=&gt;</span> scope.broadcast(<span class="pl-s"><span class="pl-pds">"</span>emit-message<span class="pl-pds">"</span></span>, msg)
    <span class="pl-k">case</span> (<span class="pl-s"><span class="pl-pds">"</span>broadcast<span class="pl-pds">"</span></span>, obj<span class="pl-k">:</span><span class="pl-en">AnyRef</span>) <span class="pl-k">=&gt;</span> scope.broadcast(<span class="pl-s"><span class="pl-pds">"</span>emit-object<span class="pl-pds">"</span></span>,  obj)

    <span class="pl-k">case</span> (<span class="pl-s"><span class="pl-pds">"</span>assign<span class="pl-pds">"</span></span>, msg<span class="pl-k">:</span><span class="pl-k">String</span>) <span class="pl-k">=&gt;</span> rootScope.assign(<span class="pl-s"><span class="pl-pds">"</span>my.str.field<span class="pl-pds">"</span></span>, msg)
    <span class="pl-k">case</span> (<span class="pl-s"><span class="pl-pds">"</span>assign<span class="pl-pds">"</span></span>, obj<span class="pl-k">:</span><span class="pl-en">AnyRef</span>) <span class="pl-k">=&gt;</span> scope.assign(<span class="pl-s"><span class="pl-pds">"</span>my.obj.field<span class="pl-pds">"</span></span>, obj)
  }
}</pre>
  </div> 
  <p>Now add the comet actor into your HTML DOM within the scope you wish to belong to within the <code>ng-application</code>.</p> 
  <div class="highlight highlight-text-html-basic">
   <pre>&lt;<span class="pl-ent">div</span> <span class="pl-e">ng-app</span>=<span class="pl-s"><span class="pl-pds">"</span>ExampleApp<span class="pl-pds">"</span></span>&gt;
  &lt;<span class="pl-ent">div</span> <span class="pl-e">data-lift</span>=<span class="pl-s"><span class="pl-pds">"</span>comet?type=CometExample<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">div</span>&gt;
  <span class="pl-c"><span class="pl-c">&lt;!--</span> other stuff <span class="pl-c">--&gt;</span></span>
&lt;/<span class="pl-ent">div</span>&gt;</pre>
  </div> 
  <p>Then do whatever you need in your angular application to listen for events, watch for changes, etc.</p> 
  <div class="highlight highlight-source-js">
   <pre><span class="pl-smi">angular</span>.<span class="pl-en">module</span>(<span class="pl-s"><span class="pl-pds">'</span>ExampleApp<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>lift-ng<span class="pl-pds">'</span></span>])
.<span class="pl-en">controller</span>(<span class="pl-s"><span class="pl-pds">'</span>ExampleController<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>$rootScope<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>$scope<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">$rootScope</span>, <span class="pl-smi">$scope</span>) {
  <span class="pl-smi">$rootScope</span>.<span class="pl-en">$on</span>(<span class="pl-s"><span class="pl-pds">'</span>emit-message<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">e</span>, <span class="pl-smi">msg</span>) {
    <span class="pl-smi">$scope</span>.<span class="pl-smi">emitMessage</span> <span class="pl-k">=</span> msg;
  });
  <span class="pl-smi">$rootScope</span>.<span class="pl-en">$on</span>(<span class="pl-s"><span class="pl-pds">'</span>emit-object<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">e</span>, <span class="pl-smi">obj</span>) {
    <span class="pl-smi">$scope</span>.<span class="pl-smi">emitObject</span> <span class="pl-k">=</span> obj;
  });
  <span class="pl-smi">$scope</span>.<span class="pl-en">$on</span>(<span class="pl-s"><span class="pl-pds">'</span>broadcast-message<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">e</span>, <span class="pl-smi">msg</span>) {
    <span class="pl-smi">$scope</span>.<span class="pl-smi">broadcastMessage</span> <span class="pl-k">=</span> msg;
  });
  <span class="pl-smi">$scope</span>.<span class="pl-en">$on</span>(<span class="pl-s"><span class="pl-pds">'</span>broadcast-object<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">e</span>, <span class="pl-smi">obj</span>) {
    <span class="pl-smi">$scope</span>.<span class="pl-smi">broadcastObject</span> <span class="pl-k">=</span> obj;
  });
  <span class="pl-smi">$rootScope</span>.<span class="pl-en">$watch</span>(<span class="pl-s"><span class="pl-pds">'</span>my.str.field<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">e</span>, <span class="pl-smi">msg</span>) {
    <span class="pl-c"><span class="pl-c">//</span> ...</span>
  });
  <span class="pl-smi">$scope</span>.<span class="pl-en">$watch</span>(<span class="pl-s"><span class="pl-pds">'</span>my.obj.field<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">e</span>, <span class="pl-smi">obj</span>) {
    <span class="pl-c"><span class="pl-c">//</span> ...</span>
  });
}]);</pre>
  </div> 
  <p>Note that messages sent prior to a page bootstrapping the Angular application will be queued up and released in order once the application is ready. The retry interval defaults to 100 milliseconds and can be configured in your Lift application's props files with the <code>net.liftmodules.ng.AngularActor.retryInterval</code> Int property.</p> 
  <h3><a id="user-content-client-server-model-binding" class="anchor" href="https://github.com/joescii/lift-ng#client-server-model-binding" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Client-Server Model Binding</h3> 
  <p>Just as Angular provides declarative 2-way binding between the model and view with automatic synchronization, <strong>lift-ng</strong> features binding of a model between the client and server. To take advantage of this feature, first create a model case class which extends <code>NgModel</code>. (Read more about models <a href="https://github.com/joescii/lift-ng#model-objects" target="_blank">here</a>)</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Message</span>(msg<span class="pl-k">:</span><span class="pl-k">String</span>) <span class="pl-k">extends</span> <span class="pl-e">NgModel</span></pre>
  </div> 
  <p>Then create binder in your <code>comet</code> package which extends <code>NgModelBinder</code> or <code>SimpleNgModelBinder</code>. (The latter is a conveniently-constructed form of the former) By default, your binder will be scoped per-request/per-page-load. Mix in <code>SessionScope</code> to cause your binder's state to persist among each page load of a user's session. You must specify the direction you want to bind data by mixing in <code>BindingToClient</code>, <code>BindingToServer</code>, or both to achieve two-way synchronization. The following example establishes a two-way binding existing in the session scope (identical to the original 0.5.0 release which featured <code>BindingActor</code>)</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">package</span> <span class="pl-en">org.myorg.comet</span>

<span class="pl-k">class</span> <span class="pl-en">MessageBinder</span> <span class="pl-k">extends</span> <span class="pl-e">SimpleNgModelBinder</span>[<span class="pl-en">Message</span>] (
  <span class="pl-s"><span class="pl-pds">"</span>theMessage<span class="pl-pds">"</span></span>,       <span class="pl-c"><span class="pl-c">/*</span> Name of the $scope variable to bind to <span class="pl-c">*/</span></span>
  <span class="pl-en">Message</span>(<span class="pl-s"><span class="pl-pds">"</span>initial<span class="pl-pds">"</span></span>), <span class="pl-c"><span class="pl-c">/*</span> Initial value for theMessage when the session is initialized <span class="pl-c">*/</span></span>
  { m<span class="pl-k">:</span><span class="pl-en">Message</span> <span class="pl-k">=&gt;</span>      <span class="pl-c"><span class="pl-c">/*</span> Called each time a client change is received <span class="pl-c">*/</span></span>
    m
  },
  <span class="pl-c1">1000</span>                <span class="pl-c"><span class="pl-c">/*</span> Milliseconds for client-sync delay (see Optimizations below) <span class="pl-c">*/</span></span>
) <span class="pl-k">with</span> <span class="pl-e">BindingToClient</span> <span class="pl-k">with</span> <span class="pl-e">BindingToServer</span> <span class="pl-k">with</span> <span class="pl-e">SessionScope</span></pre>
  </div> 
  <p>Once defined, add the binder to the scope you want this model to exist in.</p> 
  <div class="highlight highlight-text-html-basic">
   <pre>&lt;<span class="pl-ent">div</span> <span class="pl-e">ng-app</span>=<span class="pl-s"><span class="pl-pds">"</span>MyLiftNgApp<span class="pl-pds">"</span></span>&gt;
  &lt;<span class="pl-ent">div</span> <span class="pl-e">ng-controller</span>=<span class="pl-s"><span class="pl-pds">"</span>MyController<span class="pl-pds">"</span></span> <span class="pl-e">data-lift</span>=<span class="pl-s"><span class="pl-pds">"</span>Angular.bind?type=MessageBinder<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">input</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span> <span class="pl-e">ng-bind</span>=<span class="pl-s"><span class="pl-pds">"</span>theMessage.msg<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">div</span>&gt;{{theMessage.msg}}&lt;/<span class="pl-ent">div</span>&gt;
  &lt;/<span class="pl-ent">div</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;</pre>
  </div> 
  <p>If you have multiple binds, you can specify them in <code>types</code> via a comma-delimited list:</p> 
  <div class="highlight highlight-text-html-basic">
   <pre>&lt;<span class="pl-ent">div</span> <span class="pl-e">ng-app</span>=<span class="pl-s"><span class="pl-pds">"</span>MyLiftNgApp<span class="pl-pds">"</span></span>&gt;
  &lt;<span class="pl-ent">div</span> <span class="pl-e">ng-controller</span>=<span class="pl-s"><span class="pl-pds">"</span>MyMultipleBinds<span class="pl-pds">"</span></span> <span class="pl-e">data-lift</span>=<span class="pl-s"><span class="pl-pds">"</span>Angular.bind?types=Binder1,Binder2<span class="pl-pds">"</span></span>&gt;
    <span class="pl-c"><span class="pl-c">&lt;!--</span> Other stuff... <span class="pl-c">--&gt;</span></span>
  &lt;/<span class="pl-ent">div</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;</pre>
  </div> 
  <p>If you mixed in <code>BindingToServer</code>, you will get state updates for the client (or <em>clients</em> if using <code>SessionScope</code>) via <code>onClientUpdate</code>:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">class</span> <span class="pl-en">MyBinder</span> <span class="pl-k">extends</span> <span class="pl-e">NgModelBinder</span>[<span class="pl-en">MyModel</span>] <span class="pl-k">with</span> <span class="pl-e">BindingToServer</span> {
  <span class="pl-k">override</span> <span class="pl-k">val</span> <span class="pl-en">onClientUpdate</span> <span class="pl-k">=</span> { fromClient <span class="pl-k">=&gt;</span>
    println(s<span class="pl-s"><span class="pl-pds">"</span>We go a model update from the user! $fromClient<span class="pl-pds">"</span></span>)
  }

  <span class="pl-c"><span class="pl-c">//</span> ...</span>
}</pre>
  </div> 
  <p>Since watching scope variables on the client can produce a flood of changes (e.g. each character entered in a text box will generate a change event), changes are queued up and sent after no more changes are detected for 1000 millis. The fourth argument to the <code>SimpleNgModelBinder</code> constructor or an override of <code>clientSendDelay</code> in <code>NgModelBinder</code> allows you to tweak this delay to your liking.</p> 
  <p>If you mixed in <code>BindingToClient</code>, you can update your clients (if using <code>SessionScope</code>) by sending the binder a message with the model:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">val</span> <span class="pl-en">newMessage</span> <span class="pl-k">=</span> <span class="pl-en">Message</span>(<span class="pl-s"><span class="pl-pds">"</span>Updated!<span class="pl-pds">"</span></span>)

<span class="pl-c"><span class="pl-c">//</span> Find the binder</span>
<span class="pl-k">for</span> {
  session <span class="pl-k">&lt;</span><span class="pl-k">-</span> <span class="pl-en">S</span>.session
  binder <span class="pl-k">&lt;</span><span class="pl-k">-</span> session.findComet(<span class="pl-s"><span class="pl-pds">"</span>MessageBinder<span class="pl-pds">"</span></span>)
} { binder <span class="pl-k">!</span> newMessage } <span class="pl-c"><span class="pl-c">//</span> Send the new model</span></pre>
  </div> 
  <h4><a id="user-content-optimizations" class="anchor" href="https://github.com/joescii/lift-ng#optimizations" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Optimizations</h4> 
  <p>Mix in the <code>BindingOptimizations</code> trait to reduce the network overhead. Changes to a bound model on the server will be communicated to the client by sending only a diff.</p> 
  <p>Currently the client sends the entire model back to the server on change even when mixing <code>BindingOptimizations</code>. We hope to one day support sending only the diff just like we do when sending from the server.</p> 
  <p>Arrays are not correctly supported yet. A client-side change to an array will append to the array on the server rather than replacing the respective values based on the index.</p> 
  <p>Removing stuff from a model on the server does not transmit to the client yet. Only changes or additions to the model will be synced up to the client.</p> 
  <h4><a id="user-content-memory-consumption" class="anchor" href="https://github.com/joescii/lift-ng#memory-consumption" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Memory consumption</h4> 
  <p>Depending on the mixins utilized, you will store up more memory on the server when using an <code>NgModelBinder</code>. If utilizing <code>BindingOptimizations</code> or <code>SessionScope</code>, we must maintain the last known state of your model. This allows us to (1) compare to any model changes provided and transmit only the diff from the server and (2) render new pages with the current state.</p> 
  <h3><a id="user-content-model-objects" class="anchor" href="https://github.com/joescii/lift-ng#model-objects" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Model objects</h3> 
  <p>Any case class can be used as a model in <strong>lift-ng</strong>. However, models which are sent to the server from the client must mix in the <code>NgModel</code> trait. While models serialized to the client don't need this flag trait, but it is a good practice to include it to avoid errors as your application changes over time. Note that objects contained in an <code>NgModel</code> instance also do not need this flag trait either.</p> 
  <h4><a id="user-content-embedded-futures" class="anchor" href="https://github.com/joescii/lift-ng#embedded-futures" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Embedded Futures</h4> 
  <p>In addition to data fields which serialize naturally to their equivalent JSON representation, any model can contain fields that are futures of type <code>net.liftweb.actor.LAFuture[Box[T]]</code> for an arbitrary <code>T &lt;: Any</code>. Such fields will be mapped to the client representation of the model as a promise from the <a href="http://docs.angularjs.org/api/ng.$q" target="_blank"><code>$q</code> angular service</a>. The future will be plumbed to the client-side promise automatically, regardless of where the future appears in the model object graph.</p> 
  <p>For instance, given this Scala case class model:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">MyModel</span> (
  fastValue<span class="pl-k">:</span><span class="pl-k">String</span>,
  slowValue<span class="pl-k">:</span><span class="pl-en">LAFuture</span>[<span class="pl-en">Box</span>[<span class="pl-k">String</span>]]
) <span class="pl-k">extends</span> <span class="pl-e">NgModel</span></pre>
  </div> 
  <p>You will receive the following object on the client:</p> 
  <div class="highlight highlight-source-js">
   <pre><span class="pl-k">var</span> myModel <span class="pl-k">=</span> <span class="pl-c"><span class="pl-c">//</span> However you get it from lift-ng</span>
<span class="pl-smi">myModel</span>.<span class="pl-smi">fastValue</span> <span class="pl-c"><span class="pl-c">//</span> A string</span>
<span class="pl-smi">myModel</span>.<span class="pl-smi">slowValue</span> <span class="pl-c"><span class="pl-c">//</span> A promise</span>

<span class="pl-smi">myModel</span>.<span class="pl-smi">slowValue</span>.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">value</span>){
  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">'</span>The value is <span class="pl-pds">'</span></span><span class="pl-k">+</span>value)
});</pre>
  </div> 
  <p>Once the <code>LAFuture</code> is satisfied, the result will be pushed up via comet to resolve/reject the promise according to the <code>Box</code> value. The <code>Box</code> value is mapped with the same logic as with client-initiated service calls. See <a href="https://github.com/joescii/lift-ng#mapping-box-to-promise" target="_blank">Mapping Box to Promise</a>.</p> 
  <p>Embedded futures work for responses to <a href="https://github.com/joescii/lift-ng#client-initiated-service-calls" target="_blank">client-initiated service calls</a>, <a href="https://github.com/joescii/lift-ng#server-initiated-events" target="_blank">server-initiated events</a>, and <a href="https://github.com/joescii/lift-ng#client-server-model-binding" target="_blank">client-server model binding</a>. The only call which does not support embedded futures is <a href="https://github.com/joescii/lift-ng#non-ajax" target="_blank">non-AJAX service calls</a> via <code>jsObjFactory().json</code> where the intent is to provide values known at page load time.</p> 
  <p>In addition to Lift's <code>LAFuture</code>, Scala's <code>scala.concurrent.Future</code> can also be embedded. The conversion details are documented <a href="https://github.com/joescii/lift-ng#scalaconcurrentfuture" target="_blank">below</a>.</p> 
  <h3><a id="user-content-scalaconcurrentfuture" class="anchor" href="https://github.com/joescii/lift-ng#scalaconcurrentfuture" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>scala.concurrent.Future</h3> 
  <p>As of Scala 2.10, the language library includes support for futures via the <code>scala.concurrent.Future</code>. Builds of <strong>lift-ng</strong> for Scala 2.10+ provide support for this implementation of <code>Future</code> as well. The object <code>net.liftmodules.ng.FutureConversions</code> provides two implicit conversions. One will convert a <code>Future[T]</code> into an <code>LAFuture[Box[T]]</code> implicitly. The other decorates <code>Future[T]</code> with a function named <code>la</code> to force the conversion as needed. See below for a full example.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">net.liftweb.util.</span><span class="pl-v">Schedule</span>
<span class="pl-k">import</span> <span class="pl-v">net.liftweb.util.Helpers.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">net.liftmodules.ng.FutureConversions.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent. </span>{ <span class="pl-v">Promise</span>, <span class="pl-v">Future</span> }
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.ExecutionContext.Implicits.</span><span class="pl-v">global</span>
<span class="pl-k">import</span> <span class="pl-v">scala.util.</span><span class="pl-v">Try</span>

<span class="pl-c"><span class="pl-c">//</span> Create a Scala Promise first.</span>
<span class="pl-k">val</span> <span class="pl-en">p</span> <span class="pl-k">=</span> <span class="pl-en">Promise</span>[<span class="pl-k">String</span>]()

<span class="pl-c"><span class="pl-c">//</span> Satisfy the promise with a String a second from now.</span>
<span class="pl-en">Schedule</span>.schedule(() <span class="pl-k">=&gt;</span> p.complete(<span class="pl-en">Try</span>(<span class="pl-s"><span class="pl-pds">"</span>ScalaFuture<span class="pl-pds">"</span></span>)), <span class="pl-c1">1</span> second)

<span class="pl-c"><span class="pl-c">//</span> Implicit conversion to LAFuture</span>
<span class="pl-k">val</span> <span class="pl-en">laf1</span><span class="pl-k">:</span><span class="pl-en">LAFuture</span>[<span class="pl-en">Box</span>[<span class="pl-k">String</span>]] <span class="pl-k">=</span> p.future

<span class="pl-c"><span class="pl-c">//</span> Slightly less implicit conversion to LAFuture</span>
<span class="pl-k">val</span> <span class="pl-en">laf2</span> <span class="pl-k">=</span> p.future.la</pre>
  </div> 
  <p>The mapping of <code>Future[T]</code> to <code>LAFuture[Box[T]]</code> works as follows:</p> 
  <ul> 
   <li>A satisfied <code>Future[T]</code> with value <code>t</code> will be mapped to an <code>LAFuture[Box[T]]</code> satisfied with <code>Full(t)</code>.</li> 
   <li>A failed <code>Future[T]</code> with exception <code>e</code> will be mapped to an <code>LAFuture[Box[T]]</code> satisfied with <code>Failure(e.getMessage, Full(e), None)</code></li> 
  </ul> 
  <p>The <code>Box[T]</code> is then wired up to a <a href="http://docs.angularjs.org/api/ng.$q" target="_blank"><code>$q</code> promise</a> on the client <a href="https://github.com/joescii/lift-ng#mapping-box-to-promise" target="_blank">as outlined here</a>. The net result is a completed <code>Future[T]</code> maps to a resolved promise, and a failed <code>Future[T]</code> maps to a rejected promise.</p> 
  <h3><a id="user-content-i18n-internationalization" class="anchor" href="https://github.com/joescii/lift-ng#i18n-internationalization" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>i18n Internationalization</h3> 
  <p>If your app doesn't require sophisticated internationalization capabilities (i.e., Java resource bundles will suffice), then you can inject your resource bundles as a service into your app.</p> 
  <p>Given a resource bundle named <code>bundleName.properties</code>:</p> 
  <pre lang="text"><code>hello=Howdy!
goodbye=Goodbye, {0}!
</code></pre> 
  <p>Add it as a service available to your Angular app with this HTML:</p> 
  <div class="highlight highlight-text-html-basic">
   <pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>my-i18n_js<span class="pl-pds">"</span></span>  <span class="pl-e">data-lift</span>=<span class="pl-s"><span class="pl-pds">"</span>i18n?name=bundleName<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre>
  </div> 
  <p>Your bundle is made available via the <code>i18n</code> module with service/factory name coinciding with the bundle name. In this example, the object will have a string field named <code>hello</code> and a function named <code>goodbye</code>:</p> 
  <div class="highlight highlight-source-js">
   <pre><span class="pl-smi">angular</span>.<span class="pl-en">module</span>(<span class="pl-s"><span class="pl-pds">'</span>ExampleApp<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>i18n<span class="pl-pds">'</span></span>])
.<span class="pl-en">controller</span>(<span class="pl-s"><span class="pl-pds">'</span>ExampleController<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>$scope<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>bundleName<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">$scope</span>, <span class="pl-smi">i18n</span>) {
  <span class="pl-smi">$scope</span>.<span class="pl-smi">hello</span> <span class="pl-k">=</span> <span class="pl-smi">i18n</span>.<span class="pl-smi">hello</span>;
  <span class="pl-smi">$scope</span>.<span class="pl-smi">goodbye</span> <span class="pl-k">=</span> <span class="pl-smi">i18n</span>.<span class="pl-en">goodbye</span>(<span class="pl-smi">$scope</span>.<span class="pl-smi">username</span>);
}]);</pre>
  </div> 
  <p>You may also specify multiple bundle names. Here we include the default Lift bundle:</p> 
  <div class="highlight highlight-text-html-basic">
   <pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>my-i18n_js<span class="pl-pds">"</span></span>  <span class="pl-e">data-lift</span>=<span class="pl-s"><span class="pl-pds">"</span>i18n?names=bundleName,lift<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre>
  </div> 
  <p>Each bundle is another service available in the <code>i18n</code> bundle. Also notice in this example we show keys which aren't valid JavaScript identifiers are also available.</p> 
  <div class="highlight highlight-source-js">
   <pre><span class="pl-smi">angular</span>.<span class="pl-en">module</span>(<span class="pl-s"><span class="pl-pds">'</span>ExampleApp<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>i18n<span class="pl-pds">'</span></span>])
.<span class="pl-en">controller</span>(<span class="pl-s"><span class="pl-pds">'</span>ExampleController<span class="pl-pds">'</span></span>,
  [<span class="pl-s"><span class="pl-pds">'</span>$scope<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>bundleName<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>lift<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">$scope</span>, <span class="pl-smi">bundle</span>, <span class="pl-smi">lift</span>) {
    <span class="pl-smi">$scope</span>.<span class="pl-smi">hello</span> <span class="pl-k">=</span> <span class="pl-smi">bundle</span>.<span class="pl-smi">hello</span>;
    <span class="pl-smi">$scope</span>.<span class="pl-smi">goodbye</span> <span class="pl-k">=</span> <span class="pl-smi">bundle</span>.<span class="pl-en">goodbye</span>(<span class="pl-smi">$scope</span>.<span class="pl-smi">username</span>);
    <span class="pl-smi">$scope</span>.<span class="pl-smi">lostPasswd</span> <span class="pl-k">=</span> lift[<span class="pl-s"><span class="pl-pds">"</span>lost.password<span class="pl-pds">"</span></span>];
}]);</pre>
  </div> 
  <p>For more details about this resource bundle object, see <a href="https://github.com/joescii/j2js-i18n" target="_blank">j2js-i18n</a>.</p> 
  <h3><a id="user-content-rootscope-events" class="anchor" href="https://github.com/joescii/lift-ng#rootscope-events" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>$rootScope Events</h3> 
  <p><strong>NOT SUPPORTED IN LIFT 3.x AT THIS TIME</strong></p> 
  <p>We have a few <code>$rootScope</code> events to keep your application informed of the browser's ability to communicate with the server. Whenever we receive a non-<code>200</code> response from the backend server, we will issue a <code>net_liftmodules_ng.serverCommError</code> event on <code>$rootScope</code>. This event is raised on <em>every</em> failure, including retries which are otherwise transparent to the application. Included with the event is [1] the number of consecutive errors encountered, [2] the communication type that failed (either <code>"ajax"</code> or <code>"comet"</code>), and [3] the request object that failed (if <code>"ajax"</code>). This allows your client application to alert the user that communication to the server is struggling.</p> 
  <p>Once a the server has been successfully contacted after a communication error, we will issue a <code>net_liftmodules_ng.serverCommErrorClear</code> event on <code>$rootScope</code>. Included with this event is the communication type which succeeded (either <code>"ajax"</code> or <code>"comet"</code>).</p> 
  <p>Note that an http error when contacting a Lift server doesn't necessarily imply that network communication is failing. For instance, if a server-side ajax function raises an <code>Exception</code>, Lift will respond with a <code>500</code>. But with <strong>lift-ng</strong> in particular, any server-side ajax functions which you register with a <code>jsObjFactory()</code> are invoked in a <code>try</code>/<code>catch</code> pair to convert any exceptions into a failed Promise. Hence you can regard any <code>net_liftmodules_ng.serverCommError</code> events as a good indicator that something outside the control of your application is not going well.</p> 
  <h4><a id="user-content-example-usage" class="anchor" href="https://github.com/joescii/lift-ng#example-usage" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Example Usage</h4> 
  <div class="highlight highlight-source-js">
   <pre><span class="pl-smi">angular</span>.<span class="pl-en">module</span>(<span class="pl-s"><span class="pl-pds">"</span>MyServerCommAwareModule<span class="pl-pds">"</span></span>, [<span class="pl-s"><span class="pl-pds">"</span>lift-ng<span class="pl-pds">"</span></span>])
.<span class="pl-en">run</span>([<span class="pl-s"><span class="pl-pds">"</span>$rootScope<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>$window<span class="pl-pds">"</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">$rootScope</span>, <span class="pl-smi">$window</span>){
  <span class="pl-smi">$rootScope</span>.<span class="pl-en">$on</span>(<span class="pl-s"><span class="pl-pds">"</span>net_liftmodules_ng.serverCommError<span class="pl-pds">"</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">e</span>, <span class="pl-smi">count</span>, <span class="pl-smi">which</span>, <span class="pl-smi">request</span>) {
    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>Server communication error due to <span class="pl-pds">"</span></span><span class="pl-k">+</span>which<span class="pl-k">+</span><span class="pl-s"><span class="pl-pds">"</span>. Current count: <span class="pl-pds">"</span></span><span class="pl-k">+</span>count);
    <span class="pl-k">if</span>(count <span class="pl-k">&gt;</span> <span class="pl-c1">10</span>)
      <span class="pl-smi">$window</span>.<span class="pl-c1">alert</span>(<span class="pl-s"><span class="pl-pds">"</span>Hey, things aren't looking good!<span class="pl-pds">"</span></span>);
  });
  <span class="pl-smi">$rootScope</span>.<span class="pl-en">$on</span>(<span class="pl-s"><span class="pl-pds">"</span>net_liftmodules_ng.serverCommErrorClear<span class="pl-pds">"</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">e</span>, <span class="pl-smi">which</span>) {
    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>Server communication errors cleared after a <span class="pl-pds">"</span></span><span class="pl-k">+</span>which<span class="pl-k">+</span><span class="pl-s"><span class="pl-pds">"</span> success!<span class="pl-pds">"</span></span>);
  });
}]);</pre>
  </div> 
  <h3><a id="user-content-the-angular-snippet" class="anchor" href="https://github.com/joescii/lift-ng#the-angular-snippet" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>The Angular snippet</h3> 
  <p>As mentioned earlier in this README, you need the <code>Angular</code> snippet on each page for <strong>lift-ng</strong> to function. This snippet expands into several <code>script</code> tags for gluing Angular to Lift, including <code>angular.js</code> itself from a webjar if available on your classpath and configured in <code>Boot</code>. In development mode, this will cause your pages to load non-minified versions of angularjs modules. In all other modes, your pages will request the minified versions.</p> 
  <div class="highlight highlight-text-html-basic">
   <pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">data-lift</span>=<span class="pl-s"><span class="pl-pds">"</span>Angular<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre>
  </div> 
  <p>You can optionally set the <code>additional-angularjs-modules</code> parameter to override the list of angularjs modules you configured in <code>Boot</code>.</p> 
  <div class="highlight highlight-text-html-basic">
   <pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">data-lift</span>=<span class="pl-s"><span class="pl-pds">"</span>Angular?additional-angularjs-modules=animate,cookies,loader,route<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre>
  </div> 
  <p>You can optionally set the <code>min</code> parameter to force the minified js file to be served with <code>on</code>, <code>yes</code>, or <code>true</code>, OR to force the full js file to be served with <code>off</code>, <code>no</code>, or <code>false</code>. Default behavior is to serve the minified version in all modes except <code>RunModes.Development</code>.</p> 
  <div class="highlight highlight-text-html-basic">
   <pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">data-lift</span>=<span class="pl-s"><span class="pl-pds">"</span>Angular?min=off<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre>
  </div> 
  <h2><a id="user-content-scaladocs" class="anchor" href="https://github.com/joescii/lift-ng#scaladocs" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scaladocs</h2> 
  <p>The latest version of scaladocs are hosted thanks to <a href="http://www.cloudbees.com/" target="_blank">cloudbees</a> continuous integration services. There should not be any differences among the supported versions of Scala. Nonetheless all are listed here for good measure.</p> 
  <ul> 
   <li><a href="https://liftmodules.ci.cloudbees.com/job/lift-ng/ws/target/scala-2.10/api/index.html#package" target="_blank">Scala 2.10</a></li> 
   <li><a href="https://liftmodules.ci.cloudbees.com/job/lift-ng/ws/target/scala-2.9.2/api/index.html#package" target="_blank">Scala 2.9.2</a></li> 
   <li><a href="https://liftmodules.ci.cloudbees.com/job/lift-ng/ws/target/scala-2.9.1-1/api/index.html#package" target="_blank">Scala 2.9.1-1</a></li> 
   <li><a href="https://liftmodules.ci.cloudbees.com/job/lift-ng/ws/target/scala-2.9.1/api/index.html#package" target="_blank">Scala 2.9.1</a></li> 
  </ul> 
  <h2><a id="user-content-communitysupport" class="anchor" href="https://github.com/joescii/lift-ng#communitysupport" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Community/Support</h2> 
  <p>Need help? Hit us up on the <a href="https://groups.google.com/forum/#!forum/liftweb" target="_blank">Lift Google group</a>. We'd love to help you out and hear about what you're building.</p> 
  <h2><a id="user-content-contributing" class="anchor" href="https://github.com/joescii/lift-ng#contributing" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Contributing</h2> 
  <p>As with any open source project, contributions are greatly appreciated. If you find an issue or have a feature idea, we'd love to know about it! Any of the following will help this effort tremendously.</p> 
  <ol> 
   <li>Issue a Pull Request with the fix/enhancement and unit tests to validate the changes. OR</li> 
   <li>Issue a Pull Request with failing tests in the <a href="https://github.com/joescii/lift-ng/tree/master/test-project" target="_blank">test-project</a> to show what needs to be changed OR</li> 
   <li>At a minimum, <a href="https://github.com/joescii/lift-ng/issues/new" target="_blank">open an issue</a> to let us know about what you've discovered.</li> 
  </ol> 
  <h3><a id="user-content-pull-requests" class="anchor" href="https://github.com/joescii/lift-ng#pull-requests" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Pull Requests</h3> 
  <p>Below is the recommended procedure for git:</p> 
  <ol> 
   <li>Fork it</li> 
   <li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li> 
   <li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li> 
   <li>Push the branch (<code>git push origin my-new-feature</code>)</li> 
   <li>Create new Pull Request</li> 
  </ol> 
  <p>Please include as much as you are able, such as tests, documentation, updates to this README, etc.</p> 
  <h3><a id="user-content-testing-1" class="anchor" href="https://github.com/joescii/lift-ng#testing-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Testing</h3> 
  <p>Part of contributing your changes will involve testing. The <a href="https://github.com/joescii/lift-ng/tree/master/test-project" target="_blank">test-project</a> sub-directory contains and independent sbt project for thoroughly testing the <strong>lift-ng</strong> module via selenium. At a minimum, we ask that you run the tests with your changes to ensure nothing gets inadvertently broken. If possible, include tests which validate your fix/enhancement in any Pull Requests.</p> 
  <h2><a id="user-content-wish-list" class="anchor" href="https://github.com/joescii/lift-ng#wish-list" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Wish list</h2> 
  <p>Here are things we would like in this library. It's not a road map, but should at least give an idea of where we plan to explore soon.</p> 
  <ul> 
   <li>Add an <code>onRender</code> function to <code>AngularActor</code> to allow performing a scope operation when the page is rendered.</li> 
   <li>Cleanup <code>JsObjFactory</code> method names (see <a href="https://github.com/joescii/lift-ng#new-interface-for-jsobjfactory" target="_blank">New interface for <code>JsObjFactory</code></a> below).</li> 
   <li>Support server comet pushes to client via services.</li> 
   <li>Remove need to wrap <code>angular.module</code> in <code>renderIfNotAlreadyDefined()</code>.</li> 
   <li>Resolve the <code>RequestVar was set but not read</code> warning (see <a href="https://github.com/joescii/lift-ng/issues/11" target="_blank">Issue #11</a>).</li> 
   <li>Correctly support client-side changes to models containing arrays when mixing <code>BindingOptimizations</code> into an <code>NgModelBinder</code>.</li> 
   <li>Support removing fields in models bound with an <code>NgModelBinder</code> with <code>BindingOptimizations</code> mixed in.</li> 
   <li>Retain diffs in <code>NgModelBinder</code>. Allow server to reject client-side changes.</li> 
   <li>Support Lift's Record with <code>NgModel</code>.</li> 
   <li>Support dynamically-loaded templates for routing frameworks. (See <a href="https://github.com/joescii/lift-ng/issues/7" target="_blank">Issue 7</a>)</li> 
   <li>Support handling parameters of type <code>json.JValue</code>.</li> 
   <li>Support returning values of type <code>JsExp</code>.</li> 
   <li>Provide a means of utilizing the third <code>notify</code> function of promises to send progress updates to the client.</li> 
   <li>Initial value/first resolve value for services. The reason for providing a first value will allow the page load to deliver the values rather than require an extra round trip.</li> 
  </ul> 
  <h3><a id="user-content-new-interface-for-jsobjfactory" class="anchor" href="https://github.com/joescii/lift-ng#new-interface-for-jsobjfactory" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>New interface for <code>JsObjFactory</code></h3> 
  <p>As of 0.7.0, <strong>lift-ng</strong> is in a transition phase for cleaning up the <code>JsObjFactory</code> interface. The end goal is to express the sematics clearly in the name and have low-noise syntax. The current plan is to have two methods on <code>JsObjFactory</code> which express <em>when</em> the values are evaluated: <code>vals()</code> and <code>defs()</code>. Just like with the Scala keywords <code>val</code> and <code>def</code>, these names suggest that the values will be evaluated when assigned and on each call, respectively. <code>defs</code> will take a variable list of function assignments to effectively deprecate <code>jsonCall</code> and <code>future</code>. <code>vals</code> will take a variable list of assignments to effectively deprecate <code>string</code>, <code>anyVal</code>, and <code>json</code>. Macros will be used to make the syntax clean. For example, the following will be a valid Angular module:</p> 
  <div class="highlight highlight-source-scala">
   <pre>angular.module(<span class="pl-s"><span class="pl-pds">"</span>MyServices<span class="pl-pds">"</span></span>)
  .factory(<span class="pl-s"><span class="pl-pds">"</span>MyService<span class="pl-pds">"</span></span>, jsObjFactory()
    .defs(
      fn1 <span class="pl-k">=</span> (arg<span class="pl-k">:</span><span class="pl-k">String</span>) <span class="pl-k">=&gt;</span> <span class="pl-en">Service</span> call arg,
      fn2 <span class="pl-k">=</span> (arg<span class="pl-k">:</span><span class="pl-en">Model</span>) <span class="pl-k">=&gt;</span>  <span class="pl-en">Service</span> call arg
    )
    .vals(
      constant1 <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Evaluated at page-load!<span class="pl-pds">"</span></span>,
      constant2 <span class="pl-k">=</span> <span class="pl-c1">42</span>
    )
  )</pre>
  </div> 
  <p>Part of the transition period is the introduction of six new methods: <code>defAny</code>, <code>defStringToAny</code>, <code>defModelToAny</code>, <code>defFutureAny</code>, <code>defStringToFutureAny</code>, and <code>defModelToFutureAny</code>. These are replacing <code>jsonCall</code> and <code>future</code>. The purpose is to avoid having over-loaded method signatures which cause problems with defaults, inference, etc. The macro described above will rewrite <code>defs</code> into a chain of these six functions. These functions have been introduced ahead of the macro for the sake of allowing the implicit JSON <code>Formats</code> parameter to be provided (see <a href="https://github.com/joescii/lift-ng#json-serialization" target="_blank">JSON Serialization</a>).</p> 
  <h2><a id="user-content-change-log" class="anchor" href="https://github.com/joescii/lift-ng#change-log" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Change log</h2> 
  <ul> 
   <li><em>0.10.1</em>: Minor internal update to update lift-ng angular services to explicitly annotate dependencies.</li> 
   <li>See <a href="https://docs.angularjs.org/error/$injector/strictdi" target="_blank">Angular Strict DI</a> for more information.</li> 
   <li><em>0.10.0</em>: Adds <code>failureHandler: Failure =&gt; Reject</code> to the <code>init()</code> function.</li> 
   <li><em>0.9.6</em>: Indirect bug fix for <a href="https://github.com/joescii/lift-ng#i18n-internationalization" target="_blank">i18n-internationalization</a> by bumping <em>j2js-i18n</em> dependency. Quotes in parameterized strings are now correctly escaped.</li> 
   <li><em>0.9.5</em>: Minor bug fix to guarantee server-side exceptions form valid JSON responses to the client.</li> 
   <li><em>0.9.4</em>: This release contains exactly the same code as <em>0.9.3</em>, thanks to midnight piloting errors.</li> 
   <li><em>0.9.3</em>: Updates for compatibility with latest Lift 3.0 release candidate (RC3 in particular). Lift-json call has been updated per Lift framework <a href="https://github.com/lift/framework/pull/1766" target="_blank">PR 1766</a>. A recompile of the plugin against Lift 3.0-RC3 also resolved some bytecode-level issues. First release compiled for Lift 3.1 (3.1.0-M2 in particular).</li> 
   <li><em>0.9.2</em>: Corrects a bug where the <code>i18n</code> module would not load on pages which reside in a subdirectory of <code>webapp</code>.</li> 
   <li><em>0.9.1</em>: Corrects a bug where i18n modules with special characters were not properly encoded in the URL. This is a common case as resource bundles can be organized in a subdirectory of <code>src/main/resources</code></li> 
   <li><em>0.9.0</em>: See <a href="http://notes.implicit.ly/post/132163227499/lift-ng-090" target="_blank">Release Notes</a> for details. Ajax calls now use Lift's mechanism rather than angular's <code>$http</code> service allowing retries, timeouts, etc to be configurable via <code>LiftRules</code>. Added <code>retryAjaxInOrder</code> to <code>init()</code> which when enabled guarantees your ajax requests will arrive on the server in order, even if an attempt fails <strong>NOT SUPPORTED IN LIFT 3.x AT THIS TIME</strong>. Added <code>net_liftmodules_ng.serverCommError</code> and <code>net_liftmodules_ng.serverCommErrorClear</code> events on <code>$rootScope</code> <strong>NOT SUPPORTED IN LIFT 3.x AT THIS TIME</strong>. Exceptions thrown by your ajax functions are caught and the exception's <code>message</code> is returned to the client in a rejected promise.</li> 
   <li><em>0.8.0</em>: See <a href="http://notes.implicit.ly/post/131827339549/lift-ng-080" target="_blank">Release Notes</a> for details. Added <a href="http://www.webjars.org/" target="_blank">Webjars</a> integration to inject angularjs javascript files into your pages.</li> 
   <li><em>0.7.0</em>: See <a href="http://notes.implicit.ly/post/126346929649/lift-ng-070" target="_blank">Release Notes</a> for details. <strong>POSSIBLE BREAKING CHANGE</strong> Resolved <a href="https://github.com/joescii/lift-ng/issues/12" target="_blank">Issue 12</a>: Calling <code>defModelToAny</code>, <code>defModelToFutureAny</code>, or <code>jsonCall</code> with a function that takes neither a <code>String</code> or <code>NgModel</code> will fail to compile. Functions which serialize/deserialize JSON now take an implicit <code>net.liftweb.json.Formats</code>. Resolved <a href="https://github.com/joescii/lift-ng/issues/10" target="_blank">Issue 10</a>: Futures can now be embedded in models of an <code>NgModelBinder</code> Optimized <code>LAFuture</code>/<code>Future</code> serialization.</li> 
   <li><em>0.6.4</em>: Corrects a race condition where an embedded <code>Future</code> or <code>LAFuture</code> which happened to resolve during JSON serialization would never arrive on the client. Added a developer <code>WARN</code> server console message for when the client sends invalid json. The message asks the developer if they remembered to extend <code>NgModel</code> which is a super common root cause of the problem, and very frustrating to diagnose.</li> 
   <li><em>0.6.3</em>: Fixes a client-side error that occurs when a model returned from a service contains a <code>null</code> field. This bug was likely introduced in <em>0.6.0</em>.</li> 
   <li><em>0.6.2</em>: Fixes for bugs exposed by placing two <code>NgModelBinder</code>s in two different controllers on one page.</li> 
   <li><em>0.6.1</em>: Added support for <code>scala.concurrent.Future</code>.</li> 
   <li><em>0.6.0</em>: Introduction of <a href="https://github.com/joescii/lift-ng#embedded-futures" target="_blank">embedded futures</a>. <strong>BREAKING CHANGE:</strong> All of your angular modules now must directly or indirectly depend on the <code>lift-ng</code> module.</li> 
   <li><em>0.5.6</em>: Bug Fix: Strings pushed to the client are now properly escaped. Prior to this fix, a string containing illegal characters such as a newline would be silently discarded.</li> 
   <li><em>0.5.5</em>: Further decomposed <code>NgModelBinder</code>, separating the transmission optimizations into the <code>BindingOptimizations</code> mixin. With this update, an <code>NgModelBinder</code> should work for all cases by default.</li> 
   <li><em>0.5.4</em>: <strong>BREAKING CHANGE:</strong> Renamed <code>BindingActor</code> to <code>NgModelBinder</code>. Decomposed <code>NgModelBinder</code> so it is possible to specify: 
    <ul> 
     <li><code>BindingDirection</code> by mixing in <code>BindingToClient</code>, <code>BindingToServer</code>, or both for 2-way binding</li> 
     <li><code>BindingScope</code> which defaults to per-request (i.e. per page load) and can be scoped to the session like the original <code>BindingActor</code> behavior by mixing in <code>SessionScope</code></li> 
    </ul> </li> 
   <li><em>0.5.3</em>: Fixed handling of <code>NgModelBinder</code> initial values. Fixed usage of <code>CometListener</code> with a 2-way session-scoped <code>NgModelBinder</code> by reversing the order in which the named/unnamed comet actors are rendered. Fixed support for Lift 3.0-SNAPSHOT. Enhanced automated testing to cover 2.10/2.5, 2.10/2.6, 2.11/2.6, and 2.11/3.0 Scala/Lift versions.</li> 
   <li><em>0.5.2</em>: Resolved <a href="https://github.com/joescii/lift-ng/issues/5" target="_blank">Issue #5</a>, where the deployment context path appeared twice in the path to the <code>liftproxy.js</code> resource. Dropped support for Lift 3.0 compiled against Scala 2.10.</li> 
   <li><em>0.5.1</em>: Corrected a bug exposed by 2-way binding that our <a href="https://github.com/joescii/lift-ng/issues/1" target="_blank">early-arrival mechanism</a> to not work if <code>angular.js</code> files are specified at the end of the HTML. Made it possible to add <code>NgModelBinders</code> in the HTML templates without introducing an extra element. Thanks to <a href="https://twitter.com/lightfiend" target="_blank">Antonio</a> for <a href="https://groups.google.com/forum/#!topic/liftweb/1SJ6YNzpBEw" target="_blank">the suggestion</a>!</li> 
   <li><em>0.5.0</em>: Introduction of 2-way client/server <code>NgModel</code> binding. Added support for Scala 2.11 against Lift editions 2.6 and 3.0.</li> 
   <li><em>0.4.7</em>: Updated to work on pages that are in subdirectories. See <a href="https://github.com/joescii/lift-ng/pull/4" target="_blank">Pull Request #4</a>. Thank you <a href="https://github.com/voetha" target="_blank">voetha</a> for the contribution!</li> 
   <li><em>0.4.6</em>: Minor correction to resolution for <a href="https://github.com/joescii/lift-ng/issues/1" target="_blank">Issue #1</a> to correctly allow messages to begin dequeuing without waiting for a new message. Added <code>includeJsScript</code> parameter to <code>Angular.init()</code> to give developers the ability to download the <code>liftproxy.js</code> their own way, such as via <a href="http://headjs.com/" target="_blank">head.js</a>. Updated closure compiler.</li> 
   <li><em>0.4.5</em>: Now queues and releases async (<code>AngularActor</code>) messages arriving prior to Angular bootstrapping, resolving <a href="https://github.com/joescii/lift-ng/issues/1" target="_blank">Issue #1</a>.</li> 
   <li><em>0.4.4</em>: Fixed the last version, which would serve the same i18n locale resource for every requested locale.</li> 
   <li><em>0.4.3</em>: Enhanced i18n service to be served restfully, allowing the browser to cache the service if it has not changed. Dropped 2.9.1-1 support. Began compiling 2.10 with 2.10.4.</li> 
   <li><em>0.4.2</em>: Reverted a change made in 0.4.0 which allows more flexibility in the placement of angular services in the DOM, fixing part 2 of <a href="https://github.com/joescii/lift-ng/issues/2" target="_blank">Issue #2</a></li> 
   <li><em>0.4.1</em>: Now works for web apps running in a non-root context, fixing <a href="https://github.com/joescii/lift-ng/issues/2" target="_blank">Issue #2</a>.</li> 
   <li><em>0.4.0</em>: Now only requires <code>Angular</code> snippet in your template(s).</li> 
   <li><em>0.3.1</em>: Added i18n service.</li> 
   <li><em>0.3.0</em>: Implemented support for a factory/service to return an <code>LAFuture[Box[T]]</code></li> 
   <li><em>0.2.3</em>: Implemented <code>string</code>, <code>anyVal</code>, and <code>json</code> on <code>JsonObjFactory</code> to allow providing values which are known at page load time and do not otherwise change.</li> 
   <li><em>0.2.2</em>: Implemented <code>AngularActor.assign</code> for assigning scope variables. <code>Failure(msg)</code> message is sent to the client for <code>$q.reject</code>. Changed interpretation of <code>Empty</code> to mean <code>Resolve</code> rather than <code>Reject</code>.</li> 
   <li><em>0.2.1</em>: Implemented <code>scope.broadcast</code> and <code>scope.emit</code> for <code>AngularActor</code></li> 
   <li><em>0.2.0</em>: Introduction of <code>AngularActor</code> featuring <code>rootScope.broadcast</code> and <code>rootScope.emit</code> as the first comet-backed features</li> 
   <li><em>0.1.1</em>: First working release</li> 
   <li><em>0.1</em>: First release featuring AJAX services invoked from the client</li> 
  </ul> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/joescii/lift-ng#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p><strong>lift-ng</strong> is licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">APL 2.0</a>.</p> 
  <p>Copyright 2015 net.liftweb</p> 
  <p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p> 
  <pre><code>   http://www.apache.org/licenses/LICENSE-2.0
</code></pre> 
  <p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p> 
 </article>
</div>