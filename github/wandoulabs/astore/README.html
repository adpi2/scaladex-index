<div class="announce instapaper_body rst" data-path="README.rst" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <a name="user-content-chana" target="_blank" href=""></a> 
  <h2><a id="user-content-chana" class="anchor" href="https://github.com/wandoulabs/astore#chana" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>ChaNa</h2> 
  <p>Avro Data Store based on Akka (persistence in progressing)</p> 
  <p>This project is named from Chinese word "刹那", which is a transliteration of the word "Kasna" from Sanskrit, means "instant; split second".</p> 
  <a href="https://travis-ci.org/wandoulabs/chana" target="_blank"><img alt="chana build status" src="https://camo.githubusercontent.com/7dae286abe03622b035734a619d3c53abe77e43e/68747470733a2f2f7472617669732d63692e6f72672f77616e646f756c6162732f6368616e612e706e67" data-canonical-src="https://travis-ci.org/wandoulabs/chana.png" style="max-width:100%;"></a> 
  <a name="user-content-core-design" target="_blank" href=""></a> 
  <h3><a id="user-content-core-design" class="anchor" href="https://github.com/wandoulabs/astore#core-design" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Core Design</h3> 
  <ul> 
   <li>Each record is an actor (non-blocking)</li> 
   <li>Akka sharding cluster (easy to scale-out)</li> 
   <li>Locate field/value via <a href="http://www.w3.org/TR/xpath-31" target="_blank">XPath</a> (since version 0.2.0)</li> 
   <li>Scripting triggered by field updating events (JDK 8 JavaScript engine - <a href="http://docs.oracle.com/javase/8/docs/technotes/guides/scripting/nashorn/" target="_blank">Nashorn</a>)</li> 
   <li>JPQL query on cluster</li> 
  </ul> 
  <a name="user-content-run-chana" target="_blank" href=""></a> 
  <h3><a id="user-content-run-chana" class="anchor" href="https://github.com/wandoulabs/astore#run-chana" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Run chana</h3> 
  <div class="highlight highlight-source-shell">
   <pre>$ sbt run</pre>
  </div> 
  <p>Or</p> 
  <div class="highlight highlight-source-shell">
   <pre>$ sbt clean compile dist
$ ls target/universal/
chana-0.2.0-SNAPSHOT.zip</pre>
  </div> 
  <p>Then, copy chana-0.2.0-SNAPSHOT.zip to somewhere and unzip it</p> 
  <div class="highlight highlight-source-shell">
   <pre>$ <span class="pl-c1">cd</span> chana-0.2.0-SNAPSHOT/bin
$ ./chana</pre>
  </div> 
  <a name="user-content-access-chana" target="_blank" href=""></a> 
  <h3><a id="user-content-access-chana" class="anchor" href="https://github.com/wandoulabs/astore#access-chana" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Access chana</h3> 
  <a name="user-content-example-1-simple-record" target="_blank" href=""></a> 
  <h4><a id="user-content-example-1-simple-record" class="anchor" href="https://github.com/wandoulabs/astore#example-1-simple-record" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Example 1: Simple Record</h4> 
  <p>Schema: PersonInfo.avsc</p> 
  <div class="highlight highlight-source-json">
   <pre>{
  <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>record<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>PersonInfo<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>namespace<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>chana<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>fields<span class="pl-pds">"</span></span> : [ {
    <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>string<span class="pl-pds">"</span></span>
  }, {
    <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>int<span class="pl-pds">"</span></span>
  }, {
    <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>gender<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span> : {
      <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>enum<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>GenderType<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>symbols<span class="pl-pds">"</span></span> : [ <span class="pl-s"><span class="pl-pds">"</span>Female<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Male<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Unknown<span class="pl-pds">"</span></span> ]
    },
    <span class="pl-s"><span class="pl-pds">"</span>default<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>Unknown<span class="pl-pds">"</span></span>
  }, {
    <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>emails<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span> : {
      <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>array<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>items<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>string<span class="pl-pds">"</span></span>
    }
  } ]
}</pre>
  </div> 
  <p>Try it:</p> 
  <div class="highlight highlight-source-shell">
   <pre>$ <span class="pl-c1">cd</span> src/test/resources/avsc

$ curl --data @PersonInfo.avsc <span class="pl-s"><span class="pl-pds">'</span>http://127.0.0.1:8080/schema/put/personinfo<span class="pl-pds">'</span></span>
OK

$ curl <span class="pl-s"><span class="pl-pds">'</span>http://127.0.0.1:8080/personinfo/get/1<span class="pl-pds">'</span></span>
{<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>:0,<span class="pl-s"><span class="pl-pds">"</span>gender<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span>Unknown<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>emails<span class="pl-pds">"</span></span>:[]}

$ curl --data-binary @PersonInfo.update <span class="pl-s"><span class="pl-pds">'</span>http://127.0.0.1:8080/personinfo/update/1<span class="pl-pds">'</span></span>
OK

$ curl <span class="pl-s"><span class="pl-pds">'</span>http://127.0.0.1:8080/personinfo/get/1<span class="pl-pds">'</span></span>
{<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span>James Bond<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>:60,<span class="pl-s"><span class="pl-pds">"</span>gender<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span>Unknown<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>emails<span class="pl-pds">"</span></span>:[]}

$ curl <span class="pl-s"><span class="pl-pds">'</span>http://127.0.0.1:8080/personinfo/get/1/name<span class="pl-pds">'</span></span>
<span class="pl-s"><span class="pl-pds">"</span>James Bond<span class="pl-pds">"</span></span></pre>
  </div> 
  <a name="user-content-jpql-example" target="_blank" href=""></a> 
  <h4><a id="user-content-jpql-example" class="anchor" href="https://github.com/wandoulabs/astore#jpql-example" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>JPQL example</h4> 
  <div class="highlight highlight-source-shell">
   <pre><span class="pl-c">#### JPQL Simple test</span>
$ cat jpql.put

<span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>SELECT COUNT(p.age), AVG(p.age) FROM PersonInfo p WHERE p.age &gt;= 30 ORDER BY p.age<span class="pl-pds">'</span></span> <span class="pl-k">|</span> \
curl -d @- <span class="pl-s"><span class="pl-pds">'</span>http://127.0.0.1:8080/jpql/put/JPQL_NO_1<span class="pl-pds">'</span></span>

$ ./jpql.put

<span class="pl-c">#### watching jpql results</span>
$ cat jpql.ask

<span class="pl-k">while</span> <span class="pl-c1">:</span>
<span class="pl-k">do</span>
   sleep 1s
   curl <span class="pl-s"><span class="pl-pds">'</span>http://127.0.0.1:8080/jpql/ask/JPQL_NO_1<span class="pl-pds">'</span></span>
   <span class="pl-c1">printf</span> <span class="pl-s"><span class="pl-pds">'</span>\n<span class="pl-pds">'</span></span>
<span class="pl-k">done</span>

$ ./jpql.ask

<span class="pl-c">#### update record with random id, repeat it to update more person's age to 80</span>
$ cat jpql.update

RANDOM_ID=<span class="pl-smi">$RANDOM</span>
JPQL=<span class="pl-s"><span class="pl-pds">"</span>UPDATE PersonInfo p SET p.age = 80 WHERE p.id = '<span class="pl-smi">$RANDOM_ID</span>'<span class="pl-pds">"</span></span>
<span class="pl-c1">echo</span> <span class="pl-smi">$JPQL</span>

<span class="pl-c1">echo</span> <span class="pl-smi">$JPQL</span> <span class="pl-k">|</span> curl -d @- <span class="pl-s"><span class="pl-pds">"</span>http://127.0.0.1:8080/jpql<span class="pl-pds">"</span></span>

$ ./jpql.update</pre>
  </div> 
  <a name="user-content-script-example-requires-jdk8" target="_blank" href=""></a> 
  <h4><a id="user-content-script-example-requires-jdk8" class="anchor" href="https://github.com/wandoulabs/astore#script-example-requires-jdk8" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Script example: (requires JDK8+)</h4> 
  <p>A piece of JavaScript code that will be executed when field PersionInfo.name was updated: on_name.js:</p> 
  <div class="highlight highlight-source-js">
   <pre><span class="pl-k">function</span> <span class="pl-en">onNameUpdated</span>() {
    <span class="pl-k">var</span> age <span class="pl-k">=</span> <span class="pl-smi">record</span>.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>);
    <span class="pl-en">what_is</span>(age);

    <span class="pl-en">what_is</span>(http_get);
    <span class="pl-k">var</span> http_get_result <span class="pl-k">=</span> <span class="pl-smi">http_get</span>.<span class="pl-c1">apply</span>(<span class="pl-s"><span class="pl-pds">"</span>http://localhost:8080/ping<span class="pl-pds">"</span></span>, <span class="pl-c1">5</span>);
    <span class="pl-smi">java</span>.<span class="pl-c1">lang</span>.<span class="pl-smi">Thread</span>.<span class="pl-en">sleep</span>(<span class="pl-c1">1000</span>);
    <span class="pl-en">what_is</span>(<span class="pl-smi">http_get_result</span>.<span class="pl-c1">value</span>());

    <span class="pl-en">what_is</span>(http_post);
    <span class="pl-k">var</span> http_post_result <span class="pl-k">=</span> <span class="pl-smi">http_post</span>.<span class="pl-c1">apply</span>(<span class="pl-s"><span class="pl-pds">"</span>http://localhost:8080/personinfo/put/2/age<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>888<span class="pl-pds">"</span></span>, <span class="pl-c1">5</span>);
    <span class="pl-smi">java</span>.<span class="pl-c1">lang</span>.<span class="pl-smi">Thread</span>.<span class="pl-en">sleep</span>(<span class="pl-c1">1000</span>);
    <span class="pl-en">what_is</span>(<span class="pl-smi">http_post_result</span>.<span class="pl-c1">value</span>());

    <span class="pl-k">for</span> (i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> <span class="pl-smi">binlogs</span>.<span class="pl-c1">length</span>; i<span class="pl-k">++</span>) {
        <span class="pl-k">var</span> binlog <span class="pl-k">=</span> binglogs[i];
        <span class="pl-en">what_is</span>(<span class="pl-smi">binlog</span>.<span class="pl-c1">type</span>());
        <span class="pl-en">what_is</span>(<span class="pl-smi">binlog</span>.<span class="pl-en">xpath</span>());
        <span class="pl-en">what_is</span>(<span class="pl-smi">binlog</span>.<span class="pl-c1">value</span>());
    }
}

<span class="pl-k">function</span> <span class="pl-en">what_is</span>(<span class="pl-smi">value</span>) {
    <span class="pl-en">print</span>(id <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> value);
}

<span class="pl-en">onNameUpdated</span>();</pre>
  </div> 
  <p>Try it:</p> 
  <div class="highlight highlight-source-shell">
   <pre>$ curl --data-binary @on_name.js \
 <span class="pl-s"><span class="pl-pds">'</span>http://127.0.0.1:8080/personinfo/script/put/name/SCRIPT_NO_1<span class="pl-pds">'</span></span>
OK

$ curl --data <span class="pl-s"><span class="pl-pds">'</span>"John"<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>http://127.0.0.1:8080/personinfo/put/1/name<span class="pl-pds">'</span></span>
OK

$ curl <span class="pl-s"><span class="pl-pds">'</span>http://127.0.0.1:8080/personinfo/get/2/age<span class="pl-pds">'</span></span>
888</pre>
  </div> 
  <a name="user-content-example-2-with-embedded-type" target="_blank" href=""></a> 
  <h4><a id="user-content-example-2-with-embedded-type" class="anchor" href="https://github.com/wandoulabs/astore#example-2-with-embedded-type" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Example 2: With Embedded Type</h4> 
  <p>Schema: hatInventory.avsc</p> 
  <div class="highlight highlight-source-json">
   <pre>{
  <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>record<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>hatInventory<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>namespace<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>chana<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>fields<span class="pl-pds">"</span></span> : [ {
    <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>sku<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>string<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>default<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>
  }, {
    <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>description<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span> : {
      <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>record<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>hatInfo<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>fields<span class="pl-pds">"</span></span> : [ {
        <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>style<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>string<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>default<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>
      }, {
        <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>size<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>string<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>default<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>
      }, {
        <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>color<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>string<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>default<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>
      }, {
        <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>material<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>string<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>default<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>
      } ]
    },
    <span class="pl-s"><span class="pl-pds">"</span>default<span class="pl-pds">"</span></span> : { }
  } ]
}</pre>
  </div> 
  <p>Try it:</p> 
  <div class="highlight highlight-source-shell">
   <pre>$ <span class="pl-c1">cd</span> src/test/resources/avsc

$ curl --data @hatInventory.avsc <span class="pl-s"><span class="pl-pds">'</span>http://127.0.0.1:8080/schema/put/hatinv<span class="pl-pds">'</span></span>
OK

$ curl <span class="pl-s"><span class="pl-pds">'</span>http://127.0.0.1:8080/hatinv/get/1<span class="pl-pds">'</span></span>
{<span class="pl-s"><span class="pl-pds">"</span>sku<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>description<span class="pl-pds">"</span></span>:{<span class="pl-s"><span class="pl-pds">"</span>style<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>size<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>color<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>material<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>}}

$ curl --data <span class="pl-s"><span class="pl-pds">'</span>{"style":"classic","size":"Large","color":"Red"}<span class="pl-pds">'</span></span> \
 <span class="pl-s"><span class="pl-pds">'</span>http://127.0.0.1:8080/hatinv/put/1/description<span class="pl-pds">'</span></span>
OK

$ curl <span class="pl-s"><span class="pl-pds">'</span>http://127.0.0.1:8080/hatinv/get/1<span class="pl-pds">'</span></span>
{<span class="pl-s"><span class="pl-pds">"</span>sku<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>description<span class="pl-pds">"</span></span>:{<span class="pl-s"><span class="pl-pds">"</span>style<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span>classic<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>size<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span>Large<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>color<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span>Red<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>material<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>}}

$ curl <span class="pl-s"><span class="pl-pds">'</span>http://127.0.0.1:8080/hatinv/get/1/description<span class="pl-pds">'</span></span>
{<span class="pl-s"><span class="pl-pds">"</span>style<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span>classic<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>size<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span>Large<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>color<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span>Red<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>material<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>}

$ ab -c100 -n100000 -k <span class="pl-s"><span class="pl-pds">'</span>http://127.0.0.1:8080/hatinv/get/1?benchmark_only=1024<span class="pl-pds">'</span></span></pre>
  </div> 
  <a name="user-content-simple-benchmark-for-rest-json-api-too-simple-too-naive" target="_blank" href=""></a> 
  <h4><a id="user-content-simple-benchmark-for-rest-json-api-too-simple-too-naive" class="anchor" href="https://github.com/wandoulabs/astore#simple-benchmark-for-rest-json-api-too-simple-too-naive" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Simple benchmark for REST-JSON API (too simple too naive)</h4> 
  <p>Environment:</p> 
  <pre>HOST: Dell Inc. PowerEdge R420/0VD50G
CPU: 2 x Intel(R) Xeon(R) CPU E5-2420 v2 @ 2.20GHz (12 #core, 24 #HT)
OS: CentOS Linux release 7.0.1406 (Core)
</pre> 
  <p>Simple GET/PUT REST-JSON Result:</p> 
  <pre>Simple GET: 169,437 [req#/sec] (mean)
Simple PUT: 102,961 [req#/sec] (mean)
</pre> 
  <p>Details:</p> 
  <ul> 
   <li><a href="https://github.com/wandoulabs/chana/blob/master/chana-docs/rst/benchmark/benchmark.rst" target="_blank">Benchmark</a></li> 
   <li><a href="https://github.com/wandoulabs/chana/blob/master/chana-docs/rst/benchmark/ht-concurrency.rst" target="_blank">Benchmark through multiple-core</a></li> 
  </ul> 
  <p>To run:</p> 
  <div class="highlight highlight-source-shell">
   <pre>sbt run
<span class="pl-c1">cd</span> src/test/resources/avsc
./bench-get.sh
./bench-put.sh</pre>
  </div> 
  <a name="user-content-preface" target="_blank" href=""></a> 
  <h5><a id="user-content-preface" class="anchor" href="https://github.com/wandoulabs/astore#preface" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Preface</h5> 
  <p>chana stores Avro record, with two groups of APIs:</p> 
  <ul> 
   <li>Primitive API (Scala/Java)</li> 
   <li>RESTful API</li> 
  </ul> 
  <a name="user-content-primitive-api-scala-java" target="_blank" href=""></a> 
  <h5><a id="user-content-primitive-api-scala--java" class="anchor" href="https://github.com/wandoulabs/astore#primitive-api-scala--java" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Primitive API (Scala / Java)</h5> 
  <p>use <strong>XPath</strong> expression to locate avro field. See <a href="http://www.w3.org/TR/xpath-31" target="_blank">XPath</a></p> 
  <a name="user-content-schema" target="_blank" href=""></a> 
  <h6><a id="user-content-1-schema" class="anchor" href="https://github.com/wandoulabs/astore#1-schema" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>1. Schema</h6> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">PutSchema</span>(<span class="pl-v">entityName</span>: <span class="pl-k">String</span>, <span class="pl-v">schema</span>: <span class="pl-k">String</span>, <span class="pl-v">entityFullName</span>: <span class="pl-en">Option</span>[<span class="pl-k">String</span>], <span class="pl-v">idleTimeout</span>: <span class="pl-en">Duration</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">RemoveSchema</span>(<span class="pl-v">entityName</span>: <span class="pl-k">String</span>)</pre>
  </div> 
  <a name="user-content-basic-operations" target="_blank" href=""></a> 
  <h6><a id="user-content-2-basic-operations" class="anchor" href="https://github.com/wandoulabs/astore#2-basic-operations" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>2. Basic operations</h6> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">GetRecord</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">GetRecordAvro</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">GetRecordJson</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">PutRecord</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>, <span class="pl-v">record</span>: <span class="pl-en">Record</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">PutRecordJson</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>, <span class="pl-v">record</span>: <span class="pl-k">String</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">GetField</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>, <span class="pl-v">field</span>: <span class="pl-k">String</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">GetFieldAvro</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>, <span class="pl-v">field</span>: <span class="pl-k">String</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">GetFieldJson</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>, <span class="pl-v">field</span>: <span class="pl-k">String</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">PutField</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>, <span class="pl-v">field</span>: <span class="pl-k">String</span>, <span class="pl-v">value</span>: <span class="pl-en">Any</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">PutFieldJson</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>, <span class="pl-v">field</span>: <span class="pl-k">String</span>, <span class="pl-v">value</span>: <span class="pl-k">String</span>)

<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Select</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>, <span class="pl-v">path</span>: <span class="pl-k">String</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">SelectAvro</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>, <span class="pl-v">path</span>: <span class="pl-k">String</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">SelectJson</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>, <span class="pl-v">path</span>: <span class="pl-k">String</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Update</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>, <span class="pl-v">path</span>: <span class="pl-k">String</span>, <span class="pl-v">value</span>: <span class="pl-en">Any</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">UpdateJson</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>, <span class="pl-v">path</span>: <span class="pl-k">String</span>, <span class="pl-v">value</span>: <span class="pl-k">String</span>)</pre>
  </div> 
  <a name="user-content-operations-applicable-on-array-map" target="_blank" href=""></a> 
  <h6><a id="user-content-3-operations-applicable-on-array--map" class="anchor" href="https://github.com/wandoulabs/astore#3-operations-applicable-on-array--map" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>3. Operations applicable on Array / Map</h6> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Insert</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>, <span class="pl-v">path</span>: <span class="pl-k">String</span>, <span class="pl-v">value</span>: <span class="pl-en">Any</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">InsertJson</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>, <span class="pl-v">path</span>: <span class="pl-k">String</span>, <span class="pl-v">value</span>: <span class="pl-k">String</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">InsertAll</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>, <span class="pl-v">path</span>: <span class="pl-k">String</span>, <span class="pl-v">values</span>: <span class="pl-en">List</span>[_])
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">InsertAllJson</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>, <span class="pl-v">path</span>: <span class="pl-k">String</span>, <span class="pl-v">values</span>: <span class="pl-k">String</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Delete</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>, <span class="pl-v">path</span>: <span class="pl-k">String</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Clear</span>(<span class="pl-v">id</span>: <span class="pl-k">String</span>, <span class="pl-v">path</span>: <span class="pl-k">String</span>)</pre>
  </div> 
  <a name="user-content-script" target="_blank" href=""></a> 
  <h6><a id="user-content-4-script" class="anchor" href="https://github.com/wandoulabs/astore#4-script" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>4. Script</h6> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">PutScript</span>(<span class="pl-v">entity</span>: <span class="pl-k">String</span>, <span class="pl-v">field</span>: <span class="pl-k">String</span>, <span class="pl-v">id</span>: <span class="pl-k">String</span>, <span class="pl-v">script</span>: <span class="pl-k">String</span>)
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">RemoveScript</span>(<span class="pl-v">entity</span>: <span class="pl-k">String</span>, <span class="pl-v">field</span>: <span class="pl-k">String</span>, <span class="pl-v">id</span>: <span class="pl-k">String</span>)</pre>
  </div> 
  <a name="user-content-rest-api" target="_blank" href=""></a> 
  <h5><a id="user-content-rest-api" class="anchor" href="https://github.com/wandoulabs/astore#rest-api" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>REST API</h5> 
  <a name="user-content-put-schema" target="_blank" href=""></a> 
  <h6><a id="user-content-put-schema" class="anchor" href="https://github.com/wandoulabs/astore#put-schema" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Put schema</h6> 
  <pre>POST /schema/put/$entityName?fullname=entity_full_name&amp;timeout=1000

Host: status.wandoujia.com
Content-Type: application/octet-stream
Content-Length: NNN

BODY:
&lt;SCHEMA_STRING&gt;
</pre> 
  <p>parameters:</p> 
  <ul> 
   <li><code>fullname</code>: for schema that contains multiple referenced complex types in union, you should provide the full name of main entry. <strong>Optional</strong></li> 
   <li><code>timeout</code>: idle timeout in milliseconds. <strong>Optional</strong></li> 
  </ul> 
  <a name="user-content-del-schema" target="_blank" href=""></a> 
  <h6><a id="user-content-del-schema" class="anchor" href="https://github.com/wandoulabs/astore#del-schema" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Del schema</h6> 
  <pre>GET /schema/del/$entityName/

Host: status.wandoujia.com
</pre> 
  <a name="user-content-get-record" target="_blank" href=""></a> 
  <h6><a id="user-content-get-record" class="anchor" href="https://github.com/wandoulabs/astore#get-record" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Get record</h6> 
  <pre>GET /$entity/get/$id/

Host: status.wandoujia.com
</pre> 
  <a name="user-content-get-record-field" target="_blank" href=""></a> 
  <h6><a id="user-content-get-record-field" class="anchor" href="https://github.com/wandoulabs/astore#get-record-field" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Get record field</h6> 
  <pre>GET /$entity/get/$id/$field

Host: status.wandoujia.com
</pre> 
  <a name="user-content-put-record" target="_blank" href=""></a> 
  <h6><a id="user-content-put-record" class="anchor" href="https://github.com/wandoulabs/astore#put-record" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Put record</h6> 
  <pre>POST /$entity/put/$id/

Host: status.wandoujia.com
Content-Type: application/octet-stream
Content-Length: NNN

BODY:
&lt;JSON_STRING&gt;
</pre> 
  <a name="user-content-put-record-field" target="_blank" href=""></a> 
  <h6><a id="user-content-put-record-field" class="anchor" href="https://github.com/wandoulabs/astore#put-record-field" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Put record field</h6> 
  <pre>POST /$entity/put/$id/$field

Host: status.wandoujia.com
Content-Type: application/octet-stream
Content-Length: NNN

BODY:
&lt;JSON_STRING&gt;
</pre> 
  <a name="user-content-select" target="_blank" href=""></a> 
  <h6><a id="user-content-select" class="anchor" href="https://github.com/wandoulabs/astore#select" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Select</h6> 
  <pre>POST /$entity/select/$id/

Host: status.wandoujia.com
Content-Type: application/octet-stream
Content-Length: NNN

BODY:
$xpath
</pre> 
  <a name="user-content-update" target="_blank" href=""></a> 
  <h6><a id="user-content-update" class="anchor" href="https://github.com/wandoulabs/astore#update" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Update</h6> 
  <pre>POST /$entity/update/$id/

Host: status.wandoujia.com
Content-Type: application/octet-stream
Content-Length: NNN

BODY:
$xpath
&lt;JSON_STRING&gt;
</pre> 
  <p>Example (update array field -&gt; record’s number field):</p> 
  <pre>POST /account/update/12345/
BODY:
/chargeRecords[1].time
1234
</pre> 
  <p>Example (update map field -&gt; record’s number field):</p> 
  <pre>POST /account/update/12345/
BODY:
/devApps/@a/numBlackApps
1234
</pre> 
  <a name="user-content-insert-applicable-for-array-map-only" target="_blank" href=""></a> 
  <h6><a id="user-content-insert-applicable-for-array--map-only" class="anchor" href="https://github.com/wandoulabs/astore#insert-applicable-for-array--map-only" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Insert (applicable for Array / Map only)</h6> 
  <pre>POST /$entity/insert/$id/

Host: status.wandoujia.com
Content-Type: application/octet-stream
Content-Length: NNN

BODY:
$xpath
&lt;JSON_STRING&gt;
</pre> 
  <p>Example (insert to array field):</p> 
  <pre>POST /account/insert/12345/
BODY:
/chargeRecords
{"time": 4, "amount": -4.0}
</pre> 
  <p>Example (insert to map field):</p> 
  <pre>POST /account/insert/12345/
BODY:
/devApps
{"h" : {"numBlackApps": 10}}
</pre> 
  <a name="user-content-insertall-applicable-for-array-map-only" target="_blank" href=""></a> 
  <h6><a id="user-content-insertall-applicable-for-array--map-only" class="anchor" href="https://github.com/wandoulabs/astore#insertall-applicable-for-array--map-only" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>InsertAll (applicable for Array / Map only)</h6> 
  <pre>POST /$entity/insertall/$id/

Host: status.wandoujia.com
Content-Type: application/octet-stream
Content-Length: NNN

BODY:
$xpath
&lt;JSON_STRING&gt;
</pre> 
  <p>Example (insert to array field):</p> 
  <pre>POST /account/insertall/12345/
BODY:
/chargeRecords
[{"time": -1, "amount": -5.0}, {"time": -2, "amount": -6.0}]
</pre> 
  <p>Example (insert to map field):</p> 
  <pre>POST /account/insertall/12345/
BODY:
/devApps
{"g" : {}, "h" : {"numBlackApps": 10}}
</pre> 
  <a name="user-content-delete-applicable-for-array-map-only" target="_blank" href=""></a> 
  <h6><a id="user-content-delete-applicable-for-array--map-only" class="anchor" href="https://github.com/wandoulabs/astore#delete-applicable-for-array--map-only" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Delete (applicable for Array / Map only)</h6> 
  <pre>POST /$entity/delete/$id/

Host: status.wandoujia.com
Content-Type: application/octet-stream
Content-Length: NNN

BODY:
$xpath
</pre> 
  <a name="user-content-clear-applicable-for-array-map-only" target="_blank" href=""></a> 
  <h6><a id="user-content-clear-applicable-for-array--map-only" class="anchor" href="https://github.com/wandoulabs/astore#clear-applicable-for-array--map-only" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Clear (applicable for Array / Map only)</h6> 
  <pre>POST /$entity/clear/$id/

Host: status.wandoujia.com
Content-Type: application/octet-stream
Content-Length: NNN

BODY:
$xpath
</pre> 
  <a name="user-content-put-script-apply-on-all-instances-of-this-entity" target="_blank" href=""></a> 
  <h6><a id="user-content-put-script-apply-on-all-instances-of-this-entity" class="anchor" href="https://github.com/wandoulabs/astore#put-script-apply-on-all-instances-of-this-entity" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Put Script (apply on all instances of this entity)</h6> 
  <pre>POST /$entity/script/put/$field/$scriptid/

Host: status.wandoujia.com
Content-Type: application/octet-stream
Content-Length: NNN

BODY:
&lt;JavaScript&gt;
</pre> 
  <a name="user-content-del-script-apply-on-all-instances-of-this-entity" target="_blank" href=""></a> 
  <h6><a id="user-content-del-script-apply-on-all-instances-of-this-entity" class="anchor" href="https://github.com/wandoulabs/astore#del-script-apply-on-all-instances-of-this-entity" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Del Script (apply on all instances of this entity)</h6> 
  <pre>GET /$entity/script/del/$field/$scriptid/

Host: status.wandoujia.com
</pre> 
  <p>Note:</p> 
  <ul> 
   <li>Replace <code>$entity</code> with the object/table/entity name</li> 
   <li>Replace <code>$id</code> with object id</li> 
   <li>Replace <code>$xpath</code> with actual xpath expression</li> 
   <li>Put the <code>$xpath</code> and JSON format value(s) for <strong>update / insert / insertall</strong> in <strong>POST</strong> body, separate <code>$xpath</code> and JSON value(s) with <strong>\n</strong>, and make sure it’s encoded as binary, set <strong>Content-Type: application/octet-stream</strong></li> 
  </ul> 
  <a name="user-content-scripting-supporting" target="_blank" href=""></a> 
  <h5><a id="user-content-scripting-supporting" class="anchor" href="https://github.com/wandoulabs/astore#scripting-supporting" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scripting supporting</h5> 
  <p>The bindings that could be accessed in script:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">def</span> <span class="pl-en">prepareBindings</span>(<span class="pl-v">onUpdated</span>: <span class="pl-en">OnUpdated</span>) <span class="pl-k">=</span> {
  <span class="pl-k">val</span> <span class="pl-en">bindings</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">SimpleBindings</span>
  bindings.put(<span class="pl-s"><span class="pl-pds">"</span>http_get<span class="pl-pds">"</span></span>, http_get)
  bindings.put(<span class="pl-s"><span class="pl-pds">"</span>http_post<span class="pl-pds">"</span></span>, http_post)
  bindings.put(<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, onUpdated.id)
  bindings.put(<span class="pl-s"><span class="pl-pds">"</span>record<span class="pl-pds">"</span></span>, record)
  bindings.put(<span class="pl-s"><span class="pl-pds">"</span>binlogs<span class="pl-pds">"</span></span>, binlogs)
  bindings
}</pre>
  </div> 
  <p>Where,</p> 
  <ul> 
   <li><code>http_get</code>: a function could be invoked via <code>http_get.apply(url: CharSequence, timeoutInSeconds: Int)</code>, returns <a href="http://www.scala-lang.org/api/2.11.4/index.html#scala.concurrent.Future" target="_blank">scala.concurrent.Future[Any]</a></li> 
   <li><code>http_post</code>: a function could be invoked via <code>http_post.apply(url: CharSequence, body: CharSequence, timeoutInSeconds: Int)</code> returns <a href="http://www.scala-lang.org/api/2.11.4/index.html#scala.concurrent.Future" target="_blank">scala.concurrent.Future[Any]</a></li> 
   <li><code>id</code>: the id of this entity</li> 
   <li><code>record</code>: the entity record after updated</li> 
   <li><code>binlogs</code>: array of Binlog(s) during this updating action</li> 
   <li><code>binlogs[i].type()</code>: -1 - Clear, 0 - Delete, 1 - Change, 2 - Insert</li> 
   <li><code>binlogs[i].xpath()</code>: XPath Location of changed value</li> 
   <li><code>binlogs[i].value()</code>: value - Change/Insert, keys - Delete, void - Clear</li> 
   <li>The JavaScript code should do what ever operation via function only. You can define local variables in function, and transfer these local vars between functions to share them instead of defining global vars.</li> 
  </ul> 
  <a name="user-content-reference" target="_blank" href=""></a> 
  <h2><a id="user-content-reference" class="anchor" href="https://github.com/wandoulabs/astore#reference" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Reference</h2> 
  <ul> 
   <li><a href="http://www.w3.org/TR/xpath-31" target="_blank">XPath</a></li> 
   <li><a href="https://wiki.openjdk.java.net/display/Nashorn/Main" target="_blank">Nashorn</a></li> 
  </ul> 
 </article>
</div>