<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-itinere--" class="anchor" href="https://github.com/fristi/itinere#itinere--" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Itinere <a href="http://travis-ci.org/Fristi/itinere" target="_blank"><img src="https://camo.githubusercontent.com/f3d336858254d8448f1046fd39827c9cc39578f7/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f4672697374692f6974696e6572652e706e67" alt="Build Status" data-canonical-src="https://secure.travis-ci.org/Fristi/itinere.png" style="max-width:100%;"></a> <a href="https://coveralls.io/r/Fristi/itinere?branch=master" target="_blank"><img src="https://camo.githubusercontent.com/ccd8f444a042c47894e8ed6781f2f09ab1de322c/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f4672697374692f6974696e6572652f62616467652e7376673f6272616e63683d6d6173746572" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/Fristi/itinere/badge.svg?branch=master" style="max-width:100%;"></a></h1> 
  <p>Itinere (latin for route) is a small library for working with paths/routes. It allows you to construct single or multiple routes and combine them in a declarative way. The library aims to be small and therefore depends only on shapeless at it's core. It is heavily inspired by scodec. It copies some ideas, like invariant functors, product path parts and coproducts path parts. It also borrows some nice tricks used in spray's PathMatcher, like <code>pimpApply</code>.</p> 
  <p>For all the changes, see the changelog: <a href="https://github.com/fristi/itinere/blob/master/CHANGELOG.md" target="_blank">Changelog</a></p> 
  <h2><a id="user-content-dependencies" class="anchor" href="https://github.com/fristi/itinere#dependencies" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Dependencies</h2> 
  <p>Scala 2.11 and Scala.js only!</p> 
  <h3><a id="user-content-resolver" class="anchor" href="https://github.com/fristi/itinere#resolver" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Resolver</h3> 
  <pre><code>resolvers += "fristi at bintray" at "http://dl.bintray.com/fristi/maven"
</code></pre> 
  <h3><a id="user-content-core-jvm" class="anchor" href="https://github.com/fristi/itinere#core-jvm" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Core (jvm)</h3> 
  <pre><code>libraryDependencies += "nl.mdj" %% "itinere-core" % "0.2.1"
</code></pre> 
  <h3><a id="user-content-core-scala-js" class="anchor" href="https://github.com/fristi/itinere#core-scala-js" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Core (scala-js)</h3> 
  <pre><code>libraryDependencies += "nl.mdj" %%% "itinere-core" % "0.2.1"
</code></pre> 
  <h3><a id="user-content-binary-jvm" class="anchor" href="https://github.com/fristi/itinere#binary-jvm" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Binary (jvm)</h3> 
  <pre><code>libraryDependencies += "nl.mdj" %% "itinere-binary" % "0.2.1"
</code></pre> 
  <h3><a id="user-content-binary-scala-js" class="anchor" href="https://github.com/fristi/itinere#binary-scala-js" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Binary (scala-js)</h3> 
  <pre><code>libraryDependencies += "nl.mdj" %%% "itinere-binary" % "0.2.1"
</code></pre> 
  <h2><a id="user-content-documentation" class="anchor" href="https://github.com/fristi/itinere#documentation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Documentation</h2> 
  <ul> 
   <li><a href="https://github.com/fristi/itinere#simple-example" target="_blank">Simple example</a></li> 
   <li><a href="https://github.com/fristi/itinere#supported-primitives" target="_blank">Supported primitives</a></li> 
   <li><a href="https://github.com/fristi/itinere#product-types" target="_blank">Product types</a></li> 
   <li><a href="https://github.com/fristi/itinere#coproduct-types" target="_blank">Coproduct types</a></li> 
   <li><a href="https://github.com/fristi/itinere#decode-combinators" target="_blank">Decode combinators</a></li> 
   <li><a href="https://github.com/fristi/itinere#router" target="_blank">Router</a></li> 
   <li><a href="https://github.com/fristi/itinere#binary-data" target="_blank">Binary data</a></li> 
  </ul> 
  <h2><a id="user-content-core" class="anchor" href="https://github.com/fristi/itinere#core" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Core</h2> 
  <p>All of the following features are part of <code>itinere-core</code></p> 
  <h3><a id="user-content-simple-example" class="anchor" href="https://github.com/fristi/itinere#simple-example" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Simple example</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">itinere.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">route</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>view<span class="pl-pds">"</span></span> <span class="pl-k">/</span> uuid

<span class="pl-c">//output: users/view/c0a6df45-1e76-4182-b24e-93992ad73fd8</span>
println(route.endpoint(<span class="pl-en">UUID</span>.randomUUID())

<span class="pl-c">// won't compile</span>
println(route.endpoint(<span class="pl-c1">123</span>))

<span class="pl-c">//output: Success(c0a6df45-1e76-4182-b24e-93992ad73fd8 :: HNil,)</span>
println(route.decode(<span class="pl-s"><span class="pl-pds">"</span>users/view/c0a6df45-1e76-4182-b24e-93992ad73fd8<span class="pl-pds">"</span></span>))</pre>
  </div> 
  <h3><a id="user-content-supported-primitives" class="anchor" href="https://github.com/fristi/itinere#supported-primitives" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Supported primitives</h3> 
  <ul> 
   <li>Boolean</li> 
   <li>Int</li> 
   <li>Long</li> 
   <li>Short</li> 
   <li>Double</li> 
   <li>Float</li> 
   <li>String (by using a regex)</li> 
   <li>UUID</li> 
   <li>Option</li> 
  </ul> 
  <h3><a id="user-content-product-types" class="anchor" href="https://github.com/fristi/itinere#product-types" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Product types</h3> 
  <p>Since <code>case class GameId(id: Int)</code> is isomorphic to <code>Int :: HNil</code> and we already have a implementation for that we can use <code>asHList</code> and <code>toProduct</code></p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c">// int.asHList will turn the PathPart[Int] into a PathPart[Int :: HNil] which is isomorphic to GameId</span>
<span class="pl-k">val</span> <span class="pl-en">gameId</span> <span class="pl-k">=</span> int.asHList.toProduct[<span class="pl-en">GameId</span>]
<span class="pl-k">val</span> <span class="pl-en">route</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>game<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>view<span class="pl-pds">"</span></span> <span class="pl-k">/</span> gameId

<span class="pl-c">// output: "game/view/11"</span>
route.endpoint(<span class="pl-en">GameId</span>(<span class="pl-c1">11</span>))</pre>
  </div> 
  <p>Also multiple types in a route can be converted to a product type (case class):</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">GameView</span>(<span class="pl-v">gameId</span>: <span class="pl-k">Int</span>, <span class="pl-v">mode</span>: <span class="pl-k">Int</span>)

<span class="pl-k">val</span> <span class="pl-en">route</span> <span class="pl-k">=</span> (<span class="pl-s"><span class="pl-pds">"</span>game<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>view<span class="pl-pds">"</span></span> <span class="pl-k">/</span> int <span class="pl-k">/</span> int).toProduct[<span class="pl-en">GameView</span>]

<span class="pl-c">// output: "game/view/1/1"</span>
route.endpoint(<span class="pl-en">GameView</span>(<span class="pl-c1">1</span>,<span class="pl-c1">1</span>))</pre>
  </div> 
  <h3><a id="user-content-coproduct-types" class="anchor" href="https://github.com/fristi/itinere#coproduct-types" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Coproduct types</h3> 
  <p>A sealed trait with case classes and case objects is known as an ADT or coproduct or sum type (that is why we are using the <code>:+:</code> as combinator for coproducts, since we are summing up a type)</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">sealed</span> <span class="pl-k">trait</span> <span class="pl-en">UserPage</span>
<span class="pl-k">case</span> <span class="pl-k">object</span> <span class="pl-en">ListUsers</span> <span class="pl-k">extends</span> <span class="pl-e">UserPage</span>
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">ViewUser</span>(<span class="pl-v">userId</span>: <span class="pl-en">UserId</span>) <span class="pl-k">extends</span> <span class="pl-e">UserPage</span>
<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">DeleteUser</span>(<span class="pl-v">userId</span>: <span class="pl-en">UserId</span>) <span class="pl-k">extends</span> <span class="pl-e">UserPage</span>
<span class="pl-k">case</span> <span class="pl-k">object</span> <span class="pl-en">AddUser</span> <span class="pl-k">extends</span> <span class="pl-e">UserPage</span>

<span class="pl-k">val</span> <span class="pl-en">routeA</span> <span class="pl-k">=</span> (<span class="pl-s"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>list<span class="pl-pds">"</span></span>).toProduct[<span class="pl-en">ListUsers</span>.type]
<span class="pl-k">val</span> <span class="pl-en">routeB</span> <span class="pl-k">=</span> (<span class="pl-s"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>add<span class="pl-pds">"</span></span>).toProduct[<span class="pl-en">AddUser</span>.type]
<span class="pl-k">val</span> <span class="pl-en">routeC</span> <span class="pl-k">=</span> (<span class="pl-s"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>view<span class="pl-pds">"</span></span> <span class="pl-k">/</span> userId).toProduct[<span class="pl-en">ViewUser</span>]
<span class="pl-k">val</span> <span class="pl-en">routeD</span> <span class="pl-k">=</span> (<span class="pl-s"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span> <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds">"</span>delete<span class="pl-pds">"</span></span> <span class="pl-k">/</span> userId).toProduct[<span class="pl-en">DeleteUser</span>]

<span class="pl-k">val</span> <span class="pl-en">router</span> <span class="pl-k">=</span> (routeA <span class="pl-k">:</span><span class="pl-k">+</span><span class="pl-k">:</span> routeB <span class="pl-k">:</span><span class="pl-k">+</span><span class="pl-k">:</span> routeC <span class="pl-k">:</span><span class="pl-k">+</span><span class="pl-k">:</span> routeD).toCoproduct[<span class="pl-en">UserPage</span>]

router.encode(<span class="pl-en">ListUsers</span>)
router.encode(<span class="pl-en">AddUser</span>)
router.encode(<span class="pl-en">ViewUser</span>(<span class="pl-en">UserId</span>.newId))
router.encode(<span class="pl-en">DeleteUser</span>(<span class="pl-en">UserId</span>.newId))</pre>
  </div> 
  <h3><a id="user-content-decode-combinators" class="anchor" href="https://github.com/fristi/itinere#decode-combinators" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Decode combinators</h3> 
  <p>There are 3 different combinators to decode:</p> 
  <ul> 
   <li><code>decode</code> - will return a DecodeResult which can be either <code>case class Success[P](elem: P, rest: String)</code> or <code>case class Failed(errors: List[String], rest: String)</code></li> 
   <li><code>decodeEither</code> - will return a <code>Either[List[String], A]</code> (the left contains a list of errors, the right will contain the success value)</li> 
   <li><code>decodeOption</code> - will return a <code>Option[A]</code> (none for failure, some for success)</li> 
   <li><code>happly(f: L =&gt; R)</code> - will return a <code>PartialFunction[String, R]</code>. This can be used in conjuction with <code>pimpApply</code> defined in Router to create strongly typed routers.</li> 
  </ul> 
  <h3><a id="user-content-router" class="anchor" href="https://github.com/fristi/itinere#router" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Router</h3> 
  <p>It's easy to setup your own router like in the example:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">object</span> <span class="pl-en">Calculator</span> <span class="pl-k">extends</span> <span class="pl-e">Router</span>[<span class="pl-k">Double</span>] {
  <span class="pl-k">val</span> <span class="pl-en">add</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>add<span class="pl-pds">"</span></span> <span class="pl-k">/</span> double <span class="pl-k">/</span> double
  <span class="pl-k">val</span> <span class="pl-en">minus</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>minus<span class="pl-pds">"</span></span> <span class="pl-k">/</span> double <span class="pl-k">/</span> double
  <span class="pl-k">val</span> <span class="pl-en">divide</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>divide<span class="pl-pds">"</span></span> <span class="pl-k">/</span> double <span class="pl-k">/</span> double
  <span class="pl-k">val</span> <span class="pl-en">multiply</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>multiply<span class="pl-pds">"</span></span> <span class="pl-k">/</span> double <span class="pl-k">/</span> double

  <span class="pl-k">val</span> <span class="pl-en">routes</span> <span class="pl-k">=</span>
    add { _ <span class="pl-k">+</span> _ } orElse
    minus { _ <span class="pl-k">-</span> _} orElse
    divide { _ <span class="pl-k">/</span> _ } orElse
    multiply { _ <span class="pl-k">*</span> _ }
}

<span class="pl-c">// output: Some(4.4d)</span>
<span class="pl-en">Calculator</span>.handle(<span class="pl-en">Calculator</span>.add.endpoint(<span class="pl-c1">1.2d</span>, <span class="pl-c1">3.2d</span>))</pre>
  </div> 
  <p>By defining <code>add</code>, <code>minus</code>, <code>divide</code> and <code>multiply</code> as values these values can be reused in your program to output a endpoint string (e.g.: <code>Calculator.add.endpoint(1.2d, 3.2d)</code>). A <code>Router[R]</code> takes a generic parameter (<code>R</code>). This generic parameter is the output type of all route handlers (functions) which are defined on the value <code>routes</code>. All handlers (functions) defined in the <code>Calculator</code> output a <code>Double</code>. The value <code>routes</code> is a accumulation of <code>PartialFunction[String, Double]</code>'s which are combined by using <code>PartialFunction</code>'s <code>orElse</code> combinator. The <code>Router[Double]</code> also has a <code>handle(in: String): Option[R]</code> function which will loop through all PartialFunction's defined in <code>routes</code> to see execute the route if possible.</p> 
  <h2><a id="user-content-binary-data" class="anchor" href="https://github.com/fristi/itinere#binary-data" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Binary data</h2> 
  <p>What about about binary data? We can encode that as base64. To use this, you need to add <code>itinere-binary</code> to your dependencies.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">itinere.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">itinere.binary.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">route</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>view<span class="pl-pds">"</span></span> <span class="pl-k">/</span> byteArray

<span class="pl-c">//output: view/SGVsbG8gd29ybGQ=</span>
route.endpoint(<span class="pl-s"><span class="pl-pds">"</span>Hello world<span class="pl-pds">"</span></span>.getBytes(<span class="pl-s"><span class="pl-pds">"</span>UTF-8<span class="pl-pds">"</span></span>))</pre>
  </div> 
  <h3><a id="user-content-binary" class="anchor" href="https://github.com/fristi/itinere#binary" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Binary</h3> 
  <p>The <code>itinere-binary</code> module also offers you to implement the binary codec type class:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">trait</span> <span class="pl-en">BinaryEncoder</span>[<span class="pl-k">-</span><span class="pl-en">T</span>] {
  <span class="pl-k">def</span> <span class="pl-en">encode</span>(<span class="pl-v">entity</span>: <span class="pl-en">T</span>)<span class="pl-k">:</span> <span class="pl-en">ByteBuffer</span>
}

<span class="pl-k">trait</span> <span class="pl-en">BinaryDecoder</span>[<span class="pl-k">+</span><span class="pl-en">T</span>] {
  <span class="pl-k">def</span> <span class="pl-en">decode</span>(<span class="pl-v">bytes</span>: <span class="pl-en">ByteBuffer</span>)<span class="pl-k">:</span> <span class="pl-en">Option</span>[<span class="pl-en">T</span>]
}

<span class="pl-k">trait</span> <span class="pl-en">BinaryCodec</span>[<span class="pl-en">T</span>] <span class="pl-k">extends</span> <span class="pl-e">Encoder</span>[<span class="pl-en">T</span>] <span class="pl-k">with</span> <span class="pl-e">Decoder</span>[<span class="pl-en">T</span>]</pre>
  </div> 
  <p>A simple <a href="https://github.com/ochrons/boopickle" target="_blank">boopickle</a> implementation might look like this:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">implicit</span> <span class="pl-k">def</span> <span class="pl-en">boopickleCodec</span>[<span class="pl-en">T</span> <span class="pl-k">:</span> <span class="pl-en">Pickler</span>]<span class="pl-k">:</span> <span class="pl-en">BinaryCodec</span>[<span class="pl-en">T</span>] <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">BinaryCodec</span>[<span class="pl-en">T</span>] {
    <span class="pl-k">def</span> <span class="pl-en">encode</span>(<span class="pl-v">entity</span>: <span class="pl-en">T</span>) <span class="pl-k">=</span> <span class="pl-en">Pickle</span>.intoBytes(entity)
    <span class="pl-k">def</span> <span class="pl-en">decode</span>(<span class="pl-v">bytes</span>: <span class="pl-en">ByteBuffer</span>) <span class="pl-k">=</span> <span class="pl-en">Unpickle</span>[<span class="pl-en">T</span>].tryFromBytes(bytes).toOption
}</pre>
  </div> 
  <p>This allows you to use: <code>toBytes</code> like this</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Filter</span>(<span class="pl-v">someInts</span>: <span class="pl-en">List</span>[<span class="pl-k">Int</span>])

<span class="pl-k">import</span> <span class="pl-v">itinere.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">itinere.binary.</span><span class="pl-v">_</span>

<span class="pl-k">val</span> <span class="pl-en">route</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>list<span class="pl-pds">"</span></span> <span class="pl-k">/</span> toBytes[<span class="pl-en">Filter</span>]

route.endpoint(<span class="pl-en">Filter</span>(<span class="pl-en">List</span>(<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>)))
</pre>
  </div> 
  <p>This allows you to encode/decode ADT and tree structures inside urls. This might also be useful for storing the state of a faceted search filter for example.</p> 
 </article>
</div>