<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h2><a href="https://github.com/sagnik/inkscape-svg-processing#inkscapesvg-to-pdfobjects" aria-hidden="true" class="anchor" id="user-content-inkscapesvg-to-pdfobjects" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>InkScapeSVG to PDFObjects</h2> 
  <p>PDF and SVG are both vector graphics, with considerable differences. PDF doesn't have a flat <strong>object oriented representation</strong> making it extremely hard to process. This repository contains Scala code for generating such a representation from PDFs. We expect an SVG file as the input. This SVG is produced by InkScape by converting a page of a PDF (see <a href="https://github.com/sagnik/inkscape-svg-processing/blob/master/%60src/test/resources/pg_0006.svg%60" target="_blank">this</a> for an example).</p> 
  <p>SVG produced by InkScape contains many information such as grouping elements, multiple transformation operations such as "rotate", "scale" etc. This is a fairly complicated hierarchical representation, as commonly found in most XML files. For most purposes, we need the bounding boxes for the paths, characters and images embedded in the PDF. SVG standard doesn't provide such bounding boxes; they must be calculated.</p> 
  <p>This repository contains parser combinators (SVG operations follow EBNF syntax) that take an InkScape SVG and convert each graphics path, text path and image to an object. The hierarchical tree structure is flattened first; for each path, character and image we find out the groups it belongs to.</p> 
  <p>Each <em>text path</em> in the SVG is then converted into a stream of character objects with bounding box and font information, which is inferred from the font.</p> 
  <p>Each <em>graphics path</em> is converted into an object with a sequence of path commands, sequence of transformation matrices and a bounding box. The bounding box calculation takes all transform operations (including the ones coming from groups) into consideration.</p> 
  <p>For more details about the data models, see <em>models</em> directories in <em>pathparser, textparser and rasterparser</em> packages. Scala offers excellent libraries for writing parser combinators (one of the reasons it is heavily used in DSLs). While the parsers are <em>fairly</em> generic, I have only tested them on SVGs produced by InkScape, hence the name.</p> 
  <h3><a href="https://github.com/sagnik/inkscape-svg-processing#application-and-test" aria-hidden="true" class="anchor" id="user-content-application-and-test" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Application and Test</h3> 
  <p>An application of this package is <a href="https://github.com/sagnik/svgimagesfromallenaipdffigures" target="_blank">https://github.com/sagnik/svgimagesfromallenaipdffigures</a>.</p> 
  <p><strong>System dependencies for this repository are: 1. InkScape (version 0.91, tested on Ubuntu and version 0.47, Mar 4 2015, tested on RedHat) and 2. Pdftoolkit (<a href="https://www.pdflabs.com/tools/pdftk-server/" target="_blank">https://www.pdflabs.com/tools/pdftk-server/</a>), both available for Windows, Mac and Linux systems.</strong> Input for this package is a PDF file containing some figures and tables and a directory containing JSON files with their locations (page number, bounding box in the page). This PDF is split in one page PDFs (using pdftk) and converted to SVG using InkScape. Then, these images are processed to produce the object oriented representation. Finally, we create SVG files for the figures and the tables in the PDF. There are multiple benfits of creating such SVG files. For an example, see our ongoing work on natural language summary generation for scholarly line graphs: <a href="http://personal.psu.edu/szr163/hassan/hassan-Figure-2.html" target="_blank">http://personal.psu.edu/szr163/hassan/hassan-Figure-2.html</a>.</p> 
  <p>To see the application, clone the above mentioned repository and follow the directions there.</p> 
  <p>You can use this repository by adding the following library dependency <code>"edu.psu.sagnik.research" %% "inkscapesvgprocessing" % "&lt;current version number from Build.sbt&gt;"</code>. Make sure you have <a href="https://oss.sonatype.org/content/repositories/releases/" target="_blank">https://oss.sonatype.org/content/repositories/releases/</a> in your resolvers.</p> 
  <h3><a href="https://github.com/sagnik/inkscape-svg-processing#todo" aria-hidden="true" class="anchor" id="user-content-todo" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>TODO</h3> 
  <p>More README to follow, possibly a wiki.</p> 
  <h3><a href="https://github.com/sagnik/inkscape-svg-processing#note" aria-hidden="true" class="anchor" id="user-content-note" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>NOTE</h3> 
  <p>This is a work in progress and the code will be changed frequently.</p> 
 </article>
</div>