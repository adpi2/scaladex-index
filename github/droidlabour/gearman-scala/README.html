<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-gearman-scala" class="anchor" href="https://github.com/droidlabour/gearman-scala#gearman-scala" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>gearman-scala</h1> 
  <p>This is a gearman implementation in scala language. It includes:</p> 
  <ul> 
   <li>gearman server, gearman server accepts the jobs from client and dispatch them to worker</li> 
   <li>gearman client library, used to write application who submit work to the gearman server</li> 
   <li>gearman worker library, used to get jobs from the server and process it.</li> 
  </ul> 
  <h1><a id="user-content-whats-gearman" class="anchor" href="https://github.com/droidlabour/gearman-scala#whats-gearman" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>What's gearman</h1> 
  <p>Please visit gearman wiki <a href="http://en.wikipedia.org/wiki/Gearman" target="_blank">http://en.wikipedia.org/wiki/Gearman</a> to get gearman introduction. For the detailed technical information, please visit <a href="http://gearman.org/" target="_blank">http://gearman.org/</a> </p> 
  <h2><a id="user-content-installation" class="anchor" href="https://github.com/droidlabour/gearman-scala#installation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Installation</h2> 
  <p>Add to <code>Build.scala</code> or <code>build.sbt</code></p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
    <span class="pl-s"><span class="pl-pds">"</span>com.github.droidlabour<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>gearman_2.11<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.0<span class="pl-pds">"</span></span>
)</pre>
  </div> 
  <h1><a id="user-content-compile-gearman" class="anchor" href="https://github.com/droidlabour/gearman-scala#compile-gearman" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Compile gearman</h1> 
  <p>Before using gearman, we need to compile it</p> 
  <ul> 
   <li>download the sbt tool from sbt website <a href="http://www.scala-sbt.org/" target="_blank">http://www.scala-sbt.org/</a></li> 
   <li>clone the gearman-scala repository</li> 
  </ul> 
  <div class="highlight highlight-source-shell">
   <pre>    $ git clone https://github.com/droidlabour/gearman-scala.git</pre>
  </div> 
  <ul> 
   <li>run "sbt test:compile" to compile the gearman</li> 
  </ul> 
  <div class="highlight highlight-source-shell">
   <pre>    $ <span class="pl-c1">cd</span> gearman-scala
    $ sbt <span class="pl-c1">test</span>::compile</pre>
  </div> 
  <h1><a id="user-content-a-simple-example" class="anchor" href="https://github.com/droidlabour/gearman-scala#a-simple-example" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>A Simple Example</h1> 
  <p>We write a simple "reverse" to demo how to write worker and client in Scala language</p> 
  <h2><a id="user-content-start-gearman-server" class="anchor" href="https://github.com/droidlabour/gearman-scala#start-gearman-server" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>start gearman server</h2> 
  <p>Execute following command to start the gearman server:</p> 
  <div class="highlight highlight-source-shell">
   <pre>scala -classpath target/scala-2.11/gearman_2.11-1.0.jar org.gearman.server.GearmanServer [listening ip] <span class="pl-k">&lt;</span>listening port<span class="pl-k">&gt;</span></pre>
  </div> 
  <h2><a id="user-content-write--start-gearman-worker" class="anchor" href="https://github.com/droidlabour/gearman-scala#write--start-gearman-worker" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>write &amp; start gearman worker</h2> 
  <p>First the worker need to connect to the gearman server. One worker can connect one or more gearman server.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">org.gearman.worker.</span><span class="pl-v">_</span>

<span class="pl-c">//connect two gearman server at same time</span>
<span class="pl-k">val</span> <span class="pl-en">worker</span> <span class="pl-k">=</span> <span class="pl-en">GearmanWorker</span>( <span class="pl-s"><span class="pl-pds">"</span>192.168.1.1:4730,192.168.1.2:4730<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>If the gearman server is not started, the worker will connect to the gearman server automatically when the gearman server is started.</p> 
  <p>After constructing a gearman worker, user can tell the gearman server what work this worker can do by invoking canDo method.</p> 
  <div class="highlight highlight-source-scala">
   <pre>worker.canDo( <span class="pl-s"><span class="pl-pds">"</span>reverse<span class="pl-pds">"</span></span> ) { <span class="pl-k">case</span> ( data, uid, responser ) <span class="pl-k">=&gt;</span>
    responser complete reverse( data )
})

<span class="pl-k">def</span> <span class="pl-en">reverse</span>( <span class="pl-v">data</span>: <span class="pl-k">String</span> )<span class="pl-k">:</span> <span class="pl-k">String</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">StringBuilder</span>( data ).reverse.toString</pre>
  </div> 
  <p>Before gearman worker exit, it should call cantDo with function name to tell the gearman server, it will not do the specific work. And the call the shutdown method to shutdown the worker</p> 
  <div class="highlight highlight-source-scala">
   <pre>worker.cantDo( <span class="pl-s"><span class="pl-pds">"</span>reverse<span class="pl-pds">"</span></span>)
worker.shutdown( <span class="pl-c1">true</span> )</pre>
  </div> 
  <p>After the worker is ready, start it like below:</p> 
  <div class="highlight highlight-source-shell">
   <pre>scala -classpath <span class="pl-k">&lt;</span>classpath<span class="pl-k">&gt;</span> yourWorker</pre>
  </div> 
  <h2><a id="user-content-write--start-client" class="anchor" href="https://github.com/droidlabour/gearman-scala#write--start-client" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>write &amp; start client</h2> 
  <p>At first, the gearman client needs to connect with a gearman server. One or more gearman server can be provided to the Gearman client. But at any time, the gearman client only connects to one gearman server. If the connected gearman server exit, the client will automatically connect to another gearman server.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">org.gearman.client.</span><span class="pl-v">_</span>

<span class="pl-c">//connect to one gearman server</span>
<span class="pl-k">val</span> <span class="pl-en">client</span> <span class="pl-k">=</span> <span class="pl-en">GearmanClient</span>( <span class="pl-s"><span class="pl-pds">"</span>192.168.1.1:4730,192.168.1.2:4730<span class="pl-pds">"</span></span>)
</pre>
  </div> 
  <p>After connecting to the gearman server, the client can ask gearman server dispath some work to the registred gearman worker.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c">//Do string reverse and print the result</span>
client.submitJob( <span class="pl-s"><span class="pl-pds">"</span>reverse<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>hello, world<span class="pl-pds">"</span></span>) {
    <span class="pl-k">case</span> <span class="pl-en">JobComplete</span>( data ) <span class="pl-k">=&gt;</span> println( data )
}</pre>
  </div> 
  <p>If client wants to exit, it can call the shutdown method to do the graceful shutdown( let the on-going work finished)</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-c">//Do string reverse and print the result</span>
client shutdown <span class="pl-c1">true</span></pre>
  </div> 
  <p>After the client is ready, start it like below:</p> 
  <div class="highlight highlight-source-shell">
   <pre>scala -classpath <span class="pl-k">&lt;</span>classpath<span class="pl-k">&gt;</span> yourWorker</pre>
  </div> 
  <p>The source of this example can be found at example/src/main/scala/org/gearman/example/reverse directory</p> 
  <h2><a id="user-content-other-examples" class="anchor" href="https://github.com/droidlabour/gearman-scala#other-examples" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Other examples</h2> 
  <p>The another examples can be found at example/src/main/scala/org/gearman/example/ directory</p> 
  <h1><a id="user-content-license" class="anchor" href="https://github.com/droidlabour/gearman-scala#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h1> 
  <p>Apache License 2</p> 
  <h1><a id="user-content-api-document" class="anchor" href="https://github.com/droidlabour/gearman-scala#api-document" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>API document</h1> 
  <p><a href="http://ochinchina.github.io/gearman-scala-api/" target="_blank">http://ochinchina.github.io/gearman-scala-api/</a></p> 
 </article>
</div>