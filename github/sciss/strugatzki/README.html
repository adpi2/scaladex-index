<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-strugatzki" class="anchor" href="https://github.com/sciss/strugatzki#strugatzki" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Strugatzki</h1> 
  <p><a href="https://flattr.com/submit/auto?user_id=sciss&amp;url=https%3A%2F%2Fgithub.com%2FSciss%2FStrugatzki&amp;title=Strugatzki&amp;language=Scala&amp;tags=github&amp;category=software" target="_blank"><img src="https://camo.githubusercontent.com/739a757846f69c1cc10163619eec008e871b591b/687474703a2f2f6170692e666c617474722e636f6d2f627574746f6e2f666c617474722d62616467652d6c617267652e706e67" alt="Flattr this" data-canonical-src="http://api.flattr.com/button/flattr-badge-large.png" style="max-width:100%;"></a> <a href="https://travis-ci.org/Sciss/Strugatzki" target="_blank"><img src="https://camo.githubusercontent.com/965d3298d42c97162ae8204252c6cd92e5bfa20e/68747470733a2f2f7472617669732d63692e6f72672f53636973732f537472756761747a6b692e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/Sciss/Strugatzki.svg?branch=master" style="max-width:100%;"></a> <a href="https://maven-badges.herokuapp.com/maven-central/de.sciss/strugatzki_2.11" target="_blank"><img src="https://camo.githubusercontent.com/387ceda32a41e6dc8b26a8de142d089018201d74/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f64652e73636973732f737472756761747a6b695f322e31312f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/de.sciss/strugatzki_2.11/badge.svg" style="max-width:100%;"></a></p> 
  <h2><a id="user-content-statement" class="anchor" href="https://github.com/sciss/strugatzki#statement" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>statement</h2> 
  <p>Strugatzki is a Scala library containing several algorithms for audio feature extraction, with the aim of similarity and dissimilarity measurements. They have been originally used in my live electronic piece <a href="http://sciss.de/texts/liv_interplay.html" target="_blank">"Inter-Play/Re-Sound"</a>, then successively in the tape piece <a href="http://sciss.de/texts/tap_leerenull.html" target="_blank">"Leere Null"</a>, the sound installation <a href="http://sciss.de/texts/ins_writingmachine.html" target="_blank">"Writing Machine"</a>, and the tape piece <a href="http://sciss.de/texts/tap_leerenull2.html" target="_blank">"Leere Null (2)"</a>.</p> 
  <p>(C)opyright 2011â€“2016 by Hanns Holger Rutz. All rights reserved. It is released under the <a href="https://raw.github.com/Sciss/Strugatzki/master/LICENSE" target="_blank">GNU Lesser General Public License</a> v2.1+ and comes with absolutely no warranties. To contact the author, send an email to <code>contact at sciss.de</code>.</p> 
  <h2><a id="user-content-requirements--installation" class="anchor" href="https://github.com/sciss/strugatzki#requirements--installation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>requirements / installation</h2> 
  <p>Builds with sbt 0.13 against Scala 2.11, 2.10. Depends on <a href="https://github.com/Sciss/ScalaCollider" target="_blank">ScalaCollider</a> and <a href="https://github.com/jstrachan/scopt" target="_blank">scopt</a>.</p> 
  <p>Strugatzki can be either used as a standalone command line tool, or embedded in your project as a library.</p> 
  <h2><a id="user-content-contributing" class="anchor" href="https://github.com/sciss/strugatzki#contributing" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>contributing</h2> 
  <p>Please see the file <a href="https://github.com/sciss/strugatzki/blob/master/CONTRIBUTING.md" target="_blank">CONTRIBUTING.md</a></p> 
  <h2><a id="user-content-running" class="anchor" href="https://github.com/sciss/strugatzki#running" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>running</h2> 
  <h3><a id="user-content-standalone-use" class="anchor" href="https://github.com/sciss/strugatzki#standalone-use" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>standalone use</h3> 
  <p>This assumes you check out Strugatzki from source, as the easiest way to use it in the terminal is via the sbt prompt. First, start sbt without arguments. In the sbt shell, execute <code>run</code> which will print the switches for the different modules:</p> 
  <pre><code>-f | --feature
      Feature extraction
-c | --correlate
      Find best correlation with database
-s | --segmentation
      Find segmentation breaks with a file
-x | --selfsimilarity
      Create an image of the self similarity matrix
--stats
      Statistics from feature database
</code></pre> 
  <p>To find out the switches for the extraction module: <code>run -f</code>. This will print the particular options available for this module. While in the API times are all given in sample frames with respect to the original sound file's sample rate, the standalone/ terminal mode assumes times are all given as floating point seconds.</p> 
  <p>Another possibility is to build the standalone via <code>sbt assembly</code> and then execute it with shell script <code>./strugatzki</code></p> 
  <h3><a id="user-content-library-use" class="anchor" href="https://github.com/sciss/strugatzki#library-use" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>library use</h3> 
  <p>If you build your project with sbt, the following line adds a dependency for Strugatzki:</p> 
  <pre><code>"de.sciss" %% "strugatzki" % v
</code></pre> 
  <p>The current version <code>v</code> is <code>"2.14.0"</code>.</p> 
  <p>As documentation you are referred to the API docs at the moment. These can be created in the standard way (<code>sbt doc</code>). The main classes to look are <code>FeatureExtraction</code>, <code>FeatureCorrelation</code>, and <code>FeatureSegmentation</code>. They are used in a similar fashion. E.g. to run feature extraction:</p> 
  <div class="highlight highlight-source-scala">
   <pre>    <span class="pl-k">import</span> <span class="pl-v">de.sciss.strugatzki.</span><span class="pl-v">_</span>
    <span class="pl-k">import</span> <span class="pl-v">de.sciss.file.</span><span class="pl-v">_</span>

    <span class="pl-k">val</span> <span class="pl-en">fs</span>           <span class="pl-k">=</span> <span class="pl-en">FeatureExtraction</span>.<span class="pl-en">Config</span>()
    fs.audioInput    <span class="pl-k">=</span> file(<span class="pl-s"><span class="pl-pds">"</span>my-audio-input<span class="pl-pds">"</span></span>)
    fs.featureOutput <span class="pl-k">=</span> file(<span class="pl-s"><span class="pl-pds">"</span>my-feature-aiff-output<span class="pl-pds">"</span></span>)
    fs.metaOutput    <span class="pl-k">=</span> <span class="pl-en">Some</span>(file(<span class="pl-s"><span class="pl-pds">"</span>my-meta-data-xml-output<span class="pl-pds">"</span></span>))  <span class="pl-c"><span class="pl-c">//</span> optional</span>

    <span class="pl-c"><span class="pl-c">//</span> the process is constructed with the settings and a partial function which</span>
    <span class="pl-c"><span class="pl-c">//</span> acts as a process observer</span>
    <span class="pl-k">val</span> <span class="pl-en">f</span> <span class="pl-k">=</span> <span class="pl-en">FeatureExtraction</span>.run(fs) {
      <span class="pl-k">case</span> <span class="pl-en">Processor</span>.<span class="pl-en">Success</span>(_, _) <span class="pl-k">=&gt;</span> println(<span class="pl-s"><span class="pl-pds">"</span>Done.<span class="pl-pds">"</span></span>)
    }
    <span class="pl-c"><span class="pl-c">//</span> f is a `Future` of the result you may want to work with</span>
</pre>
  </div> 
  <p>For the detailed settings, such as FFT size, number of MFCC, etc., please refer to the API docs.</p> 
  <h2><a id="user-content-algorithms" class="anchor" href="https://github.com/sciss/strugatzki#algorithms" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>algorithms</h2> 
  <p>Strugatzki is not a full fledged MIR system, but was rather born of my personal preference and experience, resulting in an API which is a bit idiosyncratic, but nevertheless completely independent of my specific use cases.</p> 
  <p>The feature vectors used are spectral envelope as defined by the Mel Frequency Cepstral Coefficients (MFCC) and the Loudness in Sones. The actual DSP algorithms responsible for their extraction are the <code>MFCC</code> and <code>Loudness</code> UGens included with SuperCollider, which were written by Dan Stowell and Nick Collins. They are used behind the scenes, running ScalaCollider in Non-Realtime-Mode. </p> 
  <p>In most processes, there is a parameter <code>temporalWeight</code> which specifies the weight assigned to MFCC versus loudness. A temporal weight of <code>0.0</code> means the temporal feature vector (loudness) is not taken into account, and a weight of <code>1.0</code> means that only the loudness is taken into account, while the spectral features (MFCC) are ignored.</p> 
  <p>The correlation, segmentation, and so forth are performed directly in Scala, using dedicated threads, providing an API for monitoring completion, failure, progress, and an abortion hook. As of the current version, all processes run single-threaded, so there is plenty of headroom for future performance boosts by providing some forms of parallelism. Strugatzki is an artistic and a research project, not a commercial application, so beware that it is not the fastest MIR system imaginable.</p> 
  <p>The feature vectors (MFCC and loudness) are calculated on a frame-by-frame basis using a sliding (FFT) window. They are written out as a regular AIFF sound file, which is a convenient format for storing evenly sampled multichannel floating point streams. Accompanied by a dedicated XML file which contains the extraction settings for future reference and use by the other algorithms.</p> 
  <p>There are two main algorithms that operate on the extracted features: The correlation module is capable of finding sound in a database that match a target sound in terms of similarity or dissimilarity. The segmentation module is capable of suggesting breaking points in a single target sound on the basis of novelty or maximisation of dissimilarity within a given time window.</p> 
  <h3><a id="user-content-normalization" class="anchor" href="https://github.com/sciss/strugatzki#normalization" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>normalization</h3> 
  <p>We have found it quite useful to normalize the MFCC by creating statistics over a large body of database sounds. Therefore, a particular stats module is provided which can scan a directory of feature extraction files and calculate the minimum and maximum ranges for each coefficient. In the standalone mode, these ranges can be written out to a dedicated AIFF file, and may be used for correlation and segmentation, yielding in our opinion better results.</p> 
  <h3><a id="user-content-self-similarity" class="anchor" href="https://github.com/sciss/strugatzki#self-similarity" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>self similarity</h3> 
  <p>For analysis and visualisation purposes, we have added a self similarity module which produces a <code>png</code> image file with the self similarity matrix of a given feature file.</p> 
 </article>
</div>