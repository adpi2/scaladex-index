<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a href="https://github.com/tapad/sbt-docker-compose#sbt-docker-compose" aria-hidden="true" class="anchor" id="user-content-sbt-docker-compose" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>sbt-docker-compose</h1> 
  <p><a href="https://maven-badges.herokuapp.com/maven-central/com.tapad/sbt-docker-compose" target="_blank"><img src="https://camo.githubusercontent.com/c89685f9247b4d41acefba10d2158ad7ac232cca/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f636f6d2e74617061642f7362742d646f636b65722d636f6d706f73652f62616467652e737667" alt="Maven Central" data-canonical-src="https://maven-badges.herokuapp.com/maven-central/com.tapad/sbt-docker-compose/badge.svg" style="max-width:100%;"></a></p> 
  <h2><a href="https://github.com/tapad/sbt-docker-compose#about" aria-hidden="true" class="anchor" id="user-content-about" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>About</h2> 
  <p>sbt-docker-compose is an sbt plugin that integrates the functionality of <a href="https://docs.docker.com/compose/" target="_blank">Docker Compose</a> directly into the sbt build environment. This allows you to make code changes and with one sbt command start up a local running instance of your latest changes connected to all of its dependencies for live testing and debugging. This plugin is designed to be extended to allow for instances to be launched in non-local environments such as AWS and Mesos.</p> 
  <p><a href="https://github.com/tapad/sbt-docker-compose/blob/master/screenshots/dockerComposeUp.png?raw=true" target="_blank"><img src="https://github.com/tapad/sbt-docker-compose/raw/master/screenshots/dockerComposeUp.png?raw=true" alt="Alt text" title="dockerComposeUp output" style="max-width:100%;"></a></p> 
  <h2><a href="https://github.com/tapad/sbt-docker-compose#prerequisites" aria-hidden="true" class="anchor" id="user-content-prerequisites" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Prerequisites</h2> 
  <p>You must have <a href="https://docs.docker.com/engine/installation/" target="_blank">Docker</a> and <a href="https://docs.docker.com/compose/install/" target="_blank">Docker-Compose</a> installed.</p> 
  <h2><a href="https://github.com/tapad/sbt-docker-compose#steps-to-enable-and-configure-sbt-docker-compose" aria-hidden="true" class="anchor" id="user-content-steps-to-enable-and-configure-sbt-docker-compose" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Steps to Enable and Configure sbt-docker-compose</h2> 
  <ol> 
   <li> <p>Add the sbt-docker-compose plugin to your projects plugins.sbt file:</p> <pre><code>addSbtPlugin("com.tapad" % "sbt-docker-compose" % "1.0.28")
</code></pre> <p>sbt-docker-compose is an auto-plugin which requires that sbt version 0.13.5+ or sbt version 1.0.0+ be used.</p> </li> 
   <li> <p>Enable the plugin on the sbt projects you would like to test:</p> <pre><code>enablePlugins(DockerComposePlugin)
</code></pre> </li> 
   <li> <p>Configure your sbt project(s) to build Docker images by setting the 'dockerImageCreationTask':</p> </li> 
  </ol> 
  <ul> 
   <li> <p>The <a href="https://github.com/marcuslonnberg/sbt-docker" target="_blank">sbt-docker</a> plugin can be used by setting:</p> <pre><code>dockerImageCreationTask := docker.value
</code></pre> </li> 
   <li> <p>The <a href="https://github.com/sbt/sbt-native-packager" target="_blank">sbt-native-packager</a> plugin can be used by setting:</p> <pre><code>dockerImageCreationTask := (publishLocal in Docker).value
</code></pre> </li> 
  </ul> 
  <p>See the <a href="https://github.com/tapad/sbt-docker-compose/blob/master/examples/basic-native-packager" target="_blank">basic-native-packager</a> example for more details.</p> 
  <ol start="4"> 
   <li> <p>Define a <a href="https://docs.docker.com/compose/compose-file/" target="_blank">docker-compose.yml</a> file which describes your component, its dependent images and the links between them. This path to this file can be explicitly defined or by default the plugin will attempt to locate it in one of three places with the precedence order:</p> 
    <ul> 
     <li> <p>The 'resources' directory of the project as defined by the sbt 'resourceDirectory' setting.</p> </li> 
     <li> <p>A 'docker' directory off of the root of the project.</p> </li> 
     <li> <p>In the root of the project directory.</p> </li> 
    </ul> </li> 
   <li> <p>Optional: There are a number of optional Keys that can be set as well if you want to override the default settings:</p> <pre><code> composeFile := // Specify the full path to the Compose File to use to create your test instance. It defaults to docker-compose.yml in your resources folder.   
 composeServiceName := // Specify the name of the service in the Docker Compose file being tested. This setting prevents the service image from being pull down from the Docker Registry. It defaults to the sbt Project name.
 composeServiceVersionTask := // The version to tag locally built images with in the docker-compose file. This defaults to the 'version' SettingKey.
 composeNoBuild := // True if a Docker Compose file is to be started without building any images and only using ones that already exist in the Docker Registry. This defaults to False.
 composeRemoveContainersOnShutdown := // True if a Docker Compose should remove containers when shutting down the compose instance. This defaults to True.
 composeRemoveNetworkOnShutdown := // True if a Docker Compose should remove the network it created when shutting down the compose instance. This defaults to True.
 composeContainerStartTimeoutSeconds := // The amount of time in seconds to wait for the containers in a Docker Compose instance to start. Defaults to 500 seconds.
 composeRemoveTempFileOnShutdown := // True if a Docker Compose should remove the post Custom Tag processed Compose File on shutdown. This defaults to True.
 dockerMachineName := // If running on OSX the name of the Docker Machine Virtual machine being used. If not overridden it is set to 'default'
 dockerImageCreationTask := // The sbt task used to create a Docker image. For sbt-docker this should be set to 'docker.value' for the sbt-native-packager this should be set to '(publishLocal in Docker).value'.
 suppressColorFormatting := // True to suppress all color formatting in the output from the plugin. This defaults to the value of the 'sbt.log.noformat' property. If you are using `sbt-extras`, the use of the command line switch `-no-colors` will set this to True.
 testTagsToExecute := // Set of ScalaTest Tags to execute when dockerComposeTest is run. Separate multiple tags by a comma. It defaults to executing all tests.
 testExecutionArgs := // Additional ScalaTest Runner argument options to pass into the test runner. For example, this can be used for the generation of test reports.
 testExecutionExtraConfigTask := // An sbt task that returns a Map[String,String] of variables to pass into the ScalaTest Runner ConfigMap (in addition to standard service/port mappings).
 testDependenciesClasspath := // The path to all managed and unmanaged Test and Compile dependencies. This path needs to include the ScalaTest Jar for the tests to execute. This defaults to all managedClasspath and unmanagedClasspath in the Test and fullClasspath in the Compile Scope.
 testCasesJar := // The path to the Jar file containing the tests to execute. This defaults to the Jar file with the tests from the current sbt project.
 testCasesPackageTask := // The sbt Task to package the test cases used when running 'dockerComposeTest'. This defaults to the 'packageBin' task in the 'Test' Scope.
 testPassUseSpecs2 := // True if Specs2 is to be used to execute the test pass. This defaults to False and ScalaTest is used.
 variablesForSubstitution := // A Map[String,String] of variables to substitute in your docker-compose file. These are substituted substituted by the plugin and not using environment variables.
 variablesForSubstitutionTask := // An sbt task that returns a Map[String,String] of variables to substitute in your docker-compose file. These are substituted by the plugin and not using environment variables.
</code></pre> </li> 
  </ol> 
  <p>There are several sample projects showing how to configure sbt-docker-compose that can be found in the <a href="https://github.com/tapad/sbt-docker-compose/blob/master/examples" target="_blank"><strong>examples</strong></a> folder.</p> 
  <h2><a href="https://github.com/tapad/sbt-docker-compose#to-start-a-docker-compose-instance-for-testing--debugging" aria-hidden="true" class="anchor" id="user-content-to-start-a-docker-compose-instance-for-testing--debugging" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>To Start a Docker Compose Instance for Testing / Debugging</h2> 
  <ol> 
   <li> <p>To start a new instance from the project with the Plugin enabled run:</p> <pre><code>dockerComposeUp
</code></pre> <p>To use locally built images for all services defined in the Docker Compose file instead of pulling from the Docker Registry use the following command:</p> <pre><code>dockerComposeUp skipPull
</code></pre> <p>By default before starting a Docker Compose instance a new Docker image will be built with your latest code changes. If you know you didn't make any code changes and do not want to build a new image use the 'skipBuild' argument:</p> <pre><code>dockerComposeUp skipBuild
</code></pre> <p>You can start multiple compose instances on the same project as the plugin generates a unique name for each instance.</p> <p>When making frequent code changes on your local machine it is often useful to temporarily have the external ports remain the same. Use the '-useStaticPorts' argument to enable this functionality:</p> <pre><code> dockerComposeUp -useStaticPorts
 
 E.g. A port mapping of "0:3306" defined in the Compose file would be treated as "3306:3306" if this argument is supplied.
</code></pre> </li> 
   <li> <p>To shutdown all instances started from the current project with the Plugin enabled run:</p> <pre><code> dockerComposeStop
</code></pre> <p>To shutdown a specific instance regardless of the sbt project it belongs to run:</p> <pre><code> dockerComposeStop &lt;unique instance id&gt;
</code></pre> </li> 
   <li> <p>To restart a particular instance from the project with the Plugin enabled run:</p> <pre><code> dockerComposeRestart &lt;unique instance id&gt;
</code></pre> <p>You can also supply the 'skipPull', 'skipBuild' or '-useStaticPorts' argument as you would for the 'dockerComposeUp' command:</p> <pre><code>dockerComposeRestart &lt;unique instance id&gt; [skipPull or skipBuild] [-useStaticPorts]
</code></pre> <p>If there is only one running instance from the current sbt project the Instance Id is not required:</p> <pre><code> dockerComposeRestart
</code></pre> <p>If there is no running instances from the current sbt project this command will start a new instance from the project.</p> </li> 
   <li> <p>To display the service connection information for each running Docker Compose instance run:</p> <pre><code> dockerComposeInstances
</code></pre> </li> 
  </ol> 
  <p>Instance information is persisted in a temporary file so that it will be available between restarts of an sbt session.</p> 
  <ol start="5"> 
   <li>You can use tab completion to list out all of the arguments for each command shown above.</li> 
  </ol> 
  <h2><a href="https://github.com/tapad/sbt-docker-compose#to-execute-scalatest-test-cases-against-a-running-instance" aria-hidden="true" class="anchor" id="user-content-to-execute-scalatest-test-cases-against-a-running-instance" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>To Execute ScalaTest Test Cases Against a Running Instance</h2> 
  <p>The sbt-docker-compose plugin provides the ability to run a suite of ScalaTest test cases against a Docker Compose instance. The dynamically assigned host and port information are passed into each test case via the ScalaTest <a href="http://doc.scalatest.org/2.0/index.html#org.scalatest.ConfigMap" target="_blank">ConfigMap</a>.</p> 
  <p>The key into the map is the "serviceName:containerPort" (e.g. "basic:8080") that is statically defined in the Docker Compose file and it will return "host:hostPort" which is the Docker Compose generated and exposed endpoint that can be connected to at runtime for testing. There is also the key "serviceName:containerId" (e.g. "basic:containerId") which maps to the docker container id.</p> 
  <p>The same ConfigMap key/value pairs are also available in the underlying JVM as system properties. For example, System.getProperty("serviceName:containerPort"), which is useful when the application uses system properties to set configuration during boot, which is a common pattern in Play Framework using TypeSafe's ConfigFactory.</p> 
  <p>See the <a href="https://github.com/tapad/sbt-docker-compose/blob/master/examples/basic-with-tests" target="_blank"><strong>basic-with-tests</strong></a> example for more details.</p> 
  <p>By default all tests will be executed, however you can also <a href="http://www.scalatest.org/user_guide/tagging_your_tests" target="_blank">Tag</a> test cases and indicate to the plugin to only execute those tests:</p> 
  <pre><code> testTagsToExecute := "DockerComposeTag"
</code></pre> 
  <ol> 
   <li> <p>To start a new DockerCompose instance, run your tests and then shut it down run:</p> <pre><code> dockerComposeTest
</code></pre> </li> 
   <li> <p>To run your test cases against an already running instance execute:</p> <pre><code> dockerComposeTest &lt;instance id&gt;
</code></pre> </li> 
   <li> <p>To override the sbt setting 'testTagsToExecute' when starting a test pass provide a comma separated list of tags to the "-tags" argument:</p> <pre><code> dockerComposeTest -tags:&lt;tag1,tag2&gt;
</code></pre> <p>If running dockerComposeTest from outside of sbt you will need to quote the input so that the parameters are properly interpreted:</p> <pre><code> sbt 'dockerComposeTest -tags:&lt;tag1,tag2&gt;'
</code></pre> </li> 
   <li> <p>To attach a debugger during test case execution provide a port number to the "-debug" argument. This will suspend the tests from running until you attach a debugger to the specified port. For example:</p> <pre><code> dockerComposeTest &lt;instance id&gt; -debug:&lt;debug port&gt;
</code></pre> </li> 
  </ol> 
  <p><strong>Note:</strong> The test pass is started using the using the 'java' process that exists on your command line PATH to launch the <a href="http://www.scalatest.org/user_guide/using_the_runner" target="_blank">ScalaTest Test Runner</a>. For this to work the classpath of your project needs to be built with the version of scala used by the project. If this is not configured correctly you may see an issue with the Test Runner failing to load classes.</p> 
  <p>There is also support for running <a href="https://etorreborre.github.io/specs2/" target="_blank">Specs2</a> test cases. For these tests only the JVM system properties will be available for accessing information about the Docker Compose instance under test.</p> 
  <p>See the <a href="https://github.com/tapad/sbt-docker-compose/blob/master/examples/basic-with-tests-specs2" target="_blank"><strong>basic-with-tests-specs2</strong></a> example for more details.</p> 
  <h2><a href="https://github.com/tapad/sbt-docker-compose#docker-compose-file-custom-tags" aria-hidden="true" class="anchor" id="user-content-docker-compose-file-custom-tags" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Docker Compose File Custom Tags</h2> 
  <p>Custom tags are a feature of the sbt-docker-compose plugin that add the ability to pre-process the contents of the docker-compose.yml file and make modifications to it before using it to start your instance. There are two custom tags for images that this plugin supports: "&lt;localBuild&gt;" and "&lt;skipPull&gt;". Support for additional tags can be added by overriding the "processCustomTags" method.</p> 
  <ol> 
   <li>Define "&lt;skipPull&gt;" on a set of particular images in the docker-compose file that you want to use a local copy of instead of pulling the latest available from the Docker Registry. <pre><code> image: yourregistry.com/service:1.0.0&lt;skipPull&gt;
</code></pre> </li> 
   <li>Define "&lt;localBuild&gt;" to launch the locally built version of the image instead of pulling from the public Docker Registry. This is how associated images from multi-project builds should be tagged. See the <a href="https://github.com/tapad/sbt-docker-compose/blob/master/examples/multi-project" target="_blank"><strong>multi-project</strong></a> example. <pre><code> image: service:latest&lt;localBuild&gt;
</code></pre> </li> 
  </ol> 
  <h2><a href="https://github.com/tapad/sbt-docker-compose#instance-connection-information" aria-hidden="true" class="anchor" id="user-content-instance-connection-information" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Instance Connection Information</h2> 
  <p>After launching an instance with a dockerComposeUp command a table like the one below will be output with the set of endpoints that can be used to connect to the instance. The 'Host:Port' column contains the endpoints that are externally exposed.</p> 
  <pre><code> +---------+----------------------+-------------+--------------+----------------+--------------+---------+
 | Service | Host:Port            | Tag Version | Image Source | Container Port | Container Id | IsDebug |
 +=========+======================+=============+==============+================+==============+=========+
 | sample1 | 192.168.99.100:32973 | latest      | build        | 5005           | 0a43860a47a8 | YES     |
 | sample2 | 192.168.99.100:32974 | latest      | build        | 5005           | 54803f8a6938 | YES     |
 +---------+----------------------+-------------+--------------+----------------+--------------+---------+
</code></pre> 
  <p>The 'Image Source' column can be one of the following values:</p> 
  <ol> 
   <li><strong>defined</strong>: The image tag is hardcoded in the compose file. For example: <pre><code> image: service:latest
 
 image: yourregistry.com/service:1:0:0
</code></pre> </li> 
   <li><strong>build</strong>: The image was built when starting the topology instance or the image is tagged as "&lt;localBuild&gt;" and being used in a muti-project sbt compose-file. <pre><code> image: service:latest&lt;localBuild&gt;
</code></pre> </li> 
   <li><strong>cache</strong>: The locally cached version of the image is being used even if there may be a new version in the Docker Registry. This is the result of "&lt;skipPull&gt;" being defined on a particular image or being passed to dockerComposeUp. <pre><code> image: service:latest&lt;skipPull&gt;
</code></pre> </li> 
  </ol> 
  <p>Each running instance will also output the commands that can be used to:</p> 
  <ol> 
   <li><strong>Stop the running instance.</strong> For example: <pre><code> dockerComposeStop 449342
</code></pre> </li> 
   <li><strong>Open a command shell to the container instance:</strong> <pre><code> docker exec -it &lt;Container Id&gt; bash
</code></pre> </li> 
   <li><strong>View the standard out logging from the instance:</strong> <pre><code> docker-compose -p 449342 -f /tmp/compose-updated4937097142223953047.yml logs
</code></pre> </li> 
   <li><strong>Execute test cases against the running instance:</strong> <pre><code> dockerComposeTest &lt;Instance Id&gt;
</code></pre> </li> 
  </ol> 
  <h2><a href="https://github.com/tapad/sbt-docker-compose#debugging" aria-hidden="true" class="anchor" id="user-content-debugging" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Debugging</h2> 
  <p>To debug a Docker Compose Java process edit your docker-compose.yml file to set the JAVA_TOOL_OPTIONS environment variable. In the ports section you will also need to expose the port value defined in the "address=" parameter.</p> 
  <pre><code> environment:
     JAVA_TOOL_OPTIONS: -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005
 ports:
     - "0:5005"
</code></pre> 
  <p>Once the container is started you can to attach to it remotely. The instance connection table will mark 'YES' in the 'IsDebug' column for any exposed ports that can be attached to with the debugger. See the <a href="https://github.com/tapad/sbt-docker-compose/blob/master/examples/basic-with-tests/docker/docker-compose.yml" target="_blank">basic</a> example for a project configured with debugging enabled.</p> 
  <p>See the test case execution section above for information on how to attach a debugger to running test cases.</p> 
  <h2><a href="https://github.com/tapad/sbt-docker-compose#examples" aria-hidden="true" class="anchor" id="user-content-examples" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Examples</h2> 
  <p>In the <a href="https://github.com/tapad/sbt-docker-compose/blob/master/examples" target="_blank"><strong>examples</strong></a> folder there are six different projects showing different uses for the sbt-docker-compose plugin.</p> 
  <ol> 
   <li><a href="https://github.com/tapad/sbt-docker-compose/blob/master/examples/basic-with-tests" target="_blank"><strong>basic-with-tests</strong></a>: This project outlines a very basic example of how to enable the plugin on a simple application that will echo back "Hello, World!". The examples also shows how to create a ScalaTest test case that can run against the dynamically assigned endpoints. From sbt run the following to compile the code, build a Docker image and launch a Docker Compose instance. <pre><code> dockerComposeUp
</code></pre> </li> 
  </ol> 
  <p>Run the following to execute a test case against the running instance:</p> 
  <pre><code> dockerComposeTest &lt;Instance Id&gt;
</code></pre> 
  <p>Run the following to start a new instance, run tests and shutdown the instance:</p> 
  <pre><code> dockerComposeTest
</code></pre> 
  <p>Note how this example project shows how the testExecutionArgs setting can be used to create an html test pass report by by providing additional ScalaTest Runner defined <a href="http://www.scalatest.org/user_guide/using_the_runner" target="_blank">arguments</a>.</p> 
  <pre><code> //Specify that an html report should be created for the test pass
 testExecutionArgs := "-h target/htmldir"
</code></pre> 
  <ol start="2"> 
   <li><a href="https://github.com/tapad/sbt-docker-compose/blob/master/examples/basic-native-packager" target="_blank"><strong>basic-native-packager</strong></a>: This project outlines a very basic example of how to enable the plugin on a simple application. From sbt run the following to compile the code, build a Docker image and launch a Docker Compose instance. In this example the sbt-native-packager is used to build the Docker image instead of sbt-docker. <pre><code> dockerComposeUp
</code></pre> </li> 
   <li><a href="https://github.com/tapad/sbt-docker-compose/blob/master/examples/no-build" target="_blank"><strong>no-build</strong></a>: This project shows how sbt-docker-compose can be used to launch instances of images that are already published and do not need to be built locally. This example uses the official Redis image from Docker Hub. Once the instance is started Redis will be available on the displayed "Host:Port". The port is dynamically assigned so that multiple instances can be started. <pre><code> dockerComposeUp
</code></pre> </li> 
   <li><a href="https://github.com/tapad/sbt-docker-compose/blob/master/examples/multi-project" target="_blank"><strong>multi-project</strong></a>: This project shows how more advanced multi-project builds are supported. From sbt you can build the Docker image and launch a running instance of a single project by executing: <pre><code> project sample1
 dockerComposeUp
</code></pre> </li> 
  </ol> 
  <p>However, from the root "multi-project" you can run the following to build new Docker images for both sub projects and launch a running instance that consists of both images:</p> 
  <pre><code> project multi-project
 dockerComposeUp
</code></pre> 
  <p>Note how the docker-compose.yml file for the root project tags each image with "&lt;localBuild&gt;". This allows dockerComposeUp to know that these images should not be updated from the Docker Registry.</p> 
  <ol start="5"> 
   <li><a href="https://github.com/tapad/sbt-docker-compose/blob/master/examples/basic-variable-substitution" target="_blank"><strong>basic-variable-substitution</strong></a>: This project demonstrates how you can re-use your existing docker-compose.yml with <a href="https://docs.docker.com/compose/compose-file/#variable-substitution" target="_blank">variable substitution</a> using sbt-docker-compose. Instead of passing your variables as environment variables you can define them in your build.sbt programmatically.</li> 
  </ol> 
  <p>build.sbt:</p> 
  <pre><code> variablesForSubstitution := Map("SOURCE_PORT" -&gt; "5555")
 
 or
 
 variablesForSubstitutionTask := { /* code */ Map("SOURCE_PORT" -&gt; "5555") }
</code></pre> 
  <p>docker-compose.yml:</p> 
  <pre><code> basic:
   image: basic:1.0.0
   environment:
     JAVA_TOOL_OPTIONS: -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005
   ports:
     - "${SOURCE_PORT}:5005"
</code></pre> 
  <ol start="6"> 
   <li> <p><a href="https://github.com/tapad/sbt-docker-compose/blob/master/examples/basic-with-tests-integration" target="_blank"><strong>basic-with-tests-integration</strong></a>: This project shows how to change the default sbt Scope of the tests being executed from 'Test' to 'IntegrationTest' when 'dockerComposeTest' is run.</p> </li> 
   <li> <p><a href="https://github.com/tapad/sbt-docker-compose/blob/master/examples/basic-with-tests-specs2" target="_blank"><strong>basic-with-tests-spec2</strong></a>: This project shows how to execute Specs2 based test cases via the 'specs2.files' runner by setting the following property in build.sbt:</p> <pre><code> testPassUseSpecs2 := true
</code></pre> </li> 
  </ol> 
  <p>Additionally, you can override the default Specs2 file runner properties as follows:</p> 
  <pre><code> testExecutionExtraConfigTask := Map("filesrunner.verbose" -&gt; s"true")
</code></pre> 
  <h2><a href="https://github.com/tapad/sbt-docker-compose#currently-unsupported-docker-compose-fields" aria-hidden="true" class="anchor" id="user-content-currently-unsupported-docker-compose-fields" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Currently Unsupported Docker Compose Fields</h2> 
  <ol> 
   <li> <p>"build:" - All docker compose services need to specify an "image:" field.</p> </li> 
   <li> <p>"container_name:" - To allow for multi-instance support container names need to be dynamically provided by the plugin instead of being explicitly defined.</p> </li> 
   <li> <p>"extends:" - All docker services must be defined in a single docker compose yml file.</p> </li> 
  </ol> 
  <h2><a href="https://github.com/tapad/sbt-docker-compose#other" aria-hidden="true" class="anchor" id="user-content-other" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Other</h2> 
  <p>Testing of sbt-docker-compose has been performed starting with docker-compose version: 1.5.1</p> 
 </article>
</div>