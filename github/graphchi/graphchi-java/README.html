<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a href="https://github.com/graphchi/graphchi-java#graphchi-java" aria-hidden="true" class="anchor" id="user-content-graphchi-java" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>GraphChi-java</h1> 
  <p>Version 0.2.2</p> 
  <h2><a href="https://github.com/graphchi/graphchi-java#news" aria-hidden="true" class="anchor" id="user-content-news" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>News</h2> 
  <ul> 
   <li>Performance has been improved by parallelizing shard loading better (Oct 22, 2013)</li> 
   <li>GraphChi's Java version has a new cool random walk simulation engine: <a href="https://github.com/GraphChi/graphchi-java/wiki/Personalized-Pagerank-with-DrunkardMob" target="_blank">https://github.com/GraphChi/graphchi-java/wiki/Personalized-Pagerank-with-DrunkardMob</a></li> 
  </ul> 
  <h1><a href="https://github.com/graphchi/graphchi-java#introduction" aria-hidden="true" class="anchor" id="user-content-introduction" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Introduction</h1> 
  <p>Project for developing the Java version of GraphChi ( <a href="http://www.graphchi.org" target="_blank">http://www.graphchi.org</a> ), the disk-based graph computation engine. To learn more about GraphChi, visit the C++ version's project page: <a href="https://github.com/GraphChi/graphchi-cpp" target="_blank">https://github.com/GraphChi/graphchi-cpp</a></p> 
  <p><strong>NEW:</strong> GraphChi can be used in Hadoop/Pig scripts: <a href="https://github.com/GraphChi/graphchi-java/wiki/GraphChi-For-Pig" target="_blank">GraphChi for Pig</a>.</p> 
  <h3><a href="https://github.com/graphchi/graphchi-java#how-to-use" aria-hidden="true" class="anchor" id="user-content-how-to-use" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>How to use</h3> 
  <p>Read the README.txt for information on how to build and run the example applications. You are going to need <a href="http://maven.apache.org/download.cgi" target="_blank">Maven</a> or <a href="http://www.scala-sbt.org/" target="_blank">sbt</a> for building.</p> 
  <p>graphchi-java is hosted in the maven central repository, so you can include it as a managed dependency in your maven or sbt builds. For sbt, include the following line in your <code>build.sbt</code>:</p> 
  <p><code>libraryDependencies += "org.graphchi" %% "graphchi-java" % "0.2.2"</code></p> 
  <p>For maven, include the following in <code>&lt;dependencies&gt;</code>:</p> 
  <pre><code>&lt;dependency&gt;
  &lt;groupId&gt;org.graphchi&lt;/groupId&gt;
  &lt;artifactId&gt;graphchi-java_2.11&lt;/artifactId&gt;
  &lt;version&gt;0.2.2&lt;/version&gt;
&lt;/dependency&gt;
</code></pre> 
  <p>It is a very good idea to study the example applications carefully. There are currently three example applications in the package <strong>edu.cmu.graphchi.apps</strong>:</p> 
  <ul> 
   <li><a href="https://github.com/GraphChi/graphchi-java/tree/master/src/main/java/edu/cmu/graphchi/apps/Pagerank.java" target="_blank">PageRank</a> for computing the famous <a href="http://en.wikipedia.org/wiki/PageRank" target="_blank">PageRank</a> ranking</li> 
   <li><a href="https://github.com/GraphChi/graphchi-java/tree/master/src/main/java/edu/cmu/graphchi/apps/ConnectedComponents.java" target="_blank">Connected Components</a> for computing the weakly connected components</li> 
   <li><a href="https://github.com/GraphChi/graphchi-java/tree/master/src/main/java/edu/cmu/graphchi/apps/ALSMatrixFactorization.java" target="_blank">Alternative Least Squares Matrix Factorization</a></li> 
  </ul> 
  <h3><a href="https://github.com/graphchi/graphchi-java#input-data" aria-hidden="true" class="anchor" id="user-content-input-data" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Input data</h3> 
  <p>GraphChi-java supports <a href="https://github.com/GraphChi/graphchi-cpp/wiki/Edge-List-Format" target="_blank">edge-list</a> and: <a href="https://github.com/GraphChi/graphchi-cpp/wiki/Adjacency-List-Format" target="_blank">adjacency list</a> formats.</p> 
  <p>To preprocess the graph, you need to call "sharder" in the beginning of your program. For example, if you graph has floating-point input values for each edge, you can call it as follows:</p> 
  <div class="highlight highlight-source-java">
   <pre>    <span class="pl-k">protected</span> <span class="pl-k">static</span> <span class="pl-smi">FastSharder</span> createSharder(<span class="pl-smi">String</span> graphName, <span class="pl-k">int</span> numShards) throws <span class="pl-smi">IOException</span> {
            <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-k">FastSharder&lt;<span class="pl-smi">Float</span>, <span class="pl-smi">Float</span>&gt;</span>(graphName, numShards, <span class="pl-k">new</span> <span class="pl-k">VertexProcessor&lt;<span class="pl-smi">Float</span>&gt;</span>() {
                <span class="pl-k">public</span> <span class="pl-smi">Float</span> <span class="pl-en">receiveVertexValue</span>(<span class="pl-k">int</span> <span class="pl-v">vertexId</span>, <span class="pl-smi">String</span> <span class="pl-v">token</span>) {
                    <span class="pl-k">return</span> (token <span class="pl-k">==</span> <span class="pl-c1">null</span> <span class="pl-k">?</span> <span class="pl-c1">0.0f</span> <span class="pl-k">:</span> <span class="pl-smi">Float</span><span class="pl-k">.</span>parseFloat(token));
                }
            }, <span class="pl-k">new</span> <span class="pl-k">EdgeProcessor&lt;<span class="pl-smi">Float</span>&gt;</span>() {
                <span class="pl-k">public</span> <span class="pl-smi">Float</span> <span class="pl-en">receiveEdge</span>(<span class="pl-k">int</span> <span class="pl-v">from</span>, <span class="pl-k">int</span> <span class="pl-v">to</span>, <span class="pl-smi">String</span> <span class="pl-v">token</span>) {
                    <span class="pl-k">return</span> (token <span class="pl-k">==</span> <span class="pl-c1">null</span> <span class="pl-k">?</span> <span class="pl-c1">0.0f</span> <span class="pl-k">:</span> <span class="pl-smi">Float</span><span class="pl-k">.</span>parseFloat(token));
                }
            }, <span class="pl-k">new</span> <span class="pl-smi">FloatConverter</span>(), <span class="pl-k">new</span> <span class="pl-smi">FloatConverter</span>());
        }
    
        <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">void</span> main(<span class="pl-k">String</span>[] args) throws  <span class="pl-smi">Exception</span> {
            <span class="pl-smi">String</span> baseFilename <span class="pl-k">=</span> args[<span class="pl-c1">0</span>];
            <span class="pl-k">int</span> nShards <span class="pl-k">=</span> <span class="pl-smi">Integer</span><span class="pl-k">.</span>parseInt(args[<span class="pl-c1">1</span>]);
            <span class="pl-smi">String</span> filetype<span class="pl-k">=</span> args[<span class="pl-c1">2</span>]; <span class="pl-c"><span class="pl-c">//</span> "edgelist" or "adjacency"</span>
    
            <span class="pl-c"><span class="pl-c">/*</span> Create shards <span class="pl-c">*/</span></span>
            <span class="pl-smi">FastSharder</span> sharder <span class="pl-k">=</span> createSharder(baseFilename, nShards);
            <span class="pl-k">if</span> (<span class="pl-k">new</span> <span class="pl-smi">File</span>(<span class="pl-smi">ChiFilenames</span><span class="pl-k">.</span>getFilenameIntervals(baseFilename, nShards))<span class="pl-k">.</span>exists()) {
                    sharder<span class="pl-k">.</span>shard(<span class="pl-k">new</span> <span class="pl-smi">FileInputStream</span>(<span class="pl-k">new</span> <span class="pl-smi">File</span>(baseFilename)), filetype);
                } <span class="pl-k">else</span> {
                    logger<span class="pl-k">.</span>info(<span class="pl-s"><span class="pl-pds">"</span>Found shards -- no need to preprocess<span class="pl-pds">"</span></span>);
                }
        <span class="pl-c1">....</span></pre>
  </div> 
  <p><strong>Note:</strong> (For edge-lists only) initial values for vertices are also now supported. If you define a self-edge (i.e edge with same source and destination), the value of the 'edge' is interpreted as value for the vertex. Thus you need to provide both a vertex-value and edge-value parser to the FastSharder.</p> 
  <h3><a href="https://github.com/graphchi/graphchi-java#hadoop--pig" aria-hidden="true" class="anchor" id="user-content-hadoop--pig" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Hadoop / PIG</h3> 
  <p>Since version 0.2 (January 2013), GraphChi Java programs can be directly invoked from <a href="http://pig.apache.org" target="_blank">Pig</a>. More information will on page GraphChiForPig.</p> 
  <p>Example PIG script:</p> 
  <pre><code>    REGISTER graphchi-java-0.2-jar-with-dependencies.jar;
    
    pagerank = LOAD '/user/akyrola/graphs/soc-LiveJournal1.txt' USING edu.cmu.graphchi.apps.pig.PigPagerank as (vertex:int, rank:float);
    
    STORE pagerank INTO '/user/akyrola/pagerank';
</code></pre> 
  <h3><a href="https://github.com/graphchi/graphchi-java#scala" aria-hidden="true" class="anchor" id="user-content-scala" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Scala</h3> 
  <p>An early Scala-wrapper is also provided. See <a href="https://github.com/GraphChi/graphchi-java/blob/master/src/main/scala/edu/cmu/graphchi/scala/apps/PagerankScala.scala" target="_blank">PagerankScala</a> for example.</p> 
  <h3><a href="https://github.com/graphchi/graphchi-java#differences-to-the-c-version" aria-hidden="true" class="anchor" id="user-content-differences-to-the-c-version" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Differences to the C++ version</h3> 
  <p>Following features are not implemented in the Java-version:</p> 
  <ul> 
   <li>dynamic graphs</li> 
   <li>dynamic edge data</li> 
  </ul> 
  <p>GraphChi implements a preprocessing step called "sharding", which reads an input graph and stores it in efficient binary format on the disk (see <a href="https://github.com/GraphChi/graphchi-cpp/wiki/Introduction-To-GraphChi" target="_blank">Introduction to GraphChi</a> for more information). Java-version now includes its own sharding code (called "FastSharder"), which differs from the C++ version: FastSharder shuffles the order of vertices to guarantee (with high probability) an even distribution of edges over shards. Thus, internally GraphChi's Java-version uses different vertex IDs than in the original graph.</p> 
  <p>Translating between the internal ids and original ids is easy using the <strong>VertexIdTranslate</strong> class:</p> 
  <div class="highlight highlight-source-java">
   <pre>         <span class="pl-smi">VertexIdTranslate</span> trans <span class="pl-k">=</span> engine<span class="pl-k">.</span>getVertexIdTranslate();
         <span class="pl-k">for</span>(<span class="pl-k">int</span> i<span class="pl-k">=</span><span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> engine<span class="pl-k">.</span>numVertices(); i<span class="pl-k">++</span>) {
              <span class="pl-smi">System</span><span class="pl-k">.</span>out<span class="pl-k">.</span>println(<span class="pl-s"><span class="pl-pds">"</span>Internal id <span class="pl-pds">"</span></span> <span class="pl-k">+</span> i <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span> = original id <span class="pl-pds">"</span></span> <span class="pl-k">+</span> trans<span class="pl-k">.</span>backward(i));
          }</pre>
  </div> 
  <h3><a href="https://github.com/graphchi/graphchi-java#performance" aria-hidden="true" class="anchor" id="user-content-performance" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Performance</h3> 
  <p>On a new MacBook Pro (2012), I can run Pagerank on a Twitter-graph with 1.5 B edges (available from <a href="http://an.kaist.ac.kr/traces/WWW2010.html/" target="_blank">http://an.kaist.ac.kr/traces/WWW2010.html/</a>) in about 10 minutes / iteration. It is 2-3x slower than the C++ version on an SSD disk. I expect this performance to be sufficient for many users, especially researchers and analysts who do need real-time performance but favor a convenient programming environment.</p> 
  <h2><a href="https://github.com/graphchi/graphchi-java#acknowledgements" aria-hidden="true" class="anchor" id="user-content-acknowledgements" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Acknowledgements</h2> 
  <p>I want to thank Twitter and particularly the Personalization and Recommendations Team for the my internship during Fall 2012. M any of the improvements to mature the GraphChi's Java-version were done during the course of the internship.</p> 
  <h2><a href="https://github.com/graphchi/graphchi-java#yourkit-sponsorship" aria-hidden="true" class="anchor" id="user-content-yourkit-sponsorship" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>YourKit sponsorship</h2> 
  <p>YourKit is kindly supporting GraphChi project with its full-featured Java Profiler. It is incredibly useful for debugging performance bottlenecks and analyzing memory usage. YourKit, LLC is the creator of innovative and intelligent tools for profiling Java and .NET applications. Take a look at YourKit's leading software products: <a href="http://www.yourkit.com/java/profiler/index.jsp" target="_blank">YourKit Java Profiler</a> and <a href="http://www.yourkit.com/.net/profiler/index.jsp" target="_blank">YourKit .NET Profiler</a>.</p> 
  <p>-- Aapo Kyrola, <a href="mailto:akyrola@cs.cmu.edu" target="_blank">akyrola@cs.cmu.edu</a></p> 
 </article>
</div>