<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a href="https://github.com/backuity/clist#command-line-interface-scala-toolkit---" aria-hidden="true" class="anchor" id="user-content-command-line-interface-scala-toolkit---" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Command Line Interface Scala Toolkit <a href="https://travis-ci.org/backuity/clist" target="_blank"><img src="https://camo.githubusercontent.com/125495d306cc317aa8c5a98eddb70543f51614f8/68747470733a2f2f7472617669732d63692e6f72672f6261636b756974792f636c6973742e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/backuity/clist.png?branch=master" style="max-width:100%;"></a> <a href="http://search.maven.org/#search%7Cga%7C1%7Cg%3Aorg.backuity.clist%20a%3Aclist-core_2.11*" target="_blank"><img src="https://camo.githubusercontent.com/afd4e3c50ffcc77bac0557e204f5384dba0e8e65/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f6f72672e6261636b756974792e636c6973742f636c6973742d636f72655f322e31312a2e7376673f6c6162656c3d6c617465737425323072656c65617365253230666f72253230322e3131" data-canonical-src="https://img.shields.io/maven-central/v/org.backuity.clist/clist-core_2.11*.svg?label=latest%20release%20for%202.11" style="max-width:100%;"></a> <a href="http://search.maven.org/#search%7Cga%7C1%7Cg%3Aorg.backuity.clist%20a%3Aclist-core_2.12*" target="_blank"><img src="https://camo.githubusercontent.com/6a0a7ad3343cf464f402d136e840069ba28d0c4b/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f6f72672e6261636b756974792e636c6973742f636c6973742d636f72655f322e31322a2e7376673f6c6162656c3d6c617465737425323072656c65617365253230666f72253230322e3132" data-canonical-src="https://img.shields.io/maven-central/v/org.backuity.clist/clist-core_2.12*.svg?label=latest%20release%20for%202.12" style="max-width:100%;"></a></h1> 
  <p>The Backuity CLIST is a scala-only (2.11+) library for quickly building beautiful type-safe modular and reusable mutable CLIs.</p> 
  <ul> 
   <li><a href="https://github.com/backuity/clist#you-said-beautiful" target="_blank">You said beautiful</a></li> 
   <li><a href="https://github.com/backuity/clist#why-mutable" target="_blank">Why mutable?</a></li> 
   <li><a href="https://github.com/backuity/clist#lets-start---single-command-cli" target="_blank">Let's start - Single Command CLI</a></li> 
   <li><a href="https://github.com/backuity/clist#attributes-argument-vs-arguments-vs-option" target="_blank">Attributes: Argument vs Arguments vs Options</a></li> 
   <li><a href="https://github.com/backuity/clist#parsing" target="_blank">Parsing</a></li> 
   <li><a href="https://github.com/backuity/clist#exit-code-vs-exception" target="_blank">Exit code vs Exception</a></li> 
   <li><a href="https://github.com/backuity/clist#version-help-and-usage" target="_blank">Version, Help and Usage</a></li> 
   <li><a href="https://github.com/backuity/clist#multiple-commands" target="_blank">Multiple Commands</a> 
    <ul> 
     <li><a href="https://github.com/backuity/clist#composition-grouping-options-into-traits" target="_blank">Composition: grouping Options into Traits</a></li> 
     <li><a href="https://github.com/backuity/clist#adding-behavior-to-commands" target="_blank">Adding behavior to Commands</a></li> 
    </ul> </li> 
   <li><a href="https://github.com/backuity/clist#licence--contribution" target="_blank">Licence &amp; Contribution</a></li> 
  </ul> 
  <h2><a href="https://github.com/backuity/clist#you-said-beautiful" aria-hidden="true" class="anchor" id="user-content-you-said-beautiful" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>You said beautiful?</h2> 
  <p>An image is worth a thousand words, here is a taste of what you'd get for free:</p> 
  <p><a href="https://github.com/backuity/clist/blob/master/usage-demo.png" target="_blank"><img src="https://github.com/backuity/clist/raw/master/usage-demo.png" alt="usage-demo" style="max-width:100%;"></a></p> 
  <h2><a href="https://github.com/backuity/clist#why-mutable" aria-hidden="true" class="anchor" id="user-content-why-mutable" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Why mutable?</h2> 
  <p>We think that CLIs do not require an immutable approach. Immutability often comes at the expense of simplicity. If you are looking for an immutable CLI library you should take a look at projects like <a href="https://github.com/scopt/scopt" target="_blank">https://github.com/scopt/scopt</a>.</p> 
  <h2><a href="https://github.com/backuity/clist#lets-start---single-command-cli" aria-hidden="true" class="anchor" id="user-content-lets-start---single-command-cli" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Let's start - Single Command CLI</h2> 
  <p>First let's configure our SBT build</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">++</span><span class="pl-k">=</span> <span class="pl-en">Seq</span>(
   <span class="pl-s"><span class="pl-pds">"</span>org.backuity.clist<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>clist-core<span class="pl-pds">"</span></span>   <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>3.3.0<span class="pl-pds">"</span></span>,
   <span class="pl-s"><span class="pl-pds">"</span>org.backuity.clist<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>clist-macros<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>3.3.0<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>provided<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>Then define a command:</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-k">import</span> <span class="pl-v">org.backuity.clist.</span><span class="pl-v">_</span>
  <span class="pl-c"><span class="pl-c">//</span> or if you do not like wildcard imports:</span>
  <span class="pl-c"><span class="pl-c">//</span> import org.backuity.clist.{Command, opt, args}</span>

  <span class="pl-k">class</span> <span class="pl-en">Cat</span> <span class="pl-k">extends</span> <span class="pl-e">Command</span>(description <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>concatenate files and print on the standard output<span class="pl-pds">"</span></span>) {

    <span class="pl-c"><span class="pl-c">//</span> `opt`, `arg` and `args` are scala macros that will extract the name of the member</span>
    <span class="pl-c"><span class="pl-c">//</span> to use it as the option/arguments name.</span>
    <span class="pl-c"><span class="pl-c">//</span> Here for instance the member `showAll` will be turned into the option `--show-all`</span>
    <span class="pl-k">var</span> <span class="pl-en">showAll</span>        <span class="pl-k">=</span> opt[<span class="pl-k">Boolean</span>](abbrev <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>A<span class="pl-pds">"</span></span>, description <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>equivalent to -vET<span class="pl-pds">"</span></span>)

    <span class="pl-c"><span class="pl-c">//</span> an abbreviated form can be added, so that this option can be triggered both by `--number-nonblank` or `-b`</span>
    <span class="pl-k">var</span> <span class="pl-en">numberNonblank</span> <span class="pl-k">=</span> opt[<span class="pl-k">Boolean</span>](abbrev <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>, description <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>number nonempty output lines, overrides -n<span class="pl-pds">"</span></span>)

    <span class="pl-c"><span class="pl-c">//</span> default values can be provided</span>
    <span class="pl-k">var</span> <span class="pl-en">maxLines</span>       <span class="pl-k">=</span> opt[<span class="pl-k">Int</span>](default <span class="pl-k">=</span> <span class="pl-c1">123</span>)

    <span class="pl-k">var</span> <span class="pl-en">files</span>          <span class="pl-k">=</span> args[<span class="pl-en">Seq</span>[<span class="pl-en">File</span>]](description <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>files to concat<span class="pl-pds">"</span></span>)
  }</pre>
  </div> 
  <p>And use it to parse <code>args</code>:</p> 
  <div class="highlight highlight-source-scala">
   <pre>  <span class="pl-k">def</span> <span class="pl-en">main</span>(<span class="pl-v">args</span>: <span class="pl-en">Array</span>[<span class="pl-k">String</span>]) {
    <span class="pl-en">Cli</span>.parse(args).withCommand(<span class="pl-k">new</span> <span class="pl-en">Cat)</span> { <span class="pl-k">case</span> cat <span class="pl-k">=&gt;</span>
          <span class="pl-c"><span class="pl-c">//</span> the new Cat instance will be mutated to receive the command-line arguments</span>
          println(cat.files)
      }
  }</pre>
  </div> 
  <p>Alternatively for simple commands like this one you can simply extend <code>CliMain</code> thus reducing the boiler plate even further:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">java.io.</span><span class="pl-v">File</span>

<span class="pl-k">import</span> <span class="pl-v">org.backuity.clist.</span><span class="pl-v">_</span>

<span class="pl-k">object</span> <span class="pl-en">CatDemo</span> <span class="pl-k">extends</span> <span class="pl-e">CliMain</span>[<span class="pl-k">Unit</span>](
  name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>cat<span class="pl-pds">"</span></span>,
  description <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>concatenate files and print on the standard output<span class="pl-pds">"</span></span>) {

  <span class="pl-k">var</span> <span class="pl-en">showAll</span>        <span class="pl-k">=</span> opt[<span class="pl-k">Boolean</span>](abbrev <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>A<span class="pl-pds">"</span></span>, description <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>equivalent to -vET<span class="pl-pds">"</span></span>)
  <span class="pl-k">var</span> <span class="pl-en">numberNonblank</span> <span class="pl-k">=</span> opt[<span class="pl-k">Boolean</span>](abbrev <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>, description <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>number nonempty output lines, overrides -n<span class="pl-pds">"</span></span>)
  <span class="pl-k">var</span> <span class="pl-en">maxLines</span>       <span class="pl-k">=</span> opt[<span class="pl-k">Int</span>](default <span class="pl-k">=</span> <span class="pl-c1">123</span>)
  <span class="pl-k">var</span> <span class="pl-en">files</span>          <span class="pl-k">=</span> args[<span class="pl-en">Seq</span>[<span class="pl-en">File</span>]](description <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>files to concat<span class="pl-pds">"</span></span>)

  <span class="pl-k">def</span> <span class="pl-en">run</span><span class="pl-k">:</span> <span class="pl-k">Unit</span> <span class="pl-k">=</span> {
    println(<span class="pl-s"><span class="pl-pds">"</span>files    = <span class="pl-pds">"</span></span> <span class="pl-k">+</span> files)
    println(<span class="pl-s"><span class="pl-pds">"</span>showAll  = <span class="pl-pds">"</span></span> <span class="pl-k">+</span> showAll)
    println(<span class="pl-s"><span class="pl-pds">"</span>maxLines = <span class="pl-pds">"</span></span> <span class="pl-k">+</span> maxLines)
  }
}</pre>
  </div> 
  <h2><a href="https://github.com/backuity/clist#attributes-argument-vs-arguments-vs-option" aria-hidden="true" class="anchor" id="user-content-attributes-argument-vs-arguments-vs-option" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Attributes: Argument vs Arguments vs Option</h2> 
  <p>A <code>Command</code> can have 3 kinds of attributes:</p> 
  <ul> 
   <li><code>opt</code>: an option is always optional and is provided either by <code>--option-name=value</code>, or with an abbreviated form such as <code>-x</code>. Declaration order does not matter.</li> 
   <li><code>arg</code>: an argument receives an un-named value as in the command <code>cat &lt;file&gt;</code>. It might be optional. Argument declaration order matters.</li> 
   <li><code>args</code>: the equivalent of a var-args. At most one can be specified and it must be declared last.</li> 
  </ul> 
  <h3><a href="https://github.com/backuity/clist#default-option-value" aria-hidden="true" class="anchor" id="user-content-default-option-value" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Default Option value</h3> 
  <p>An option (being optional) <em>must</em> have a default value (as we want to avoid <code>null</code> for obvious reasons). That default value is automatically provided for <code>Boolean</code> and <code>Option</code> (respectively <code>false</code> and <code>None</code>).</p> 
  <p>Note that a boolean option can be true by default, in that case providing it will make it false:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">var</span> <span class="pl-en">prettyPrint</span> <span class="pl-k">=</span> opt[<span class="pl-k">Boolean</span>](default <span class="pl-k">=</span> <span class="pl-c1">true</span>, name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>no-pretty-print<span class="pl-pds">"</span></span>)</pre>
  </div> 
  <p>Then on the command line: <code>cmd --no-pretty-print</code> will make <code>prettyPrint</code> false.</p> 
  <h3><a href="https://github.com/backuity/clist#abbreviated-option" aria-hidden="true" class="anchor" id="user-content-abbreviated-option" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Abbreviated Option</h3> 
  <p>Currently only boolean are supported.</p> 
  <h3><a href="https://github.com/backuity/clist#optional-argument" aria-hidden="true" class="anchor" id="user-content-optional-argument" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Optional Argument</h3> 
  <p>An argument can turned optional by setting the <code>required</code> attribute to <code>false</code>:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">var</span> <span class="pl-en">target</span> <span class="pl-k">=</span> arg[<span class="pl-en">Option</span>[<span class="pl-k">String</span>]](required <span class="pl-k">=</span> <span class="pl-c1">false</span>)</pre>
  </div> 
  <p>Very much like options, optional arguments <em>must</em> provide a default value for types other than <code>Boolean</code> and <code>Option</code>.</p> 
  <h3><a href="https://github.com/backuity/clist#named-argument" aria-hidden="true" class="anchor" id="user-content-named-argument" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Named Argument</h3> 
  <p>An argument can be provided through the command line in the same fashion as options.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">var</span> <span class="pl-en">target</span> <span class="pl-k">=</span> arg[<span class="pl-k">String</span>]()
<span class="pl-k">var</span> <span class="pl-en">verbose</span> <span class="pl-k">=</span> opt[<span class="pl-k">Boolean</span>]()</pre>
  </div> 
  <p>Then on the command line: <code>cmd --verbose --target=stuff</code></p> 
  <p>Note that when doing so its order become irrelevant (the argument can be provided after options/arguments that were declared after him).</p> 
  <h2><a href="https://github.com/backuity/clist#parsing" aria-hidden="true" class="anchor" id="user-content-parsing" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Parsing</h2> 
  <p>The parsing is done through the <code>Read</code> and <code>ReadMultiple</code> type-classes. User-specific instances can be provided by simply adding them to the implicit scope. <code>Read</code> (used by <code>opt</code> and <code>arg</code>) parses a String into a type <code>T</code>, whereas <code>ReadMultiple</code> (used by <code>args</code>) takes a <strong>list</strong> of string to produce a type <code>U</code>.</p> 
  <p>The following types are supported out-of-the-box:</p> 
  <ul> 
   <li>String</li> 
   <li>Int, Long, Double</li> 
   <li>BigInt, BigDecimal</li> 
   <li>java.util.Calendar (in the <code>yyyy-MM-dd</code> format)</li> 
   <li>java.io.File</li> 
   <li>java.net.URI</li> 
   <li>Tuple2</li> 
   <li>java enums</li> 
  </ul> 
  <p>Note that on the command line there is a distinction between</p> 
  <pre><code>cat file1 file2 "file with space"
</code></pre> 
  <p>and</p> 
  <pre><code>cat file1 file2 file with space
</code></pre> 
  <h3><a href="https://github.com/backuity/clist#example" aria-hidden="true" class="anchor" id="user-content-example" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Example</h3> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">var</span> <span class="pl-en">maxDelay</span> <span class="pl-k">=</span> opt[<span class="pl-k">Long</span>](default <span class="pl-k">=</span> <span class="pl-c1">3000L</span>)
<span class="pl-k">var</span> <span class="pl-en">maxError</span> <span class="pl-k">=</span> opt[<span class="pl-k">Double</span>](default <span class="pl-k">=</span> <span class="pl-c1">3.24</span>)</pre>
  </div> 
  <p>Or if you need to customize that parsing:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">object</span> <span class="pl-en">Person</span> <span class="pl-k">extends</span> <span class="pl-e">Command</span> {
  <span class="pl-k">var</span> <span class="pl-en">name</span> <span class="pl-k">=</span> arg[<span class="pl-en">Name</span>]()
}

<span class="pl-k">case</span> <span class="pl-k">class</span> <span class="pl-en">Name</span>(<span class="pl-v">firstName</span>: <span class="pl-k">String</span>, <span class="pl-v">lastName</span>: <span class="pl-k">String</span>)

<span class="pl-k">import</span> <span class="pl-v">org.backuity.clist.util.</span><span class="pl-v">Read</span>

<span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">nameRead</span> <span class="pl-k">=</span> <span class="pl-en">Read</span>.reads[<span class="pl-en">Name</span>] { str <span class="pl-k">=&gt;</span>
  <span class="pl-k">val</span> <span class="pl-en">Array</span>(first,last) <span class="pl-k">=</span> str.split(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\\</span>.<span class="pl-pds">"</span></span>)
  <span class="pl-en">Name</span>(first,last)
}</pre>
  </div> 
  <h2><a href="https://github.com/backuity/clist#exit-code-vs-exception" aria-hidden="true" class="anchor" id="user-content-exit-code-vs-exception" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Exit code vs Exception</h2> 
  <p>By default, upon failure, the <code>Cli</code> will exit with code 1. This behavior can be customized:</p> 
  <ul> 
   <li><code>Cli.parse(args).throwExceptionOnError()</code> : throws an exception instead of exiting</li> 
   <li><code>Cli.parse(args).exitCode(12)</code> : exits with a specific code</li> 
  </ul> 
  <h2><a href="https://github.com/backuity/clist#version-help-and-usage" aria-hidden="true" class="anchor" id="user-content-version-help-and-usage" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Version, Help and Usage</h2> 
  <p>You can provide a version number for your program through <code>version("1.0.0")</code>. This will add a <code>version</code> option, whose name can be customized with <code>version("1.0.0", "custom-name")</code>.</p> 
  <p>By default a help command is added, which displays the command usage. This can be removed with <code>noHelp()</code>. The usage is printed for each parsing error but this can be disabled with <code>noUsageOnError()</code>.</p> 
  <p>Finally the usage can be customized through <code>withUsage(newCustomUsage)</code>.</p> 
  <h2><a href="https://github.com/backuity/clist#multiple-commands" aria-hidden="true" class="anchor" id="user-content-multiple-commands" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Multiple Commands</h2> 
  <p>To build a multi-command CLI simply provide the parser with more than one command:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">object</span> <span class="pl-en">Run</span> <span class="pl-k">extends</span> <span class="pl-e">Command</span>
<span class="pl-k">object</span> <span class="pl-en">Show</span> <span class="pl-k">extends</span> <span class="pl-e">Command</span>

<span class="pl-k">val</span> <span class="pl-en">res</span> <span class="pl-k">=</span> <span class="pl-en">Cli</span>.parse(args).withCommands(<span class="pl-en">Run</span>, <span class="pl-en">Show</span>)
<span class="pl-c"><span class="pl-c">//</span> res will be an Option[Command]</span></pre>
  </div> 
  <p>It makes sense now to define a name for our program:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-en">Cli</span>.parse(args).withProgramName(<span class="pl-s"><span class="pl-pds">"</span>my-cli<span class="pl-pds">"</span></span>).withCommands(<span class="pl-en">Run</span>, <span class="pl-en">Show</span>)</pre>
  </div> 
  <h3><a href="https://github.com/backuity/clist#composition-grouping-options-into-traits" aria-hidden="true" class="anchor" id="user-content-composition-grouping-options-into-traits" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Composition: grouping Options into Traits</h3> 
  <p>It is entirely possible (and encouraged) to factorize options into traits and compose Commands with them:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">trait</span> <span class="pl-en">Common</span> { <span class="pl-c1">this</span><span class="pl-k">:</span> <span class="pl-en">Command</span> <span class="pl-k">=&gt;</span>
   <span class="pl-k">var</span> <span class="pl-en">verbose</span> <span class="pl-k">=</span> opt[<span class="pl-k">Boolean</span>](abbrev <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>v<span class="pl-pds">"</span></span>)
}

<span class="pl-k">object</span> <span class="pl-en">Run</span> <span class="pl-k">extends</span> <span class="pl-e">Command</span> <span class="pl-k">with</span> <span class="pl-e">Common</span>
<span class="pl-k">object</span> <span class="pl-en">Show</span> <span class="pl-k">extends</span> <span class="pl-e">Command</span> <span class="pl-k">with</span> <span class="pl-e">Common</span>

<span class="pl-k">val</span> <span class="pl-en">res</span> <span class="pl-k">=</span> <span class="pl-en">Cli</span>.parse(args).withCommands(<span class="pl-en">Run</span>, <span class="pl-en">Show</span>)
<span class="pl-c"><span class="pl-c">//</span> res is also now inferred as an `Option[Common]`</span></pre>
  </div> 
  <p>You can also seal your command hierarchy to allow exhaustive pattern matching checks:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">sealed</span> <span class="pl-k">trait</span> <span class="pl-en">Common</span> { <span class="pl-c1">this</span><span class="pl-k">:</span> <span class="pl-en">Command</span> <span class="pl-k">=&gt;</span> <span class="pl-c"><span class="pl-c">//</span> same as above</span>
}

<span class="pl-en">Cli</span>.parse(args).withCommands(<span class="pl-en">Run</span>, <span class="pl-en">Show</span>) <span class="pl-k">match</span> {
   <span class="pl-k">case</span> <span class="pl-en">Some</span>(<span class="pl-en">Run</span>)  <span class="pl-k">=&gt;</span>
   <span class="pl-k">case</span> <span class="pl-en">Some</span>(<span class="pl-en">Show</span>) <span class="pl-k">=&gt;</span>
   <span class="pl-k">case</span> <span class="pl-c1">None</span> <span class="pl-k">=&gt;</span>
}</pre>
  </div> 
  <h3><a href="https://github.com/backuity/clist#adding-behavior-to-commands" aria-hidden="true" class="anchor" id="user-content-adding-behavior-to-commands" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Adding behavior to Commands</h3> 
  <p>Depending on your taste, you might want to define the behavior of your commands within them:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">sealed</span> <span class="pl-k">trait</span> <span class="pl-en">Common</span> { <span class="pl-c1">this</span><span class="pl-k">:</span> <span class="pl-en">Command</span> <span class="pl-k">=&gt;</span>
   <span class="pl-k">var</span> <span class="pl-en">verbose</span> <span class="pl-k">=</span> opt[<span class="pl-k">Boolean</span>](abbrev <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>v<span class="pl-pds">"</span></span>)
   <span class="pl-k">def</span> <span class="pl-en">run</span>()<span class="pl-k">:</span> <span class="pl-k">Unit</span>
}

<span class="pl-k">object</span> <span class="pl-en">Run</span> <span class="pl-k">extends</span> <span class="pl-e">Command</span> <span class="pl-k">with</span> <span class="pl-e">Common</span> {
   <span class="pl-k">def</span> <span class="pl-en">run</span>()<span class="pl-k">:</span> <span class="pl-k">Unit</span> <span class="pl-k">=</span> {
      println(<span class="pl-s"><span class="pl-pds">"</span>Running...<span class="pl-pds">"</span></span>)
   }
}

<span class="pl-k">object</span> <span class="pl-en">Show</span> <span class="pl-k">extends</span> <span class="pl-e">Command</span> <span class="pl-k">with</span> <span class="pl-e">Common</span> {
   <span class="pl-k">def</span> <span class="pl-en">run</span>()<span class="pl-k">:</span> <span class="pl-k">Unit</span> <span class="pl-k">=</span> {
      println(<span class="pl-s"><span class="pl-pds">"</span>Showing...<span class="pl-pds">"</span></span>)
   }
}

<span class="pl-en">Cli</span>.parse(args).withCommands(<span class="pl-en">Run</span>, <span class="pl-en">Show</span>).foreach(_.run())</pre>
  </div> 
  <h2><a href="https://github.com/backuity/clist#licence--contribution" aria-hidden="true" class="anchor" id="user-content-licence--contribution" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Licence &amp; Contribution</h2> 
  <p>The code is published under the Apache 2.0 licence.</p> 
  <p>You're welcome to fork and submit PRs, and if you like the project you can up-vote the related <a href="http://stackoverflow.com/questions/2315912/scala-best-way-to-parse-command-line-parameters-cli/34748336#34748336" target="_blank">StackOverflow answer</a>.</p> 
 </article>
</div>