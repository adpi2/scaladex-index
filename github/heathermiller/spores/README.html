<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <h1><a id="user-content-spores" class="anchor" href="https://github.com/heathermiller/spores#spores" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Spores</h1> 
  <p>Scala Spores, safe mobile closures: <a href="http://docs.scala-lang.org/sips/pending/spores.html" target="_blank">SIP-21</a></p> 
  <h2><a id="user-content-building-spores" class="anchor" href="https://github.com/heathermiller/spores#building-spores" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Building Spores</h2> 
  <p>The Spores project is built and tested using sbt. It has two modules: <code>spores-core</code> and <code>spores-pickling</code>. The <code>spores-core</code> module contains the core type definitions and the <code>spore</code> macro. The <code>spores-pickling</code> module integrates Spores with <a href="https://github.com/scala/pickling" target="_blank">scala/pickling</a> by providing picklers for Spores.</p> 
  <p>To build the core Spores module:</p> 
  <pre><code>&gt; project spores-core
&gt; compile
</code></pre> 
  <p>To run the test suite:</p> 
  <pre><code>&gt; test
</code></pre> 
  <h2><a id="user-content-get-spores" class="anchor" href="https://github.com/heathermiller/spores#get-spores" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Get Spores</h2> 
  <p>The <code>spores-core</code> and <code>spores-pickling</code> modules for Scala 2.11 are available on Maven Central and Sonatype. You can use Spores in your sbt project by simply adding the following dependency to your build file:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>org.scala-lang.modules<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>spores-core<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.2.4<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>To enable integration with Pickling, add the following dependency:</p> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>org.scala-lang.modules<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>spores-pickling<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.2.4<span class="pl-pds">"</span></span></pre>
  </div> 
  <p>Or you can just directly download the jar files (<a href="http://search.maven.org/remotecontent?filepath=org/scala-lang/modules/spores-core_2.11/0.2.4/spores-core_2.11-0.2.4.jar" target="_blank">spores-core</a>, <a href="http://search.maven.org/remotecontent?filepath=org/scala-lang/modules/spores-pickling_2.11/0.2.4/spores-pickling_2.11-0.2.4.jar" target="_blank">spores-pickling</a>).</p> 
  <h2><a id="user-content-updates-since-the-first-draft-june-16th-2013-of-sip-21" class="anchor" href="https://github.com/heathermiller/spores#updates-since-the-first-draft-june-16th-2013-of-sip-21" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Updates since the first draft (June 16th, 2013) of SIP-21</h2> 
  <p>Many users expressed concern that spores would be both unusable with for- expression syntax, and would be incompatible (without a lot of boilerplate) with normal closures or higher-order functions which take normal functions as arguments.</p> 
  <h3><a id="user-content-capture-syntax" class="anchor" href="https://github.com/heathermiller/spores#capture-syntax" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Capture Syntax</h3> 
  <p>To remedy the incompatibility with for-expressions, we propose a new <code>capture</code> syntax. Here is an exemplary use in the context of a hypothetical <code>DCollection</code> type:</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">def</span> <span class="pl-en">lookup</span>(<span class="pl-v">i</span>: <span class="pl-k">Int</span>)<span class="pl-k">:</span> <span class="pl-en">DCollection</span>[<span class="pl-k">Int</span>] <span class="pl-k">=</span> ...
<span class="pl-k">val</span> <span class="pl-en">indices</span><span class="pl-k">:</span> <span class="pl-en">DCollection</span>[<span class="pl-k">Int</span>] <span class="pl-k">=</span> ...

<span class="pl-k">for</span> { i <span class="pl-k">&lt;</span><span class="pl-k">-</span> indices
      j <span class="pl-k">&lt;</span><span class="pl-k">-</span> lookup(i)
} <span class="pl-k">yield</span> j <span class="pl-k">+</span> capture(i)

<span class="pl-k">trait</span> <span class="pl-en">DCollection</span>[<span class="pl-en">A</span>] {
  <span class="pl-k">def</span> <span class="pl-en">map</span>[<span class="pl-en">B</span>](<span class="pl-v">sp</span>: <span class="pl-en">Spore</span>[<span class="pl-en">A</span>, <span class="pl-en">B</span>])<span class="pl-k">:</span> <span class="pl-en">DCollection</span>[<span class="pl-en">B</span>]
  <span class="pl-k">def</span> <span class="pl-en">flatMap</span>[<span class="pl-en">B</span>](<span class="pl-v">sp</span>: <span class="pl-en">Spore</span>[<span class="pl-en">A</span>, <span class="pl-en">DCollection</span>[<span class="pl-en">B</span>])<span class="pl-k">:</span> <span class="pl-en">DCollection</span>[<span class="pl-en">B</span>]
}</pre>
  </div> 
  <h3><a id="user-content-stable-paths" class="anchor" href="https://github.com/heathermiller/spores#stable-paths" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Stable Paths</h3> 
  <p>A <strong>stable path</strong> is an expression which only contains selections and identifiers (no applications, for example), and for which each selected entity is <em>stable</em>. In this context, <em>stable</em> means that the entity or object in question is introduced by object definitions or by value definitions of non-volatile types.</p> 
  <p>Adapted from the Scala Language specification (section 3.1), a <em>path</em> is defined to be one of the following:</p> 
  <ul> 
   <li><code>C.this</code>, where <code>C</code> references a class. The path <code>this</code> is taken as a shorthand for <code>C.this</code> where <code>C</code> is the name of the class directly enclosing the reference.</li> 
   <li><code>x</code> where <code>x</code> is a package.</li> 
   <li><code>p.x</code> where <code>p</code> is a path and <code>x</code> is a stable member of <code>p</code>. <em>Stable members</em> are packages or members introduced by object definitions or by value definitions of non-volatile types. (Section 3.6 of the SLS.)</li> 
   <li><code>C.super.x</code> or <code>C.super[M].x</code> where <code>C</code> references a class and <code>x</code> references a stable member of the super class or designated parent class <code>M</code> of <code>C</code>. The prefix <code>super</code> is taken as a shorthand for <code>C.super</code> where <code>C</code> is the name of the class directly enclosing the reference.</li> 
  </ul> 
  <p>A path refers to an object, that is, it ends with an identifier.</p> 
  <h3><a id="user-content-uglies" class="anchor" href="https://github.com/heathermiller/spores#uglies" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Uglies</h3> 
  <ul> 
   <li>Need to make it more convenient to create a nullary spore</li> 
   <li>Should objects be allowed in paths? The reason is that they are initialized lazily, so if we don't allow lazy vals, then allowing objects (which could end up being initialized only when the spore is applied) doesn't make a lot of sense.</li> 
  </ul> 
 </article>
</div>